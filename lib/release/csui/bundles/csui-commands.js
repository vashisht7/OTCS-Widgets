csui.define("csui/utils/command.error",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/base"],function(e,i,t,n,s,o){function r(e,i){function s(){if(i&&t.isString(i))this.errorDetails=i;else if(i instanceof n.Model)this.node=i;else if(i&&t.isObject(i)&&(i.errorDetails&&t.isString(i.errorDetails)&&(this.errorDetails=i.errorDetails),i.node instanceof n.Model&&(this.node=i.node),i.requestError&&t.isObject(i.requestError))){var e=new o.RequestErrorMessage(i.requestError);this.message?this.errorDetails||(this.errorDetails=e.message):(this.message=e.message,this.errorDetails||(this.errorDetails=e.errorDetails))}}if(!e)throw new Error("No argument passed");if(e instanceof Error)this.message=e.message,e.stack&&(this.stack=e.stack);else if(t.isString(e))this.message=e;else{var r=new o.RequestErrorMessage(e);this.message=r.message,this.errorDetails=r.errorDetails,this.statusCode=r.statusCode}s.call(this),this.name="CommandError"}return r.prototype=Object.create(Error.prototype),r}),csui.define("csui/utils/commands/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/commands/nls/root/localized.strings",{"ShortcutPickerTitle":"Select target for Shortcut","CommandNameAddItemMetadata":"Add Item with metadata","CommandNameAddVersion":"AddVersion","AddVersionNotAllowed":"Unable to add version. Please try again when the current operation is finished","CommandTitleCopy":"Copy items","CommandNameCopy":"Copy","CommandVerbCopy":"copy","DialogTitleSingleCopy":"Copy {0} item","DialogTitleCopy":"Copy {0} items","SomeFilesNotCopiedSuccessfully":"Some items were not successfully copied.","CopyingNodes":"Copying {0} nodes","CopyingNode":"Copying 1 node","CopyPageLeavingWarning":"If you leave the page now, pending items will not be copied.","CopyingOneItem":'Copying "{0}"',"CopyItems":"Copying {0} items","CopySomeItems":"Copying {0} items","CopyItemsNoneMessage":"No items copied.","CopyOneItemSuccessMessage":'"{0}" copied',"CopySomeItemsSuccessMessage":"{0} items successfully copied.","CopyManyItemsSuccessMessage":"{0} items successfully copied.","CopyOneItemFailMessage":'"{0}" failed to copy',"CopySomeItemsFailMessage":"{0} items failed to copy.","CopyManyItemsFailMessage":"{0} items failed to copy.","CopySomeItemsFailMessage2":"{2} items failed to copy.","CopyManyItemsFailMessage2":"{2} items failed to copy.","CopyingLocationLabel":'Copying to "{0}"',"CopiedLocationLabel":'Copied to "{0}"',"CopyNotAllowed":"Unable to copy. Please try again when the current operation is finished","DeleteCommandConfirmDialogTitle":"Delete","DeleteCommandConfirmDialogHtml":"<span class='msgIcon WarningIcon'><%- message %></span>","DeleteCommandConfirmDialogSingleMessage":"Do you want to delete {0}?","DeleteCommandConfirmDialogMultipleMessage":"Do you want to delete {0} items?","CommandTitleDelete":"Delete items","CommandNameDelete":"Delete","CommandVerbDelete":"delete","DeletePageLeavingWarning":"If you leave the page now, pending items will not be deleted.","DeleteItemFailed":"Deleting item {0} failed.","DeleteItems":"Deleting {0} items","DeletingOneItem":'Deleting "{0}"',"DeletingSomeItems":"Deleting {0} items","DeleteItemsNoneMessage":"No items deleted.","DeleteOneItemSuccessMessage":"'{0}' deleted.","DeleteSomeItemsSuccessMessage":"{0} items successfully deleted.","DeleteManyItemsSuccessMessage":"{0} items successfully deleted.","DeleteOneItemFailMessage":"'{0}' failed to delete.","DeleteSomeItemsFailMessage":"{0} items failed to delete.","DeleteManyItemsFailMessage":"{0} items failed to delete.","DeleteSomeItemsFailMessage2":"{2} items failed to delete.","DeleteManyItemsFailMessage2":"{2} items failed to delete.","deletingLocationLabel":'Deleting from "{0}"',"deletedLocationLabel":'Deleted from "{0}"',"DeleteNotAllowed":"Unable to delete. Please try again when the current operation is finished","ApplyingManyItemsSuccessMessage":"Applied successfully to {0} items.","ApplyingOneItemFailMessage":"Failed to apply to 1 item.","ApplyingManyItemsFailMessage2":"Failed to apply to {0} items.","CommandNameDownload":"Download","CommandVerbDownload":"download","CommandNameZipDownload":"Download","CommandVerbZipDownload":"Download","VerifyZipAndDownloadPrefetch":"Verifying items","ExtractingZipAndDownload":"Extracting items","CompressingZipAndDownload":"Compressing items","CleanUpZipAndDownload":"Cleaning up","PreFlightDialogBtnContinue":"Continue","DownloadDialogBtnDownload":"Download","DialogBtnCancel":"Cancel","InvalidArchiveCharacters":"Special characters cannot be used in archive name: \\?:<>|\"/@^,{}[]!%&()~'","InvalidArchiveName":"Invalid archive name.","TheArchiveNameCannotBeEmpty":"Archive name cannot be empty.","TheArchiveNameMaxLength":"Archive name is greater than the maximum length (248)","CommandTitleMove":"Move items","CommandNameMove":"Move","CommandNameVerbMove":"move","DialogTitleSingleMove":"Move {0} item","DialogTitleMove":"Move {0} items","SomeFilesNotMovedSuccessfully":"Some items were not successfully moved.","MovePageLeavingWarning":"If you leave the page now, pending items will not be moved.","MovingNodes":"Moving {0} nodes","MovingNode":"Moving 1 node","MovingOneItem":'Moving "{0}"',"MovingItems":"Moving {0} items","MovingSomeItems":"Moving {0} items","MoveItemsNoneMessage":"No items moved.","MoveOneItemSuccessMessage":'"{0}" moved',"MoveSomeItemsSuccessMessage":"{0} items successfully moved.","MoveManyItemsSuccessMessage":"{0} items successfully moved.","MoveOneItemFailMessage":'"{0}" failed to move',"MoveSomeItemsFailMessage":"{0} items failed to move.","MoveManyItemsFailMessage":"{0} items failed to move.","MoveSomeItemsFailMessage2":"{2} items failed to move.","MoveManyItemsFailMessage2":"{2} items failed to move.","MovingLocationLabel":'Moving to "{0}"',"MovedLocationLabel":'Moved to "{0}"',"MoveNotAllowed":"Unable to move. Please try again when the current operation is finished","CommandNamePaste":"Paste","CommandNameReserve":"Reserve","CommandVerbReserve":"reserve","ReservePageLeavingWarning":"If you leave the page now, pending items will not be reserved.","ReserveItemsNoneMessage":"No items reserved.","ReserveOneItemSuccessMessage":"1 item successfully reserved.","ReserveSomeItemsSuccessMessage":"{0} items successfully reserved.","ReserveManyItemsSuccessMessage":"{0} items successfully reserved.","ReserveOneItemFailMessage":"1 item failed to reserve.","ReserveSomeItemsFailMessage":"{0} items failed to reserve.","ReserveManyItemsFailMessage":"{0} items failed to reserve.","CommandNameFavorite":"Add Favorite","CommandVerbFavorite":"update Favorites","CommandDoneVerbFavorite":"added to Favorites","CommandRemovedVerbFavorite":"removed from Favorites","updateFavoriteFailTitle":"Update Favorite","updateFavoriteFailMessage":'Failed to update Favorite for node "{0}". \n\n{1}',"CommandDescriptionToggle":"Description Toggle","CommandHideDescription":"Hide description","CommandShowDescription":"Show description","CommandNameEmailLink":"Share","CommandVerbEmailLink":"share","EmailLinkSubject":"I want to share the following links with you","EmailLinkDesktop":"Link for Desktop and Android","EmailAppleLinkFormat":"Link for iOS Mobile","EmailLinkCommandFailedWithTooMuchItemsErrorMessage":"Mail as link failed. Too many items were selected.","SignOutCommandName":"Sign Out","SwitchToClassicCommandName":"Classic View","CommandNameUnreserve":"Unreserve","CommandVerbUnreserve":"unreserve","UnreservePageLeavingWarning":"If you leave the page now, pending items will not be unreserved.","UnreserveItemsNoneMessage":"No items unreserved.","UnreserveOneItemSuccessMessage":"1 item successfully unreserved.","UnreserveSomeItemsSuccessMessage":"{0} items successfully unreserved.","UnreserveManyItemsSuccessMessage":"{0} items successfully unreserved.","UnreserveOneItemFailMessage":"1 item failed to unreserve.","UnreserveSomeItemsFailMessage":"{0} items failed to unreserve.","UnreserveManyItemsFailMessage":"{0} items failed to unreserve.","UserProfileCommandName":"Profile","CommandTitleUpload":"Upload documents","UploadNotAllowed":"Unable to upload. Please try again when the current operation is finished","CommandVerbRename":"rename","CommandNameSaveFilter":"Save As","CommandVerbSaveFilter":"Save As","DialogTitleSaveFilter":"Save as","SaveFilterCommandSuccessfully":"{0} virtual folder created successfully.","NoEditUrl":"Web page for editing of this doucment is not available.","CommandNameCopyLink":"Copy link","CommandVerbCopyLink":"copy link","CopyLinkSuccessMessage":"Link copied to clipboard.","CopyLinkFailMessage":"Copy link has failed to copy the link to clipboard.","DeletePermissionCommandRemoveOwner":"Remove owner","DeletePermissionCommandRemoveGroup":"Remove owner group","DeletePermissionCommandRemovePublicAccess":"Remove Public Access","DeletePermissionCommandRemoveOther":"Remove from list","DeletePermissionCommandConfirmDialogTitle":"Remove {0}","DeletePermissionCommandConfirmDialogSingleMessage":"Do you want to remove {0} from this permissions list?","DeletePermissionCommandConfirmDialogPublicAccessMessage":"Are you sure you want to remove {0} from this permissions list?","DeletePermissionCommandSuccessMessage":"{0} was removed from the permissions list.","DeletePermissionCommandSuccessMessageWithCount":"{0} was removed from the permissions list of {1}.","DeletePermissionCommandFailMessage":"Failed to remove {0} from the permissions list.","publicAccess":"Public Access","RestorePublicAccessSuccessMessage":"{0} restored","RestorePublicAccessSuccessMessageWithCount":"{0} restored to the permission list of {1}","undefinedCollection":"Collection is undefined","EditPermissionCommandFailMessage":"Failed to edit {0} from the permissions list.","Owner":"owner","CommandNameAddOwnerOrOwnerGroup":"Add Owner Or Owner Group","AddOwnerOrGroup":"Add owner or owner group","AddOwner":"Add owner","AddOwnerGroup":"Add owner group","CommandNameAddUserorGroup":"Add user or group","CommandNameRestorePublicAccess":"Restore public access","AddButtonLabel":"Add","AddOwnerOrGroupDialogTitle":"Add Owner or Owner group","AddOwnerDialogTitle":"Add Owner","AddOwnerGroupDialogTitle":"Add Owner group","ChangeOwnerPermissionCommand":"Change owner","ChangeOwnerGroupPermissionCommand":"Change owner group","AddUserOrGroupSuccess":"{0} added successfully","AddUserOrGroupFailure":"{0} failed to add","AddUserOrGroupSuccessWithCount":"{0} was added to the permissions list of {1}.","formatForNone":"{0} items","formatForOne":"{0} item","formatForTwo":"{0} items","formatForFive":"{0} items","AppliedPermissions":"Permissions applied selected item","AppliedPermissionsOneSuccess":"Permissions applied to {0} item","AppliedPermissionsOnlySuccess":"Permissions applied to {0} items","AppliedPermissionsOneFailure":"Permissions failed to apply {0} item","AppliedPermissionsOnlyFailure":"Permissions failed to apply {0} items","AppliedPermissionsSuccessAndFailure":"Permissions applied to {0} items and failed to apply {1} items","CommandSuccessfullySingular":"{0} item successfully {1}.","CommandFailedSingular":"{0} item failed to {1}.","CommandSuccessfullyPlural":"{0} items successfully {1}.","CommandFailedPlural":"{0} items failed to {1}.","CommandFailedPartial":"{0} of {1} items failed to {2}.","NoConnectivity":"No connectivity","GoToOffline":"Go to offline files?","viewTypeUnsupported":"This content type is not currently supported on a mobile device.","MobileIOS":"iOS Mobile","DesktopAndroid":"Desktop and Android","Close":"Close","addButton":"Add","otheruser":"other user","addDocument":"Add Document","allUsersAndGroups":"Users and Groups","addUsersAndGroups":"Add users or groups","addGroups":"Add Groups","allGroups":"Groups","cancelButtonLabel":"Cancel","applyButtonLabel":"Apply","ThumbnailTitle":"Grid View","ListViewTitle":"Browse View","DensityLabel":"Density","error":"Error","EditPerspective":"Edit page","editPerspectiveErrorMessage":"The page cannot be edited. It is used as template for multiple pages","editPageDialogMessage":"Who will see the page edits?","editPageButton":"Everyone","personalizePageButton":"Only you","editPageCancelButton":"Cancel","editPageTitle":"Edit page","CreatePerspective":"Create new perspective","searchButtonMessage":"Search","personalizePage":"Personalize page"}),csui.define("csui/utils/commands/versions/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/commands/versions/nls/root/localized.strings",{"CommandNameVersionDelete":"Delete Version","CommandVerbVersionDelete":"delete","DeleteCommandConfirmDialogTitle":"Delete","VersionDeleteCommandConfirmDialogSingleMessage":"Do you want to delete version {0} from {1}?","VersionDeleteCommandConfirmDialogMultipleMessage":"Do you want to delete {0} versions?","DeleteVersionPageLeavingWarning":"If you leave the page now, pending versions will not be deleted.","DeleteVersions":"Deleting {0} versions","DeletingSomeVersions":"Deleting {0} versions","DeletingOneVersion":"Deleting version","DeleteVersionItemsNoneMessage":"No versions deleted.","DeleteVersionOneItemSuccessMessage":"1 version succeeded to delete.","DeleteVersionSomeItemsSuccessMessage":"{0} versions succeeded to delete.","DeleteVersionManyItemsSuccessMessage":"{0} versions succeeded to delete.","DeleteVersionOneItemFailMessage":"1 version failed to delete.","DeleteVersionSomeItemsFailMessage2":"{2} versions failed to delete.","DeleteVersionManyItemsFailMessage2":"{2} versions failed to delete.","CommandNamePromoteVersion":"Promote to Major Version","CommandVerbPromoteVersion":"Promote to Major Version","MessageVersionPromoted":"Version successfully promoted","DialogPromoteVersion":"version {0} promoting to {1}","CommandSuccessfullySingular":"{0} version successfully {1}.","CommandFailedSingular":"{0} version failed to {1}.","CommandSuccessfullyPlural":"{0} versions successfully {1}.","CommandFailedPlural":"{0} versions failed to {1}.","CommandFailedPartial":"{0} of {1} versions failed to {2}."}),csui.define("csui/utils/commandhelper",["require","module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/utils/command.error","i18n!csui/utils/commands/nls/localized.strings","i18n!csui/utils/commands/versions/nls/localized.strings","csui/models/version","csui/lib/jquery.when.all"],function(e,i,t,n,s,o,r,a,c,l){"use strict";var u=i.config(),d=function(){};return n.extend(d.prototype,s.Events,{"checkNodeTypesAndRights":function(e,i,t){n.isArray(e)||e&&(e=[e]);var s=n.contains(i,-1);return e&&e.length&&n.all(e,function(e){return(n.contains(i,e.get("type"))||s&&e.get("container"))&&n.all(t,function(i){return e.get("perm_"+i)})})},"checkNodeTypes":function(e,i){n.isArray(e)||e&&(e=[e]);var t=n.contains(i,-1);return e&&e.length&&n.all(e,function(e){var s=o.isBackbone(e)?e.attributes:e;return n.contains(i,s.type)||t&&s.container})},"checkNodeRights":function(e,i){return n.isArray(e)||e&&(e=[e]),e&&e.length&&n.all(e,function(e){var t=o.isBackbone(e)?e.attributes:e;return n.all(i,function(e){return t["perm_"+e]})})},"getJustOneNode":function(e){return e.nodes&&1===e.nodes.length&&e.nodes.at(0)},"getAtLeastOneNode":function(e){return e.nodes?e.nodes:new(s.Collection.extend(e.collection?{"model":e.collection.model}:{}))},"updateNode":function(e,i){return e.save(i,{"wait":!0,"patch":!0,"silent":!0}).then(function(){return e.fetch({"force":!0})}).then(function(){return e},function(i){var n=new r(i,e);return t.Deferred().reject(n)})},"handleExecutionResults":function(e,i){var s=t.Deferred(),o=t.Deferred();return csui.require(["csui/controls/globalmessage/globalmessage"],function(e){o.resolve(e)},o.reject),t.whenAll(o,e).always(function(e){var t=e[0],o=e[1];n.isArray(o)||(o=[o]);var r=0,d=0;if(n.each(o,function(e){void 0===e||e.cancelled||(e instanceof Error?d++:r++)}),0===d&&0===r)return void s.reject();var m=o[0];if(m instanceof l&&n.extend(a,c),1===o.length)if(1===r)i.suppressSuccessMessage||t.showMessage("success",n.str.sformat(a.CommandSuccessfullySingular,r,i.command.get("doneVerb")));else{var g=m.errorDetails||m.message;u.offlineSupport&&0===m.statusCode?s.reject(m):i.suppressFailMessage||m.suppressFailMessage||t.showMessage("error",n.str.sformat(a.CommandFailedSingular,d,i.command.get("verb")),g)}else 0===d?i.suppressSuccessMessage||t.showMessage("success",n.str.sformat(a.CommandSuccessfullyPlural,r,i.command.get("doneVerb"))):0===r?u.offlineSupport&&0===m.statusCode?s.reject(m):i.suppressFailMessage||m.suppressFailMessage||t.showMessage("error",n.str.sformat(a.CommandFailedPlural,d,i.command.get("verb"))):i.suppressFailMessage||m.suppressFailMessage||(i.customError?t.showMessage("error",o[1]):t.showMessage("error",n.str.sformat(a.CommandFailedPartial,d,o.length,i.command.get("verb"))));s.resolve(o)}),s.promise()},"_getErrorMessageFromResponse":function(e){var i;if(e&&e.responseJSON&&e.responseJSON.error)i=e.responseJSON.error;else{var n=o.MessageHelper.toHtml();o.MessageHelper.reset(),i=t(n).text()}return i},"refreshModelAttributesFromServer":function(e,i){var t=e.clone();return t.collection=i||e.collection,t.fetch().then(function(){return e.set(t.attributes),t.original&&(e.original=t.original),e})},"showOfflineMessage":function(e,i,t){if(e&&0===e.statusCode&&u.offlineSupport){var n=this;return csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.showInformation(a.GoToOffline,a.NoConnectivity,{"buttons":e.buttons.YesNo}).always(function(e){e?i?i():window.location.href="#offline.list":t?t():n.trigger("offline:refused")})}),!0}}}),new d}),csui.define("csui/models/command",["csui/lib/underscore","csui/lib/backbone","csui/utils/commandhelper"],function(e,i,t){return i.Model.extend({"idAttribute":"signature","constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments)},"enabled":function(e,i){var t=this.get("scope"),n=this._getNodesByScope(e,t);if(t&&(!n||!n.length))return!1;var s=this.get("types")||[];if(s.length&&!this.checkTypes(n,s))return!1;var o=this.get("openable");if(o&&this.checkOpenability(n))return!0;var r=this.get("command_key")||[];return!(o&&!r.length)&&(!r.length||this.checkPermittedActions(n,r))},"isNonPromoted":function(i){var t=this.get("scope"),n=this._getNodesByScope(i,t),s=this.get("command_key"),o=!1;if(n&&n.length){var r=this._getNonPromotedCheckFunctionsForSignatures(s);r&&e.find(n,function(e){var i=r(e);if(i&&!0===i.get("csuiNonPromotedAction"))return o=!0,!0})}return o},"_getNodesByScope":function(e,i){var n;switch(i){case"single":n=t.getJustOneNode(e),n&&(n=[n]);break;default:n=t.getAtLeastOneNode(e).models}return n},"_getCheckFunctionsForSignatures":function(i){if(i&&i.length)return e.isArray(i)?function(t){return e.any(i,function(e){return t.actions&&t.actions.findRecursively(e)})}:function(e){return e.actions&&e.actions.findRecursively(i)}},"_getNonPromotedCheckFunctionsForSignatures":function(i){var t;return i&&(e.isArray(i)&&i.length?t=function(t){var n;return e.find(i,function(e){return!!(n=t.actions&&t.actions.findRecursively(e))}),n}:e.isString(i)&&(t=function(e){return e.actions&&e.actions.findRecursively(i)})),t},"checkTypes":function(i,t){return!(!i||(e.isArray(i)||(i=[i]),!i.length))&&i.every(function(e){return t.indexOf(e.get("type"))>=0})},"checkOpenability":function(i){return!(!i||(e.isArray(i)||(i=[i]),!i.length))&&i.every(function(e){return e.get("openable")})},"checkPermittedActions":function(i,t){if(i&&(e.isArray(i)||(i=[i]),i.length)){t||(t=this.get("command_key")||[]);var n=this._getCheckFunctionsForSignatures(t);return!n||e.all(i,n)}return!1},"_getNodeActionForSignature":function(e,i){var t;if(e){var n=this._getCheckFunctionsForSignatures(i);n&&(t=n.call(this,e))}return t}})}),csui.define("csui/integration/folderbrowser/commands/nls/localized.strings",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/integration/folderbrowser/commands/go.to.node.history",["module","require","csui/lib/jquery","csui/lib/underscore","csui/models/command","csui/integration/folderbrowser/commands/nls/localized.strings"],function(e,i,t,n,s,o){"use strict";var r={};return s.extend({"defaults":{"signature":"Back","name":o.GoToHistory},"enabled":function(i,t){var s,o=n.extend({"enabled":!1},e.config()),a=i.context||t&&t.context;return!!a&&(o.enabled&&this._ensureGoBackList(a),s=r[a.cid]||[],o.enabled&&s.length>1)},"execute":function(e,i){var n=t.Deferred();return csui.require(["csui/utils/contexts/factories/next.node"],function(t){var s=e.context||i&&i.context,o=s.getModel(t),a=r[s.cid]||[];a.length>1&&(a.pop(),o.set("id",a[a.length-1])),n.resolve()},function(e){n.reject(e)}),n.promise()},"clearHistory":function(e){delete r[e.cid]},"_ensureGoBackList":function(e){var i=r[e.cid];i||(i=r[e.cid]=[],csui.require(["csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node"],function(t,n){function s(t){var n=e.getModel(t),s=n.get("id");s&&i[i.length-1]!==s&&i.push(s)}var o=e.getModel(n);s(t),e.on("request",function(){s(t)}),o.on("change:id",function(){s(n)})}))}})}),csui.define("csui/integration/folderbrowser/commands/nls/root/localized.strings",{"GoToHistory":"Go Back","OpenFullPageContainer":"Open Full Page Container"}),csui.define("csui/integration/folderbrowser/commands/open.full.page.container",["module","require","csui/lib/jquery","csui/lib/underscore","csui/models/command","i18n!csui/integration/folderbrowser/commands/nls/localized.strings"],function(e,i,t,n,s,o){"use strict";return s.extend({"defaults":{"signature":"Page","name":o.OpenFullPageContainer},"enabled":function(i,t){return n.extend({"enabled":!1},e.config()).enabled&&!!i.container},"execute":function(e,i){var n=t.Deferred();return csui.require(["csui/utils/node.links/node.links"],function(i){window.open(i.getUrl(e.container)),n.resolve()},n.reject),n.promise()}})}),csui.define("csui/models/commands",["csui/lib/underscore","csui/lib/backbone","csui/models/command"],function(e,i,t){return i.Collection.extend({"model":t,"constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)},"clone":function(){var i=new this.constructor(this.models,this.options);return i.signatures=e.clone(this.signatures),i},"getSignatures":function(i){var t=[];e.mapObject(i,function(i,n){t=e.union(t,e.without(i.getCollection().pluck("signature"),"disabled"))});var n=this.clone(),s=[];return n.each(function(e){-1===t.indexOf(e.get("signature"))&&s.push(e)}),n.remove(s,{"silent":!0}),n.getAllSignatures()},"getAllSignatures":function(){return e.chain(this.pluck("command_key")).map(function(i){if(e.isArray(i)){var t=i[0];return"default"===t&&(t=["default","open",i[2]]),t}return i}).flatten().compact().unique().value()}})}),csui.define("csui/utils/commands",["csui/lib/underscore","csui/models/commands","csui-ext!csui/utils/commands"],function(e,i,t){"use strict";var n=new i;return e.extend(n,{"signatures":{"browse":"Browse","open":"Open","download":"Download","add":"Add","navigate":"Navigate","original":"Original"},"version":"1.0"}),t&&n.add(e.chain(t).flatten(!0).map(function(e){return new e}).value()),n}),csui.define("csui/utils/commands/add.categories",["require","csui/lib/jquery","csui/lib/underscore","csui/utils/base","csui/utils/log","csui/models/command"],function(e,i,t,n,s,o){return o.extend({"defaults":{"signature":"AddCategory","command_key":["addcategory","AddCategory"],"scope":"single"},"enabled":function(e,i){var t=this.get("scope"),n=this._getNodesByScope(e,t);if(n&&n.length>0){if(void 0===n[0].get("id")){var s=!0;return e.originalFormCollection&&e.originalFormCollection.each(function(e){"categories"===e.get("role_name")&&!1===e.get("schema").additionalProperties&&(s=!1)}),s}return o.prototype.enabled.apply(this,arguments)}},"execute":function(e,t){var n=i.Deferred();return csui.require(["csui/widgets/metadata/metadata.add.categories.controller"],function(e){(new e).AddNewCategory(t).done(function(e){t.addPropertiesCallback&&t.addPropertiesCallback.call(t.parentView,e.catModel),n.resolve()}).fail(function(e){n.reject(e)})},function(e){s.warn("Failed to load MetadataAddCategoriesController. {0}",e)&&console.warn(s.last),n.reject(e)}),n.promise()}})}),csui.define("hbs!csui/dialogs/file.open/impl/file.open",["module","hbs","csui/lib/handlebars"],function(e,i,t){var n=t.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,i,t,n){var s;return'<input type="file" style="display:none" '+this.escapeExpression((s=null!=(s=i.multiple||(null!=e?e.multiple:e))?s:i.helperMissing,"function"==typeof s?s.call(e,{"name":"multiple","hash":{}}):s))+">\r\n"}});return t.registerPartial("csui_dialogs_file.open_impl_file.open",n),n}),csui.define("csui/dialogs/file.open/file.open.dialog",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","hbs!csui/dialogs/file.open/impl/file.open"],function(e,i,t,n,s,o,r){"use strict";return s=s(e.id),n.ItemView.extend({"className":"csui-file-open","template":r,"templateHelpers":function(){return{"multiple":this.options.multiple?"multiple":""}},"ui":{"fileInput":"input"},"events":{"change @ui.fileInput":"_processFiles"},"constructor":function(e){this.className=i.result(this,"className");var o=t(document.body).find("> ."+this.className);o.length&&(s.debug("Removing an earlier file-open input element.")&&console.log(s.last),o.remove()),n.ItemView.prototype.constructor.call(this,e)},"onDestroy":function(){this.ui.fileInput.off()},"show":function(){s.debug("Showing a file-open input element.")&&console.log(s.last),this.render(),t(document.body).append(this.el),this.ui.fileInput.trigger("click"),this.ui.fileInput.trigger("focus")},"_processFiles":function(e){var i=e.originalEvent,t=i.target.files||i.dataTransfer&&i.dataTransfer.files;s.debug(t.length+" file(s) selected by a file-open input element.")&&console.log(s.last),this.trigger("add:files",t)}})}),csui.define("csui/utils/commands/add",["require","csui/lib/jquery","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/utils/base","csui/utils/commandhelper","csui/models/command","csui/models/node/node.model","csui/dialogs/file.open/file.open.dialog"],function(e,i,t,n,s,o,r,a,c,l){"use strict";return a.extend({"defaults":{"signature":"Add"},"enabled":function(e){if(e||(e={}),e.container&&e.container.get("container")){if(298===e.container.get("type"))return!1;e.data||(e.data={});var i=e.data.addableTypes;return i&&t.any([0,1,140,144,298],function(e){return!!i.get(e)})}return!1},"execute":function(e,t){if(t&&void 0===t.addableType)throw new Error("Missing options.addableType");var n,o,r=this._getAddableTypeName(e,t);switch(t.addableType){case 0:case 298:e.forwardToTable=!0,n=new c({"type":t.addableType,"type_name":r,"container":!0,"name":""},{"connector":e.container.connector,"collection":e.collection}),o=i.Deferred().resolve(n).promise();break;case 140:e.forwardToTable=!0,n=new c({"type":t.addableType,"type_name":r,"container":!1,"name":""},{"connector":e.container.connector,"collection":e.collection}),o=i.Deferred().resolve(n).promise();break;case 1:e.forwardToTable=!0,o=this._selectShortcutTarget(e,t);break;case 144:e.suppressSuccessMessage=!0,t.actionType="UPLOAD",o=this._selectFilesForUpload(e,t);break;default:var a='The "Add" action for the addableType '+t.addableType+" is not implemented";s.debug(a)&&console.log(s.last),o=i.Deferred().reject({"error":a,"commandSignature":this.signature}).promise()}return o},"_selectFilesForUpload":function(e,t){var s,o=i.Deferred();return csui.require(["csui/controls/globalmessage/globalmessage"],function(i){if(i.isActionInProgress(t.actionType,n.UploadNotAllowed,n.CommandTitleAdd))return o.resolve();s=new l({"multiple":!0}),o.resolve(),s.listenTo(s,"add:files",function(i){csui.require(["csui/controls/fileupload/fileupload"],function(n){o.resolve();var r=n.newUpload(e,t);r.addFilesToUpload(i,{"collection":e.collection}),r.listenTo(r,"destroy",function(){s.destroy()})})}).show()}),o.promise()},"_selectShortcutTarget":function(e,t){var s=this,o=i.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(i){var r={"dialogTitle":n.ShortcutPickerTitle,"connector":e.container.connector,"context":t.context,"initialContainer":e.container,"globalSearch":!0,"startLocation":"recent.containers","startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"unselectableTypes":[141,142,133],"resolveShortcuts":!0,"resultOriginalNode":!0},a=s._getAddableTypeName(e,t);return s.nodePicker=new i(r),s.nodePicker.show().then(function(i){var t=i.nodes[0];return new c({"type":1,"type_name":a,"container":!1,"name":t.get("name"),"original_id":t.get("id"),"original_id_expand":t.attributes},{"connector":e.container.connector,"collection":e.collection})}).done(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)})},function(e){o.reject(e)}),o.promise()},"_getAddableTypeName":function(e,i){return i.addableTypeName?i.addableTypeName:e.data.addableTypes.findWhere({"type":i.addableType}).get("type_name")}},{"_getAddableTypesWithoutInlineFormAsMap":function(){return{"144":!0}},"isAddableTypeWithoutInlineForm":function(e){return!0===this._getAddableTypesWithoutInlineFormAsMap()[e]}})}),csui.define("csui/utils/commands/add.item.metadata",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/log","csui/utils/commandhelper","csui/models/command"],function(e,i,t,n,s,o,r,a){var c=a.extend({"defaults":{"signature":"AddItemMetadata","command_key":"Add_Item","scope":"single"},"execute":function(e,i){var t=n.Deferred();return csui.require(["csui/widgets/metadata/metadata.add.item.controller"],function(n){(new n).displayForm(e,i).done(function(){t.resolve.apply(t,arguments)}).fail(function(){t.reject.apply(t,arguments)})},function(e){t.reject(e)}),t.promise()}});return c.version="1.0",c}),csui.define("csui/utils/commands/add.version",["module","require","csui/lib/jquery","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/models/command","csui/utils/commandhelper","csui/dialogs/file.open/file.open.dialog"],function(e,i,t,n,s,o,r,a){"use strict";var c=e.config();n.defaults(c,{"actionType":"ADD_VERSION"});var l;return o.extend({"defaults":{"signature":"AddVersion","command_key":"addversion","name":s.CommandNameAddVersion,"scope":"single"},"execute":function(e,i){e||(e={});var n=t.Deferred(),o=this;return this.trigger("close:dialogView:form"),csui.require(["csui/controls/globalmessage/globalmessage"],function(){if(l=arguments[0],l.isActionInProgress(c.actionType,s.AddVersionNotAllowed,s.CommandNameAddVersion))return n.resolve();e.tableView&&(e.tableView.lockedForOtherContols=!1),o._pickFileAndUpload(e,i).done(n.resolve),e.suppressSuccessMessage=!0;var t=e.file;t&&o._addVersionController(t,e).done(n.resolve).fail(n.reject)}),n.promise()},"_pickFileAndUpload":function(e,i){var n=new a({"multiple":!1}),s=t.Deferred(),o=this;return s.resolve(),n.listenTo(n,"add:files",function(i){o._addVersionController(i[0],e).done(s.resolve).always(function(){n.destroy()})}).show(),s.promise()},"_addVersionController":function(e,i){var n=t.Deferred();return csui.require(["csui/controls/fileupload/impl/addversion.controller"],function(t){var s=r.getJustOneNode(i);return new t({"status":i,"view":i.originatingView,"selectedNode":s}).uploadFile(e,c.actionType).done(n.resolve)},function(e){n.reject(e)}),n.promise()}})}),csui.define("csui/utils/commands/open.node.perspective",["require","csui/lib/jquery","csui/lib/underscore","csui/models/command","csui/utils/commandhelper"],function(e,i,t,n,s){"use strict";return n.extend({"execute":function(e,n){var o=i.Deferred();return csui.require(["csui/utils/contexts/factories/next.node"],function(i){var r=e.context||n&&n.context,a=r.getModel(i),c=s.getJustOneNode(e),l=r.viewStateModel.get("state");l&&r.viewStateModel.set("state",t.omit(l,"filter"),{"silent":!0}),a.trigger("before:change:id",c.get("id")),a.set("id",c.get("id")),o.resolve()
},function(e){o.reject(e)}),o.promise()}})}),csui.define("csui/utils/commands/browse",["csui/utils/commands/open.node.perspective","csui/utils/commandhelper"],function(e,i){"use strict";return e.extend({"defaults":{"signature":"Browse","command_key":["default","open","browse","Browse"],"scope":"single"},"enabled":function(e){var t=i.getJustOneNode(e);return t&&t.get("container")&&(t.get("openable")||this.checkPermittedActions(t))}})}),csui.define("csui/utils/commands/collection/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/commands/collection/nls/root/lang",{"collectCommandSignature":"Collect","addItemsToolTip":"Add Items","collectItemsDialogTitle":"Add items","selectCollectionDialogTitle":"Select collection","selectButtonLabel":"Add","selectCollectButtonLabel":"Collect","conflictsItemsHeader":"Listed items will not be added","conflictsDialogCloseLabel":"Close","CollectItemsNoneMessage":"No items added.","CollectOneItemSuccessMessage":"1 new item was successfully added","CollectManyItemsSuccessMessage":"{0} new items were successfully added","CollectOneItemFailMessage":"1 of your collected items already added","CollectManyItemsFailMessage":"{0} of your collected items are already added","RemoveCollectItemsCommandConfirmDialogHtml":"<span class='msgIcon WarningIcon'><%- message %></span>","RemoveCommandConfirmDialogSingleMessage":"Do you want to remove {0} from collection?","RemoveCommandConfirmDialogMultipleMessage":"Do you want to remove {0} items from collection?","RemoveCommandConfirmDialogTitle":"Remove from collection","RemoveItemsNoneMessage":"No items removed from collection.","RemoveOneItemSuccessMessage":"1 item successfully removed from collection.","RemoveSomeItemsSuccessMessage":"{0} items successfully removed from collection.","RemoveManyItemsSuccessMessage":"{0} items successfully removed from collection.","RemoveOneItemFailMessage":"1 item failed to remove from collection.","RemoveSomeItemsFailMessage":"{0} items failed to remove from collection.","RemoveManyItemsFailMessage":"{0} items failed to remove from collection.","RemoveSomeItemsFailMessage2":"{2} items failed to remove from collection.","RemoveManyItemsFailMessage2":"{2} items failed to remove from collection.","RemoveItems":"Removing {0} items from collection","RemovingOneItem":"Removing item from collection","RemovingSomeItems":"Removing {0} items from collection","CollectingOneItem":"Collecting item","CollectingItems":"Collecting {0} items","CollectManyItemsFailMessage2":"{2} items failed to Collecting.","removefromCollection":"Remove from collection"}),csui.define("csui/utils/commands/collection/collect.items",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/utils/command.error","csui/models/command","i18n!csui/utils/commands/collection/nls/lang","csui/utils/base","csui/models/nodes","csui/lib/underscore.string"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=e.config();t.defaults(d,{"parallelism":3});var m,g,p,f,v,h,w=a.extend({"defaults":{"signature":"CollectionCanCollect","name":c.addItemsToolTip,"command_key":["collectionCanCollect"],"scope":"single","successMessages":{"formatForOne":c.CollectOneItemSuccessMessage,"formatForTwo":c.CollectManyItemsSuccessMessage,"formatForMany":c.CollectManyItemsSuccessMessage,"formatForFive":c.CollectManyItemsSuccessMessage},"errorMessages":{"formatForOne":c.CollectOneItemFailMessage,"formatForTwo":c.CollectManyItemsFailMessage,"formatForMany":c.CollectManyItemsFailMessage,"formatForFive":c.CollectManyItemsFailMessage}},"enabled":function(e){return 298===e.container.get("type")&&(e.nodes=new u([e.container]),w.__super__.enabled.apply(this,arguments))},"execute":function(e,i){var s=n.Deferred(),o=this;return csui.require(["csui/controls/globalmessage/globalmessage","csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view","csui/utils/taskqueue","csui/models/fileuploads","csui/utils/page.leaving.blocker","csui/utils/contexts/factories/next.node"],function(){m=arguments[0],h=arguments[1],g=arguments[2],p=arguments[3],f=arguments[4],v=arguments[5],o._addToCollection(e,i).done(function(i){var n=i.nodes,r=t.map(n,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),a=e.container,c=new p(r,{"connector":l}),l=e.container&&e.container.connector;e.container.collection=e.collection,o._announceOperationStart(e),c.each(function(e){var i=e.get("node");e.node=i,e.unset("node"),e.set("mime_type",i.get("mime_type"))}),o._addSelectedNodesToCollection(c,l,a,e.collection).then(function(e){m.hideFileUploadProgress();var i=o._checkPromises(e);i.failedNodes.length?o._showDialog(i.failedNodes).then(function(e,t){t.kill(),i.successNodes.length&&o._showGlobalMessage(i.successNodes.length)}):i.successNodes.length&&o._showGlobalMessage(i.successNodes.length)}),o._announceOperationEnd(e),s.resolve()}).fail(function(e){e&&!e.cancelled&&o.showError(e),s.reject()})}),s.promise()},"_addToCollection":function(e,i){var s=this,o=n.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(n){var r=t.extend({"selectableTypes":[],"showAllTypes":!0,"orderBy":"type asc","dialogTitle":c.collectItemsDialogTitle,"selectButtonLabel":c.selectButtonLabel,"globalSearch":!0,"selectMultiple":!0,"context":i?i.context:e.context,"startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"resolveShortcuts":!0},e);s.nodePicker=new n(r),s.nodePicker.show().done(function(){o.resolve.apply(o,arguments)}).fail(function(){o.reject.apply(o,arguments)})},function(e){o.reject(e)}),o.promise()},"_addSelectedNodesToCollection":function(e,i,s,o){var r=this,a=new g({"parallelism":d.parallelism}),l=0,u=t.map(e.models,function(e){var t=n.Deferred();return a.pending.add({"worker":function(){var n=e.node,a=n.get("id"),c=s.get("id");return r._collectNode(i,c,a).done(function(){e.set("count",1),e.deferred.resolve(e),r._addToCurrentTable(e.node,o,c),t.resolve(e)}).fail(function(i){t.resolve(e)}),t.promise()}}),l++,t.promise(u)});return m.showFileUploadProgress(e,{"oneFileTitle":c.CollectingOneItem,"oneFileSuccess":c.CollectOneItemSuccessMessage,"multiFileSuccess":c.CollectManyItemsSuccessMessage,"oneFilePending":c.CollectingOneItem,"multiFilePending":c.CollectingItems,"oneFileFailure":c.CollectOneItemFailMessage,"multiFileFailure":c.CollectManyItemsFailMessage2,"someFileSuccess":c.CollectManyItemsSuccessMessage,"someFilePending":c.CollectingItems,"someFileFailure":c.CollectManyItemsFailMessage2,"enableCancel":!1}),n.whenAll.apply(n,u)},"_collectNode":function(e,i,t){var s=n.Deferred(),r={"collection_id":i},a={"url":o.combine(e.getConnectionUrl().getApiBase("v2"),"/nodes/"+t),"type":"PUT","data":r,"contentType":"application/x-www-form-urlencoded"};return e.makeAjaxCall(a).done(function(e){s.resolve(e)}).fail(function(e){s.reject(e)}),s.promise()},"_getListView":function(e){return new h(t.extend({},{"collection":e}))},"_showDialog":function(e){var i=n.Deferred(),t=[{"id":"close","label":c.conflictsDialogCloseLabel,"toolTip":c.conflictsDialogCloseLabel,"click":function(e){i.resolve("close",e.dialog)}}];return this._showConflictDialog(e,t),i},"_showConflictDialog":function(e,i){var t=this;n.Deferred();csui.require(["csui/controls/dialog/dialog.view"],function(n){var s=l.formatMessage(e.length,t.get("errorMessages")),o=new n({"title":s,"midSize":!0,"iconLeft":"csui-icon-notification-information","className":"csui-collection-conflicts-dialog","view":t._getListView(e),"buttons":i});return o.show(),o})},"_checkPromises":function(e){t.isArray(e)||(e=[e]);var i=new s.Collection,n=new s.Collection;return t.each(e,function(e){void 0!==e&&(e.cancelled||void 0===e.get("count")||(e.get("count")?i.push(e):n.push(e)))}),{"successNodes":i,"failedNodes":n}},"_addToCurrentTable":function(e,i,t){e.isLocallyCreated=!0,e.refernce_id=t,e.fetch({"collection":i}).then(function(){i.unshift(e.clone())})},"_showGlobalMessage":function(e){var i=l.formatMessage(e,this.get("successMessages"));m.showMessage("success",i)},"_announceOperationStart":function(e){var i=e.originatingView;i.blockActions&&i.blockActions(),f.enable(this.get("pageLeavingWarning"))},"_announceOperationEnd":function(e){f.disable();var i=e.originatingView;i.unblockActions&&i.unblockActions()}});return w}),csui.define("csui/utils/commands/multiple.items",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/utils/commandhelper","csui/utils/command.error"],function(e,i,t,n,s,o,r){"use strict";var a=e.config();t.defaults(a,{"parallelism":3});var c;return{"execute":function(e,i){return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,this._performActions(e,i)},"_performActions":function(e,i){var s,r=n.Deferred(),l=this;return csui.require(["csui/utils/taskqueue","csui/utils/page.leaving.blocker"],function(u){c=arguments[1],i=i||{},i.context||(i.context=e.context),l._announceStart(e);var d=o.getAtLeastOneNode(e),m=new u({"parallelism":i.parallelism||a.parallelism});s=d.map(function(e,t){var s=n.Deferred();return m.pending.add({"worker":function(){return l._performAction(e,i).done(s.resolve).fail(function(e){s.reject(e)}),s.promise()}}),s.promise()}),n.whenAll.apply(n,s).always(t.bind(l._announceFinish,l,e)).done(function(){e.suppressMultipleSuccessMessage||l.showSuccess(s),r.resolve.apply(r,arguments)}).fail(function(){e.suppressMultipleFailMessage||l.showError(s),r.reject.apply(r,arguments)})},function(e){r.reject(e)}),r.promise()},"showError":function(e){var i,t,n=this._checkPromises(e);if(n){var s=n.countFailed,o=n.countOk;i=this._getErrorMessage(s);var r;o>0?(t=this._getSuccessMessage(o),r=t+" "+i):r=i,csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("error",r,void 0,{})})}},"showSuccess":function(e){var i,t=this._checkPromises(e);if(t){var n=t.countOk;i=this._getSuccessMessage(n),csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("success",i,void 0,{})})}},"showSuccessWithLink":function(e,i){var t,n=this._checkPromises(e);if(n){var s=n.countOk;t=this._getSuccessMessage(s),csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("success_with_link",t,void 0,i)})}},"_getErrorMessage":function(e){var i=this.get("errorMessages");return s.formatMessage(e,i)},"_getSuccessMessage":function(e){var i=this.get("successMessages");return s.formatMessage(e,i)},"_checkPromises":function(e){t.isArray(e)||(e=[e]);var i=0,n=0;return t.each(e,function(e){void 0!==e&&(e.cancelled||(e instanceof r?n++:void 0!==e.state&&"function"==typeof e.state?e.state()&&"resolved"===e.state().toLowerCase()?i++:n++:i++))}),{"countOk":i,"countFailed":n}},"_announceStart":function(e){if(!e.deleteBlockAction){var i=e.originatingView;i&&i.blockActions&&i.blockActions();var t=this.get("pageLeavingWarning");t&&c.enable(t)}},"_announceFinish":function(e){this.get("pageLeavingWarning")&&c.disable();var i=e.originatingView;i&&i.unblockActions&&i.unblockActions()}}}),csui.define("csui/utils/commands/confirmable",["csui/lib/underscore","csui/lib/jquery","require","csui/utils/commands/multiple.items"],function(e,i,t,n){var s={"execute":function(e,t){var n=this;return this._confirmAction(e,t).then(function(){return n._performActions(e,t)},function(e){return i.Deferred().reject().promise()})},"_confirmAction":function(e,t){var n=i.Deferred();if(this._getConfirmTemplate){var s=this._getConfirmData(e,t),o=this._getConfirmTemplate(e,t)(s);csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.confirmQuestion(i(o).text(),s.title).done(function(e){n.resolve(e)}).fail(function(e){n.reject(e)})})}else n.resolve();return n.promise()}};return e.extend(s,e.omit(n,"execute")),s}),csui.define("csui/utils/commands/collection/remove.collected.items",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/url","i18n!csui/utils/commands/collection/nls/lang","csui/utils/commands/confirmable","csui/utils/commands/multiple.items","csui/utils/command.error"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=e.config();t.defaults(d,{"parallelism":1});var m,g=s.extend({"defaults":{"signature":"RemoveCollectedItems","command_key":"removefromcollection","name":a.removefromCollection,"pageLeavingWarning":a.DeletePageLeavingWarning,"scope":"multiple","successMessages":{"formatForNone":a.RemoveItemsNoneMessage,"formatForOne":a.RemoveOneItemSuccessMessage,"formatForTwo":a.RemoveSomeItemsSuccessMessage,"formatForFive":a.RemoveManyItemsSuccessMessage},"errorMessages":{"formatForNone":a.RemoveItemsNoneMessage,"formatForOne":a.RemoveOneItemFailMessage,"formatForTwo":a.RemoveSomeItemsFailMessage,"formatForFive":a.RemoveManyItemsFailMessage}},"allowCollectionRefetch":!1,"_getConfirmTemplate":function(e,i){return t.template(a.RemoveCollectItemsCommandConfirmDialogHtml)},"_getConfirmData":function(e,i){var n=o.getAtLeastOneNode(e),s=1===n.length?t.str.sformat(a.RemoveCommandConfirmDialogSingleMessage,n.at(0).get("name")):t.str.sformat(a.RemoveCommandConfirmDialogMultipleMessage,n.length);return{"title":a.RemoveCommandConfirmDialogTitle,"message":s}},"_performAction":function(e,i){var t=e.node,s=n.Deferred(),o={"collection_id":i.container.get("id"),"operation":"remove"},a=i.container.connector,c=i.containerCollection,l={"url":r.combine(a.getConnectionUrl().getApiBase("v2"),"/nodes/"+t.get("id")),"type":"PUT","data":o,"contentType":"application/x-www-form-urlencoded"},d=a.makeAjaxCall(l).done(function(i){e.set("count",1),c.remove(t),e.deferred.resolve(e),s.resolve(e)}).fail(function(i){var t=i?new u(i,e):i;e.deferred.reject(e,t),i||d.abort(),s.reject(t)});return s.promise()},"startGlobalMessage":function(e){m.showFileUploadProgress(e,{"oneFileTitle":a.RemovingOneItem,"oneFileSuccess":a.RemoveOneItemSuccessMessage,"multiFileSuccess":a.RemoveManyItemsSuccessMessage,"oneFilePending":a.RemovingOneItem,"multiFilePending":a.RemoveItems,"oneFileFailure":a.RemoveOneItemFailMessage,"multiFileFailure":a.RemoveManyItemsFailMessage2,"someFileSuccess":a.RemoveSomeItemsSuccessMessage,"someFilePending":a.RemovingSomeItems,"someFileFailure":a.RemoveSomeItemsFailMessage2,"enableCancel":!1})}});return t.extend(g.prototype,c,{"execute":function(e,i){var t=n.Deferred(),s=this;return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,csui.require(["csui/controls/globalmessage/globalmessage"],function(n){m=n,s._executeRemoveCollectionItems(e,i).then(t.resolve,t.reject)},t.reject),t.promise()},"_executeRemoveCollectionItems":function(e,i){var s=this;i||(i={});var r=o.getAtLeastOneNode(e),a=(1===r.length&&r.first(),n.Deferred()),l=e.data||{};e.context||i.context;i.parallelism||(i.parallelism=d.parallelism);var g=null==l.showProgressDialog||l.showProgressDialog;return c.execute.apply(this,arguments).done(function(t){g&&m.hideFileUploadProgress(),i.infiniteScroll&&e.collection.fetch({"reset":!1,"remove":!1,"merge":!0}),s.allowCollectionRefetch=!0,a.resolve(t)}).fail(function(e){var i=e&&t.find(e,function(e){return!(e instanceof u)}),n=i||e;a.reject(n)}),a.promise()},"_performActions":function(e,i){i||(i={});var s=this,o=n.Deferred(),r=e.data||{},a=null==r.showProgressDialog||r.showProgressDialog;return i.container||(i.container=e.container),i.containerCollection=e.collection,csui.require(["csui/models/fileuploads"],function(n){var r=e.nodes.models,c=t.map(r,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),u=r&&r[0]&&r[0].connector,d=new n(c,{"connector":u}),g=t.defaults({"nodes":d},e);d.each(function(e){var i=e.get("node");e.node=i,e.unset("node"),e.set("mime_type",i.get("mime_type"))}),a&&s.startGlobalMessage(d),g.suppressMultipleSuccessMessage=!0,g.suppressMultipleFailMessage=!0,l._performActions.call(s,g,i).done(function(e){a&&m.hideFileUploadProgress(),s.showSuccess(e),o.resolve(e)}).fail(function(e){return a||s.showError(e),o.reject(e)})},o.reject),o.promise()}}),g}),csui.define("csui/utils/commands/copy",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/models/command","csui/utils/commandhelper","csui/utils/command.error","csui/utils/commands/multiple.items"],function(e,i,t,n,s,o,r,a,c,l){"use strict";var u=e.config();t.defaults(u,{"parallelism":3,"actionType":"COPY","allowMultipleInstances":!0});var d,m,g,p,f,v,h,w,b=r.extend({});return t.extend(b.prototype,l),b.extend({"defaults":{"signature":"Copy","command_key":["copy","Copy"],"name":s.CommandNameCopy,"verb":s.CommandVerbCopy,"pageLeavingWarning":s.CopyPageLeavingWarning,"allowMultipleInstances":u.allowMultipleInstances,"scope":"multiple","successMessages":{"formatForNone":s.CopyItemsNoneMessage,"formatForOne":s.CopyOneItemSuccessMessage,"formatForTwo":s.CopySomeItemsSuccessMessage,"formatForFive":s.CopyManyItemsSuccessMessage},"errorMessages":{"formatForNone":s.CopyItemsNoneMessage,"formatForOne":s.CopyOneItemFailMessage,"formatForTwo":s.CopySomeItemsFailMessage,"formatForFive":s.CopyManyItemsFailMessage}},"execute":function(e,i){var o=this,r=n.Deferred(),c=e.context||i&&i.context;return e.suppressSuccessMessage=!0,e.suppressFailMessage=!0,csui.require(["csui/controls/globalmessage/globalmessage","csui/controls/conflict.resolver/conflict.resolver","csui/utils/taskqueue","csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view","csui/models/fileuploads","csui/utils/page.leaving.blocker","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links"],function(){if(d=arguments[0],m=arguments[1],g=arguments[2],p=arguments[3],f=arguments[4],v=arguments[5],h=arguments[6],w=arguments[7],d.isActionInProgress(u.actionType,s.CopyNotAllowed,s.CommandTitleCopy))return r.resolve();o._selectCopyOptions(e,i).done(function(i){var n=e.nodes,s=i.nodes[0],l=(i.openSelectedProperties,i.applyProperties),u=(new Date).getTime(),d=!!e.container&&s.get("id")===e.container.get("id");o._announceOperationStart(e);var m=n.map(function(e){var i={"id":e.get("id"),"name":e.get("name"),"container":e.get("container"),"mime_type":e.get("mime_type"),"original_id":e.get("original_id"),"original":e.original,"type":e.get("type"),"size":e.get("size"),"type_name":e.get("type_name"),"state":"pending","count":0,"total":1,"enableCancel":!1,"bundleNumber":u},t=e.get("type");return 144===t||749===t||736===t||30309===t?i.size_formatted=e.get("size_formatted"):140===t&&(i.url=e.get("url")),i.actions=e.actions,i.targetLocation={"id":s.get("id"),"url":w.getUrl(s)},i}),g=t.map(m,function(e){return t.clone(e)});o._resolveNamingConflicts(s,g).done(function(u){t.each(u,function(e){void 0===e.id&&(e.id=t.findWhere(m,{"name":e.name}).id)}),o._metadataHandling(u,t.extend(i,{"context":c,"targetFolder":s})).done(function(){var i=new f(u,{"container":s?s.clone():void 0});i.each(function(e){var i=n.findWhere({"id":e.get("id")});e.node.set(t.omit(i.attributes,"id"))});var m=e.container&&e.container.connector;if(void 0===m){var g=a.getAtLeastOneNode(e).first();g&&(m=g.connector)}o._copySelectedNodes(i,m,s,l,d,e.collection,e,c).done(function(t){if(t.length){w.getUrl(s)}var n;e.collection&&e.originatingView&&e.originatingView.findNodeFromCollection?n=e.originatingView.findNodeFromCollection(e.collection,s):e.collection&&(n=e.collection.get(s.get("id"))||e.collection.findWhere({"id":s.get("id")})),!d&&n&&n.fetch(),r.resolve(i)}).always(function(i){o._announceOperationEnd(e,d)}).fail(function(e){r.reject()})}).fail(function(i){o._announceOperationEnd(e,d),r.reject()})}).fail(function(i){i&&i.userAction&&"cancelResolveNamingConflicts"===i.userAction?o.trigger("resolve:naming:conflicts:cancelled"):i&&!i.cancelled&&o.showError(i),o._announceOperationEnd(e,d),r.reject()})}).fail(function(e){e&&!e.cancelled&&o.showError(e),r.reject()})},r.reject),r.promise()},"_announceOperationStart":function(e){var i=e.originatingView;i.blockActions&&i.blockActions(),v.enable(this.get("pageLeavingWarning"))},"_announceOperationEnd":function(e,i){v.disable();var t=e.originatingView;t.unblockActions&&t.unblockActions()},"_selectCopyOptions":function(e,i){var o=this,r=n.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(n){var a=!!e.container&&e.container.get("id")===e.nodes.models[0].get("id"),c=e.nodes.length,l=t.str.sformat(c>1?s.DialogTitleCopy:s.DialogTitleSingleCopy,c),u=t.extend({"command":"copy","selectableTypes":[-1],"unselectableTypes":[899],"addableTypes":[0],"showAllTypes":!0,"orderBy":"type asc","dialogTitle":l,"initialContainer":e.container||e.nodes.models[0].parent,"initialSelection":e.nodes,"startLocation":a?"recent.containers":"","includeCombineProperties":1===c,"propertiesSeletor":!0,"globalSearch":!0,"context":i?i.context:e.context,"startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"resolveShortcuts":!0,"resultOriginalNode":!0,"includeResources":["show_hidden"]},e);o.nodePicker=new n(u),o.originatingView=e.originatingView,o.nodePicker.show().done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})},function(e){r.reject(e)}),r.promise()},"_resolveNamingConflicts":function(e,i){var n=1===i.length?s.CopyingNode:t.str.sformat(s.CopyingNodes,i.length);return new m({"h1Label":n,"actionBtnLabel":s.CommandNameCopy,"excludeAddVersion":!0,"container":e,"files":i,"originatingView":this.originatingView}).run()},"_metadataHandling":function(e,i){var t=n.Deferred();return this.originatingView&&0===this.originatingView._blockingCounter&&this.originatingView.blockActions(),csui.require(["csui/widgets/metadata/metadata.copy.move.items.controller"],function(n){var s,o=i.openSelectedProperties,r=i.applyProperties,a=new n;if(o)s=a.CopyMoveItemsWithMetadata;else{if(r!==p.APPLY_DESTINATION_PROPERTIES&&r!==p.COMBINE_ALL_PROPERTIES)return t.resolve();s=a.CopyMoveItemsRequiredMetadata}r===p.KEEP_ORIGINAL_PROPERTIES?i.inheritance="original":r===p.APPLY_DESTINATION_PROPERTIES?i.inheritance="destination":r===p.COMBINE_ALL_PROPERTIES&&(i.inheritance="merged"),i.action="copy",s.call(a,e,i).done(function(){t.resolve()}).fail(function(e){t.reject(e)})},function(e){o.warn("Failed to load MetadataCopyMoveItemsController. {0}",e)&&console.warn(o.last),t.reject(e)}),t.promise()},"_copySelectedNodes":function(e,i,o,r,a,l,m,p){var f=this,v=new g({"parallelism":u.parallelism}),w=t.map(e.models,function(e){var t=n.Deferred();return v.pending.add({"worker":function(){var n=e.attributes,s=o.get("id");return f._getCategories(n,i,s,r).done(function(o){f._copyNode(o,n,i,s,e.node).done(function(){e.set("count",1),e.deferred.resolve(e),a&&f._addToCurrentTable(e.node,l),t.resolve(n)}).fail(function(i){var n=new c(i);e.deferred.reject(e,n),t.reject(n)})}).fail(function(i){var n=new c(i);e.deferred.reject(e,n),t.reject(n)}),t.promise()}}),t.promise(w)});return d.showProgressPanel(e,{"oneFileTitle":s.CopyingOneItem,"oneFileSuccess":s.CopyOneItemSuccessMessage,"multiFileSuccess":s.CopyManyItemsSuccessMessage,"oneFilePending":s.CopyingOneItem,"multiFilePending":s.CopyItems,"oneFileFailure":s.CopyOneItemFailMessage,"multiFileFailure":s.CopyManyItemsFailMessage,"someFileSuccess":s.CopySomeItemsSuccessMessage,"someFilePending":s.CopySomeItems,"someFileFailure":s.CopySomeItemsFailMessage2,"locationLabelPending":s.CopyingLocationLabel,"locationLabelCompleted":s.CopiedLocationLabel,"enableCancel":!1,"actionType":u.actionType,"allowMultipleInstances":u.allowMultipleInstances,"context":p,"nextNodeModelFactory":h}),this._announceOperationEnd(m),n.whenAll.apply(n,w)},"_addToCurrentTable":function(e,i){e.isLocallyCreated=!0,e.fetch({"collection":i}).then(function(){i.unshift(e)})},"_copyNode":function(e,i,t,n,s){var o={"original_id":i.id,"parent_id":n,"name":i.newName?i.newName:i.name,"roles":e};return s.connector||t.assignTo(s),s.save(void 0,{"data":o,"url":t.connection.url+"/nodes"})},"_getCategories":function(e,i,t,s){var o=n.Deferred();if(e.extended_data&&e.extended_data.roles)o.resolve(e.extended_data.roles);else{var r={"url":i.connection.url+"/forms/nodes/copy?"+n.param({"id":e.id,"parent_id":t})};i.makeAjaxCall(r).then(function(e,i,t){var n,r=e.forms[1],a=r&&r.data||{};n={},n[p.KEEP_ORIGINAL_PROPERTIES]="original",n[p.APPLY_DESTINATION_PROPERTIES]="destination",n[p.COMBINE_ALL_PROPERTIES]="merged";var c=a[n[s]];o.resolve({"categories":c})}).fail(function(e){o.reject(e)})}return o.promise()}})}),csui.define("csui/utils/routing",["module","csui/lib/underscore"],function(e,i){"use strict";function t(e){if(void 0===n){var i=window.csui.requirejs.s.contexts._.config.config[e]||{};n=i.developmentPage}}var n=e.config().developmentPage;return t("csui/pages/start/perspective.routing"),t("csui/pages/start/impl/perspective.router"),{"routesWithSlashes":function(){return/\/app(?:\/.*)?$/.test(location.pathname)||!n}}}),csui.define("csui/utils/node.links/node.links",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/rules.matching/rules.matching.mixin","csui/utils/routing","csui-ext!csui/utils/node.links/node.links"],function(e,i,t,n,s,o){"use strict";var r=s.routesWithSlashes(),a=i.Model.extend({"defaults":{"sequence":100,"url":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)}});n.mixin(a.prototype);var c=i.Collection.extend({"model":a,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.call(this,e,t)},"getUrl":function(e,i){1===e.get("type")&&e.original&&e.original.get("id")>0&&(e=e.original);var t=this.find(function(i){return i.matchRules(e,i.attributes)});if(t){var n=t.get("getUrl")(e,i);return this.completeUrl(e,n,i)}},"completeUrl":function(e,i,n){if(!i)return location.href;var s=e.connector||n&&n.connector,o=new t(s&&s.connection.url||location.href),r=o.makeAbsoluteUrl(i,this._getApplicationUrlPrefix(o)),a=n&&n.context,c=a&&a.viewStateModel,l=c&&c.get("activeRouterInstance"),u=l&&l.buildUrlParams();return u&&(r+="?"+u),r},"_getApplicationUrlPrefix":function(e){return r?t.combine(e.getCgiScript(),"/app/"):location.origin+location.pathname+location.search+"#"}}),l=new c;return o&&l.add(e.flatten(o,!0)),l}),csui.define("csui/utils/commands/copy.link",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/node.links/node.links","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a){"use strict";t.extend({},e.config());return s.extend({"defaults":{"signature":"CopyLink","name":a.CommandNameCopyLink},"enabled":function(e){return!!o.getJustOneNode(e)},"execute":function(e,i){var t=n.Deferred(),s=o.getJustOneNode(e),c={"context":e.context},l=e.url?r.completeUrl(s,e.url,c):r.getUrl(s,c),u=this._copyToClipboard(l);return csui.require(["csui/controls/globalmessage/globalmessage"],function(e){u?(t.resolve(),e.showMessage("success",a.CopyLinkSuccessMessage)):(t.reject(),e.showMessage("error",a.CopyLinkFailMessage))},t.reject),t.promise()},"_copyToClipboard":function(e){if(window.clipboardData)return window.clipboardData.setData("Text",e),!0;var i=!1,t=document.createTextNode(e),n=document.createElement("span");if(n.style.color="black",n.style.background="tranparent",n.style.backgroundColor="white",n.appendChild(t),document.body.appendChild(n),window.getSelection){var s=window.getSelection();s.removeAllRanges();var o=document.createRange();o.selectNodeContents(t),s.addRange(o),i=document.execCommand("copy"),s.removeAllRanges()}return document.body.removeChild(n),i}})}),csui.define("csui/models/perspective/perspective.model",["module","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/connectable/connectable.mixin","csui/utils/log","csui/utils/base","csui/utils/url"],function(e,i,t,n,s,o,r,a){"use strict";var c=i.extend({"idAttribute":null},e.config()),l=t.Model.extend({"idAttribute":c.idAttribute,"constructor":function(e,n){t.Model.prototype.constructor.call(this,e,n),this.options=i.pick(n,["connector"]),this.makeUploadable(n).makeConnectable(n)},"getPerspectiveId":function(){return this.get("id")},"getPerspective":function(){return this.get("perspective")},"setPerspective":function(e,i){this.set("perspective",e,i)},"update":function(e){this.set.apply(this,arguments)},"isNew":function(){return!this.get("id")||0===this.get("id")},"urlBase":function(){var e=this.get("id"),t=this.connector.connection.url;if(e){if(i.isNumber(e)&&!(e>0))throw new Error("Unsupported id value");t=a.combine(t,"perspectives",e)}else t=a.combine(t,"perspectives");return t},"url":function(){return this.urlBase()},"prepareFormData":function(e,i){return{"pData":JSON.stringify(e)}}});return n.mixin(l.prototype),s.mixin(l.prototype),l}),csui.define("csui/utils/commands/create.perspective",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/url","csui/models/perspective/perspective.model","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a,c){"use strict";var l=window.csui.requirejs.s.contexts._.config.config["csui/utils/contexts/perspective"]||{};l=t.extend({"enableInlinePerspectiveEditing":!0},l,e.config());var u,d,m;return s.extend({"defaults":{"signature":"CreatePerspective","name":c.CreatePerspective},"enabled":function(e,i){var t=e.context||i&&i.context,n=t.perspective.attributes;return!(void 0!==n.id||!n.canEditPerspective||"node"!==t._applicationScope.attributes.id)},"execute":function(e,i){var t=e.context||i&&i.context;return i&&i.inlinePerspectiveEditing||l.enableInlinePerspectiveEditing?this._editInline(e,i,t):this._editInClassicPMan(e,i,t)},"_preparePerspectiveConfig":function(e){var i={"perspective":{"type":"flow","options":{"widgets":[{"type":"csui/widgets/nodestable"}]}},"overrideType":"genericContainer","scope":"local","containerType":"-1","cascading":"false"},t=o.getJustOneNode(status)||e.getModel(d),n=e.getCollection(m);return i.nodepath=this._getNodePath(n),i.node=t.get("id"),i.containerType=t.get("type"),i.title=t.get("name"),i},"_editInline":function(e,i,t){var s=n.Deferred(),o=this;return csui.require(["csui/utils/contexts/factories/node","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/ancestors","csui/perspective.manage/pman.view"],function(){d=arguments[0],u=arguments[1],m=arguments[2];var e=arguments[3],i=o._preparePerspectiveConfig(t,d,m);i.title=i.title+" "+(new Date).getTime();var n=new a(i,{"connector":t.getObject(u)});new e({"context":t,"perspective":n}).show(),s.resolve()},s.reject),s.promise()},"_editInClassicPMan":function(e,i,t){var s=n.Deferred(),o=this;return csui.require(["csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","csui/utils/contexts/factories/ancestors"],function(){u=arguments[0],d=arguments[1],m=arguments[2];var i=o._getForm(t,e);i.submit(),i.remove(),s.resolve()},s.reject),s.promise()},"_getForm":function(e,i){var t=n("<form target='_blank' method='POST' style='display:none;'></form>").attr({"action":this._getUrl(e,i)}).appendTo(document.body),s=this._getUrlQueryParameters(e,i);for(var o in s)s.hasOwnProperty(o)&&n('<input type="hidden" />').attr({"name":o,"value":s[o]}).appendTo(t);return t},"_getUrl":function(e,i){var t=e.getObject(u);return new r(t.connection.url).getCgiScript().toString()+"/perspectivemgr"},"_getUrlQueryParameters":function(e,i){var t=this._preparePerspectiveConfig(e,d,m);return t.ui={"elements":{"btn-mode-code":!0,"btn-view-general":!0,"btn-view-rules":!1,"btn-view-layout":!0,"btn-view-widgets":!0,"view-perspective-action":!0,"perspective-action-create":!0,"perspective-action-edit":!0,"perspective-action-copy":!0,"view-perspective-form":!0,"perspective-title":!0,"perspective-type":!0,"perspective-scope":!0,"perspective-nodetypes":!0,"perspective-node":!0,"perspective-cascading":!0,"display-size-msg":!1,"rules-code":!0,
"layout-flow":!0,"layout-left-center-right":!0,"layout-grid":!1,"layout-tabbed":!1},"widgetGroupsBlacklist":[],"widgetsWhitelist":[],"disableGrouping":!1},{"config":JSON.stringify(t)}},"_getNodePath":function(e){var i="";return e.each(function(e){i+=i?":":"",i+=e.get("name")}),i}})}),csui.define("csui/utils/commands/node",["csui/lib/underscore","csui/models/command","csui/utils/commands/multiple.items"],function(e,i,t){var n=i.extend({"_performAction":function(e,i){throw new Error("Method not implemented in the descendant command.")}});return e.extend(n.prototype,t),n}),csui.define("csui/utils/commands/delete",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/commands/multiple.items","csui/utils/commands/confirmable","csui/utils/command.error"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=e.config();t.defaults(d,{"parallelism":1,"actionType":"DELETE","allowMultipleInstances":!0});var m,g,p,f=a.extend({"defaults":{"signature":"Delete","command_key":["delete","Delete"],"name":s.CommandNameDelete,"verb":s.CommandVerbDelete,"pageLeavingWarning":s.DeletePageLeavingWarning,"allowMultipleInstances":d.allowMultipleInstances,"scope":"multiple","successMessages":{"formatForNone":s.DeleteItemsNoneMessage,"formatForOne":s.DeleteOneItemSuccessMessage,"formatForTwo":s.DeleteSomeItemsSuccessMessage,"formatForFive":s.DeleteManyItemsSuccessMessage},"errorMessages":{"formatForNone":s.DeleteItemsNoneMessage,"formatForOne":s.DeleteOneItemFailMessage,"formatForTwo":s.DeleteSomeItemsFailMessage,"formatForFive":s.DeleteManyItemsFailMessage}},"allowCollectionRefetch":!1,"_getConfirmTemplate":function(e,i){return t.template(s.DeleteCommandConfirmDialogHtml)},"_getConfirmData":function(e,i){var n=r.getAtLeastOneNode(e),o=1===n.length?t.str.sformat(s.DeleteCommandConfirmDialogSingleMessage,n.at(0).get("name")):t.str.sformat(s.DeleteCommandConfirmDialogMultipleMessage,n.length);return{"title":s.DeleteCommandConfirmDialogTitle,"message":o}},"_performAction":function(e,i){var t=e.node,s=n.Deferred(),o=(t.collection,t.destroy({"wait":!0}).done(function(){e.set("count",1),e.deferred.resolve(e),s.resolve(t)}).fail(function(i){var n=i?new u(i,t):i;e.deferred.reject(e,n),i||o.abort(),s.reject(n)})),r=i.originatingView;return r&&r.unblockActions&&r.unblockActions(),s.promise()},"startGlobalMessage":function(e,i){p.showProgressPanel(e,{"oneFileTitle":s.DeletingOneItem,"oneFileSuccess":s.DeleteOneItemSuccessMessage,"multiFileSuccess":s.DeleteManyItemsSuccessMessage,"oneFilePending":s.DeletingOneItem,"multiFilePending":s.DeleteItems,"oneFileFailure":s.DeleteOneItemFailMessage,"multiFileFailure":s.DeleteManyItemsFailMessage,"someFileSuccess":s.DeleteSomeItemsSuccessMessage,"someFilePending":s.DeletingSomeItems,"someFileFailure":s.DeleteSomeItemsFailMessage,"enableCancel":!1,"originatingView":i.originatingView,"locationLabelPending":s.deletingLocationLabel,"locationLabelCompleted":s.deletedLocationLabel,"allowMultipleInstances":d.allowMultipleInstances,"actionType":d.actionType})}});return t.extend(f.prototype,l,{"execute":function(e,i){var t=n.Deferred(),o=this;return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,e.deleteBlockAction=!0,csui.require(["csui/models/fileuploads","csui/utils/contexts/factories/next.node","csui/controls/globalmessage/globalmessage"],function(n,r,a){if(m=n,g=r,p=a,p.isActionInProgress(d.actionType,s.DeleteNotAllowed,s.CommandTitleDelete))return t.resolve();o._executeDelete(e,i).then(t.resolve,t.reject)},t.reject),t.promise()},"_executeDelete":function(e,i){var s=this;i||(i={});var o=r.getAtLeastOneNode(e),a=1===o.length&&o.first(),c=n.Deferred(),m=e.context||i.context;return i.parallelism||(i.parallelism=d.parallelism),i.originatingView=e.originatingView,l.execute.call(this,e,i).done(function(t){a&&a===e.container?setTimeout(function(){var i=m.getModel(g),t=e.container.get("parent_id");i.set("id",t.id||t)}):i.infiniteScroll&&e.collection.fetch({"reset":!1,"remove":!1,"merge":!0}),s.allowCollectionRefetch=!0,c.resolve(t)}).fail(function(e){var i=e&&t.find(e,function(e){return!(e instanceof u)}),n=i||e;c.reject(n)}),c.promise()},"_performActions":function(e,i){var s=this,o=n.Deferred(),r=e.data||{},a=null==r.showProgressDialog||r.showProgressDialog,l=e.nodes.models,u=t.map(l,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),d=l&&l[0]&&l[0].connector,g=new m(u,{"connector":d,"container":e.container?e.container.clone():void 0}),p=t.defaults({"nodes":g},e),f=(new Date).getTime();g.each(function(e){var i=e.get("node");e.node=i,e.unset("node"),e.set("bundleNumber",f),e.set("mime_type",i.get("mime_type"))}),a&&this.startGlobalMessage(g,i);var v=e.originatingView;return v&&v.unblockActions&&v.unblockActions(),p.suppressMultipleSuccessMessage=!0,p.suppressMultipleFailMessage=!0,c._performActions.call(this,p,i).done(function(e){o.resolve(e)}).fail(function(e){return a||s.showError(e),o.reject(e)}),o.promise()}}),f}),csui.define("csui/utils/commands/download",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/base","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/utils/command.error","csui/utils/url","csui/utils/commandhelper","csui/utils/connector","csui/models/command","csui/models/version"],function(e,i,t,n,s,o,r,a,c,l,u,d){"use strict";return u.extend({"defaults":{"signature":"Download","command_key":["download","Download"],"name":s.CommandNameDownload,"verb":s.CommandVerbDownload,"doneVerb":s.CommandDoneVerbDownload,"scope":"single"},"execute":function(e,i){var t=this._getNode(e);return n.isAppleMobile()?this._openContent(t,i):this._downloadContent(t,i)},"_getNode":function(e){var t=c.getJustOneNode(e),n=t.get("type"),s=t.get("version_number");t.original&&t.original.get("id")>0&&(1!==n&&2!==n||(t=t.original),2===n&&void 0!==s&&t.set("version_number",s,{"silent":!0}));var o=t.get("versions"),r=!(o&&!1===o.current_version);if(!(t instanceof d)&&2!==n&&r){var a=t.clone();return["version_number","version_number_major","version_number_minor","version_number_name"].forEach(function(e){a.unset(e,{"silent":!0}),a.attributes.versions&&i.isObject(a.attributes.versions)&&delete a.attributes.versions[e]}),a}return t},"_downloadContent":function(e,t,n){return this._executeContentCommand(e,t).then(i.bind(function(i){var s=this._getContentUrl(e,t,n||"download",i);return this._performDownload(s)},this))},"_openContent":function(e,i){var n=this,s=window.open("");return this._executeContentCommand(e,i).then(function(o){return s.location.href=n._getContentUrl(e,i,"download",o),s.focus(),t.Deferred().resolve()},function(){return s.close(),t.Deferred().reject()})},"_executeContentCommand":function(e,i){var n=t.Deferred();return e.connector.requestContentAuthToken(e).done(function(e){n.resolve(e.token)}).fail(function(e){n.reject(new r(e))}),n.promise()},"_getContentUrl":function(e,i,t,n){return(e.get("version_number")?a.combine(e.connector.connection.url,"nodes",e.get("id"),"versions",e.get("version_number"),"content"):a.combine(e.connector.connection.url,"nodes",e.get("id"),"content"))+"?action="+t+"&token="+encodeURIComponent(n)},"_performDownload":function(e){var i=t("<iframe></iframe>").hide().attr("src",e).appendTo(t(document.body)),n=Math.min(l.prototype.connectionTimeout||6e4,6e4);return setTimeout(function(){i.remove()},n),t.Deferred().resolve()}})}),csui.define("csui/utils/commands/open.document/delegates/open.document.delegates",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/commands/open.document/delegates/open.document.delegates"],function(e,i,t,n){"use strict";var s=i.Model.extend({"defaults":{"sequence":100,"command":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)},"enabled":function(e,i,t){return this.matchRules(e,this.attributes)&&this.get("command").enabled(i,t)}});t.mixin(s.prototype);var o=i.Collection.extend({"model":s,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.call(this,e,t)},"findByNode":function(e,i,t){var n=this.find(function(n){return n.enabled(e,i,t)});return n&&n.get("command")}}),r=new o;return n&&r.add(e.chain(n).flatten(n).map(function(i){return e.defaults({"command":new i.command},i)}).value()),r}),csui.define("csui/utils/commands/open.document/open.document",["csui/lib/underscore","csui/models/command","csui/utils/commandhelper","csui/utils/commands/open.document/delegates/open.document.delegates"],function(e,i,t,n){"use strict";function s(e,i){var s=t.getJustOneNode(e);return s&&n.findByNode(s,e,i)}return i.extend({"defaults":{"signature":"OpenDocument"},"enabled":function(i,s){var o=t.getJustOneNode(i);if(!o)return!1;var r=o.get("type");return!(!r||!e.contains(["144","749","736"],r.toString()))&&n.last().get("command").enabled(i,s)},"execute":function(e,i){return s(e,i).execute(e,i)}})}),csui.define("csui/utils/commands/zipanddownload",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/command.error","csui/utils/commandhelper","csui/models/command","csui/utils/url"],function(e,i,t,n,s,o,r,a,c){"use strict";var l,u,d,m;t.extend({},e.config());return a.extend({"defaults":{"signature":"ZipAndDownload","command_key":["ZipAndDownload","zipanddownload"],"name":s.CommandNameZipDownload,"verb":s.CommandVerbZipDownload,"doneVerb":s.CommandDoneVerbDownload,"scope":"multiple","selfBlockOnly":!0},"enabled":function(e){var i=!1;if(!e.nodes||!e.nodes.models)return!1;if(1===e.nodes.models.length){for(var n,s=r.getJustOneNode(e),o=0;o<e.nodes.models.length;o++)n=t.filter(e.nodes.models&&e.nodes.models[o].actions&&e.nodes.models[o].actions.models,function(e){return"zipanddownload"===e.id});s.get("container")&&n.length>0&&(i=!0)}else if(e.nodes.models.length>1){for(var a=0,c=0;c<e.nodes.models.length;c++){var l=t.filter(e.nodes.models&&e.nodes.models[c].actions&&e.nodes.models[c].actions.models,function(e){return"zipanddownload"===e.id});l.length>0&&a++}a>0&&a===e.nodes.models.length&&(i=!0)}return i},"execute":function(e,i){this.set("isExecuting",!0),this.stagesModel&&delete this.stagesModel;var t=r.getAtLeastOneNode(e),s=this;return this.options=i||{},this._deferred=n.Deferred(),this.connector=this.options.connector||e.collection&&e.collection.connector||e.container&&e.container.connector||t.models&&t.models[0].connector,csui.require(["csui/controls/globalmessage/globalmessage","csui/models/zipanddownload/zipanddownload.preflight","csui/models/zipanddownload/zipanddownload.stages","csui/dialogs/modal.alert/modal.alert"],function(){l=arguments[0],u=arguments[1],d=arguments[2],m=arguments[3],s.stageAndPrepeareDownload(e,t,{})}),this._deferred.always(function(){s.set("isExecuting",!1)}),this._deferred.promise()},"_preFlightCheck":function(e,i){var t=n.Deferred(),r=this,a={"id_list":i.pluck("id"),"type":"ZipAndDownload"},c=new u(a,e);c.preflight=!0;var d=c.save(a,{"silent":!0,"wait":!0}).done(function(){t.resolve(c)}).fail(function(e){var i=e?new o(e,c):e;"abort"!==e.statusText&&m.showError(i.message,s.error),r._deferred.reject({"cancelled":!0}),t.reject(c,i)});return l.showLoader(d,{"label":s.VerifyZipAndDownloadPrefetch}),t.promise()},"_getJobId":function(e,i){var t=this.connector.getConnectionUrl().getApiBase("v2"),n={"id_list":i.pluck("id"),"type":"ZipAndDownload"},s={"url":c.combine(t,"zipanddownload"),"type":"POST","data":n,"contentType":"application/x-www-form-urlencoded"};return this.connector.makeAjaxCall(s)},"changeStageMessage":function(e){var i=this.stagesModel&&this.stagesModel.get("current_stage")||0,t=0===i?s.ExtractingZipAndDownload:1===i?s.CompressingZipAndDownload:s.CleanUpZipAndDownload;l.changeLoaderMessage(t,e)},"_checkStage":function(e,i,t){t=t||n.Deferred(),this.stagesModel||(this.stagesModel=new d(i,{"connector":this.connector}));var s=this,o=t.promise(),r=this.stagesModel.fetch();return this.changeStageMessage(r),r.done(function(){s.stagesModel.get("complete")?t.resolve(s.stagesModel):s.stagesModel.get("stage_summary").some(function(e){return!e.complete})?s.stageCheckTimeout=setTimeout(function(){clearTimeout(s.stageCheckTimeout),s.stageCheckTimeout=void 0,s._checkStage(e,i,t)},2e3):t.resolve(s.stagesModel)}),o.abort=r.abort,o},"_showdialogbox":function(e,i,n,s){var o=this;o._dialog=new e(t.extend(s,{"status":i,"nodes":n,"iconLeft":"notification_warning"})),o._dialog.listenTo(o._dialog,"hide",t.bind(o.onHideDialog,o)),o._dialog.show()},"onHideDialog":function(){this._deferred&&"pending"===this._deferred.state()&&this._deferred.reject({"cancelled":!0})},"stageAndPrepeareDownload":function(e,i,o){var r=this,a=n.Deferred(),u=r.stagesModel&&r.stagesModel.get("current_stage")||0;r._getJobId(e,i).done(function(n){n=n.results.data.jobs;var o=r._checkStage(e,n);l.showLoader(o,{"label":0===u?s.ExtractingZipAndDownload:1===u?s.CompressingZipAndDownload:s.CleanUpZipAndDownload,"onDestroy":function(e){r.stageCheckTimeout&&clearTimeout(r.stageCheckTimeout),e?r._deferred.resolve():r._deferred.reject()}}),o.done(function(n){a.resolve(),n&&n.get("complete")&&n.get("current_stage")===n.get("stage_summary").length?csui.require(["csui/controls/zipanddownload/impl/download.dialog/download.dialog.view"],function(o){a.resolve();var l={"model":n,"status":e,"buttons":[{"id":"zipDownload","label":s.DownloadDialogBtnDownload,"click":t.bind(function(){var e=this._dialog.ui.fileName.val(),i=!1;if(/^[\W]+/.test(e)&&/[^\u0000-\u007F]/g.test(e)&&(i=!0),0===e.trim().length)this._dialog.ui.errorEl.html(s.TheArchiveNameCannotBeEmpty);else if(e.trim().length>248)this._dialog.ui.errorEl.html(s.TheArchiveNameMaxLength);else if(-1!==e.search(/[\?\:<>\|\"\\\/\@\^\,\{\}\[\]\!\%\&\(\)\~]/g))this._dialog.ui.errorEl.html(s.InvalidArchiveCharacters);else if(/^[\W]+/.test(e)&&!i)this._dialog.ui.errorEl.html(s.InvalidArchiveName);else{if(this._dialog.options.status&&this._dialog.options.status.originatingView){var t=this._dialog.options.status.originatingView.$el.find("[data-csui-command="+this.get("signature").toLowerCase()+"] a.binf-disabled");t.length>0&&t.removeClass("binf-disabled")}/(.)+(.zip)$/i.test(e)||(e+=".zip"),window.location.href=c.appendQuery(c.combine(this.connector.connection.url.replace(/\/api\/v[1|2]/gi,""),n.get("link")),"downloadName="+encodeURIComponent(e)),this._dialog.destroy(),delete this._dialog}},r),"default":!0,"disabled":0===n.get("total_completed")},{"label":s.DialogBtnCancel,"click":t.bind(r.onClickCancelButton,r)}]};r._showdialogbox(o,e,i,l)}):m.showError(n.get("status_formatted"))}).fail(function(e){l.showMessage("error",e.statusText),a.reject(e)})}),this._dialog&&(this._dialog.destroy(),delete this._dialog)},"onClickCancelButton":function(){if(this._dialog.options.status&&this._dialog.options.status.originatingView){var e=this._dialog.options.status.originatingView.$el.find("[data-csui-command="+this.get("signature").toLowerCase()+"] a.binf-disabled");e.length>0&&e.removeClass("binf-disabled")}this._dialog.destroy(),delete this._dialog}})}),csui.define("csui/utils/commands/open.classic.page",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/utils/commandhelper","csui/models/command","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a){"use strict";var c=t.extend({"openInNewTab":!0},e.config());return r.extend({"execute":function(e,i){if(c.classicUnsupported)return this._classicUnsupported(e);var n=o.getJustOneNode(e);return this._navigateTo(n,t.extend({},e,i))},"getUrl":function(e,i){var o=e.connector||i.connector,r=new s(o.connection.url).getCgiScript(),a=this.getUrlQueryParameters(e,i);return a&&!t.isString(a)&&(a=n.param(a)),a&&(r+="?"+a),r},"getUrlQueryParameters":function(e,i){},"openInNewTab":function(){return c.openInNewTab},"shouldCloseTabAfterRedirect":!1,"_classicUnsupported":function(e){var i=n.Deferred();return e.suppressFailMessage=!0,csui.require(["csui/dialogs/modal.alert/modal.alert"],function(e){e.showInfo(a.viewTypeUnsupported)}),i.reject()},"_navigateTo":function(i,o){var r,a,c,l,u;try{r=this.getUrl(i,o)}catch(e){return n.Deferred().reject(e).promise()}return a=this.openInNewTab,t.isFunction(a)&&(a=a.call(this)),c=this.shouldCloseTabAfterRedirect,t.isFunction(c)&&(c=c.call(this)),c&&(a?(u=(i.connector||o.connector).connection,l=e.config().closeUrl||s.appendQuery(new s(u.url).getCgiScript(),"func=csui.closewindow"),new s(l).isAbsolute()||(l="/"!==l[0]?s.appendQuery(new s(u.url).getCgiScript(),l):s.combine(new s(u.url).getOrigin(),l))):l=location.href,r=s.appendQuery(r,s.combineQueryString({"nextURL":l}))),a?window.open(r,"_blank").focus():location.href=r,n.Deferred().resolve().promise()}},{"openInNewTab":c.openInNewTab})}),csui.define("csui/utils/commands/edit",["csui/lib/jquery.parse.param","csui/utils/commandhelper","csui/utils/url","csui/utils/commands/open.classic.page","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"Edit","command_key":"edit","scope":"single"},"shouldCloseTabAfterRedirect":!0,"getUrl":function(e,i){var n,o,r=this.get("command_key"),a=this._getNodeActionForSignature(e,r);if(a&&(n=a.get("href")))return new t(n).isAbsolute()||(o=(e.connector||i.connector).connection,n="/"!==n[0]?t.appendQuery(new t(o.url).getCgiScript(),n):t.combine(new t(o.url).getOrigin(),n)),n;throw new Error(s.NoEditUrl)}})}),csui.define("csui/utils/commands/editactivex",["csui/lib/jquery.parse.param","csui/utils/commandhelper","csui/utils/url","csui/utils/commands/open.classic.page"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"EditActiveX","command_key":"editactivex","scope":"single"},"shouldCloseTabAfterRedirect":!0,"enabled":function(e,t){var n=i.getJustOneNode(e),s=this.get("command_key"),o=this._getNodeActionForSignature(n,s);if(o){var r=e.toolItem||t&&t.toolItem;if(r){var a=o.get("name");if(a)return r.set("name",a),!0}}return!1},"getUrl":function(e,i){var n,o,r=this.get("command_key"),a=this._getNodeActionForSignature(e,r);if(a&&(n=a.get("href")))return new t(n).isAbsolute()||(o=(e.connector||i.connector).connection,n="/"!==n[0]?t.appendQuery(new t(o.url).getCgiScript(),n):t.combine(new t(o.url).getOrigin(),n)),n;throw new Error(s.NoEditUrl)}})}),csui.define("csui/utils/commands/editofficeonline",["csui/lib/jquery.parse.param","csui/utils/commandhelper","csui/utils/url","csui/utils/commands/open.classic.page"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"EditOfficeOnline","command_key":"editofficeonline","scope":"single"},"shouldCloseTabAfterRedirect":!0,"enabled":function(e,t){var n=i.getJustOneNode(e),s=this.get("command_key"),o=this._getNodeActionForSignature(n,s);if(o){var r=e.toolItem||t&&t.toolItem;if(r){var a=o.get("name");if(a)return r.set("name",a),!0}}return!1},"getUrl":function(e,i){var n,o,r=this.get("command_key"),a=this._getNodeActionForSignature(e,r);if(a&&(n=a.get("href")))return new t(n).isAbsolute()||(o=(e.connector||i.connector).connection,n="/"!==n[0]?t.appendQuery(new t(o.url).getCgiScript(),n):t.combine(new t(o.url).getOrigin(),n)),n;throw new Error(s.NoEditUrl)}})}),csui.define("csui/models/perspective/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,i,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"isFetchableDirectly":function(){return this.get("id")>0},"urlBase":function(){var i=this.get("id"),n=this.connector.connection.url;if(i){if(e.isNumber(i)&&!(i>0))throw new Error("Unsupported id value");n=t.combine(n,"perspectives",i)}else n=t.combine(n,"perspectives");return n},"url":function(){return this.urlBase()},"parse":function(i){var t=i.perspectives;return t?0===t.length?{}:(t=e.each(t,function(e){e.cascading=e.cascading+"",e.containerType=e.container_type,e.constantData=e.constant_data,e.overrideType=e.override_type,e.overrideId=e.override_id,e.nodepath=e.node_path,e.rules=e.rule_data,e.perspective=JSON.parse(e.perspective),e.constant_extraction_mode=e.container_type,e.pnodepath=e.perspective_node_path}),{"perspectives":t}):i}})}}}),csui.define("csui/models/perspective/perspective.template.model",["module","csui/lib/underscore","csui/lib/backbone","csui/models/perspective/server.adaptor.mixin","csui/models/mixins/uploadable/uploadable.mixin","csui/models/mixins/connectable/connectable.mixin","csui/models/perspective/perspective.model","csui/utils/log","csui/utils/base"],function(e,i,t,n,s,o,r,a,c){"use strict";var l=i.extend({"idAttribute":null},e.config()),u=t.Model.extend({"idAttribute":l.idAttribute,"constructor":function(e,n){t.Model.prototype.constructor.call(this,e,n),this.options=i.pick(n,["connector"]),this.makeUploadable(n).makeConnectable(n).makeServerAdaptor(n)},"isNew":function(){return!this.get("id")||0===this.get("id")},"isFetchable":function(){return!!this.get("id")},"set":function(e,n,s){var o;if(null==e)return this;if("object"==typeof e?(o=e,s=n):(o={})[e]=n,o.perspectives){e="perspectives";var a=new t.Collection;s=i.pick(this.options,["connector"]),i.each(o.perspectives,function(e){a.add(new r(e,s))}),n=a,(o={})[e]=n}return t.Model.prototype.set.call(this,o,s)}});return s.mixin(u.prototype),o.mixin(u.prototype),n.mixin(u.prototype),u}),csui.define("csui/utils/commands/edit.perspective",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/url","csui/models/perspective/perspective.template.model","csui/models/perspective/perspective.model","csui/utils/perspective/perspective.util","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=window.csui.requirejs.s.contexts._.config.config["csui/utils/contexts/perspective"]||{};d=t.extend({"enableInlinePerspectiveEditing":!0,"enablePersonalization":!0},d,e.config());var m,g,p;return s.extend({"defaults":{"signature":"EditPerspective","name":u.EditPerspective},"enabled":function(e,i){var t=e.context||i&&i.context,n=t.perspective;return!!n&&(this._enablePersonalizePage(n,i,t)||this._enableEditPerspective(n)||this._enableCreatePerspective(n,t))},"_enablePersonalizePage":function(e,i,n){var s=(d.enablePersonalization||i.enablePersonalization)&&!n._applicationScope.get("id")&&"flow"===e.get("type");if(!s)return s;var o=e.get("options");return o&&t.every(o.widgets,l.hasWidgetId)},"_enableEditPerspective":function(e){return(e.has("id")||e.has("perspective_id"))&&e.get("canEditPerspective")},"_enableCreatePerspective":function(e,i){return!(e.has("id")||e.has("perspective_id"))&&e.get("canEditPerspective")&&"node"===i._applicationScope.get("id")},"execute":function(e,i){var s=n.Deferred(),o=e.context||i&&i.context,r=o.perspective;return r.has("id")?this._fetchPerspective(o,r).then(t.bind(function(t){t&&this._continueExecution(e,i,s,t)},this),s.reject):this._continueExecution(e,i,s),s.promise()},"_continueExecution":function(e,i,t,n){var s=e.context||i&&i.context,o=s.perspective,r=this._enablePersonalizePage(o,i,s),a=this._enableEditPerspective(o),c=this._enableCreatePerspective(o,s);r?a||c?this._promptToChooseEditPage(e,i,s,t,n):this._doPersonalizePage(e,i,s,t):this._doEditPage(e,i,s,t,n)},"_fetchPerspective":function(e,i){var s=n.Deferred(),o=i.get("id")||i.get("perspective_id");return csui.require(["csui/utils/contexts/factories/connector","csui/dialogs/modal.alert/modal.alert"],t.bind(function(i,n){var r=new a({"id":o},{"connector":e.getObject(i)});r.fetch().then(t.bind(function(){var e=r.get("perspectives");e&&1!=e.length?n.showError(u.editPerspectiveErrorMessage).done(function(){s.resolve()}).fail(s.reject):s.resolve(e.at(0))},this),s.reject)},this)),s.promise()},"_doPersonalizePage":function(e,i,n,s){csui.require(["csui/perspective.manage/pman.view","csui/utils/contexts/factories/node","csui/models/perspective/personalization.model","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/user"],function(i,r,a,c,u,d){var m,g=n.getModel(u);m="node"==g.id?o.getJustOneNode(e)||n.getModel(r):n.getModel(d);var p=m.get("perspective"),f=p.override,v=t.pick(p,"type","options","perspective_version","perspective_id");v=t.defaults(v,t.pick(f,"perspective_version","perspective_id")),v.perspective_id=v.perspective_id||p.id;var h=new a({},{"context":n,"connector":n.getObject(c),"sourceModel":m,"perspective":p});h.setPerspective(v),a.loadPersonalization(m,n).then(function(e){e&&h.setPerspective(e),new i({"context":n,"perspective":h,"mode":l.MODE_PERSONALIZE}).show(),s.resolve()})},s.reject)},"_doEditPage":function(e,i,t,n,s){this._enableEditPerspective(t.perspective)?this._doEditPerspective(e,i,t,n,s):this._enableCreatePerspective(t.perspective,t)&&this._doCreatePerspective(e,i,t,n)},"_doCreatePerspective":function(e,i,t,n){i&&i.inlinePerspectiveEditing||d.enableInlinePerspectiveEditing?this._createInline(e,i,t,n):this._createInClassicPMan(e,i,t,n)},"_doEditPerspective":function(e,i,t,n,s){i&&i.inlinePerspectiveEditing||d.enableInlinePerspectiveEditing?this._editInline(s,t,n):this._editInClassicPMan(e,i,t,n)},"_promptToChooseEditPage":function(e,i,t,n,s){var o=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(r){o.dialog=r.confirmQuestion(u.editPageDialogMessage,u.editPageTitle,{"buttons":{"showYes":!0,"labelYes":u.editPageButton,"showNo":!0,"labelNo":u.personalizePageButton,"showCancel":!0,"labelCancel":u.editPageCancelButton}}).then(function(r){!0===r&&o._doEditPage(e,i,t,n,s)},function(s){!1===s?o._doPersonalizePage(e,i,t,n):n.resolve()})},n.reject)},"_editInline":function(e,i,t){csui.require(["csui/perspective.manage/pman.view"],function(n){var s=i.perspective.get("id")||i.perspective.get("perspective_id"),o=e;o.set("id",s),new n({"context":i,"perspective":o}).show(),t.resolve()},t.reject)},"_editInClassicPMan":function(e,i,t,n){var s=this;csui.require(["csui/utils/contexts/factories/connector"],function(){m=arguments[0];var i=s._getEditForm(t,e);i.submit(),i.remove(),n.resolve()},n.reject)},"_getEditForm":function(e,i){var t=n("<form target='_blank' method='POST' style='display:none;'></form>").attr({"action":this._getUrl(e,i)}).appendTo(document.body),s=this._getEditUrlQueryParameters(e);for(var o in s)s.hasOwnProperty(o)&&n('<input type="hidden" />').attr({"name":o,"value":s[o]}).appendTo(t);return t},"_getUrl":function(e,i){var t=e.getObject(m);return new r(t.connection.url).getCgiScript().toString()+"/perspectivemgr"},"_getEditUrlQueryParameters":function(e){var i=e.perspective.attributes.id;return void 0!==i&&i>0?{"perspective_id":i}:{}},"_preparePerspectiveConfig":function(e){var i={"perspective":{"type":"flow","options":{"widgets":[{"type":"csui/widgets/nodestable"}]}},"overrideType":"genericContainer","scope":"local","containerType":"-1","cascading":"false"},t=o.getJustOneNode(status)||e.getModel(g),n=e.getCollection(p);return i.nodepath=this._getNodePath(n),i.node=t.get("id"),i.containerType=t.get("type"),i.title=t.get("name"),i},"_createInline":function(e,i,t,n){var s=this;csui.require(["csui/utils/contexts/factories/node","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/ancestors","csui/perspective.manage/pman.view"],function(){g=arguments[0],m=arguments[1],p=arguments[2];var e=arguments[3],i=s._preparePerspectiveConfig(t,g,p);i.title=i.title+" "+(new Date).getTime();var o=new c(i,{"connector":t.getObject(m)});new e({"context":t,"perspective":o}).show(),n.resolve()},n.reject)},"_createInClassicPMan":function(e,i,t,n){var s=this;csui.require(["csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node","csui/utils/contexts/factories/ancestors"],function(){m=arguments[0],g=arguments[1],p=arguments[2];var i=s._getCreateForm(t,e);i.submit(),i.remove(),n.resolve()},n.reject)},"_getCreateForm":function(e,i){var t=n("<form target='_blank' method='POST' style='display:none;'></form>").attr({"action":this._getUrl(e,i)}).appendTo(document.body),s=this._getCreateUrlQueryParameters(e,i);for(var o in s)s.hasOwnProperty(o)&&n('<input type="hidden" />').attr({"name":o,"value":s[o]}).appendTo(t);return t},"_getCreateUrlQueryParameters":function(e,i){var t=this._preparePerspectiveConfig(e,g,p);return t.ui={"elements":{"btn-mode-code":!0,"btn-view-general":!0,"btn-view-rules":!1,"btn-view-layout":!0,"btn-view-widgets":!0,"view-perspective-action":!0,"perspective-action-create":!0,"perspective-action-edit":!0,"perspective-action-copy":!0,"view-perspective-form":!0,"perspective-title":!0,"perspective-type":!0,"perspective-scope":!0,"perspective-nodetypes":!0,"perspective-node":!0,"perspective-cascading":!0,"display-size-msg":!1,"rules-code":!0,"layout-flow":!0,"layout-left-center-right":!0,"layout-grid":!1,"layout-tabbed":!1},"widgetGroupsBlacklist":[],"widgetsWhitelist":[],"disableGrouping":!1},{"config":JSON.stringify(t)}},"_getNodePath":function(e){var i="";return e.each(function(e){i+=i?":":"",i+=e.get("name")}),i}})}),csui.define("csui/utils/commands/editwebdav",["csui/lib/jquery.parse.param","csui/utils/commandhelper","csui/utils/url","csui/utils/commands/open.classic.page"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"EditWebDAV","command_key":"editwebdav","scope":"single"},"shouldCloseTabAfterRedirect":!0,"enabled":function(e,t){var n=i.getJustOneNode(e),s=this.get("command_key"),o=this._getNodeActionForSignature(n,s);if(o){var r=e.toolItem||t&&t.toolItem;if(r){var a=o.get("name");if(a)return r.set("name",a),!0}}return!1},"getUrl":function(e,i){var n,o,r=this.get("command_key"),a=this._getNodeActionForSignature(e,r);if(a&&(n=a.get("href")))return new t(n).isAbsolute()||(o=(e.connector||i.connector).connection,n="/"!==n[0]?t.appendQuery(new t(o.url).getCgiScript(),n):t.combine(new t(o.url).getOrigin(),n)),n;throw new Error(s.NoEditUrl)}})}),csui.define("csui/utils/commands/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/utils/commands/nls/root/lang",{"EmailLinkSubject":"I want to share the following links with you","EmailLinkDesktop":"Link for Desktop and Android","EmailAppleLinkFormat":"Link for iOS Mobile","CommandNameReserve":"Reserve","CommandVerbReserve":"reserve","ReservePageLeavingWarning":"If you leave the page now, pending items will not be reserved.","ReserveItemsNoneMessage":"No items reserved.","ReserveOneItemSuccessMessage":"1 item successfully reserved.","ReserveSomeItemsSuccessMessage":"{0} items successfully reserved.","ReserveManyItemsSuccessMessage":"{0} items successfully reserved.","ReserveOneItemFailMessage":"1 item failed to reserve.","ReserveSomeItemsFailMessage":"{0} items failed to reserve.","ReserveManyItemsFailMessage":"{0} items failed to reserve.","CommandNameUnreserve":"Unreserve","CommandVerbUnreserve":"unreserve","UnreservePageLeavingWarning":"If you leave the page now, pending items will not be unreserved.","UnreserveItemsNoneMessage":"No items unreserved.","UnreserveOneItemSuccessMessage":"1 item successfully unreserved.","UnreserveSomeItemsSuccessMessage":"{0} items successfully unreserved.","UnreserveManyItemsSuccessMessage":"{0} items successfully unreserved.","UnreserveOneItemFailMessage":"1 item failed to unreserve.","UnreserveSomeItemsFailMessage":"{0} items failed to unreserve.","UnreserveManyItemsFailMessage":"{0} items failed to unreserve."}),csui.define("csui/utils/commands/email.link",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/utils/command.error","csui/models/command","csui/utils/commandhelper","i18n!csui/utils/commands/nls/lang","i18n!csui/utils/commands/nls/localized.strings","csui/utils/node.info.sprites","csui/lib/underscore.string"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d,m=t.extend({"rewriteApplicationURL":!1,"enableAppleSupport":!1,
"appleNodeLinkBase":"x-otm-as-cs16://?launchUrl=nodes/"},e.config());return r.extend({"defaults":{"signature":"EmailLink","name":l.CommandNameEmailLink,"verb":l.CommandVerbEmailLink},"enabled":function(e){var i=a.getAtLeastOneNode(e);return i&&i.length},"execute":function(e,i){var t=n.Deferred();return csui.require(["csui/utils/node.links/node.links"],function(){d=arguments[0];var n=a.getAtLeastOneNode(e),s=e.context||i&&i.context,o=this._getApplicationUrl(n,s),r=this._getNodesLinks(n,o,s),c="mailto:?subject="+this._getEMailSubject(n)+"&body="+encodeURIComponent(r),l=this._openNewHref(c);l?t.reject(l):t.resolve()}.bind(this),t.reject),t.promise()},"_getEMailSubject":function(e){var i=" ";return e&&1===e.length&&(i=e.first().get("name")),encodeURIComponent(i)},"_getApplicationUrl":function(e){var i=e.first().connector;return s.combine(new s(i.connection.url).getCgiScript(),"/app")},"_openNewHref":function(e){if(e.length>2048)return new o(l.EmailLinkCommandFailedWithTooMuchItemsErrorMessage);window.location.href=e},"_getNodesLinks":function(e,i,t){var s=t&&t.viewStateModel,o=s&&s.get("activeRouterInstance"),r=o&&o.buildUrlParams(),a=m.enableAppleSupport,g=l.EmailAppleLinkFormat,p=c.EmailLinkDesktop+"\n",f=e.map(function(e){var s=e.get("name")+":",o=d.getUrl(e),c="";if(r&&(o+="?"+r),m.rewriteApplicationURL){var l=o.lastIndexOf("#");l>=0&&(o=i+"/"+o.substr(l+1))}if(a){var p=1===e.get("type")?e.original.get("id"):e.get("id");g+="\n"+s+"\n"+m.appleNodeLinkBase+p}return c=s+"\n"+o,u&&u.each(function(i){var s={"NEW_LINE":"\n","context":t,"node":e},o="";try{o=n.trim(i.get("getCustomUrl")(s))}catch(e){console.error(e)}c+=o.length?"\n"+o+"\n":""}),c}).join("\n");return a?p+f+"\n\n"+g:f}})}),csui.define("csui/utils/commands/execute.saved.query",["require","csui/lib/jquery","csui/utils/commandhelper","csui/models/command","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"ExecuteSavedQuery","scope":"single"},"enabled":function(e){var i=t.getJustOneNode(e);return i&&258===i.get("type")&&!1!==i.get("openable")},"execute":function(e,i){var n=t.getJustOneNode(e),s=e.context||i&&i.context;if(n.get("custom_view_search"))return this._openFormInSidepanel(n,s);this._triggerSearchResults(n,s)},"_triggerSearchResults":function(e,t){var n=i.Deferred();return csui.require(["csui/utils/contexts/factories/search.query.factory"],function(i){var s=t.getModel(i);s.clear({"silent":!0}),s.set("query_id",e.get("id")),n.resolve()},n.reject),n.promise()},"_openFormInSidepanel":function(e,t){var n=i.Deferred();return csui.require(["csui/controls/side.panel/side.panel.view","csui/widgets/search.custom/impl/search.object.view","csui/widgets/search.custom/impl/search.customquery.factory"],function(i,o,r){var a=t.getCollection(r,{"attributes":{"id":e.get("id")}});a.ensureFetched().then(function(){var r=a.get("schema"),c=r.title?r.title:e.get("name"),l=new o({"context":t,"model":a,"savedSearchQueryId":e.get("id"),"hideSearchButton":!0,"showInSearchResultsNewPerspective":!0}),u=new i({"slides":[{"title":c,"content":l,"footer":{"buttons":[{"label":s.searchButtonMessage,"type":"action","id":"search-btn","className":"binf-btn binf-btn-primary","disabled":!1}]}}],"sidePanelClassName":"cvs-in-sidepanel"});l.listenTo(l,"render:form",function(){u.triggerMethod("set:focus")}),u.show(),u.listenTo(l,"button:click",function(e){"search-btn"===e.id&&l.loadCustomSearch(),u.hide()}),u.listenTo(l,"enable:search",function(e){l.trigger("update:button","search-btn",{"disabled":!e})}),u.listenTo(l,"click:search",function(){u.hide()}),n.resolve()}).fail(function(){n.reject()})},n.reject),n.promise()}})}),csui.define("csui/utils/commands/favorite.add",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error"],function(e,i,t,n,s,o,r,a){"use strict";return r.extend({"defaults":{"signature":"Favorite","command_key":["favorite","favorite"],"scope":"single","name":s.CommandNameFavorite,"verb":s.CommandVerbFavorite,"doneVerb":s.CommandDoneVerbFavorite},"enabled":function(e,i){if(i&&i.data&&i.data.useContainer)return e.container&&!e.container.get("favorite");var t=o.getAtLeastOneNode(e);return t&&1===t.length&&!t.models[0].get("favorite")},"execute":function(e,t){var n=i.Deferred(),s=e.originatingView;return csui.require(["csui/models/favorite.model","csui/dialogs/modal.alert/modal.alert"],function(i,t){var o;o=e.data&&e.data.useContainer?e.container:e.nodes.models[0];var r=o.get("id");new i({"node":o,"id":r,"selected":!1},{"connector":o.connector}).addToFavorites().done(function(e){o.set("favorite",!0),s.trigger("fav:change"),n.resolve(e)}).fail(function(e){n.reject(new a(e))})},function(e){n.reject(e)}),n.promise()}})}),csui.define("csui/utils/commands/favorite.remove",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error"],function(e,i,t,n,s,o,r,a){"use strict";return r.extend({"defaults":{"signature":"NonFavorite","command_key":["nonfavorite","NonFavorite"],"scope":"single","verb":s.CommandVerbFavorite,"doneVerb":s.CommandRemovedVerbFavorite},"enabled":function(e,i){if(i&&i.data&&i.data.useContainer)return e.container&&e.container.get("favorite");var t=o.getAtLeastOneNode(e);return t&&1===t.length&&t.models[0].get("favorite")},"execute":function(e,t){var n=i.Deferred(),s=e.originatingView;return csui.require(["csui/models/favorite.model","csui/dialogs/modal.alert/modal.alert"],function(i,t){var o;o=e.data&&e.data.useContainer?e.container:e.nodes.models[0];var r=o.get("id");new i({"node":o,"id":r,"selected":!1},{"connector":o.connector}).removeFromFavorites().done(function(e){o.set("favorite",!1),s.trigger("fav:change"),n.resolve(e)}).fail(function(e){n.reject(new a(e))})},function(e){n.reject(e)}),n.promise()}})}),csui.define("csui/utils/commands/inlineedit",["require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper"],function(e,i,t,n,s){"use strict";var o=n.extend({"defaults":{"signature":"InlineEdit","command_key":["rename","Rename"],"scope":"single"},"execute":function(e,i){var n=t.Deferred();return csui.require(["csui/controls/table/inlineforms/inlineform.factory"],function(i){var t=e.nodes&&1===e.nodes.length&&e.nodes.at(0),s=i.getInlineFormView(t.get("type"));s||(s=i.getInlineFormView(-1)),s&&(t.inlineFormView=s,t.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),t.unset("csuiInlineFormErrorMessage")),n.resolve()},function(e){n.reject(e)}),n.promise()}});return i.extend(o,{"version":"1.0"}),o}),csui.define("csui/utils/commands/move",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/utils/url","csui/models/command","csui/utils/commandhelper","csui/utils/command.error","csui/utils/commands/multiple.items"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=e.config();t.defaults(d,{"parallelism":3,"actionType":"MOVE","allowMultipleInstances":!0});var m,g,p,f,v,h,w,b,y=a.extend({});return t.extend(y.prototype,u),y.extend({"defaults":{"signature":"Move","command_key":["move","Move"],"name":s.CommandNameMove,"verb":s.CommandNameVerbMove,"pageLeavingWarning":s.MovePageLeavingWarning,"allowMultipleInstances":d.allowMultipleInstances,"scope":"multiple","successMessages":{"formatForNone":s.MoveItemsNoneMessage,"formatForOne":s.MoveOneItemSuccessMessage,"formatForTwo":s.MoveSomeItemsSuccessMessage,"formatForFive":s.MoveManyItemsSuccessMessage},"errorMessages":{"formatForNone":s.MoveItemsNoneMessage,"formatForOne":s.MoveOneItemFailMessage,"formatForTwo":s.MoveSomeItemsFailMessage,"formatForFive":s.MoveManyItemsFailMessage}},"allowCollectionRefetch":!1,"execute":function(e,i){var o=this,r=n.Deferred(),a=e.context||i&&i.context,l=[];return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,csui.require(["csui/controls/globalmessage/globalmessage","csui/controls/conflict.resolver/conflict.resolver","csui/utils/taskqueue","csui/dialogs/node.picker/impl/header/apply.properties.selector/apply.properties.selector.view","csui/models/fileuploads","csui/utils/page.leaving.blocker","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links"],function(){if(m=arguments[0],g=arguments[1],p=arguments[2],f=arguments[3],v=arguments[4],h=arguments[5],w=arguments[6],b=arguments[7],m.isActionInProgress(d.actionType,s.MoveNotAllowed,s.CommandTitleMove))return r.resolve();o._selectMoveOptions(e,i).done(function(i){var n=e.nodes,s=i.nodes[0],u=i.applyProperties,d=(new Date).getTime();o._announceOperationStart(e);var m=n.map(function(e){var i={"id":e.get("id"),"name":e.get("name"),"container":e.get("container"),"mime_type":e.get("mime_type"),"original_id":e.get("original_id"),"original":e.original,"type":e.get("type"),"size":e.get("size"),"type_name":e.get("type_name"),"state":"pending","count":0,"total":1,"enableCancel":!1,"bundleNumber":d},t=e.get("type");return 144===t||749===t||736===t||30309===t?i.size_formatted=e.get("size_formatted"):140===t&&(i.url=e.get("url")),i.actions=e.actions,i.targetLocation={"id":s.get("id"),"url":b.getUrl(s)},i}),g=t.map(m,function(e){return t.clone(e)});o._resolveNamingConflicts(s,g).done(function(d){t.each(d,function(e){void 0===e.id&&(e.id=t.findWhere(m,{"name":e.name}).id)}),o._metadataHandling(d,t.extend(i,{"context":a,"targetFolder":s})).done(function(){var i=new v(d,{"container":s?s.clone():void 0});i.each(function(e){e.node=n.findWhere({"id":e.get("id")})});var m=e.container&&e.container.connector;if(void 0===m){var g=c.getAtLeastOneNode(e).first();g&&(m=g.connector)}o._moveSelectedNodes(i,m,s,u,e,a).done(function(n){if(n.length){b.getUrl(s)}i.models&&i.models.length>0&&t.each(i.models,function(e){l.push(e.node)}),e.collection&&e.collection.remove(l),o.allowCollectionRefetch=!0,r.resolve(l)}).always(function(){o._announceOperationEnd(e),a.trigger("current:folder:changed")}).fail(function(){r.reject()})}).fail(function(){o._announceOperationEnd(e),r.reject()})}).fail(function(i){i&&i.userAction&&"cancelResolveNamingConflicts"===i.userAction?o.trigger("resolve:naming:conflicts:cancelled"):i&&!i.cancelled&&o.showError(i),o._announceOperationEnd(e),r.reject()})}).fail(function(e){e&&!e.cancelled&&o.showError(e),r.reject()})},r.reject),r.promise()},"_announceOperationStart":function(e){var i=e.originatingView;i.blockActions&&i.blockActions(),h.enable(this.get("pageLeavingWarning"))},"_announceOperationEnd":function(e){h.disable();var i=e.originatingView;i.unblockActions&&i.unblockActions()},"_selectMoveOptions":function(e,i){var o=this,r=n.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(n){var a=!!e.container&&e.container.get("id")===e.nodes.models[0].get("id"),c=e.nodes.length,l=t.str.sformat(c>1?s.DialogTitleMove:s.DialogTitleSingleMove,c),u=t.extend({"command":"move","selectableTypes":[-1],"unselectableTypes":[899],"addableTypes":[0],"showAllTypes":!0,"orderBy":"type asc","dialogTitle":l,"initialContainer":e.nodes.models[0].parent&&e.nodes.models[0].parent.get("id")>0?e.nodes.models[0].parent:e.container,"initialSelection":e.nodes,"startLocation":a?"recent.containers":"","includeCombineProperties":1===c,"propertiesSeletor":!0,"globalSearch":!0,"context":i?i.context:e.context,"startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"resolveShortcuts":!0,"resultOriginalNode":!0,"includeResources":["show_hidden"]},e);o.nodePicker=new n(u),o.originatingView=e.originatingView,o.nodePicker.show().done(function(){r.resolve.apply(r,arguments)}).fail(function(){r.reject.apply(r,arguments)})},function(e){r.reject(e)}),r.promise()},"_resolveNamingConflicts":function(e,i){var n=1===i.length?s.MovingNode:t.str.sformat(s.MovingNodes,i.length);return new g({"h1Label":n,"actionBtnLabel":s.CommandNameMove,"excludeAddVersion":!0,"container":e,"files":i,"originatingView":this.originatingView}).run()},"_metadataHandling":function(e,i){var t=n.Deferred();return this.originatingView&&0===this.originatingView._blockingCounter&&this.originatingView.blockActions(),csui.require(["csui/widgets/metadata/metadata.copy.move.items.controller"],function(n){var s,o=i.openSelectedProperties,r=i.applyProperties,a=new n;if(o)s=a.CopyMoveItemsWithMetadata;else{if(r!==f.APPLY_DESTINATION_PROPERTIES&&r!==f.COMBINE_ALL_PROPERTIES)return t.resolve();s=a.CopyMoveItemsRequiredMetadata}r===f.KEEP_ORIGINAL_PROPERTIES?i.inheritance="original":r===f.APPLY_DESTINATION_PROPERTIES?i.inheritance="destination":r===f.COMBINE_ALL_PROPERTIES&&(i.inheritance="merged"),i.action="move",s.call(a,e,i).done(function(){t.resolve()}).fail(function(e){t.reject(e)})},function(e){o.warn("Failed to load MetadataCopyMoveItemsController. {0}",e)&&console.warn(o.last),t.reject(e)}),t.promise()},"_moveSelectedNodes":function(e,i,o,r,a,c){var u=this,g=new p({"parallelism":d.parallelism}),f=t.map(e.models,function(e){var t=n.Deferred();return g.pending.add({"worker":function(){var n,s=e.attributes;return n=s.extended_data&&s.extended_data.roles?u._moveNodeWithMetadata(s,i,o.get("id"),r):u._moveNode(s,i,o.get("id"),r),n.done(function(){e.set("count",1),e.deferred.resolve(e),t.resolve(e)}).fail(function(i){var n=new l(i);e.deferred.reject(e,n),t.reject(n)}),t.promise()}}),t.promise(f)});return m.showProgressPanel(e,{"oneFileTitle":s.MovingOneItem,"oneFileSuccess":s.MoveOneItemSuccessMessage,"multiFileSuccess":s.MoveManyItemsSuccessMessage,"oneFilePending":s.MovingOneItem,"multiFilePending":s.MovingItems,"oneFileFailure":s.MoveOneItemFailMessage,"multiFileFailure":s.MoveManyItemsFailMessage,"someFileSuccess":s.MoveSomeItemsSuccessMessage,"someFilePending":s.MovingSomeItems,"someFileFailure":s.MoveSomeItemsFailMessage,"locationLabelPending":s.MovingLocationLabel,"locationLabelCompleted":s.MovedLocationLabel,"enableCancel":!1,"actionType":d.actionType,"allowMultipleInstances":d.allowMultipleInstances,"context":c,"nextNodeModelFactory":w}),this._announceOperationEnd(a),n.whenAll.apply(n,f)},"_moveNodeWithMetadata":function(e,i,t,n){var s,o;return s={"parent_id":t,"name":e.newName?e.newName:e.name,"roles":e.extended_data.roles},o={"url":r.combine(i.getConnectionUrl().getApiBase("v2"),"/nodes/",e.id),"method":"PUT","data":s,"contentType":i.getAjaxContentType()},i.makeAjaxCall(o)},"_moveNode":function(e,i,t,n){return this._getCategories(i,e.id,t).then(function(s){var o,a,c;return o={},o[f.KEEP_ORIGINAL_PROPERTIES]="original",o[f.APPLY_DESTINATION_PROPERTIES]="destination",o[f.COMBINE_ALL_PROPERTIES]="merged",a={"parent_id":t,"name":e.newName?e.newName:e.name,"roles":{"categories":s[o[n]]}},c={"url":r.combine(i.getConnectionUrl().getApiBase("v2"),"/nodes/",e.id),"method":"PUT","data":a,"contentType":i.getAjaxContentType()},i.makeAjaxCall(c)})},"_getCategories":function(e,i,t){var s={"url":e.connection.url+"/forms/nodes/move?"+n.param({"id":i,"parent_id":t})};return e.makeAjaxCall(s).then(function(e,i,t){var n=e.forms[1];return n&&n.data||{}})}})}),csui.define("csui/utils/commands/navigate",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/utils/commandhelper","csui/models/command","csui/models/node/node.model","csui/utils/node.links/node.links"],function(e,i,t,n,s,o,r,a){"use strict";var c=i.extend({"openInNewTab":!0},e.config());return o.extend({"defaults":{"signature":"Navigate"},"enabled":function(e){var i=s.getJustOneNode(e);return i&&140===i.get("type")},"execute":function(e,i){var t=s.getJustOneNode(e);return this._navigateTo(t,i)},"_navigateTo":function(e,i){function s(){o||(o=window),o.location.href=a.completeUrl(e,l),o.focus(),u.resolve()}var o,l=e.get("url"),u=t.Deferred();return c.openInNewTab&&(o=window.open("","_blank")),l?s():(e=new r({"id":e.get("id")},{"connector":e.connector,"fields":{"properties":["url"]}}),e.fetch().done(function(){l=e.get("url"),l?s():o&&o.close()}).fail(function(e){o&&o.close(),u.reject(new n.Error(e))})),u.promise()}})}),csui.define("csui/utils/commands/open.plugins/open.plugins",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/commands/open.plugins/open.plugins"],function(e,i,t,n){"use strict";var s=i.Model.extend({"defaults":{"sequence":100,"plugin":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)}});t.mixin(s.prototype);var o=i.Collection.extend({"model":s,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.call(this,e,t)},"findByNode":function(e,i){var t,n;i&&(t=i.openInNewTab,n=i.widgetOnly);var s=this.find(function(i){var s=i.get("plugin");return(!0!==n&&(s.openWindow||s.getUrl||s.getUrlQuery)||!1!==n&&!0!==t&&(s.openWidget||s.createWidget))&&i.matchRules(e,i.attributes)});return s&&s.get("plugin")}}),r=new o;return n&&r.add(e.chain(n).flatten(!0).map(function(i){return e.defaults({"plugin":new i.plugin},i)}).value()),r}),csui.define("csui/utils/commands/open",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/url","csui/models/node.actions","csui/utils/commandhelper","csui/utils/commands/download","csui/utils/commands/open.plugins/open.plugins"],function(e,i,t,n,s,o,r,a,c){"use strict";var l,u,d=t.extend({"openInNewTab":null,"forceDownload":!1},e.config());return a.extend({"defaults":{"signature":"Open","command_key":["default","open","download","Download"],"scope":"single"},"enabled":function(e){var i=r.getJustOneNode(e);if(!i)return!1;var n=i.get("type");return!(!n||!t.contains(["144","749","736"],n.toString()))},"execute":function(e,i){var t=this._getNode(e);if(d.forceDownload)return this._downloadContent(t,i,"download");var n=c.findByNode(t,{"openInNewTab":d.openInNewTab});return n?this._checkPermission(t).then(function(e){return e?this._openContent(t,i,n):this._showOverview(t,i)}.bind(this)):this._downloadContent(t,i,"download")},"_openContent":function(e,i,t){if(d.openInNewTab)return this._openWindow(t,e,window.open(""),i);if(t.widgetView)return this._openWidget(t.widgetView,e,i);var n=!1===d.openInNewTab?window:window.open("");return this._openWindow(t,e,n,i)},"_openWidget":function(e,i,t){var s=n.Deferred();return csui.require(["csui/utils/commands/impl/full.page.modal/full.page.modal.view",e],function(e,n){new e({"view":new n({"context":t.context,"model":i})}).on("destroy",function(){s.resolve()}).show()},s.reject),s.promise()},"_openWindow":function(e,i,t,s){var o=n.Deferred(),r=this;return csui.require(["csui/utils/open.authenticated.page"],function(){l=arguments[0],(e.getUrl&&e.getUrl(i)||e.getUrlQuery(i)).then(function(n){return r._openURL(e,i,t,n,s)},function(e){return t!==window&&t.close(),o.reject(e),n.Deferred().reject()}).then(function(){t.focus(),o.resolve()})},o.reject),o.promise()},"_openURL":function(e,i,t,o,r){var a=i.connector||r.connector;return e.getUrl||(o=s.appendQuery(new s(a.connection.url).getCgiScript(),s.combineQueryString(o))),e.needsAuthentication&&e.needsAuthentication(i)?l(a,o,{"window":t,"openInNewTab":d.openInNewTab}):(t.location.href=o,n.Deferred().resolve().promise())},"_checkPermission":function(e){var i=new o(void 0,{"connector":e.connector,"nodes":[e.get("id")],"commands":["open","download"]});return i.fetch().then(function(){var t=e.get("id"),n=i.get(t);return!(!n.actions.get("open")&&!n.actions.get("download"))})},"_showOverview":function(e,i){var t=n.Deferred();return csui.require(["csui/utils/contexts/factories/next.node"],function(){u=arguments[0];var t=i.context.getModel(u),n=e.get("id");t.set("id",n)},t.reject),t.promise()}})}),csui.define("csui/utils/commands/open.discussion",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenDiscussion"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&215===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"view","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.milestone",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenMilestone"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&212===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"BrowseMilestone","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.channel",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenChannel"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&207===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"ViewChannel","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.news",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenNews"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&208===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"ViewNews","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.poll",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenPoll"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&218===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"OpenPoll","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.prospector",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenProspector"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&384===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"ProspectorBrowse","objId":e.get("id"),"order":"-SCORE","summaries":1,"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.specific.classic.page",["csui/utils/commands/open.classic.page","csui/utils/commandhelper","csui/utils/classic.nodes/classic.nodes"],function(e,i,t){"use strict";return e.extend({"defaults":{"signature":"OpenSpecificClassicPage"},"enabled":function(e){var n=i.getJustOneNode(e);return n&&!1!==n.get("openable")&&t.isSupported(n)},"getUrl":function(e,i){return t.getUrl(e)}})}),csui.define("csui/utils/commands/open.specific.node.perspective",["csui/utils/commands/open.node.perspective","csui/utils/commandhelper","csui/utils/smart.nodes/smart.nodes"],function(e,i,t){"use strict";return e.extend({"defaults":{"signature":"OpenSpecificNodePerspective"},"enabled":function(e){var n=i.getJustOneNode(e);return n&&!1!==n.get("openable")&&t.isSupported(n)}})}),csui.define("csui/utils/commands/open.task",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenTask"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&206===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"BrowseTask","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.taskgroup",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenTaskGroup"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&205===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"BrowseTaskGroup","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.tasklist",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenTaskList"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&204===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"BrowseTaskList","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.topic",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"OpenTopic"},"enabled":function(i){var t=e.getJustOneNode(i),n=t&&t.get("type");return 130===n||134===n},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"view","objId":e.get("id"),"show":1,"nexturl":location.href}}})}),csui.define("csui/utils/commands/permissions",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/command.error","csui/utils/commandhelper","csui/models/command","csui/models/nodes"],function(e,i,t,n,s,o,r,a,c,l){"use strict";return c.extend({"defaults":{"signature":"permissions","command_key":["permissions","Permissions"],"scope":"multiple","commands":"csui/utils/commands"},"execute":function(e,i){var s,r=this,a=n.Deferred(),c=e.nodes,l=e.container,u=!0,d=e.originatingView?e.originatingView.$el.closest(".cs-metadata-navigation-wrapper"):[];c&&c.first()===l?(c=l,u=!1):(s=this._getAtLeastOneNode(e),c=c.first());var m=e.context||i&&i.context;return csui.require(["csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view","csui/widgets/metadata/metadata.view","csui/controls/dialog/dialog.view","csui/widgets/permissions/permissions.view",this.get("commands")],function(g,p,f,v,h){var w,b=(c.get("id"),e.data&&!!e.data.dialogView);if(e.originatingView instanceof g?(e.originatingView.mdv&&e.originatingView.mdv.model.get("shortcutNode")&&(c.attributes.shortcutNode=e.originatingView.mdv.model.get("shortcutNode")),w=new p({"model":c,"originatingView":e.originatingView,"containerCollection":e.collection,"context":m,"commands":h,"showCloseIcon":!e.originatingView,"showBackIcon":!e.originatingView,"activeTab":e.originatingView.mdv&&e.originatingView.mdv.metadataTabView&&e.originatingView.mdv.metadataTabView.options.activeTab,"selectedTab":e.originatingView.mdv&&e.originatingView.mdv.metadataTabView&&e.originatingView.mdv.metadataTabView.tabLinks.selected,"showPermissionView":!0})):u&&e.collection&&e.collection.models&&e.collection.models.length>0?w=new g({"container":l,"containerCollection":e.collection,"collection":s,"selected":c,"originatingView":e.originatingView,"context":m,"commands":h,"isExpandedView":e.originatingView&&!!e.originatingView.options.isExpandedView,"nameAttribute":i?i.nameAttribute:void 0,"showCloseIcon":!e.originatingView,"selectedTab":e.selectedTab,"showPermissionView":!0}):(e.originatingView&&void 0===e.originatingView.supportOriginatingView&&(e.originatingView.supportOriginatingView=!0),w=new p({"model":c,"originatingView":e.originatingView,"targetView":e.originatingView,"context":m,"commands":h,"showCloseIcon":!e.originatingView,"showBackIcon":!!e.originatingView,"selectedTab":e.selectedTab,"showPermissionView":!0}),e.originatingView&&(e.originatingView.permissionsView=w)),e.originatingView instanceof g)e.originatingView.mdv&&e.originatingView.mdv.metadataTabView&&(e.originatingView.mdv.destroy(),e.originatingView.showPermissionView=!0,w.render(),o.triggerMethodOn(w,"before:show"),e.originatingView.$el.find(".metadata-content").append(w.el),o.triggerMethodOn(w,"show"));else if(e.originatingView&&!b){var y,_,M=e.originatingView.$el;M.width();M.parent().append("<div class='cs-permissions-wrapper'></div>"),_=n(M.parent().find(".cs-permissions-wrapper")[0]),_.hide(),w.render(),o.triggerMethodOn(w,"before:show"),_.append(w.el),M=M.parent().find(".cs-properties-wrapper").length>0?M.parent().find(".cs-properties-wrapper"):M,M.hide("blind",{"direction":"left","complete":function(){_.show("blind",{"direction":"right","complete":function(){e.originatingView.metadataView&&(M.parent().find(".cs-properties-wrapper").remove(),e.originatingView.metadataView&&e.originatingView.metadataView.destroy()),o.triggerMethodOn(w,"show")}},100)}},100),M.promise().done(function(){e.originatingView.isDisplayed=!1}),y=function(){d.length>0&&d.removeClass("cs-metadata-no-bg-color"),_.hide("blind",{"direction":"right","complete":function(){e.originatingView.$el.show("blind",{"direction":"left","complete":function(){e.originatingView.metadataView&&e.originatingView.metadataView.destroy(),e.originatingView.permissionsView&&e.originatingView.permissionsView.destroy(),e.originatingView.triggerMethod("dom:refresh"),e.originatingView.isDisplayed=!0,!!e.collection&&(e.collection.requireSwitched=!1),e.originatingView.trigger("permissions:view:destroyed")}},100),w.destroy(),_.remove(),a.resolve()}},100)},r.listenTo(w,"metadata:close",t.bind(y,r)),r.listenTo(w,"metadata:close:without:animation",function(){M.show("blind",{"direction":"left","complete":function(){e.originatingView.triggerMethod("dom:refresh"),!!e.collection&&(e.collection.requireSwitched=!1)}},100),w.destroy(),_.remove(),a.resolve()})}else w.metadataTabView&&(w.metadataTabView.options.isExpandedView=!0),r.dialog=new f({"className":"cs-permissions","largeSize":!0,"view":w}),r.dialog.show(),r.dialog.ui.header.hide(),r.dialog.listenTo(w,"metadata:close",function(){r.dialog.destroy(),a.resolve()}),r.dialog.listenTo(w,"metadata:close:without:animation",function(){r.dialog.destroy(),a.resolve()})}),a.promise()},"_getAtLeastOneNode":function(e){return e.nodes?1===e.nodes.length&&e.collection?e.collection:e.nodes:new l}})}),csui.define("csui/utils/commands/properties",["module","require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/command.error","csui/utils/commandhelper","csui/models/command","csui/models/nodes"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";return c.extend({"defaults":{"signature":"Properties","command_key":["properties","Properties"],"openable":!0,"scope":"multiple","commands":"csui/utils/commands"},"_executeWithSaveState":function(e,i){var t=n.Deferred();return csui.require(["csui/utils/contexts/factories/metadata.factory"],function(n){var s,o=e.context||i&&i.context,r=o.getModel(n),c=a.getJustOneNode(e)||e.nodes&&e.nodes.at(0),l=e.container,u=e.nodes,d=!0;u&&u.first()===l?d=!1:s=this._getAtLeastOneNode(e),r.set("metadata_info",{"id":c.get("id"),"model":c,"navigator":d,"collection":s,"selectedTab":e.selectedTab,"selectedProperty":e.selectedProperty,"isThumbnailView":e.originatingView.thumbnailView}),t.resolve()}.bind(this),function(e){t.reject(e)}),t.promise()},"_isInMetadataPerspective":function(e){var i=n.Deferred();return csui.require(["csui/utils/contexts/factories/metadata.factory"],function(n){var s=e.getModel(n),o=s.get("metadata_info");o&&t.keys(o).length>0?i.resolve():i.reject()}.bind(this),function(e){i.reject(e)}),i.promise()},"_executeWithoutSaveState":function(e,i){var s,a=e.context||i&&i.context,c=this,l=n.Deferred(),u=e.nodes,d=e.container,m=!0;u&&u.first()===d?(u=d,m=!1):s=this._getAtLeastOneNode(e);var g=e.originatingView||i&&i.originatingView;return csui.require(["csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view","csui/widgets/metadata/metadata.view","csui/controls/dialog/dialog.view","csui/models/nodeversions",this.get("commands")],function(r,p,f,v,h){var w,b=e.data&&!!e.data.dialogView;if(m?e.collection&&e.collection.models&&e.collection.models.length>0?w=new r({"container":d,"containerCollection":e.collection,"collection":s,"selected":u,"originatingView":g,"context":a,"commands":h,"nameAttribute":i?i.nameAttribute:void 0,"showCloseIcon":!g,"selectedTab":e.selectedTab,"selectedProperty":e.selectedProperty,"showThumbnails":e.showThumbnails,"disableViewState":!0}):(g&&void 0===g.supportOriginatingView&&(g.supportOriginatingView=!0),w=new p({"model":u.get("id")?u:u.models[0],"originatingView":g,"targetView":g,"context":a,"commands":h,"showCloseIcon":!g,"showBackIcon":!!g,"selectedTab":e.selectedTab,"selectedProperty":e.selectedProperty,"disableViewState":!0}),
g&&(g.metadataView=w)):(g&&void 0===g.supportOriginatingView&&(g.supportOriginatingView=!0),w=new p({"model":u,"originatingView":g,"targetView":g,"context":a,"commands":h,"showCloseIcon":!g,"showBackIcon":!!g,"selectedTab":e.selectedTab,"selectedProperty":e.selectedProperty,"disableViewState":!0}),g&&(g.metadataView=w)),g instanceof r&&!(e.collection instanceof v))g.mdv&&g.mdv.metadataTabView&&(w=null,g.showPermissionView=!1,g._showNode(u.get("id")?u:u.models[0]));else if(g&&!b){g.triggerMethod("metadata:created",w);var y,_,M=g.$el;M.width();M.parent().append("<div class='cs-properties-wrapper'></div>"),M.parent().addClass("csui-node-properties-wrapper"),_=n(M.parent().find(".cs-properties-wrapper")[0]),_.hide(),w.render(),o.triggerMethodOn(w,"before:show"),_.append(w.el),M=M.parent().find(".cs-permissions-wrapper").length>0?M.parent().find(".cs-permissions-wrapper"):M,M.hide("blind",{"direction":"left","complete":function(){_.show("blind",{"direction":"right","complete":function(){g.permissionsView&&(M.parent().find(".cs-permissions-wrapper").remove(),g.permissionsView&&g.permissionsView.destroy()),o.triggerMethodOn(w,"show")}},100)}},100),M.promise().done(function(){g.isDisplayed=!1}),y=function(){_.hide("blind",{"direction":"right","complete":function(){g.$el.show("blind",{"direction":"left","complete":function(){g.metadataView&&g.metadataView.destroy(),g.permissionsView&&g.permissionsView.destroy(),g.triggerMethod("dom:refresh"),g.isDisplayed=!0,!!e.collection&&(e.collection.requireSwitched=!1),g.trigger("properties:view:destroyed")}},100),M.parent().removeClass("csui-node-properties-wrapper"),w.destroy(),_.remove(),l.resolve()}},100)},c.listenTo(w,"metadata:close",t.bind(y,c)),c.listenTo(w,"metadata:close:without:animation",function(){M.show("blind",{"direction":"left","complete":function(){g.triggerMethod("dom:refresh"),!!e.collection&&(e.collection.requireSwitched=!1)}},100),w.destroy(),_.remove(),l.resolve()})}else c.dialog=new f({"className":"cs-properties","largeSize":!0,"view":w}),c.dialog.show(),c.dialog.ui.header.hide(),c.dialog.listenTo(w,"metadata:close",function(){c.dialog.destroy()}),c.dialog.listenTo(w,"metadata:close:without:animation",function(){c.dialog.destroy()}),c.dialog.listenTo(c.dialog,"before:hide",function(){l.resolve()})},function(e){l.reject(new r(e))}),l.promise()},"_isPermissionsView":function(e){return e&&e.permissionsView&&document.body.contains(e.permissionsView.el)},"_isPermissionsExplorer":function(e){return e.el&&e.el.parentNode.classList.contains("cs-permissions-wrapper")},"execute":function(e,i){var n=e.context||i&&i.context;return e.originatingView&&n&&n.viewStateModel&&n.viewStateModel.get("history")&&n.viewStateModel.get("enabled")&&!t.isUndefined(e.originatingView.enableMetadataPerspective)&&e.originatingView.enableMetadataPerspective&&!this._isPermissionsView(e.originatingView)&&!this._isPermissionsExplorer(e.originatingView)?this._executeWithSaveState(e,i):this._executeWithoutSaveState(e,i)},"_getAtLeastOneNode":function(e){var i=new l;return e.nodes?1===e.nodes.length&&e.collection?e.collection.findWhere({"id":e.nodes.models[0].get("id")})?e.collection:(i.add(e.nodes.models[0]),i.add(e.collection.models),i):e.nodes:i}})}),csui.define("csui/utils/commands/rename",["csui/models/command"],function(e){"use strict";return e.extend({"defaults":{"signature":"Rename","command_key":["rename","Rename"],"scope":"single"},"rename":function(e,i){return e.save({"name":i},{"wait":!0,"patch":!0})}})}),csui.define("csui/utils/commands/rename.favorite",["require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper"],function(e,i,t,n,s){"use strict";var o=n.extend({"defaults":{"signature":"FavoriteRename","command_key":["favorite_rename"],"scope":"single"},"execute":function(e,i){var n=t.Deferred();return csui.require(["csui/controls/table/inlineforms/favorite/favorite.view"],function(i){var t=e.nodes&&1===e.nodes.length&&e.nodes.at(0);t.inlineFormView=i,t.set("csuiInlineFormErrorMessage","dummy",{"silent":!0}),t.unset("csuiInlineFormErrorMessage"),n.resolve()},function(e){n.reject(e)}),n.promise()}});return i.extend(o,{"version":"1.0"}),o}),csui.define("csui/utils/commands/reserve",["require","module","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/lang","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/models/command"],function(e,i,t,n,s,o,r,a,c){"use strict";var l=i.config();return t.defaults(l,{"parallelism":2}),a.extend({"defaults":{"signature":"ReserveDoc","command_key":["reserve","ReserveDoc"],"name":s.CommandNameReserve,"verb":o.CommandVerbReserve,"pageLeavingWarning":o.ReservePageLeavingWarning,"scope":"multiple","successMessages":{"formatForNone":s.ReserveItemsNoneMessage,"formatForOne":s.ReserveOneItemSuccessMessage,"formatForTwo":s.ReserveSomeItemsSuccessMessage,"formatForFive":s.ReserveManyItemsSuccessMessage},"errorMessages":{"formatForNone":s.ReserveItemsNoneMessage,"formatForOne":s.ReserveOneItemFailMessage,"formatForTwo":s.ReserveSomeItemsFailMessage,"formatForFive":s.ReserveManyItemsFailMessage}},"enabled":function(e,i){var t=r.getAtLeastOneNode(e);if(t&&t.length){if(t.some(function(e){return e.has("versions")&&!1===e.get("versions").current_version}))return!1}return c.prototype.enabled.apply(this,arguments)},"_performAction":function(e,i){var t=n.Deferred();return e.isReservedClicked=!0,csui.require(["csui/utils/contexts/factories/user"],function(n){var s=i.context.getModel(n);s.ensureFetched().then(function(){return r.updateNode(e,{"reserved_user_id":s.get("id")})}).then(t.resolve,t.reject)},t.reject),t.promise()}})}),csui.define("csui/utils/commands/run.livereport",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){return i.extend({"defaults":{"signature":"RunLiveReport"},"enabled":function(i){var t=e.getJustOneNode(i);return t&&299===t.get("type")},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":"RunReport","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/utils/commands/sign.out",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/url","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a){"use strict";var c,l,u=t.extend({"signInPageUrl":"signin.html"},e.config());return s.extend({"defaults":{"signature":"SignOut","name":a.SignOutCommandName},"execute":function(e,i){var t=n.Deferred(),s=e.context||i&&i.context,o=this;return csui.require(["csui/utils/contexts/factories/connector","csui/utils/routing"],function(){c=arguments[0],l=arguments[1],o._signOut(s).done(t.resolve).fail(t.reject)},t.reject),t.promise()},"_signOut":function(e){var i=e.getObject(c),t=new r(i.connection.url).getCgiScript();if(l.routesWithSlashes())return i.makeAjaxCall({"url":r.combine(t,"api/v1/auth/logouttoken")}).then(function(e){i.authenticator.unauthenticate({"reason":"logged-out"}),location.href=t+"?func=csui.dologout&secureRequestToken="+encodeURIComponent(e.token)});i.authenticator.unauthenticate({"reason":"logged-out"});var s=u.signInPageUrl,o=location.search;return o+=o?"&":"?",o+="nextUrl="+encodeURIComponent(location.pathname),location.href=s+o+location.hash,n.Deferred().resolve().promise()}})}),csui.define("csui/utils/commands/switch.to.classic",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","csui/utils/url","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commands/open.classic.page","csui/utils/classic.nodes/classic.nodes"],function(e,i,t,n,s,o,r,a,c,l){"use strict";var u,d,m=t.extend({"enabled":!0,"openInNewTab":null},e.config());return null==m.openInNewTab&&(m.openInNewTab=c.openInNewTab),s.extend({"defaults":{"signature":"SwitchToClassic","name":a.SwitchToClassicCommandName},"enabled":function(e,i){if(!m.enabled)return!1;var t=e.context||i&&i.context,n=t.getModel("applicationScope");return""===(n=n&&n.get("id"))||"node"===n},"execute":function(e,i){var t=n.Deferred(),s=e.context||i&&i.context,o=m.openInNewTab&&window.open("","_blank")||window,r=this;return o.focus(),csui.require(["csui/utils/contexts/factories/connector","csui/utils/contexts/factories/node"],function(){u=arguments[0],d=arguments[1],o.location.href=r._getUrl(s,e),t.resolve()},t.reject),t.promise()},"_getUrl":function(e,i){var t=e.getObject(u),n=new r(t.connection.url).getCgiScript(),s=this._getUrlQueryParameters(e,i),o=r.combineQueryString(s);return r.appendQuery(n,o)},"_getUrlQueryParameters":function(e,i){var t,n=o.getJustOneNode(i)||e.getModel(d),s=l.find(function(e){return e.matchRules(n,e.attributes)}),r=s&&s.get("urlQuery");return void 0!==n&&n.get("id")>0?(t={"func":"ll","objId":n.get("id")},r?"string"==typeof r?t=l._replaceParameters(s.get("urlQuery"),n.attributes):"function"==typeof r&&(t=r(n)):n.get("container")?(t.objAction="browse",t.viewType=1):t.objAction="properties"):t={"classicview":""},t}})}),csui.define("csui/utils/commands/unreserve",["i18n!csui/utils/commands/nls/lang","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/models/command"],function(e,i,t,n,s){"use strict";return n.extend({"defaults":{"signature":"UnreserveDoc","command_key":["unreserve","UnreserveDoc"],"name":e.CommandNameUnreserve,"verb":i.CommandVerbUnreserve,"pageLeavingWarning":i.UnreservePageLeavingWarning,"scope":"multiple","successMessages":{"formatForNone":e.UnreserveItemsNoneMessage,"formatForOne":e.UnreserveOneItemSuccessMessage,"formatForTwo":e.UnreserveSomeItemsSuccessMessage,"formatForFive":e.UnreserveManyItemsSuccessMessage},"errorMessages":{"formatForNone":e.UnreserveItemsNoneMessage,"formatForOne":e.UnreserveOneItemFailMessage,"formatForTwo":e.UnreserveSomeItemsFailMessage,"formatForFive":e.UnreserveManyItemsFailMessage}},"enabled":function(e,i){var n=t.getAtLeastOneNode(e);if(n&&n.length){if(n.some(function(e){return e.has("versions")&&!1===e.get("versions").current_version}))return!1}return s.prototype.enabled.apply(this,arguments)},"_performAction":function(e,i){return e.isUnreservedClicked=!0,t.updateNode(e,{"reserved_user_id":null})}})}),csui.define("csui/utils/commands/user.profile",["require","csui/lib/jquery","csui/models/command","csui/utils/base","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s){"use strict";return t.extend({"defaults":{"signature":"UserProfile","name":s.UserProfileCommandName},"enabled":function(e,i){var t=e.toolItem||i&&i.toolItem;if(t){var s=e.context||i&&i.context,o=s.getModel("user"),r=n.formatMemberName(o);t.set("name",r)}return!0},"execute":function(e,t){var n=i.Deferred(),s=e.context||t&&t.context;return csui.require(["csui/utils/contexts/factories/user","esoc/controls/userwidget/userwidget.view"],function(e,i){var t=s.getModel(e),o=t.get("id");new i({"model":t,"connector":t.connector,"userid":o,"context":s,"baseElement":void 0,"showUserProfileLink":!0,"showMiniProfile":!1,"enableSimpleSettingsModel":!0,"enableUploadProfilePicture":!0,"loggedUserId":o,"showUserSettings":!0}).showUserProfileDialog(),n.resolve()},n.reject),n.promise()}})}),csui.define("csui/utils/commands/versions/delete",["require","module","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/versions/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/delete"],function(e,i,t,n,s,o,r){"use strict";var a=r.extend({"defaults":{"signature":"VersionDelete","command_key":["versions_delete"],"name":s.CommandNameVersionDelete,"verb":s.CommandVerbVersionDelete,"pageLeavingWarning":s.DeleteVersionPageLeavingWarning,"scope":"multiple","successMessages":{"formatForNone":s.DeleteVersionItemsNoneMessage,"formatForOne":s.DeleteVersionOneItemSuccessMessage,"formatForTwo":s.DeleteVersionSomeItemsSuccessMessage,"formatForFive":s.DeleteVersionManyItemsSuccessMessage},"errorMessages":{"formatForNone":s.DeleteVersionItemsNoneMessage,"formatForOne":s.DeleteVersionOneItemFailMessage,"formatForTwo":s.DeleteVersionSomeItemsFailMessage,"formatForFive":s.DeleteVersionManyItemsFailMessage}},"enabled":function(e,i){if(!a.__super__.enabled.apply(this,arguments))return!1;var t=o.getAtLeastOneNode(e);return t.length>0&&e.container&&e.container.versions&&e.container.versions.allModels&&t.length<e.container.versions.allModels.length},"_getConfirmData":function(e,i){var n=o.getAtLeastOneNode(e);return e.originatingView.blockActions=!1,{"title":s.DeleteCommandConfirmDialogTitle,"message":1===n.length?t.str.sformat(s.VersionDeleteCommandConfirmDialogSingleMessage,n.at(0).get("version_number_name"),e.container.get("name")):t.str.sformat(s.VersionDeleteCommandConfirmDialogMultipleMessage,n.length)}},"startGlobalMessage":function(e){csui.require(["csui/controls/globalmessage/globalmessage"],function(i){i.showFileUploadProgress(e,{"oneFileTitle":s.DeletingOneVersion,"oneFileSuccess":s.DeleteVersionOneItemSuccessMessage,"multiFileSuccess":s.DeleteVersionManyItemsSuccessMessage,"oneFilePending":s.DeletingOneVersion,"multiFilePending":s.DeleteVersions,"oneFileFailure":s.DeleteVersionOneItemFailMessage,"multiFileFailure":s.DeleteVersionManyItemsFailMessage2,"someFileSuccess":s.DeleteVersionSomeItemsSuccessMessage,"someFilePending":s.DeletingSomeVersions,"someFileFailure":s.DeleteVersionSomeItemsFailMessage2,"enableCancel":!1})})}});return a}),csui.define("csui/utils/commands/versions/download",["csui/utils/commands/download","csui/utils/url","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t){"use strict";return e.extend({"defaults":{"signature":"VersionDownload","command_key":["versions_download"],"name":t.CommandNameDownload,"verb":t.CommandVerbDownload,"doneVerb":t.CommandDoneVerbDownload,"scope":"single"},"_getContentUrl":function(e,t,n,s){return i.combine(e.connector.connection.url,"nodes",e.get("id"),"versions",e.get("version_number"),"content")+"?action="+n+"&token="+encodeURIComponent(s)}})}),csui.define("csui/utils/commands/versions/open",["csui/utils/commands/open","csui/utils/url"],function(e,i){"use strict";return e.extend({"defaults":{"signature":"VersionOpen","command_key":["versions_open"],"scope":"single"},"_getContentUrl":function(e,t,n,s){return i.combine(e.connector.connection.url,"nodes",e.get("id"),"versions",e.get("version_number"),"content")+"?action="+n+"&token="+encodeURIComponent(s)}})}),csui.define("csui/utils/commands/versions/properties",["csui/utils/commands/properties","csui/models/version"],function(e,i){"use strict";return e.extend({"defaults":{"signature":"VersionProperties","command_key":"versions_properties","scope":"multiple","commands":"csui/utils/commands/versions"},"_getAtLeastOneNode":function(e){return e.collection&&1===e.nodes.length?e.collection:e.nodes}})}),csui.define("csui/utils/commands/versions/promote.version",["csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/versions/nls/localized.strings","csui/utils/commandhelper","csui/models/command","csui/models/version","csui/utils/base","csui/utils/url"],function(e,i,t,n,s,o,r,a){"use strict";return s.extend({"defaults":{"signature":"PromoteVersion","command_key":["versions_promote"],"name":t.CommandNamePromoteVersion,"verb":t.CommandVerbPromoteVersion,"scope":"single"},"enabled":function(e,i){var t=n.getAtLeastOneNode(e).models;return t&&1===t.length&&e.container&&e.container.get("advanced_versioning")},"execute":function(e,t){var n=i.Deferred();return this._confirmAction(e,t).done(function(){n.resolve()}).fail(function(){n.reject()}),n.promise()},"_confirmAction":function(e,s){function o(e,i){var t=[];(e.actions.findRecursively("download")||e.actions.findRecursively("Download"))&&t.push({"signature":"versions_download"},{"signature":"versions_open"}),(e.actions.findRecursively("delete")||e.actions.findRecursively("Delete"))&&t.push({"signature":"versions_delete"}),(e.actions.findRecursively("properties")||e.actions.findRecursively("Properties"))&&t.push({"signature":"versions_properties"}),i.actions.reset(t)}e.originatingView.blockActions();var c=i.Deferred(),l=e.container,u=n.getJustOneNode(e).clone(),d=e.container&&e.container.connector;return csui.require(["csui/controls/globalmessage/globalmessage"],function(i){var n={};u.save(void 0,{"data":n,"type":"POST","wait":!0,"url":a.combine(d.getConnectionUrl().getApiBase("v2"),"/nodes/"+u.get("id")+"/versions/"+u.get("version_number")+"/promote")}).done(function(){u.fetch().done(function(){(l.versions||l.attributes&&l.attributes.versions)&&(u.isLocallyCreated=!0,o(l,u),!!l.versions&&l.versions.add(u,{"at":0}),Array.isArray(l.get("versions"))&&!!l.attributes&&!!l.attributes.versions&&l.attributes.versions.push(u.attributes)),c.resolve(),i.showMessage("success",t.MessageVersionPromoted)})}).fail(function(e){if(c.reject(),e){var t=new r.Error(e);i.showMessage("error",t.message)}}).always(function(){e.originatingView.unblockActions()})}),c.promise()}})}),csui.define("csui/utils/commands/versions",["csui/lib/underscore","csui/models/commands","csui/utils/commands/versions/delete","csui/utils/commands/versions/download","csui/utils/commands/versions/open","csui/utils/commands/versions/properties","csui/utils/commands/versions/promote.version","csui-ext!csui/utils/commands/versions"],function(e,i,t,n,s,o,r,a){"use strict";var c=new i([new t,new n,new s,new o,new r]);return a&&c.add(e.chain(a).flatten(!0).map(function(e){return new e}).value()),c}),csui.define("csui/utils/commands/filter",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/utils/base","csui/utils/commandhelper","csui/models/command"],function(e,i,t,n,s,o,r){"use strict";return r.extend({"defaults":{"signature":"Filter"},"enabled":function(i){return!1!==e.config().enabled&&(!(!i.container||!i.container.get("container"))&&this._isSupported(i.container))},"_isSupported":function(e){var i=[136,298];return-1===t.inArray(e.get("type"),i)}})}),csui.define("csui/utils/accessibility",["module"],function(e){"use strict";var i=e.config().enabled||!1,t=e.config().accessibleTable||!1;return{"isAccessibleMode":function(){return i},"isAccessibleTable":function(){return i||t}}}),csui.define("csui/utils/commands/description.toggle",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/utils/commands/node","csui/utils/command.error","csui/utils/accessibility"],function(e,i,t,n,s,o,r,a,c){"use strict";var l=c.isAccessibleTable();return r.extend({"defaults":{"signature":"ToggleDescription","command_key":["description","description"],"scope":"single","name":s.CommandDescriptionToggle},"enabled":function(e,i){return!(l||!e.collection||e.thumbnailViewState)&&(e.originatingView&&e.originatingView.options.showDescriptions&&(e.toolItem.attributes.name=s.CommandHideDescription),void 0!==e.collection.find(function(e){return!!e.get("description")}))},"execute":function(e,i){var t,n=e.originatingView,o=n.$el.find('li[data-csui-command="toggledescription"]'),r=o.find("a");n.options.showDescriptions?(n.options.showDescriptions=!1,t=s.CommandShowDescription,r.attr("title",t).attr("aria-label",t)):(n.options.showDescriptions=!0,t=s.CommandHideDescription,r.attr("title",t).attr("aria-label",t)),n.trigger("csui.description.toggled",{"showDescriptions":n.options.showDescriptions})}})}),csui.define("csui/utils/commands/thumbnail.toggle",["module","require","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/lib/underscore","csui/models/command","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a){"use strict";var c=e.config();o.defaults(c,{"enableGridView":!1});return r.extend({"defaults":{"signature":"Thumbnail","command_key":["thumbnail","thumbnail"],"scope":"single","name":"Thumbnail"},"enabled":function(e,i){return!(!e.collection||!c.enableGridView)&&(e.thumbnailViewState&&(e.toolItem.attributes.icon="icon icon-switch_list",e.toolItem.attributes.svgId="themes--carbonfiber--image--generated_icons--action_switch_list32",e.toolItem.attributes.name=a.ListViewTitle,e.toolItem.attributes.title=a.ListViewTitle),!0)},"execute":function(e,i){var n,s=e.originatingView||i&&i.originatingView;return e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,s.thumbnailViewState?(n=a.ThumbnailTitle,s.$el.find(".binf-glyphicon-th-list").removeClass("binf-glyphicon-th-list").addClass("binf-glyphicon-th-large"),s.$el.find(".binf-glyphicon-th-large").parent().attr("title",n).attr("aria-label",n)):(n=a.ListViewTitle,s.$el.find(".binf-glyphicon-th-large").addClass("binf-glyphicon-th-list").removeClass("binf-glyphicon-th-large"),s.$el.find(".binf-glyphicon-th-list").parent().attr("title",n).attr("aria-label",n)),s.$el.find('.csui-configuration-view .binf-dropdown-menu li[data-csui-command="thumbnail"] a').attr("title",n).contents().first().replaceWith(n),t.Deferred().resolve(e.collection).promise()}})}),csui.define("csui/utils/commands/save.filter",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/url","csui/models/command","csui/models/node/node.model"],function(e,i,t,n,s,o,r,a){"use strict";var c=e.config();t.defaults(c,{"parallelism":3});var l,u,d,m;return r.extend({"defaults":{"signature":"SaveFilter","command_key":["savefilter","SaveFilter"],"name":s.CommandNameSaveFilter,"verb":s.CommandVerbSaveFilter},"execute":function(e,i){var r=this,c=n.Deferred(),g=e.context||i&&i.context;return e.suppressSuccessMessage=!0,csui.require(["csui/controls/globalmessage/globalmessage","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links"],function(){l=arguments[0],u=arguments[1],d=arguments[2],m=arguments[3],r._selectSaveFilterOptions(e,i).done(function(i){var r=e.nodes,p=e.facets,f=i.nodes[0],v=i.filterName,h=e.connector.getConnectionUrl().getApiBase("v2"),w=[];n.each(p.filters,function(e,i){var t=[],s=[];i.values instanceof Array&&(n.each(i.values,function(e,i){t.push(i.id)}),s.push(i.id),s.push(t),w.push(s))});var b={"type":899,"location_id":r.models[0].get("id"),"name":v,"parent_id":f.get("id"),"selected_facets":w},y={"url":o.combine(h,"/nodes"),"type":"POST","data":b,"contentType":"application/x-www-form-urlencoded"};e.connector.makeAjaxCall(y).done(function(e){c.resolve(e.results);var i=e.results.data.properties.id,n=new a({"id":i},{"connector":g.getObject(u)}),o=e.results.data.properties.name,r=t.str.sformat(s.SaveFilterCommandSuccessfully,o),p={"context":g,"nextNodeModelFactory":d,"link_url":m.getUrl(n),"targetFolder":n};l.showMessage("success_with_link",r,void 0,p)}).fail(function(e){if(c.reject(e),e&&e.responseText){var i=JSON.parse(e.responseText);l.showMessage("error",i.error)}})}).fail(function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise()},"_selectSaveFilterOptions":function(e,i){var o=this,r=n.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(n){var a=e.nodes.length,c=t.extend({"command":"savefilter","selectableTypes":[-1],"showAllTypes":!0,"orderBy":"type asc","dialogTitle":s.DialogTitleSaveFilter,"initialContainer":e.container||e.nodes.models[0].parent,"initialSelection":e.nodes,"startLocation":"","includeCombineProperties":1===a,"propertiesSeletor":!1,"saveFilter":!0,"globalSearch":!0,"context":i?i.context:e.context,"startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"resolveShortcuts":!0,"resultOriginalNode":!0},e);o.nodePicker=new n(c),o.nodePicker.show().done(function(){r.resolve.apply(r,arguments)}).fail(function(e){r.reject.apply(r,arguments)})},function(e){r.reject(e)}),r.promise()}})}),csui.define("csui/utils/commands/maximize.widget.view",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/models/command"],function(e,i,t,n,s,o,r){"use strict";return r.extend({"defaults":{"signature":"MaximizeWidgetView","scope":"single"},"enabled":function(e,t){return i("body").hasClass("csui-support-maximize-widget")&&!1===i("body").hasClass("csui-maximized-widget-mode")},"execute":function(e,i){e.context.trigger("maximize:widget",{"widgetView":e.originatingView})}})}),csui.define("csui/utils/commands/restore.widget.size",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/models/command"],function(e,i,t,n,s,o,r){"use strict";return r.extend({"defaults":{"signature":"RestoreWidgetViewSize","scope":"single"},"enabled":function(e,t){return!this.checkMaximizeMode(e)&&(i("body").hasClass("csui-support-maximize-widget")&&!0===i("body").hasClass("csui-maximized-widget-mode"))},"checkMaximizeMode":function(e){return e&&e.context&&e.context.perspective&&e.context.perspective.get("showWidgetInMaxMode")},"execute":function(e,i){e.context.trigger("restore:widget:size",{"widgetView":e.originatingView})}})}),csui.define("csui/utils/commands/permissions/apply.permission",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r){"use strict";t.extend({},e.config());return s.extend({"defaults":{"signature":"ApplyPermission"},"enabled":function(e){o.getJustOneNode(e);return!1},"execute":function(e,i){var t=n.Deferred();return csui.require(["csui/controls/globalmessage/globalmessage"],function(e){t.resolve(),e.showMessage("success","Applied permissions to sub-items")},t.reject),t.promise()}})}),csui.define("csui/utils/commands/permissions/permission.util",["module","require","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o){"use strict";function r(e,i){var s;e.results.success>0&&0===e.results.failure?s=t.str.sformat(1===e.results.success?o.AppliedPermissionsOneSuccess:o.AppliedPermissionsOnlySuccess,e.results.success):e.results.success>0&&e.results.failure>0?s=t.str.sformat(o.AppliedPermissionsSuccessAndFailure,e.results.success,e.results.failure):0===e.results.success&&e.results.failure>0&&(s=t.str.sformat(1===e.results.failure?o.AppliedPermissionsOneFailure:o.AppliedPermissionsOnlyFailure,e.results.failure));for(var r=n.Model.extend({"defaults":{"name":"","state":"pending","commandName":"ViewPermission"}}),a=[],c=n.Collection.extend({"model":r}),l=new c,u=0;e.results.failure>0&&u<e.results.data.length;u++)a[u]=new r({"name":e.results.data[u].name,"mime_type":"","state":"rejected"}),l.add(a[u]);var d=e.results.success>0&&e.results.failure>0?e.results.success:"",m=t.str.sformat(o.ApplyingManyItemsSuccessMessage,d),g=d>0?m:" ";e.results.failure>0&&i.showPermissionApplyingProgress(l,{"oneFileFailure":g+o.ApplyingOneItemFailMessage,"someFileFailure":g+t.str.sformat(o.ApplyingManyItemsFailMessage2,a.length),"multiFileFailure":g+t.str.sformat(o.ApplyingManyItemsFailMessage2,a.length)}),e.results.success>0&&e.results.failure<=0&&i.showMessage("success",s||o.AppliedPermissions)}return{"generateSuccessMessage":r}}),csui.define("csui/utils/commands/permissions/edit.permission",["module","require","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/utils/base","csui/models/command","csui/utils/commandhelper","csui/utils/command.error","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commands/permissions/permission.util"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";t.extend({},e.config());return r.extend({"defaults":{"signature":"EditPermission","command_key":["editpermissions","Edit Permissions"]},"enabled":function(e){var i=e.model,t=i&&i.get("right_id_expand")&&i.get("right_id_expand").type,n=i&&i.collection,s=i&&i.get("right_id"),o=i&&i.get("type"),r=e.filterId,a=e.nodeModel||e.originatingView&&e.originatingView.model,c=a&&a.actions&&!!a.actions.get({"signature":"editpermissions"});return!([0,1].indexOf(t)<0&&"custom"===o)&&!r&&o&&(s||"public"===o)&&n&&n.options&&n.options.node&&!!n.options.node.get("id")&&c},"execute":function(e,i){var t=this,n=s.Deferred(),o=e.model,r=o.collection,a=e.targetView;t.targetView=a,e.suppressFailMessage=!0,e.suppressSuccessMessage=!0;var d=this._getMessageWithUserDisplayName(l.EditPermissionCommandFailMessage,o),m=r&&r.options&&r.options.node&&r.options.node.actions.get({"signature":"editpermissions"});return r&&m?(o.nodeId=r.options&&r.options.node&&r.options.node.get("id"),csui.require(["csui/widgets/permissions/impl/edit/edit.permission.helper","csui/utils/contexts/factories/user","csui/controls/globalmessage/globalmessage","csui/utils/permissions/permissions.precheck"],function(i,s,r,a){var l=e.originatingView.context.getModel(s);t.loginUserId=l.get("id"),t.editPermissionHelper=new i({"permissionModel":o,"popoverPlacement":"left","popoverAtBodyElement":!e.originatingView||!e.originatingView.options.isExpandedView,"popoverTargetElement":e.targetView.permissions.$el,"readonly":!1,"originatingView":e.originatingView,"applyTo":e.applyTo}),t.editPermissionHelper._showSelectPermissionLevelPopover(),t.editPermissionHelper.listenTo(t.editPermissionHelper,"permissions:selected",function(i){var s={"permissions":i.permissions,"apply_to":i.apply_to,"include_sub_types":i.apply_to>0?a.includeSubTypes():[]};i.right_id&&(s.right_id=i.right_id),o.save(s,{"patch":!0,"wait":!0,"silent":!0}).done(function(i){o.set(s,{"silent":!0}),e.originatingView.trigger("permission:changed",e),t.editPermissionHelper.destroy(),t.editPermissionHelper.unblockActions(),n.resolve(),"simple"!==e.originatingView.model.get("permissions_model")&&u.generateSuccessMessage(i,r)}).fail(function(e){var i=e?new c(e,o):e;r.showMessage("error",i),n.reject(o,i)})}),t.editPermissionHelper.listenTo(t.editPermissionHelper,"closed:permission:level:popover",function(){n.reject(o)})}),n.promise()):n.reject(new c(d,{"errorDetails":l.undefinedCollection}))},"_getMessageWithUserDisplayName":function(e,i){var n;return i.get("right_id_expand")?n=o.formatMemberName(i.get("right_id_expand")):"public"===i.get("type")&&(n=l.publicAccess),t.str.sformat(e,n)}})}),csui.define("csui/utils/commands/permissions/change.owner.permission",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/models/command","csui/utils/command.error","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r){"use strict";i.extend({},e.config());return s.extend({"defaults":{"signature":"ChangeOwnerPermission","scope":"single"},"enabled":function(e){var i=e.model,t=i&&i.get("right_id_expand")&&i.get("right_id_expand").type,n=i&&i.get("type"),s=e.nodeModel||e.originatingView&&e.originatingView.model,o=n&&("owner"===n||"group"===n)&&s&&s.actions&&!!s.actions.get({"signature":"editpermissions"}),a=o&&"owner"===n?r.ChangeOwnerPermissionCommand:r.ChangeOwnerGroupPermissionCommand,c=[0,1],l=c.indexOf(t)<0&&"custom"===n;return"group"===n&&e.toolItem.attributes&&e.toolItem.attributes.icon&&(e.toolItem.attributes.icon="icon icon-group-change"),e.toolItem&&e.toolItem.set("name",a),!l&&o},"execute":function(e,s){var a=t.Deferred(),c=e.model,l=c.get("type"),u=c.collection,d=c.get("right_id_expand"),m=e.targetView.$el,g=this;g.targetView=e.originatingView.permissionsContentView;var p=u&&u.options&&u.options.node&&u.options.node.actions.get({"signature":"editpermissions"});if(!u||!p){var f=i.str.sformat(r.EditPermissionCommandFailMessage,r.Owner);return a.reject(new o(f,{"errorDetails":r.undefinedCollection}))}return c.nodeId=u.options&&u.options.node&&u.options.node.get("id"),csui.require(["csui/controls/table/inlineforms/permissions/user.picker/user.picker.view","csui/utils/contexts/factories/member","csui/models/permission/nodepermission.model","csui/utils/contexts/factories/user","csui/utils/permissions/permissions.precheck"],function(i,t,s,r,u){var p=e.originatingView.context.getModel(r);g.loginUserId=p.get("id")
;var f=e.context.getModel(t),v=new i({"context":e.options?e.options.context:e.context,"userPickerModel":f,"currentRow":m,"connector":e.connector,"memberFilter":{"type":"owner"===l?[0]:[1]}});m.addClass("csui-changeowner-permission"),m.find(".member-info").addClass("binf-hidden");var h=new n.Region({"el":m.find(".csui-inline-owner-change")});h.show(v),v.listenTo(v,"change:completed",function(e){h.currentView.destroy(),a.resolve()}),v.listenTo(v,"member:selected:save",function(e){var i=(s.getReadPermissions(),{"permissions":c.get("permissions"),"right_id":e.get("id"),"include_sub_types":u.includeSubTypes()});c.set({"right_id_expand":e},{"silent":!0}),c.save(i,{"patch":!0,"wait":!0,"silent":!0}).done(function(){c.set(i,{"silent":!0}),h.currentView.destroy(),m.removeClass("csui-changeowner-permission"),m.find(".member-info").removeClass("binf-hidden"),a.resolve()}).fail(function(e){var i=e?new o(e,c):e;c.set({"right_id_expand":d},{"silent":!0}),a.reject(c,i)})})}),a.promise()}})}),csui.define("csui/utils/commands/permissions/delete.permission",["module","require","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/models/command","csui/utils/commandhelper","csui/utils/command.error","csui/utils/commands/confirmable","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d,m=(n.extend({},e.config()),r.extend({"defaults":{"signature":"DeletePermission","scope":"single"},"allowCollectionRefetch":!1,"_getConfirmTemplate":function(e,i){return n.template(u.DeleteCommandConfirmDialogHtml)},"_getConfirmData":function(e,i){var t=e.model,n=u.DeletePermissionCommandConfirmDialogSingleMessage;"public"===t.get("type")&&(n=u.DeletePermissionCommandConfirmDialogPublicAccessMessage);var s=this._getMessageWithUserDisplayName(n,t);return{"title":this._getMessageWithUserDisplayName(u.DeletePermissionCommandConfirmDialogTitle,t),"message":s}},"_getMessageWithUserDisplayName":function(e,i){var t;i.get("right_id_expand")?t=o.formatMemberName(i.get("right_id_expand")):"public"===i.get("type")&&(t=u.publicAccess);return i.get("results")&&i.get("results").success>0?n.str.sformat(e,t,o.formatMessage(i.get("results").success,u)):n.str.sformat(e,t)},"enabled":function(e){var i=e.model,t=i&&i.get("right_id_expand")&&i.get("right_id_expand").type,n=i&&i.collection,s=i&&i.get("right_id"),o=i&&i.get("type"),r=e.filterId,a=e.nodeModel||n&&n.options&&n.options.node||e.originatingView&&e.originatingView.model,c=!r&&o&&(s||"public"===o)&&a.get("id")&&a.actions&&!!a.actions.get({"signature":"editpermissions"}),l=[0,1],u=l.indexOf(t)<0&&"custom"===o;return c&&this.setCommandTitle(e.toolItem,i),!u&&c},"setCommandTitle":function(e,i){var t,n=i.get("type");t="owner"===n?u.DeletePermissionCommandRemoveOwner:"group"===n?u.DeletePermissionCommandRemoveGroup:"public"===n?u.DeletePermissionCommandRemovePublicAccess:u.DeletePermissionCommandRemoveOther,e.set("name",t)}}));return n.extend(m.prototype,l,{"execute":function(e,i){var n=t.Deferred(),s=this;return i||(i={}),e.suppressFailMessage=!0,e.suppressSuccessMessage=!0,csui.require(["csui/controls/globalmessage/globalmessage","csui/widgets/permissions/impl/edit/apply.permission/apply.permission.view","csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view","csui/controls/progressblocker/blocker","csui/controls/dialog/dialog.view","csui/utils/permissions/permissions.precheck"],function(t,o,r,a,c,l){d=t,e.originatingView&&e.originatingView.model&&e.originatingView.model.get("container")?(i.removePermission=!0,s._executeDeletePermission(e,i,r,o,a,c,l).then(n.resolve,n.reject)):s._deletePermission(e,i).then(n.resolve,n.reject)},n.reject),n.promise()},"_deletePermission":function(e,i){return i||(i={}),this._performActions(e,i)},"_executeDeletePermission":function(e,i,s,o,r,a,c){i||(i={});var l=t.Deferred();this.originatingView=e.originatingView;var d=new s({"removePermission":!0,"permissionModel":e.model});this._view=new o({"context":e.context,"model":e.originatingView.model,"permissionModel":e.model,"removePermission":!0,"applyTo":e.applyTo,"includeSubTypes":c.includeSubTypes(),"originatingView":e.originatingView});var m=new a({"headerView":d,"view":this._view,"className":"csui-permissions-apply-dialog","midSize":!0,"buttons":[{"id":"apply","label":u.applyButtonLabel,"default":!0,"click":function(e){this._performActions(e).then(l.resolve,l.reject)}.bind(this)},{"label":u.cancelButtonLabel,"close":!0}]});return m.listenTo(m,"hide",n.bind(this.onHideDialog,this)),r.imbue(m),m.show(),l.promise()},"onHideDialog":function(){var e=this.originatingView;e&&e.trigger("unblock:view:actions")},"_performActions":function(e,i){var n=this,s=t.Deferred(),o=e.dialog?e.dialog.options.view.options.permissionModel:e.model,r=o.get("type"),a=o.collection,l=this._getMessageWithUserDisplayName(u.DeletePermissionCommandFailMessage,o);if(a&&a.options&&a.options.node&&a.options.node.actions.get({"signature":"editpermissions"})){o.nodeId=a.options&&a.options.node&&a.options.node.get("id");var m=a.options&&a.options.node&&a.options.node.get("container"),g=a.options&&a.options.node&&a.options.node.get("permissions_model");e.dialog&&(o.apply_to=m&&"advanced"===g&&e.dialog.options.view.subFolderSelected?2:m&&"advanced"===g?3:0,o.include_sub_types=o.apply_to>0?e.dialog&&e.dialog.options.view.options.includeSubTypes:[]),n.originatingView&&n.originatingView.blockActions&&(n.destroyDialog(e),n.originatingView.blockActions());var p=o.destroy({"wait":!0}).done(function(e){o.set("results",e.results),n.originatingView&&n.originatingView.trigger("permission:changed",n),n.originatingView&&n.originatingView.unblockActions&&n.originatingView.unblockActions();var i=n._getMessageWithUserDisplayName(o.get("results")&&o.get("results").success>0?u.DeletePermissionCommandSuccessMessageWithCount:u.DeletePermissionCommandSuccessMessage,o);d.showMessage("success",i),"owner"!==r&&"group"!==r||a.processForEmptyOwner&&a.processForEmptyOwner(),s.resolve(o)}).fail(function(e){var i=e?new c(e,o):e;n.handleFailure(i,l),s.reject(o,i),e||p.abort()}).always(function(){n.originatingView&&n.originatingView.unblockActions&&n.originatingView.unblockActions()});return s.promise()}return n.destroyDialog(e),s.reject(new c(l,{"errorDetails":u.undefinedCollection}))},"handleFailure":function(e,i){var t,n=s.Model.extend({"defaults":{"name":"","state":"pending","commandName":"ViewPermission"}}),o=s.Collection.extend({"model":n}),r=new o;t=new n({"name":e,"mime_type":"","state":"rejected"}),r.add(t),d.showPermissionApplyingProgress(r,{"oneFileFailure":i})},"destroyDialog":function(e){e.dialog&&e.dialog.destroy()}}),m}),csui.define("csui/utils/commands/permissions/add.user.group",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/base","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/models/command","csui/utils/command.error"],function(e,i,t,n,s,o,r,a,c){"use strict";var l,u,d=e.config();return a.extend({"defaults":{"signature":"adduserorgroup","name":o.CommandNameAddUserorGroup},"enabled":function(e){return d&&d.GrantAccessGroupOnly&&e.toolItem&&e.toolItem.set({"name":o.addGroups}),!0},"execute":function(e,i){var s=this,o=n.Deferred();e.context||i&&i.context;return e.suppressSuccessMessage=!0,csui.require(["csui/models/permission/nodepermission.model","csui/utils/permissions/permissions.precheck","csui/controls/globalmessage/globalmessage","csui/dialogs/modal.alert/modal.alert"],function(n,r){l=arguments[2],u=arguments[3],s._selectAddUserOrGroupOptions(e,i).done(function(i){var a=i.members,u=i.permissions,d={"right_id":a.get("id"),"permissions":u,"apply_to":i.apply_to,"include_sub_types":i.apply_to>0?r.includeSubTypes():[]},m=new n(d,e);m.nodeId=e.nodeId,e.originatingView&&e.originatingView.blockActions&&e.originatingView.blockActions(),m.save(d,{"silent":!0,"wait":!0}).done(function(){m.set({"right_id_expand":t.clone(a.attributes),"type":"custom"},{"silent":!0}),l.showMessage("success",s._getMessageWithUserDisplayName(m)),e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions(),o.resolve(m)}).fail(function(i){var t=i?new c(i,m):i;e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions(),l.showMessage("error",t),o.reject(m,t)})}).fail(function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise()},"_selectAddUserOrGroupOptions":function(e,i){var s=n.Deferred();return csui.require(["csui/dialogs/members.picker/members.picker.wizard"],function(i){var n=e.originalCollection&&e.originalCollection.models&&e.originalCollection.models.length>0?e.originalCollection.models:e.permissionCollection.models;n=t.filter(n,function(e){return"custom"===e.get("type")});var r=d&&d.GrantAccessGroupOnly;new i({"command":"adduserorgroup","context":e.context,"connector":e.connector,"dialogClass":"cs-permission-group-picker","displayName":r?o.allGroups:o.allUsersAndGroups,"dialogTitle":r?o.allGroups:o.addUsersAndGroups,"startLocation":r?"all.groups":"all.members","adduserorgroup":!0,"nodeModel":e.nodeModel,"addButtonLabel":o.AddButtonLabel,"availablePermissions":e.permissionCollection.availablePermissions,"startLocations":r?["all.groups","member.groups"]:["all.members","member.groups"],"unselectableMembers":n,"applyTo":e.applyTo}).show().done(function(){s.resolve.apply(s,arguments)}).fail(function(e){s.reject.apply(s,arguments)})},function(e){s.reject(e)}),s.promise()},"_getMessageWithUserDisplayName":function(e){var i;e.get("right_id_expand")&&(i=s.formatMemberName(e.get("right_id_expand")));return e.get("results")&&e.get("results").success>0?t.str.sformat(o.AddUserOrGroupSuccessWithCount,i,s.formatMessage(e.get("results").success,o)):t.str.sformat(o.AddUserOrGroupSuccess,i)}})}),csui.define("csui/utils/commands/permissions/add.owner.group",["module","require","csui/lib/underscore","csui/lib/jquery","csui/utils/base","i18n!csui/utils/commands/nls/localized.strings","csui/utils/log","csui/models/command","csui/utils/command.error"],function(e,i,t,n,s,o,r,a,c){"use strict";var l,u,d=e.config();return a.extend({"defaults":{"signature":"addownerorgroup","name":o.CommandNameAddOwnerOrOwnerGroup},"enabled":function(e){var i=e.originalCollection?e.originalCollection:e.permissionCollection,t=i.findWhere({"type":"owner"}),n=t&&null===t.get("permissions"),s=!i.findWhere({"type":"group"}),r=i&&e.nodeModel&&e.nodeModel.actions&&!!e.nodeModel.actions.get({"signature":"editpermissions"})&&(n||s||!t),a=e.authUser&&e.authUser.get("privilege_system_admin_rights");return!a&&d&&(d.AdminRestoreOwner&&d.AdminRestoreOwnerGroup||!n&&s&&d.AdminRestoreOwnerGroup||!n&&!s&&d.AdminRestoreOwner)&&(r=a),r&&e.toolItem&&(n?a?e.toolItem.set("name",o.AddOwnerOrGroup):d&&d.AdminRestoreOwner?d&&!d.AdminRestoreOwnerGroup&&e.toolItem.set("name",o.AddOwnerGroup):d&&d.AdminRestoreOwnerGroup?e.toolItem.set("name",o.AddOwner):e.toolItem.set("name",o.AddOwnerOrGroup):s?e.toolItem.set("name",o.AddOwnerGroup):e.toolItem.set("name",o.AddOwner)),r},"execute":function(e,i){var s=this,o=n.Deferred();e.context||i&&i.context;return e.suppressSuccessMessage=!0,csui.require(["csui/models/permission/nodepermission.model","csui/utils/permissions/permissions.precheck","csui/controls/globalmessage/globalmessage","csui/dialogs/modal.alert/modal.alert"],function(n,r){l=arguments[2],u=arguments[3],s._selectAddOwnerOrOwnerGroupOptions(e,i).done(function(i){var a=i.members,u=i.permissions,d=0===a.get("type")?"owner":"group",m={"type":d,"right_id":a.get("id"),"permissions":u,"apply_to":i.apply_to,"include_sub_type":i.apply_to>0?r.includeSubTypes():[]},g={"right_id":a.get("id"),"apply_to":i.apply_to,"permissions":u},p=new n(m,e);p.nodeId=e.nodeModel?e.nodeModel.get("id"):e.nodeId,e.originatingView&&e.originatingView.blockActions&&e.originatingView.blockActions(),p.save(g,{"patch":!0,"silent":!0,"wait":!0}).done(function(){p.set({"right_id_expand":t.clone(a.attributes),"type":d,"addOwnerGroup":!0},{"silent":!0}),e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions(),l.showMessage("success",s._getMessageWithUserDisplayName(p)),o.resolve(p)}).fail(function(i){var t=i?new c(i,p):i;e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions(),l.showMessage("error",t),o.reject(p,t)})}).fail(function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise()},"_selectAddOwnerOrOwnerGroupOptions":function(e,i){var t,s,r,a,c=n.Deferred(),l=e.originalCollection?e.originalCollection.findWhere({"type":"owner"}):e.permissionCollection.findWhere({"type":"owner"}),u=o.allUsersAndGroups,m=e.authUser||e.originatingView.options.authUser||e.context&&e.context._user;return l&&null===l.get("permissions")?(t=[0,1],s=o.AddOwnerOrGroupDialogTitle,r="all.members",a=["all.members","member.groups"],d&&d.AdminRestoreOwner&&!d.AdminRestoreOwnerGroup&&!m.get("privilege_system_admin_rights")?(r="all.groups",u=o.allGroups,t=[1],a=["all.groups","member.groups"]):d&&!d.AdminRestoreOwner&&d.AdminRestoreOwnerGroup&&!m.get("privilege_system_admin_rights")&&(r="all.members",u=o.allUsersAndGroups,t=[0],a=["all.members","member.groups"])):(t=l?[1]:[0],s=l?o.AddOwnerGroupDialogTitle:o.AddOwnerDialogTitle,u=l?o.allGroups:u,r=l?"all.groups":"all.members",a=l?["all.groups","member.groups"]:["all.members","member.groups"]),csui.require(["csui/dialogs/members.picker/members.picker.wizard"],function(i){new i({"command":"addownerorownergroup","context":e.context,"connector":e.connector,"dialogClass":"cs-permission-group-picker","displayName":u,"dialogTitle":s,"startLocation":r,"nodeModel":e.nodeModel,"availablePermissions":e.permissionCollection.availablePermissions,"adduserorgroup":!0,"addButtonLabel":o.AddButtonLabel,"startLocations":a,"selectableTypes":t,"applyTo":e.applyTo}).show().done(function(){c.resolve.apply(c,arguments)}).fail(function(e){c.reject.apply(c,arguments)})},function(e){c.reject(e)}),c.promise()},"_getMessageWithUserDisplayName":function(e){var i;e.get("right_id_expand")&&(i=s.formatMemberName(e.get("right_id_expand")));return e.get("results")&&e.get("results").success>0?t.str.sformat(o.AddUserOrGroupSuccessWithCount,i,s.formatMessage(e.get("results").success,o)):t.str.sformat(o.AddUserOrGroupSuccess,i)}})}),csui.define("csui/utils/commands/permissions/restore.public.access",["module","require","csui/lib/underscore","csui/lib/jquery","i18n!csui/utils/commands/nls/localized.strings","csui/utils/base","csui/utils/log","csui/models/command","csui/utils/command.error"],function(e,i,t,n,s,o,r,a,c){"use strict";var l,u=e.config();return a.extend({"defaults":{"signature":"restorepublicaccess","name":s.CommandNameRestorePublicAccess},"enabled":function(e){var i=e.originalCollection?e.originalCollection:e.permissionCollection,t=e.nodeModel||i&&i.options&&i.options.node,n=t&&t.actions.get({"signature":"editpermissions"}),s=e.authUser||e.context&&e.context._user;return u&&u.AdminRestorePublic&&(n=s&&s.get("privilege_system_admin_rights")),i&&n&&!i.findWhere({"type":"public"})},"execute":function(e){var i,t,o=this,r=n.Deferred(),a=e.permissionCollection,u=e.nodeModel||a.node||e.originatingView&&e.originatingView.model;return csui.require(["csui/models/permission/nodepermission.model","csui/widgets/permissions/impl/edit/apply.permission/apply.permission.view","csui/widgets/permissions/impl/edit/apply.permission/impl/header/apply.permission.header.view","csui/controls/progressblocker/blocker","csui/controls/dialog/dialog.view","csui/controls/globalmessage/globalmessage","csui/utils/permissions/permissions.precheck"],function(n,a,d,m,g,p,f){l=p,u&&u.get("container")?o._executeApplyPermission(e,u,d,a,m,g,n,f).then(r.resolve,r.reject):(i=new n({"type":"public"},e),t={"permissions":n.getReadPermissions()},i.nodeId=e.nodeId,e.originatingView&&e.originatingView.blockActions&&e.originatingView.blockActions(),i.save(t,{"patch":!0,"wait":!0}).done(function(){i.set({"publicAccess":!0},{"silent":!0}),e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions();var t=o._getMessageWithUserDisplayName(i.get("results")&&i.get("results").success>0?s.RestorePublicAccessSuccessMessageWithCount:s.RestorePublicAccessSuccessMessage,i);l.showMessage("success",t),r.resolve(i)}).fail(function(t){var n=t?new c(t,i):t;e.originatingView&&e.originatingView.unblockActions&&e.originatingView.unblockActions(),l.showMessage("error",n),r.reject(i,n)}))}),r.promise()},"_executeApplyPermission":function(e,i,o,r,a,c,l,u){var d=n.Deferred();this.originatingView=e.originatingView;var m=new o({"restorePublicAccess":!0});this._view=new r({"context":e.context,"model":i,"permissionModel":new l({"type":"public"},e),"permissions":l.getReadPermissions(),"includeSubTypes":u.includeSubTypes(),"collection":e.permissionCollection,"applyTo":e.applyTo,"removePermission":!1,"originatingView":e.originatingView,"restorePublicAccess":!0});var g=new c({"headerView":m,"view":this._view,"className":"csui-permissions-apply-dialog","midSize":!0,"buttons":[{"id":"apply","label":s.applyButtonLabel,"default":!0,"click":function(e){this._performActions(e).then(d.resolve,d.reject)}.bind(this)},{"label":s.cancelButtonLabel,"close":!0}]});return g.listenTo(g,"hide",t.bind(this.onHideDialog,this)),a.imbue(g),g.show(),d.promise()},"onHideDialog":function(){var e=this.originatingView;e&&e.trigger("unblock:view:actions")},"_performActions":function(e){var i,t=this,o=n.Deferred(),r=e.dialog?e.dialog.options.view.options.permissionModel:e.model,a=e.dialog&&e.dialog.options.view.options.permissions,u=e.dialog&&e.dialog.options.view.options.originatingView,d=e.dialog.options.view.model,m=e.dialog&&e.dialog.options.view.options.collection,g=d&&d.get("container"),p=d&&d.get("permissions_model");return t.originatingView=u,e.dialog&&(r.apply_to=g&&"advanced"===p&&e.dialog.options.view.subFolderSelected?2:g&&"advanced"===p?3:0,r.include_sub_types=r.apply_to>0?e.dialog&&e.dialog.options.view.options.includeSubTypes:[]),i={"permissions":a,"apply_to":r.apply_to,"include_sub_types":r.include_sub_types},r.nodeId=d.get("id"),t.originatingView&&t.originatingView.blockActions&&t.originatingView.blockActions(),r.save(i,{"patch":!0,"wait":!0}).done(function(){r.set({"publicAccess":!0},{"silent":!0}),t.destroyDialog(e),m.addPublicAccess(r),t.originatingView&&t.originatingView.unblockActions&&t.originatingView.unblockActions();var i=t._getMessageWithUserDisplayName(r.get("results")&&r.get("results").success>0?s.RestorePublicAccessSuccessMessageWithCount:s.RestorePublicAccessSuccessMessage,r);l.showMessage("success",i),o.resolve(r)}).fail(function(i){var n=i?new c(i,r):i;t.destroyDialog(e),t.originatingView&&t.originatingView.unblockActions&&t.originatingView.unblockActions(),l.showMessage("error",n),o.reject(r,n)}),o.promise()},"_getMessageWithUserDisplayName":function(e,i){var n;"public"===i.get("type")&&(n=s.publicAccess);return i.get("results")&&i.get("results").success>0?t.str.sformat(e,n,o.formatMessage(i.get("results").success,s)):t.str.sformat(e,n)},"destroyDialog":function(e){e.dialog&&e.dialog.destroy()}})}),csui.define("csui/utils/commands/personalize.page",["module","require","csui/lib/underscore","csui/lib/jquery","csui/models/command","csui/utils/commandhelper","i18n!csui/utils/commands/nls/localized.strings"],function(e,i,t,n,s,o,r){"use strict";var a=t.extend({"enablePersonalization":!0},a,e.config());return s.extend({"defaults":{"signature":"PersonalizePage","name":r.personalizePage},"enabled":function(e,i){var t=e.context||i&&i.context,n=t.perspective;return a.enablePersonalization&&n&&"flow"===n.get("type")},"execute":function(e,i){var t=e.context||i&&i.context;if(i&&i.enablePersonalization||a.enablePersonalization)return this._initPersonalization(e,i,t)},"_initPersonalization":function(e,i,t){var s=n.Deferred();return csui.require(["csui/perspective.manage/pman.view","csui/utils/contexts/factories/node","csui/models/perspective/personalization.model"],function(i,n,r){var a=o.getJustOneNode(e)||t.getModel(n),c=t.perspective.toJSON(),l=new r(c,{"node":a,"context":t});l.fetch().then(function(){new i({"context":t,"perspective":l,"mode":i.MODE_PERSONALIZE}).show(),s.resolve()})},s.reject),s.promise()}})}),csui.define("csui/utils/commands/version.settings",["csui/models/command"],function(e){"use strict";return e.extend({"defaults":{"signature":"VersionsControl","command_key":["versionscontrol"],"scope":"single","name":"VersionsSettings"}})}),csui.define("csui/temporary/cop/commands/open.blog",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){"use strict";return i.extend({"defaults":{"signature":"OpenBlog"},"enabled":function(i){var t=e.getJustOneNode(i),n=t&&t.get("type");return 356===n||357===n},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":356===e.get("type")?"view":"viewincontainer","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/temporary/cop/commands/open.faq",["csui/lib/jquery","csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i,t){"use strict";return t.extend({"defaults":{"signature":"OpenFAQ"},"enabled":function(e){var t=i.getJustOneNode(e),n=t&&t.get("type");return 123475===n||123476===n},"getUrlQueryParameters":function(i,t){var n=123475===i.get("type"),s=e.param({"func":"ll","objAction":"view","objId":n?i.get("id"):i.get("volume_id"),"nexturl":location.href});return n?s:s+"#entry_"+i.get("id")}})}),csui.define("csui/temporary/cop/commands/open.forum",["csui/lib/jquery","csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i,t){"use strict";return t.extend({"defaults":{"signature":"OpenForum"},"enabled":function(e){var t=i.getJustOneNode(e),n=t&&t.get("type");return 123469===n||123470===n},"getUrlQueryParameters":function(e,i){return{"func":"ll","objAction":123469===e.get("type")?"view":"viewincontainer","objId":e.get("id"),"nexturl":location.href}}})}),csui.define("csui/temporary/cop/commands/open.wiki",["csui/lib/jquery","csui/utils/url","csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i,t,n){"use strict";return n.extend({"defaults":{"signature":"OpenWiki"},"enabled":function(e){var i=t.getJustOneNode(e),n=i&&i.get("type");return 5573===n||5574===n},"getUrl":function(e,t){var s=n.prototype.getUrl.apply(this,arguments);return 5573===e.get("type")?s:i.combine(s,"open",e.get("id"))},"getUrlQueryParameters":function(e,i){if(5573===e.get("type"))return{"func":"ll","objAction":"browse","objId":e.get("id"),"viewType":1,"nexturl":location.href}}})}),csui.define("csui/temporary/cop/commands/open.mailstore",["csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,i){"use strict";return i.extend({"defaults":{"signature":"OpenMailStore"},"enabled":function(i){var t=e.getJustOneNode(i);return 3030331===(t&&t.get("type"))},"getUrlQueryParameters":function(e,i){if(3030331===e.get("type"))return{"func":"ll","objAction":"browse","objId":e.get("id"),"viewType":1,"nexturl":location.href}}})}),csui.define("csui/utils/commands/open.document/csui.open.document.delegates",["module","csui/lib/underscore","csui/utils/commands/open.specific.node.perspective","csui/utils/commands/open"],function(e,i,t,n){"use strict";var s=i.extend({"allowViewContent":!0,"allowPerspective":!1},e.config());return[{"sequence":500,"command":t,"decides":function(){return s.allowPerspective}},{"sequence":1e3,"command":n,"decides":function(){return s.allowViewContent}},{"sequence":1e4,"command":t}]}),csui.define("csui/utils/commands/goto.location",["require","csui/lib/jquery","csui/utils/base","csui/lib/underscore","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commandhelper","csui/models/command","csui/models/node/node.model"],function(e,i,t,n,s,o,r,a){"use strict";return r.extend({"defaults":{"signature":"goToLocation","scope":"single"},"enabled":function(e,i){var t=o.getJustOneNode(e);return t&&this._isSupported(t)},"_isSupported":function(e){var t=[144];return-1!==i.inArray(e.get("type"),t)},"_makeAccessible":function(){return["open"]},"execute":function(e,n){var s,r=i.Deferred(),c=o.getJustOneNode(e),l=this;if(c&&this._isSupported(c))if((s=c.parent)&&void 0===s.get("type")){var u=new a({"id":s.get("id")},{"connector":s.connector,"commands":this._makeAccessible()});u.fetch().done(function(i){s=u,e.originatingView&&l.executeDefaultAction(s,e.originatingView),r.resolve()}).fail(function(e){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){var n=new t.Error(e);i.showError(n.message)}),r.reject()})}else e.originatingView&&this.executeDefaultAction(s,e.originatingView),r.resolve();return r.promise()},"executeDefaultAction":function(e,i){var t={"node":e};if(i.trigger("before:defaultAction",t),!t.cancel){var n=i;i.defaultActionController&&i.defaultActionController.executeAction(e,{"context":i.context,"originatingView":i}).done(function(){n.trigger("executed:defaultAction",t)})}}})}),csui.define("csui/utils/commands/collection/collect",["module","require","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/url","csui/lib/underscore","i18n!csui/utils/commands/collection/nls/lang","csui/models/command","csui/utils/commands/multiple.items","csui/utils/commandhelper"],function(e,i,t,n,s,o,r,a,c,l,u){"use strict";var d=e.config();r.defaults(d,{"parallelism":3});var m,g,p,f,v,h,w,b=c.extend({});return r.extend(b.prototype,l),b.extend({"defaults":{"signature":"Collect","scope":"multiple","successMessages":{"formatForOne":a.CollectOneItemSuccessMessage,"formatForTwo":a.CollectManyItemsSuccessMessage,"formatForMany":a.CollectManyItemsSuccessMessage,"formatForFive":a.CollectManyItemsSuccessMessage},"errorMessages":{"formatForOne":a.CollectOneItemFailMessage,"formatForTwo":a.CollectManyItemsFailMessage,"formatForMany":a.CollectManyItemsFailMessage,"formatForFive":a.CollectManyItemsFailMessage}},"enabled":function(e,i){var t=this._isSupported(e.container),n=u.getAtLeastOneNode(e);return t=!!t&&!!n&&n.length},"_isSupported":function(e){var i=[298];return!e||-1===t.inArray(e.get("type"),i)},"execute":function(e,i){var n=this,s=t.Deferred();return csui.require(["csui/controls/globalmessage/globalmessage","csui/controls/conflict.resolver/impl/collection.conflicts/collection.conflicts.view","csui/utils/taskqueue","csui/models/fileuploads","csui/utils/page.leaving.blocker","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links"],function(){m=arguments[0],h=arguments[1],g=arguments[2],p=arguments[3],f=arguments[4],v=arguments[5],w=arguments[6],n._addToCollection(e,i).done(function(i){var t=e.nodes.models,s=r.map(t,function(e){return{"name":e.get("name"),"state":"pending","count":0,"total":1,"node":e}}),o=i.nodes,a=new p(s,{"connector":c}),c=e.container&&e.container.connector||e.originatingView&&e.originatingView.connector||e.collection&&e.collection.connector||t[0]&&t[0].connector;n._announceOperationStart(e),a.each(function(e){var i=e.get("node");e.node=i,e.unset("node"),e.set("mime_type",i.get("mime_type"))}),n._addSelectedNodesToCollection(a,c,o[0],e.collection).then(function(i){m.hideFileUploadProgress();var t=n._checkPromisess(i);if(t.failedNodes.length)n._showDialog(t.failedNodes).then(function(i,s){if(s.kill(),t.successNodes.length){var r={"context":e.context,"nextNodeModelFactory":v,"link_url":w.getUrl(o[0]),"targetFolder":o[0]};n.showSuccessWithLink(t.successNodes.models,r)}});else if(t.successNodes.length){var s={"context":e.context,"nextNodeModelFactory":v,"link_url":w.getUrl(o[0]),"targetFolder":o[0]};n.showSuccessWithLink(i,s)}}),n._announceOperationEnd(e);var l;e.collection&&e.originatingView&&e.originatingView.findNodeFromCollection?l=e.originatingView.findNodeFromCollection(e.collection,o[0]):e.collection&&(l=e.collection.get(o[0].get("id"))||e.collection.findWhere({"id":o[0].get("id")})),l&&l.fetch()}),s.resolve()}),s.promise()},"_addToCollection":function(e,i){var n=this,s=t.Deferred();return csui.require(["csui/dialogs/node.picker/node.picker"],function(t){var o=r.extend({"selectableTypes":[298],"addableTypes":[298],"showAllTypes":!0,"orderBy":"type asc","dialogTitle":a.selectCollectionDialogTitle,"selectButtonLabel":a.selectCollectButtonLabel,"globalSearch":!0,"selectMultiple":!1,"context":i?i.context:e.context,"startLocation":"recent.containers","startLocations":["enterprise.volume","current.location","personal.volume","favorites","recent.containers"],"resolveShortcuts":!0},e);n.nodePicker=new t(o),n.nodePicker.show().done(function(){s.resolve.apply(s,arguments)}).fail(function(){s.reject.apply(s,arguments)})},function(e){s.reject(e)}),s.promise()},"_addSelectedNodesToCollection":function(e,i,n,s){var o=this,c=new g({"parallelism":d.parallelism}),l=0,u=r.map(e.models,function(e){var s=t.Deferred();return c.pending.add({"worker":function(){var t=e.node,r=t.get("id"),a=n.get("id");return o._collectNode(i,a,r).done(function(){e.set("count",1),e.deferred.resolve(e),s.resolve(e)}).fail(function(i){s.resolve(e)}),s.promise()}}),l++,s.promise(u)});return m.showFileUploadProgress(e,{"oneFileTitle":a.CollectingOneItem,"oneFileSuccess":a.CollectOneItemSuccessMessage,"multiFileSuccess":a.CollectManyItemsSuccessMessage,"oneFilePending":a.CollectingOneItem,"multiFilePending":a.CollectingItems,"oneFileFailure":a.CollectOneItemFailMessage,"multiFileFailure":a.CollectManyItemsFailMessage2,"someFileSuccess":a.CollectManyItemsSuccessMessage,"someFilePending":a.CollectingItems,"someFileFailure":a.CollectManyItemsFailMessage2,"enableCancel":!1}),t.whenAll.apply(t,u)},"_collectNode":function(e,i,n){var s=t.Deferred(),r={"collection_id":i},a={"url":o.combine(e.getConnectionUrl().getApiBase("v2"),"/nodes/"+n),"type":"PUT","data":r,"contentType":"application/x-www-form-urlencoded"};return e.makeAjaxCall(a).done(function(e){s.resolve(e)}).fail(function(e){s.reject(e)}),s.promise()},"_checkPromisess":function(e){r.isArray(e)||(e=[e]);var i=new n.Collection,t=new n.Collection;return r.each(e,function(e){void 0!==e&&(e.cancelled||void 0===e.get("count")||(e.get("count")?i.push(e):t.push(e)))}),{"successNodes":i,"failedNodes":t}},"_showDialog":function(e){var i=t.Deferred(),n=[{"id":"close","label":a.conflictsDialogCloseLabel,"toolTip":a.conflictsDialogCloseLabel,"click":function(e){i.resolve("close",e.dialog)}}];return this._showConflictDialog(e,n),i},"_showConflictDialog":function(e,i){var n=this;t.Deferred();csui.require(["csui/controls/dialog/dialog.view"],function(t){var o=s.formatMessage(e.length,n.get("errorMessages")),r=new t({"title":o,"midSize":!0,"iconLeft":"csui-icon-notification-information","className":"csui-collection-conflicts-dialog","view":n._getListView(e),"buttons":i});return r.show(),r})},"_getListView":function(e){return new h(r.extend({},{"collection":e}))},"_announceOperationStart":function(e){var i=e.originatingView;i.blockActions&&i.blockActions(),f.enable(this.get("pageLeavingWarning"))},"_announceOperationEnd":function(e){f.disable();var i=e.originatingView;i.unblockActions&&i.unblockActions()}})}),
csui.define("bundles/csui-commands",["csui/integration/folderbrowser/commands/go.to.node.history","csui/integration/folderbrowser/commands/open.full.page.container","csui/utils/commands","csui/utils/commands/add.categories","csui/utils/commands/add","csui/utils/commands/add.item.metadata","csui/utils/commands/add.version","csui/utils/commands/browse","csui/utils/commands/collection/collect.items","csui/utils/commands/collection/remove.collected.items","csui/utils/commands/confirmable","csui/utils/commands/copy","csui/utils/commands/copy.link","csui/utils/commands/create.perspective","csui/utils/commands/delete","csui/utils/commands/download","csui/utils/commands/open.document/open.document","csui/utils/commands/zipanddownload","csui/utils/commands/edit","csui/utils/commands/editactivex","csui/utils/commands/editofficeonline","csui/utils/commands/edit.perspective","csui/utils/commands/editwebdav","csui/utils/commands/email.link","csui/utils/commands/execute.saved.query","csui/utils/commands/favorite.add","csui/utils/commands/favorite.remove","csui/utils/commands/inlineedit","csui/utils/commands/move","csui/utils/commands/multiple.items","csui/utils/commands/navigate","csui/utils/commands/node","csui/utils/commands/open","csui/utils/commands/open.node.perspective","csui/utils/commands/open.classic.page","csui/utils/commands/open.discussion","csui/utils/commands/open.milestone","csui/utils/commands/open.channel","csui/utils/commands/open.news","csui/utils/commands/open.poll","csui/utils/commands/open.prospector","csui/utils/commands/open.specific.classic.page","csui/utils/commands/open.specific.node.perspective","csui/utils/commands/open.task","csui/utils/commands/open.taskgroup","csui/utils/commands/open.tasklist","csui/utils/commands/open.topic","csui/utils/commands/permissions","csui/utils/commands/properties","csui/utils/commands/rename","csui/utils/commands/rename.favorite","csui/utils/commands/reserve","csui/utils/commands/run.livereport","csui/utils/commands/sign.out","csui/utils/commands/switch.to.classic","csui/utils/commands/unreserve","csui/utils/commands/user.profile","csui/utils/commands/versions","csui/utils/commands/versions/delete","csui/utils/commands/versions/download","csui/utils/commands/versions/open","csui/utils/commands/versions/promote.version","csui/utils/commands/versions/properties","csui/utils/commands/filter","csui/utils/commands/description.toggle","csui/utils/commands/thumbnail.toggle","csui/utils/commands/save.filter","csui/utils/commands/maximize.widget.view","csui/utils/commands/restore.widget.size","csui/utils/commands/permissions/apply.permission","csui/utils/commands/permissions/edit.permission","csui/utils/commands/permissions/change.owner.permission","csui/utils/commands/permissions/delete.permission","csui/utils/commands/permissions/add.user.group","csui/utils/commands/permissions/add.owner.group","csui/utils/commands/permissions/restore.public.access","csui/utils/commands/permissions/permission.util","csui/utils/commands/personalize.page","csui/utils/commands/version.settings","i18n!csui/utils/commands/nls/localized.strings","csui/utils/commands/nls/root/localized.strings","i18n!csui/utils/commands/collection/nls/lang","csui/utils/commands/collection/nls/root/lang","csui/temporary/cop/commands/open.blog","csui/temporary/cop/commands/open.faq","csui/temporary/cop/commands/open.forum","csui/temporary/cop/commands/open.wiki","csui/temporary/cop/commands/open.mailstore","csui/dialogs/file.open/file.open.dialog","csui/models/command","csui/models/commands","csui/utils/accessibility","csui/utils/command.error","csui/utils/commandhelper","csui/utils/commands/open.document/csui.open.document.delegates","csui/utils/commands/open.document/delegates/open.document.delegates","csui/utils/commands/open.plugins/open.plugins","csui/utils/commands/goto.location","csui/utils/commands/collection/collect","csui/utils/node.links/node.links","csui/utils/routing"],{});
//# sourceMappingURL=csui-commands.js.map