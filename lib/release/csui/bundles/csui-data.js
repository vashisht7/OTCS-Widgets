csui.define("csui/utils/contexts/factories/factory",["csui/lib/marionette"],function(e){return e.Controller.extend({"constructor":function(e,t){this.context=e,this.options=t||{}},"propertyPrefix":null})}),csui.define("csui/utils/contexts/factories/connector",["module","csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/connector"],function(e,t,i,s){return i.extend({"propertyPrefix":"connector","constructor":function(n,o){i.prototype.constructor.apply(this,arguments);var r=this.options.connector||{};if(!(r instanceof s)){var a=e.config(),c=r.connection||a.connection||{};t.defaults(c,r.connection,a.connection),r=new s(t.defaults({"connection":c},r,a))}this.property=r}})}),csui.define("csui/utils/contexts/factories/next.node",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands"],function(e,t,i,s,n,o,r,a){"use strict";var c=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);c=!c||"false"!==c[1];var l;return n.extend({"propertyPrefix":"nextNode","constructor":function(l,u){n.prototype.constructor.apply(this,arguments);var d=this.options.nextNode||{},h=e.config();if(c&&(this.initialResponse=d.initialResponse||h.initialResponse),!(d instanceof s.Model)){var p={"properties":[],"versions.element(0)":["owner_id"]},f={"properties":["original_id"]};d.options&&(t.mapObject(d.options.fields,function(e,i){p[i]=t.union(p[i],e)}),t.mapObject(d.options.expand,function(e,i){f[i]=t.union(f[i],e)}));var b=l.getObject(o,u),g=i.extend(!0,{"connector":b,"fields":p,"expand":f,"stateEnabled":!0,"commands":a.getAllSignatures()},h.options,d.options);d=new r(d.attributes||h.attributes,g)}this.property=d},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!l){var t=this.property.prefetch(this.initialResponse,e);return l=!0,t}return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/search.query.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({"constructor":function e(t,i){e.__super__.constructor.apply(this,arguments)},"toJSON":function(){return n.__super__.toJSON.apply(this,arguments)}});return s.extend({"propertyPrefix":"searchQuery","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.searchQuery||{};if(!(a instanceof i.Model)){var c=e.config();a=new n(a.models,t.extend({},a.options,c.options))}this.property=a}})}),csui.define("css!csui/controls/tile/behaviors/impl/perfect.scrolling",[],function(){}),csui.define("csui/controls/tile/behaviors/perfect.scrolling.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/utils/accessibility","csui/lib/perfect-scrollbar","css!csui/controls/tile/behaviors/impl/perfect.scrolling"],function(e,t,i,s,n,o){"use strict";function r(e,i){var s=i||this.options||{},n=s[e];return t.isFunction(n)?s[e].call(this.view):n}var a=e.config();t.defaults(a,{"usePerfectScrollbar":!1}),o.isAccessibleMode()&&(a.usePerfectScrollbar=!1);var c={"minScrollbarLength":32,"stopPropagationOnClick":!1},l=s.Region.extend({"constructor":function(e){s.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){this._parent._parent.trigger("update:scrollbar")}}),u=s.Behavior.extend({"defaults":{"contentParent":null},"constructor":function(e,n){if(s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(n,"render",this._applyClasses),this._useScrollbar()&&this._usePerfectScrollbar()){var o=r.call(this,"updateOnWindowResize");this._renderState=0,this.listenToOnce(n,"render",function(){this.view.$el.on("csui:update:scrollbar."+n.cid,t.bind(this._updateScrollbarFromPropagation,this)),!1!==o&&i(window).on("resize."+n.cid,t.bind(this._updateScrollbar,this))}).listenToOnce(n,"before:destroy",function(){this.view.$el.off("csui:update:scrollbar."+n.cid),!1!==o&&i(window).off("resize."+n.cid)}).listenTo(n,"before:render",function(){this._renderState=1}).listenTo(n,"render",function(){this._renderState=0}).listenTo(n,"dom:refresh",this._ensureScrollbar).listenTo(n,"ensure:scrollbar",this._ensureScrollbar).listenTo(n,"before:render",this._destroyScrollbar).listenTo(n,"before:destroy",this._destroyScrollbar).listenTo(n,"update:scrollbar",this._refreshScrollbar).listenToOnce(n,"before:render",function(){n instanceof s.CollectionView&&n.collection&&this.listenTo(n.collection,"reset",function(){this._resetTriggered=!0}).listenTo(n,"before:render:collection",function(){++this._renderState}).listenTo(n,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._updateScrollbar()}).listenTo(n,"render:empty",function(){!this._resetTriggered&&this._renderState||this._updateScrollbar()}).listenTo(n,"add:child",function(){this._renderState||this._updateScrollbar()}).listenTo(n,"remove:child",function(){this._resetTriggered||this._renderState||this._updateScrollbar()})})}},"_applyClasses":function(){var e;if(this._contentParent=this._getContentParent(),this._useScrollbar())if(this._usePerfectScrollbar())e="csui-perfect-scrolling";else{var t=r.call(this,"suppressScrollX"),i=r.call(this,"suppressScrollY");e="csui-normal-scrolling",t&&(e+=" csui-no-scroll-x"),i&&(e+=" csui-no-scroll-y")}else e="csui-no-scrolling";this._contentParent.addClass(e)},"_ensureScrollbar":function(){if(this._contentParent=this._contentParent?this._contentParent:this._getContentParent(),!this._contentParent)throw new Error('The "dom:refresh"" event was triggered earlier than the "render" event in view '+this.view.cid+"("+Object.getPrototypeOf(this.view).constructor.name+")");if(this._perfectScrollbar)this._contentParent.perfectScrollbar("update");else{var e=t.reduce(["suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","maxScrollbarLength","minScrollbarLength","includePadding"],function(e,t){return e[t]=r.call(this,t),e},{},this);t.defaults(e,c),this._contentParent.perfectScrollbar(e),this._perfectScrollbar=!0,this._setClickEventFocus()}},"_setClickEventFocus":function(){var e=this._contentParent.find(".ps-scrollbar-y-rail"),t=this._contentParent.find(".ps-scrollbar-x-rail");if(n.isChrome())this._setClickEventRailFocus(e),this._setClickEventRailFocus(t);else{var i=this._contentParent.find(".ps-scrollbar-y"),s=this._contentParent.find(".ps-scrollbar-x");this._setClickEventBarFocus(i,e),this._setClickEventBarFocus(s,t)}},"_setClickEventBarFocus":function(e,t){var i=this;e.on("mousedown",function(e){i.addXYFocus=!0,t.addClass("binf-focus")}),t.on("mouseout",function(e){i.addXYFocus||(t.removeClass("binf-focus"),t.blur()),i.addXYFocus=!1})},"_setClickEventRailFocus":function(e){var t=this;e.length>0&&(e.on("mouseup",function(e){i(this).addClass("binf-focus"),t.addXYFocus=!0}),e.on("mouseleave",function(e){t.addXYFocus||i(this).removeClass("binf-focus"),t.addXYFocus=!1}))},"_refreshScrollbar":function(){this._contentParent&&this._perfectScrollbar&&(this._contentParent.find(".ps-scrollbar-y-rail").length||this._contentParent.find(".ps-scrollbar-x-rail").length?this._updateScrollbar():(this._destroyScrollbar(),this._ensureScrollbar()))},"_updateScrollbar":function(){this._perfectScrollbar&&this._contentParent.perfectScrollbar("update")},"_updateScrollbarFromPropagation":function(e){e.stopPropagation(),this._updateScrollbar()},"_destroyScrollbar":function(){this._perfectScrollbar&&(this._contentParent.perfectScrollbar("destroy"),this._contentParent.find(".ps-scrollbar-y-rail").off(),this._contentParent.find(".ps-scrollbar-x-rail").off(),this._perfectScrollbar=!1)},"_getContentParent":function(){var e=r.call(this,"contentParent");return e?e.insertAfter?e:t.isElement(e)?i(e):this.view.$(e):this.view.$el},"_useScrollbar":function(){return!(r.call(this,"scrollingDisabled")||r.call(this,"scrollingDisabled",this.view.options))},"_usePerfectScrollbar":function(){return u.usePerfectScrollbar()}},{"Region":l,"usePerfectScrollbar":function(){return a.usePerfectScrollbar&&!(n.isTouchBrowser()||n.isIE11()||n.isEdge())}});return u}),csui.define("csui/behaviors/keyboard.navigation/tabables.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base"],function(e,t,i,s,n,o){"use strict";function r(e,i){var s=i||this.options||{},n=s[e];return t.isFunction(n)?s[e].call(this.view):n}n=n(e.id);var a=(e.config(),s.Behavior.extend({"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments);var i=this;this.view=t,this._pushTabableHandler(),this.tabableRegions=[],this.mustSortTabableRegions=!1,this.listenTo(t,"render",this._registerEventHandlers),this.listenTo(t,"destroy",this._popTabableHandler),this.listenTo(t,"dom:refresh",this.setFocusInActiveTabableRegion),setTimeout(function(){t.$el.on("keydown.csui-tabables",function(e){if(9===e.keyCode&&r.call(i,"containTabFocus"))return i._maintainTabFocus(e)})}),this.listenTo(t,"changed:focus",this._setFocusToNextRegion)},"registerTabableRegion":function(e){return i.contains(this.view.el,e.view.el)?(this.unregisterTabableRegionBehavior(e),this.tabableRegions.push(e),this.mustSortTabableRegions=!0,!0):(n.debug("registerTabableRegion: not registering non descendant view "+e.view.constructor.name)&&console.log(n.last),!1)},"unregisterTabableRegionBehavior":function(e){e&&t.contains(this.tabableRegions,e)&&(n.debug("unregisterTabableRegion "+e.view.constructor.name)&&console.log(n.last),this.tabableRegions=t.reject(this.tabableRegions,function(t){return t===e}))},"_pushTabableHandler":function(){if(n.debug("_pushTabableHandler in view "+this.view.constructor.name)&&console.log(n.last),a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);t.each(e.tabableRegions,function(t){t._unregisterEventHandlers.call(t),e._clearTabIndexes.call(e,t.view)},this)}a.tabablesHandlers.push(this)},"_popTabableHandler":function(){if(a.tabablesHandlers.length>0){var e=t.last(a.tabablesHandlers);if(n.debug("_popTabableHandler in view "+e.view.constructor.name)&&console.log(n.last),t.each(e.tabableRegions,function(e){e._unregisterEventHandlers.call(e)}),e.view.$el.off("keydown.csui-tabables"),e.stopListening(e.view),a.tabablesHandlers.pop(),a.tabablesHandlers.length>0){var i=t.last(a.tabablesHandlers);t.each(i.tabableRegions,function(e){e.setInitialTabIndex.call(e),e._registerEventHandlers.call(e)}),i._setFocusInActiveTabableRegion()}}},"_sortTabableRegions":function(){var e=this.tabableRegions,i=[];this.view.$el.find(".csui-acc-tab-region").each(function(s,n){var o=t.find(e,function(e){return e.view.el===n});o&&i.push(o)}),this.tabableRegions=i,this.mustSortTabableRegions=!1},"_getNextActiveRegion":function(e,i){var s,n,r=this.tabableRegions;r=t.filter(r,function(e){return!e.$el.hasClass("binf-hidden")});var a=r.length-1,c=this._getActiveIndex(r);if(s=i?e?0===c?a:c-1:c===a?0:c+1:e?0===c?0:c-1:c===a?a:c+1,1===r.length)return n=r[0];for(;s!=c;){n=r[s];var l=n.getCurrentlyFocusedElementFromView(e);if(n.view.isTabable()&&l&&o.isVisibleInWindowViewport(l))return n;e?0===s?s=i?a:c:s>0&&--s:s===a?s=i?0:c:s<a&&++s}},"_getActiveIndex":function(e){if(this.currentlyActiveTabableRegion){this._sortTabableRegions();var t=this.currentlyActiveTabableRegion,i=this.tabableRegions;e&&(i=e);for(var s=0;s<i.length;s++)if(t.view.cid===i[s].view.cid)return s}},"_deactivateCurrentActiveTabableRegion":function(){var e=this._getActiveIndex();if(void 0!==e&&this.tabableRegions[e]){var t=this.tabableRegions[e].view;t.$el.removeClass("csui-acc-tab-region-active"),delete this.currentlyActiveTabableRegion,t.accDeactivateTabableRegion&&(n.debug("deactivating tabable region "+t.constructor.name)&&console.log(n.last),this.tabableRegions[e].ignoreFocusEvents=!0,t.accDeactivateTabableRegion.call(t),this.tabableRegions[e].ignoreFocusEvents=!1)}return e},"_setTabableRegionActive":function(e,t){n.debug("activating "+e.view.constructor.name+" as active tabable region")&&console.log(n.last),this._deactivateCurrentActiveTabableRegion(),e.view.$el.addClass("csui-acc-tab-region-active"),this.currentlyActiveTabableRegion=e,e.view.accActivateTabableRegion&&(e.ignoreFocusEvents=!0,e.view.accActivateTabableRegion.call(e.view,t),e.ignoreFocusEvents=!1)},"_setFocusInActiveTabableRegion":function(e){if(this.currentlyActiveTabableRegion)this.currentlyActiveTabableRegion.setFocus(e);else{var i=t.sortBy(this.tabableRegions,function(e){return e.view.options.initialActivationWeight}),s=t.last(i);s&&s.view.options.initialActivationWeight>0&&(n.debug("setFocus: "+s.view.constructor.name)&&console.log(n.last),s.setFocus(e))}},"_clearTabIndexes":function(e){var t=e.$el.find(a.focusablesSelector).addBack(a.focusablesSelector);t.length?t.prop("tabindex",-1):n.debug("_clearTabIndexes: no focusables found in "+e.constructor.name)&&console.log(n.last)},"_maintainTabFocus":function(e){var t=e.shiftKey,i=this._getActiveIndex();if(void 0!==i){var s=this.tabableRegions[i],n=r.call(this,"recursiveNavigation");if(s&&s.onlastTabElement(t,e)){var o=this._getNextActiveRegion(t,!1);return o||(o=this._getNextActiveRegion(t,n)),o&&(this._setTabableRegionActive(o,t),this._setFocusInActiveTabableRegion(t)),!1}}return!0},"_setFocusToNextRegion":function(e){var t=r.call(this,"recursiveNavigation"),i=this._getNextActiveRegion(e,t);i&&(this._setTabableRegionActive(i),this._setFocusInActiveTabableRegion())}},{"tabablesHandlers":[],"focusablesSelector":"a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]","clearTabIndexes":function(e){var s=t.last(a.tabablesHandlers);s&&i.contains(s.view.el,e.el)&&s._clearTabIndexes.call(s,e)},"setTabableRegionActive":function(e){var s=t.last(a.tabablesHandlers);s&&i.contains(s.view.el,e.view.el)&&s._setTabableRegionActive.call(s,e)},"registerTabableRegion":function(e){n.debug("registerTabableRegion for view "+e.view.constructor.name)&&console.log(n.last);var i=t.last(a.tabablesHandlers);if(i)return i.registerTabableRegion.call(i,e)},"unregisterTabableRegion":function(e){e&&t.each(a.tabablesHandlers,function(t){t.unregisterTabableRegionBehavior.call(t,e)})},"setFocusInActiveTabableRegion":function(){var e=t.last(a.tabablesHandlers);e&&e._setFocusInActiveTabableRegion.call(e)},"popTabableHandler":function(){var e=t.last(a.tabablesHandlers);e&&e._popTabableHandler()}}));return a}),csui.define("csui/behaviors/keyboard.navigation/tabable.region.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,s,n,o,r){"use strict";var a=s.Behavior.extend({"defaults":{"initialActivationWeight":0},"constructor":function(e,i){s.Behavior.prototype.constructor.apply(this,arguments),this.view=i,i.tabableRegionBehavior=this,t.extend(i,this.defaults),t.defaults(i,{"isTabable":function(){return!0},"onLastTabElement":function(){return!0}}),i.options&&!i.options.initialActivationWeight&&(i.options.initialActivationWeight=this.options.initialActivationWeight),this._registerEventHandlers()},"_registerEventHandlers":function(){if(!this._eventsRegistered){var e=this.view,t=this;this.listenTo(e,"render",this._applyClasses),this.listenTo(e,"dom:refresh",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(t.isRegistered=!0,this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"refresh:tabindexes",function(){r.clearTabIndexes(e),t.isRegistered&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"destroy",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),t.isRegistered=!1}),this.listenTo(e,"tabable",function(){r.clearTabIndexes(e),r.registerTabableRegion(this)&&(this.setInitialTabIndex(),r.setFocusInActiveTabableRegion())}),this.listenTo(e,"tabable:not",function(){r.unregisterTabableRegion(this),r.clearTabIndexes(e),this.isRegistered=!1}),this.listenTo(e,"changed:focus",function(){t.isRegistered&&this.moveTabIndex()}),this.listenTo(e,"escaped:focus",function(){r.setFocusInActiveTabableRegion()}),this._eventsRegistered=!0}},"_unregisterEventHandlers":function(){var e=this.view;this.stopListening(e),this._eventsRegistered=!1},"getCurrentlyFocusedElementFromView":function(e){if(t.isFunction(this.view.currentlyFocusedElement)){var s=this.view.currentlyFocusedElement({"shiftKey":e});return s instanceof i?s:i(s)}return t.isString(this.view.currentlyFocusedElement)?this.view.$(this.view.currentlyFocusedElement):(n.debug("setInitialTabIndex: "+this.view.constructor.name+" does not have currentlyFocusedElement -> not setting tabindex in that view ")&&console.log(n.last),i())},"onlastTabElement":function(e,t){return this.view.onLastTabElement(e,t)},"setFocus":function(e){if(!this.options.notSetFocus){var t=this.getCurrentlyFocusedElementFromView(e);t&&o.isVisibleInWindowViewport(t)&&(this.ignoreFocusEvents=!0,t.trigger("focus"),this.ignoreFocusEvents=!1)}},"setInitialTabIndex":function(){if(this.currentlyFocusedElement&&this.currentlyFocusedElement.off("focus."+this.view.cid),this.view.isTabable())try{if(this.currentlyFocusedElement=this.getCurrentlyFocusedElementFromView(),this.currentlyFocusedElement&&this.currentlyFocusedElement.length>0){var e=this;this.currentlyFocusedElement.prop("tabindex",0),this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})}}catch(e){console.warn("Could not set as active element: ",this.view.cid,e.message)}else this.currentlyFocusedElement=i()},"moveTabIndex":function(){var e=this;this.currentlyFocusedElement&&(this.currentlyFocusedElement.off("focus."+this.view.cid),this.currentlyFocusedElement.prop("tabindex",-1),this.currentlyFocusedElement.removeClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement=i());var t=this.getCurrentlyFocusedElementFromView();t.prop("tabindex",0),this.currentlyFocusedElement=t,this.currentlyFocusedElement.addClass(a.accessibilityActiveElementClass),this.currentlyFocusedElement.on("focus."+this.view.cid,function(){e.ignoreFocusEvents||r.setTabableRegionActive(e)})},"_applyClasses":function(){this.$el.addClass(a.accessibilityRegionClass)}},{"accessibilityRegionClass":"csui-acc-tab-region","accessibilityActiveRegionClass":"csui-acc-tab-region-active","accessibilityFocusableClass":"csui-acc-focusable","accessibilityActiveElementClass":"csui-acc-focusable-active"});return a}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/progresspanel/impl/nls/root/progresspanel.lang",{"BytesOfSize":"{0} of {1}","UploadingItems":"Uploading {0} items","UploadingOneItem":"Uploading item","UploadingSomeItems":"Uploading {0} items","UploadOneItemSuccessMessage":'"{0}" uploaded',"UploadManyItemsSuccessMessage":"Uploaded {0} items","UploadOneItemFailMessage":'"{0}" failed to upload',"UploadSomeItemsFailMessage":"{0} items failed to upload","UploadManyItemsFailMessage":"{0} items failed to upload","UploadSomeItemsFailMessage2":"{2} items failed to upload","UploadManyItemsFailMessage2":"{2} items failed to upload","UploadingSingleItem":'Uploading "{0}"',"FinalizingSingleItem":'Finalizing "{0}"',"UploadingOneItemStopped":'"{0}" stopped',"UploadingAllItemsStopped":"{0} items stopped","UploadSomeItemsStopped":"Upload completed","State_pending":"Waiting","State_processing":"Processing","State_resolved":"Done","State_rejected":"Failed","State_aborted":"Cancelled","State_stopped":"Stopped","State_stopping":"Stopping","State_finalizing":"Finalizing","StateAction_pending":"Waiting","StateAction_processing":"Stop","StateAction_resolved":"Done","StateAction_rejected":"Done","StateAction_aborted":"Done","Cancel":"Cancel","CancelAria":"Cancel upload of {0} item","StateAction_all_pending":"Waiting for upload of all items","StateAction_all_processing":"Stop upload of all items","StateAction_all_resolved":"All items uploaded","StateAction_all_rejected":"All items rejected to upload","StateAction_all_aborted":"All items aborted to upload","Expand":"Expand details","Collapse":"Collapse details","Close":"Close","CloseAria":"Close the progress panel","minimize":"Hide message banner ","minimizeAria":"Hide message banner","UploadingLocation":'Uploading to "{0}"',"UploadedLocation":'Uploaded to "{0}"',"Retry":"Retry","RetryAll":"Retry all","GotoLocationLinkLabel":"Go to location"}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'      <div class="csui-stateaction csui-progresscell">\r\n        <button type="button" aria-label="'+this.escapeExpression((n=null!=(n=t.stateaction_all_pending||(null!=e?e.stateaction_all_pending:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"stateaction_all_pending","hash":{}}):n))+'"\r\n                class="csui-stateaction-pending\r\n        csui-icon-like-btn binf-btn binf-btn-default">'+this.escapeExpression((n=null!=(n=t.stateaction_pending||(null!=e?e.stateaction_pending:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"stateaction_pending","hash":{}}):n))+'</button>\r\n        <button type="button" aria-label="'+this.escapeExpression((n=null!=(n=t.stateaction_all_processing||(null!=e?e.stateaction_all_processing:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"stateaction_all_processing","hash":{}}):n))+'"\r\n                class="csui-stateaction-processing csui-icon-like-binf-btn binf-hidden binf-btn binf-btn-default">\r\n            '+this.escapeExpression((n=null!=(n=t.stateaction_processing||(null!=e?e.stateaction_processing:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"stateaction_processing","hash":{}}):n))+"</button>\r\n      </div>\r\n"},"3":function(e,t,i,s){var n;return'        <div class="csui-show-retryAll binf-hidden">\r\n          <button type="button" class="csui-retry-all" title="'+this.escapeExpression((n=null!=(n=t.retryAll||(null!=e?e.retryAll:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retryAll","hash":{}}):n))+'" aria-label="'+this.escapeExpression((n=null!=(n=t.retryAll||(null!=e?e.retryAll:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retryAll","hash":{}}):n))+"\" tabindex='0'>"+this.escapeExpression((n=null!=(n=t.retryAll||(null!=e?e.retryAll:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retryAll","hash":{}}):n))+"</button>\r\n        </div>\r\n"},"5":function(e,t,i,s){return"binf-hidden"},"7":function(e,t,i,s){var n;return'      <div class="csui-minimize csui-minimizecell">\r\n        <button type="button" class="icon-progresspanel-minimize binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((n=null!=(n=t.minimizeAria||(null!=e?e.minimizeAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"minimizeAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.minimize||(null!=e?e.minimize:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"minimize","hash":{}}):n))+'" tabindex="0"></button>\r\n      </div>\r\n'},"9":function(e,t,i,s){var n;return'  <a class="csui-gotolocation-url binf-hidden" href="'+this.escapeExpression((n=null!=(n=t.targetLocationUrl||(null!=e?e.targetLocationUrl:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"targetLocationUrl","hash":{}}):n))+'" role="button">'+this.escapeExpression((n=null!=(n=t.gotoLocation||(null!=e?e.gotoLocation:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"gotoLocation","hash":{}}):n))+"</a>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-header">\r\n  <div class="csui-progressrow csui-height-target">\r\n    <div class="csui-names-progress">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-header-icon csui-icon binf-hidden"></div>\r\n        <div class="csui-title" id="'+this.escapeExpression((o=null!=(o=t.progressTitleId||(null!=e?e.progressTitleId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"progressTitleId","hash":{}}):o))+'">\r\n          '+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress csui-progresscell">\r\n        <div class="csui-progress-dynamic binf-hidden">\r\n          <div class="csui-progress-textbar">\r\n            <div class="binf-progress">\r\n              <div class="binf-progress-bar" role="progressbar" aria-valuenow="'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'"\r\n                   aria-valuemin="0" aria-valuemax="100" style="width:'+this.escapeExpression((o=null!=(o=t.percentage||(null!=e?e.percentage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"percentage","hash":{}}):o))+'%">\r\n              </div>\r\n            </div>\r\n            <div class="loading-dots">\r\n                <div class="csui-loading-parent-wrapper binf-disabled csui-disbaled">\r\n                    <span class="csui-loading-dots-wrapper">\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                        <span class="csui-loading-dot"></span>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class="csui-progress-static" aria-hidden="true">\r\n          <div class="csui-progress-textbar">\r\n            <div class="csui-progress-static-pending" aria-label="'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-processing binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-resolved binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-rejected binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_rejected||(null!=e?e.state_rejected:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_rejected","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_rejected||(null!=e?e.state_rejected:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_rejected","hash":{}}):o))+'</div>\r\n            <div class="csui-progress-static-aborted binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'</div>\r\n          </div>\r\n          <div class="csui-percent"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="csui-states-actions">\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableCancel:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+(null!=(n=t.if.call(e,null!=e?e.enableRetry:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")+'      <div class="csui-expand csui-progresscell '+(null!=(n=t.if.call(e,null!=e?e.singleItem:e,{"name":"if","hash":{},"fn":this.program(5,s,0),"inverse":this.noop}))?n:"")+'">\r\n        <button type="button" class="csui-expand-down binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.expand||(null!=e?e.expand:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expand","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.expand||(null!=e?e.expand:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"expand","hash":{}}):o))+'" aria-haspopup="true" aria-expanded="false">\r\n          <span class="icon csui-icon icon-expandArrowDown" /></button>\r\n          <button type="button" class="csui-expand-up binf-hidden binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.collapse||(null!=e?e.collapse:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"collapse","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.collapse||(null!=e?e.collapse:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"collapse","hash":{}}):o))+'" aria-haspopup="true" aria-expanded="true">\r\n            <span class="icon csui-icon icon-expandArrowUp" /></button>\r\n      </div>\r\n      <div class="csui-close csui-progresscell binf-hidden">\r\n        <button type="button" class="binf-btn binf-btn-default"\r\n                aria-label="'+this.escapeExpression((o=null!=(o=t.closeAria||(null!=e?e.closeAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeAria","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.close||(null!=e?e.close:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"close","hash":{}}):o))+'" >\r\n          <span class="csui-action-close csui-icon" /></button>\r\n      </div>\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableMinimiseButton:e,{"name":"if","hash":{},"fn":this.program(7,s,0),"inverse":this.noop}))?n:"")+"    </div>\r\n  </div>\r\n"+(null!=(n=t.if.call(e,null!=e?e.targetLocationUrl:e,{"name":"if","hash":{},"fn":this.program(9,s,0),"inverse":this.noop}))?n:"")+'</div>\r\n<div class="csui-items-wrapper">\r\n  <div class="csui-items" role="list">\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progresspanel",s),s}),csui.define("hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n,o;return'<div class="csui-progressbar csui-progressrow" style="height:48px;">\r\n  <div class="csui-name-status" role="listitem"  aria-label="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'"  tabindex="-1">\r\n    <div class="csui-names-progress '+(null!=(n=t.if.call(e,null!=e?e.singleItem:e,{"name":"if","hash":{},"fn":this.program(2,s,0),"inverse":this.noop
}))?n:"")+'">\r\n      <div class="csui-names csui-progresscell">\r\n        <div class="csui-name csui-progresscell" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">\r\n          '+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'\r\n        </div>\r\n      </div>\r\n      <div class="csui-states-actions">\r\n        <div class="csui-stateaction csui-progresscell '+(null!=(n=t.if.call(e,null!=e?e.singleItem:e,{"name":"if","hash":{},"fn":this.program(2,s,0),"inverse":this.noop}))?n:"")+'">\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableCancel:e,{"name":"if","hash":{},"fn":this.program(4,s,0),"inverse":this.noop}))?n:"")+'          <div\r\n               class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" />\r\n          <div\r\n               class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" />\r\n          <div class="csui-stateaction-aborted binf-hidden" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},"2":function(e,t,i,s){return"binf-hidden"},"4":function(e,t,i,s){var n;return'          <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                       circle_delete" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n          <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                       csui-icon circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" />\r\n'},"6":function(e,t,i,s){var n,o;return(null!=(n=t.if.call(e,null!=e?e.bundleDivider:e,{"name":"if","hash":{},"fn":this.program(7,s,0),"inverse":this.noop}))?n:"")+'<div class="csui-name-status" role="listitem"  aria-label="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'" tabindex="-1">\r\n  <div class="csui-names-progress '+(null!=(n=t.if.call(e,null!=e?e.singleItem:e,{"name":"if","hash":{},"fn":this.program(2,s,0),"inverse":this.noop}))?n:"")+'">\r\n    <div class="csui-names csui-progresscell">\r\n      <div class="csui-type '+this.escapeExpression((o=null!=(o=t.type_icon_class||(null!=e?e.type_icon_class:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"type_icon_class","hash":{}}):o))+'">\r\n      </div>\r\n      <div class="csui-name" title="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'">\r\n        '+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="csui-states-actions">\r\n    <div class="csui-stateaction csui-progresscell '+(null!=(n=t.if.call(e,null!=e?e.singleItem:e,{"name":"if","hash":{},"fn":this.program(2,s,0),"inverse":this.noop}))?n:"")+'">\r\n      <div class="csui-stateaction-resolved binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-success" />\r\n      <div class="csui-stateaction-rejected binf-hidden icon csui-icon csui-icon-like-btn csui-icon-notification-error" />\r\n      <div class="csui-stateaction-aborted binf-hidden" />\r\n    </div>\r\n    <div class="csui-progress csui-progresscell">\r\n      <div class="csui-progress-dynamic binf-hidden" aria-hidden="true">\r\n        <div class="csui-loading-parent-wrapper binf-disabled csui-disbaled">\r\n          <span class="csui-loading-dots-wrapper">\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n            <span class="csui-loading-dot">\r\n            </span>\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class="csui-progress-static"  aria-hidden="true">\r\n        <div class="csui-progress-textbar">\r\n          <div class="csui-progress-static-pending" aria-label="'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_pending||(null!=e?e.state_pending:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_pending","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-processing binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_processing||(null!=e?e.state_processing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_processing","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-resolved binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_resolved||(null!=e?e.state_resolved:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_resolved","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-rejected binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.errorMessage||(null!=e?e.errorMessage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"errorMessage","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.errorMessage||(null!=e?e.errorMessage:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"errorMessage","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-aborted binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_aborted||(null!=e?e.state_aborted:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_aborted","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopped binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_stopped||(null!=e?e.state_stopped:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_stopped","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_stopped||(null!=e?e.state_stopped:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_stopped","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-stopping binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_stopping||(null!=e?e.state_stopping:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_stopping","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_stopping||(null!=e?e.state_stopping:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_stopping","hash":{}}):o))+'\r\n          </div>\r\n          <div class="csui-progress-static-finalizing binf-hidden" aria-label="'+this.escapeExpression((o=null!=(o=t.state_finalizing||(null!=e?e.state_finalizing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_finalizing","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.state_finalizing||(null!=e?e.state_finalizing:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"state_finalizing","hash":{}}):o))+'\r\n          </div>\r\n        </div>\r\n        <div class="csui-percent">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="Error-message binf-hidden">\r\n      <div class="csui-error" title="'+this.escapeExpression((o=null!=(o=t.error||(null!=e?e.error:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"error","hash":{}}):o))+'">\r\n        '+this.escapeExpression((o=null!=(o=t.error||(null!=e?e.error:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"error","hash":{}}):o))+'\r\n      </div>\r\n    </div>\r\n    <div class="csui-stateaction csui-progress-cancel">\r\n'+(null!=(n=t.if.call(e,null!=e?e.enableCancel:e,{"name":"if","hash":{},"fn":this.program(12,s,0),"inverse":this.noop}))?n:"")+"    </div>\r\n"+(null!=(n=t.if.call(e,null!=e?e.enableRetry:e,{"name":"if","hash":{},"fn":this.program(14,s,0),"inverse":this.noop}))?n:"")+"\r\n  </div>\r\n</div>\r\n"},"7":function(e,t,i,s){var n;return'<div class="csui-progresspanel-divider">\r\n  '+(null!=(n=t.if.call(e,null!=e?e.location:e,{"name":"if","hash":{},"fn":this.program(8,s,0),"inverse":this.noop}))?n:"")+"\r\n  "+(null!=(n=t.if.call(e,null!=e?e.targetLocationUrl:e,{"name":"if","hash":{},"fn":this.program(10,s,0),"inverse":this.noop}))?n:"")+" \r\n</div>\r\n"},"8":function(e,t,i,s){var n;return' <span class="csui-progresspanel-location binf-pull-left" title="'+this.escapeExpression((n=null!=(n=t.location||(null!=e?e.location:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"location","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=t.location||(null!=e?e.location:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"location","hash":{}}):n))+"</span>"},"10":function(e,t,i,s){var n;return'<a class="csui-gotolocation-url binf-hidden binf-pull-right" href="'+this.escapeExpression((n=null!=(n=t.targetLocationUrl||(null!=e?e.targetLocationUrl:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"targetLocationUrl","hash":{}}):n))+'" role="button">'+this.escapeExpression((n=null!=(n=t.gotoLocation||(null!=e?e.gotoLocation:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"gotoLocation","hash":{}}):n))+"</a>"},"12":function(e,t,i,s){var n;return'      <button type="button" class="csui-stateaction-pending binf-btn binf-btn-default icon csui-icon\r\n                                   circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" tabindex="-1"/>\r\n      <button type="button" class="csui-stateaction-processing binf-hidden binf-btn binf-btn-default icon\r\n                                   csui-icon circle_delete" aria-label="'+this.escapeExpression((n=null!=(n=t.cancelAria||(null!=e?e.cancelAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancelAria","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.cancel||(null!=e?e.cancel:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"cancel","hash":{}}):n))+'" tabindex="-1" />\r\n      <div class="csui-stateaction-stopped binf-hidden"></div>\r\n'},"14":function(e,t,i,s){var n;return'      <div class="csui-show-retry binf-hidden">\r\n        <button type="button" class="csui-showRetry" title="'+this.escapeExpression((n=null!=(n=t.retry||(null!=e?e.retry:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retry","hash":{}}):n))+'" aria-label="'+this.escapeExpression((n=null!=(n=t.retry||(null!=e?e.retry:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retry","hash":{}}):n))+"\" tabindex='-1'>"+this.escapeExpression((n=null!=(n=t.retry||(null!=e?e.retry:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"retry","hash":{}}):n))+"</button>\r\n      </div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return"\r\n"+(null!=(n=t.if.call(e,null!=e?e.commandName:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.program(6,s,0)}))?n:"")}});return i.registerPartial("csui_controls_globalmessage_impl_progresspanel_impl_progressbar",s),s}),csui.define("css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel",[],function(){}),csui.define("css!csui/controls/globalmessage/globalmessage_icons",[],function(){}),csui.define("csui/controls/globalmessage/impl/progresspanel/progresspanel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/nodesprites","i18n","module","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","i18n!csui/controls/globalmessage/impl/progresspanel/impl/nls/progresspanel.lang","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","hbs!csui/controls/globalmessage/impl/progresspanel/impl/progressbar","css!csui/controls/globalmessage/impl/progresspanel/impl/progresspanel","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,s,n,o,r,a,c,l,u,d){"use strict";var h=e.defaults({"panelRefreshThrottle":400},o.config().csui),p=["pending","processing","rejected","resolved","aborted","stopped","stopping","finalizing"],f=function(t,i){var s=t.find(".csui-progress-static-rejected");if(void 0===i.dynamic?"processing"===i.state:i.dynamic){var n=t.find(".binf-progress-bar");this.options.messageHelper.switchField(t,".csui-progress","dynamic",["static","dynamic"]);var o=e.str.sformat(l.BytesOfSize,r.getReadableFileSizeString(i.count),r.getReadableFileSizeString(i.total));t.find(".csui-progress-text").text(o),n.attr("aria-valuenow",i.percentage),n.css("width",e.str.sformat("{0}%",i.percentage)),t.find(".csui-progress-dynamic .csui-percent").text(e.str.sformat("{0}%",i.percentage)),t.find(".csui-title").attr("aria-label",e.str.sformat("{0} {1}%",i.label,i.percentage))}else{this.options.messageHelper.switchField(t,".csui-progress","static",["static","dynamic"]),this.options.messageHelper.switchField(t,".csui-progress-static",i.state,p);var a=e.str.sformat("{0} {1}",i.label,l["State_"+i.state]);t.find(".csui-title").attr("aria-label",a)}s.text(i.errorMessage),s.attr("title",i.errorMessage),i.errorMessage&&t.addClass("csui-error"),this.options.messageHelper.switchField(t,".csui-stateaction",i.state,p)},b=function(e){var t=e.uploadContainer||e.container;return t&&t.get("name")},g=function(e){return b(e[0])!==b(e.reduce(function(e,t){return b(e)===b(t)?e:!t}))},m=i.ItemView.extend({"constructor":function(t){i.ItemView.prototype.constructor.call(this,t);var s=this.model;s.node&&void 0===s.node.get("mime_type")&&s.node.set({"container":!1,"type":s.node.get("type")||144,"mime_type":s.get("mime_type")||s.get("type")},{"silent":!0}),this.listenTo(this.model,"change",e.throttle(this._updateItem,h.panelRefreshThrottle)),this.listenTo(this.model,"change:state",this._updateItem)},"_updateItem":function(){var e=this._computeProgress(),t=this.$el;f.call(this,t,e)},"_computeProgress":function(){var t=this.model.get("count"),i=this.model.get("total"),s=this.model.get("state"),n=i>0&&t>=0?Math.floor(t/i*100):0;return 100===n&&"processing"===s&&(s="finalizing",this.model.set({"state":s}),this.$el.find(".csui-name-status button").not(".binf-hidden").is(":focus")&&this.ui.itemRow.trigger("focus"),this.$el.find(".csui-stateaction-processing").addClass("binf-hidden")),{"count":t,"total":i,"percentage":n,"state":s,"errorMessage":this.model.get("errorMessage"),"label":e.str.sformat("{0} {1}",this.options.oneFilePending,this.getItemLabel())}},"className":"csui-progressbar csui-progressrow","template":d,"getItemLabel":function(){return this.model.get("newName")||this.model.get("name")},"templateHelpers":function(){var t=this._computeProgress(),i=this.model,n=1===this.collection.length,o=this.getItemLabel(),r=e.str.sformat(l.CancelAria,o),a=(!!i.get("commandName")||i.get("commandName"),!this.options.hideGotoLocationMultiSet&&i.get("location")?i.get("targetLocation"):void 0);return t.name=o,t.enableCancel=this.options.enableCancel,t.type_icon_class=this.model.node?s.findClassByNode(this.model.node):"",p.forEach(function(e){t["state_"+e]=l["State_"+e]}),t.cancel=l.Cancel,t.cancelAria=r,t.expand=l.Expand,t.collapse=l.Collapse,t.close=l.Close,t.singleItem=n,t.minimize=l.minimize,t.minimizeAria=l.minimizeAria,t.retry=l.Retry,t.gotoLocation=l.GotoLocationLinkLabel,t.targetLocationUrl=a?a.url:void 0,t.enableRetry=h.enableRetry,t},"onRender":function(){this._updateItem()},"ui":{"pendingAction":".csui-stateaction-pending","processingAction":".csui-stateaction-processing","error":".csui-error","retryContainer":".csui-show-retry","retryButton":".csui-showRetry","gotoLocationElem":".csui-gotolocation-url","cancelButton":".csui-name-status button","itemRow":".csui-name-status"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel","keydown @ui.pendingAction":"handleKeydownOnCancel","keydown @ui.processingAction":"handleKeydownOnCancel","click @ui.retryButton":"processRetry","keydown @ui.retryButton":"processRetry","click @ui.gotoLocationElem":"hanldleClickGotoLocation","keydown":"handleKeydownEvent"},"setFocus":function(){this.$el.addClass("focused-row");var e=this.$el.find("button").not(".binf-hidden");return 0!==e.length?(e.trigger("focus"),e):(this.ui.itemRow.trigger("focus"),this.ui.itemRow)},"removeFocus":function(){this.$el.removeClass("focused-row")},"doCancel":function(){this.model.abort()},"handleKeydownOnCancel":function(e){32!==e.keyCode&&13!==e.keyCode||!this.ui.cancelButton.not(".binf-hidden").is(":focus")||(this.ui.itemRow.trigger("focus"),this.doCancel())},"processRetry":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||this.model.trigger("try:again")},"showGotoLocationElem":function(){this.ui.gotoLocationElem&&this.ui.gotoLocationElem.removeClass("binf-hidden")},"showRetryElem":function(){h.enableRetry&&this.model.get("serverFailure")&&this.ui.retryContainer.removeClass("binf-hidden")},"handleKeydownEvent":function(e){38!==e.keyCode&&40!==e.keyCode||this.trigger("keydown:item",e)},"hanldleClickGotoLocation":function(e){e.preventDefault(),e.stopPropagation(),this.trigger("click:gotolocation")},"handleProgressComplete":function(){this.showGotoLocationElem(),this.showRetryElem()}});return i.CompositeView.extend({"constructor":function(t){t||(t={}),this.focusChildIndex=-1,this.currentFocusIndex=0,this.loadingCount=0,e.defaults(t,{"oneFileSuccess":l.UploadOneItemSuccessMessage,"multiFileSuccess":l.UploadManyItemsSuccessMessage,"oneFilePending":l.UploadingSingleItem,"oneFileFinalizing":l.FinalizingSingleItem,"multiFilePending":l.UploadingItems,"oneFileFailure":l.UploadOneItemFailMessage,"multiFileFailure":l.UploadManyItemsFailMessage,"someFileSuccess":l.UploadSomeItemsSuccessMessage,"someFilePending":l.UploadingSomeItems,"someFileFailure":l.UploadSomeItemsFailMessage2,"oneItemStopped":l.UploadingOneItemStopped,"allItemsStopped":l.UploadingAllItemsStopped,"someItemsStopped":l.UploadSomeItemsStopped,"locationLabelPending":l.UploadingLocation,"locationLabelCompleted":l.UploadedLocation,"enableCancel":!0,"isLoadTimeAvailable":!1,"stoppingLabel":l.State_stopping}),t.enableCancel?this.panelStateValues=["resolved","rejected","aborted","processing"]:this.panelStateValues=["resolved","rejected","aborted"],i.CompositeView.prototype.constructor.call(this,t),t.context&&t.nextNodeModelFactory&&(this._nextNode=t.context.getModel(t.nextNodeModelFactory)),this.listenTo(this.collection,"change",this._updateHeader),this.listenTo(this.collection,"sort",this.setLocationName),this.originatingView=t.originatingView,this.originatingView&&this.originatingView.trigger("global.alert.inprogress"),this.isMultiContainer=g(this.collection.models),this.setLocationName()},"onDestroy":function(){this.handleProgressComplete(),this.focusChildIndex=-1,this.focusingOnList=!1,this.currentFocusIndex=0,this.trigger("tabable:not")},"handleProgressComplete":function(i){this.originatingView&&this.originatingView.trigger("global.alert.completed"),this.parentView&&this.parentView.trigger("processing:completed"),i||(this.ui.gotoLocationElem&&this.ui.gotoLocationElem.removeClass("binf-hidden"),this.children.invoke("showGotoLocationElem")),this.children.invoke("handleProgressComplete"),setTimeout(e.bind(function(){t(this.$el).trigger("focus")},this),10)},"behaviors":{"PerfectScrolling":{"behaviorClass":a,"contentParent":"> .csui-items-wrapper","suppressScrollX":!0},"TabableRegion":{"behaviorClass":c}},"isProgressFailed":function(){return-1!==t.inArray(this.state,["rejected"])},"isProgressCompleted":function(){return-1!==t.inArray(this.state,["resolved","rejected","aborted","stopped","stopping"])},"isProgressFinalizing":function(){return-1!==t.inArray(this.state,["stopping"])},"getLocalizedLocation":function(t){var i=this.isProgressCompleted()?this.options.locationLabelCompleted:this.options.locationLabelPending;return e.str.sformat(i,b(t))},"setLocationName":function(){var e,t,i,s=this;this.collection.forEach(function(n){n.get("bundleNumber")===e?(n.unset("location"),n.unset("bundleDivider")):(n.set({"bundleDivider":!0},{"silent":!0}),e=n.get("bundleNumber"),i=b(n),i===t?n.unset("location"):(s.isMultiContainer&&n.set({"location":s.getLocalizedLocation(n)},{"silent":!0}),t=i))}),this.collection.reset(this.collection.models)},"updateProgressPanel":function(e){var t,i;this.isProgressFailed()?(this.parentView&&this.parentView.trigger("processing:error"),t="csui-global-error",i=e===this.collection.length):t="csui-global-success",this.$el.addClass(t),this.ui.processingAction.addClass("binf-hidden"),this.ui.closeAction.parent(".csui-close").removeClass("binf-hidden"),this.ui.header.find(".csui-minimize").addClass("binf-hidden"),this.ui.header.find(".csui-progress").addClass("binf-hidden"),this._isRendered&&this.collection.sort(),this.handleProgressComplete(i),this.showretryAll(),this.currentlyFocusedElement().trigger("focus")},"showretryAll":function(){h.enableRetry&&this.showretryAllElem&&this.ui.retryAll.removeClass("binf-hidden")},"showProgressBar":function(e){e?(this.ui.progressBar.removeClass("binf-hidden"),this.ui.loadingDots.addClass("binf-hidden")):(this.ui.progressBar.addClass("binf-hidden"),this.ui.loadingDots.removeClass("binf-hidden"))},"_updateHeader":function(){var t=this._computeProgress(),i=this.options;switch(this.state=t.state,this.showProgressBar(t.isLoadTimeAvailable),t.state){case"pending":case"processing":t.label=this._getFormatString(i.oneFilePending,i.multiFilePending,this.collection.length);break;case"resolved":t.label=this._getFormatString(i.oneFileSuccess,i.multiFileSuccess,this.collection.length);break;case"stopping":t.label=i.stoppingLabel;break;case"stopped":t.label=this._getFormatString(i.oneItemStopped,i.someItemsStopped);break;case"aborted":t.label=this._getFormatString(i.oneItemStopped,i.allItemsStopped,this.collection.length);break;case"finalizing":t.label=this._getFormatString(i.oneFileFinalizing,i.multiFilePending,this.collection.length);break;default:t.label=this._getFormatString(i.oneFileFailure,i.multiFileFailure,t.failed)}if(void 0===t.dynamic?"processing"===t.state:t.dynamic)"processing"===t.state?this.$el.attr("aria-label",e.str.sformat("{0} {1}%",t.label,t.percentage)):this.$el.attr("aria-label",t.label);else{var s=e.str.sformat("{0} {1}",t.label,l["State_"+t.state]);this.$el.attr("aria-label",s)}if(this.ui.header.find(".csui-title").text(t.label),!this.isProgressFinalizing()&&this.isProgressCompleted()&&this.updateProgressPanel(t.failed),f.call(this,this.ui.header,t),1===this.collection.length&&"rejected"===t.state?this.ui.expandIcon.removeClass("binf-hidden"):this.$el.find(".csui-items-wrapper .csui-names-progress").removeClass("binf-hidden"),this.options.allowMultipleInstances?(this.parentView&&this.parentView.trigger("processbar:update",t.percentage),"processing"===t.state&&this.ui.minimizeButton.parent(".csui-minimize").removeClass("binf-hidden")):this.ui.minimizeButton.parent(".csui-minimize").addClass("binf-hidden"),!this.stateExpandCollapse){var n=this.ui.header.find(".csui-expand").find(":not(.binf-hidden)");n.hasClass("csui-expand-up")?this.doExpand(!1):n.hasClass("csui-expand-down")&&this.doCollapse(!1)}var o=!this.collection||0===this.collection.length;this.$el.hasClass("csui-empty")?o||this.$el.removeClass("csui-empty"):o&&this.$el.addClass("csui-empty")},"_getFormatString":function(t,i,s){var n,o;return 1===this.collection.length?(o=this.collection.models[0].get("newName")||this.collection.models[0].get("name"),n=e.str.sformat(t,o)):n=e.str.sformat(i,s),n},"_computeProgress":function(){var e=!0,t=!1,i=!0,s=!1,n=!1,o=0,r=0,a=0,c=0,l=this;this.collection.forEach(function(n){a+=n.get("count"),c+=n.get("total"),"stopped"===n.get("state")&&(s=!0),"aborted"===n.get("state")&&++r,"processing"===n.get("state")&&(l.loadingCount+=n.get("count")),"pending"!==n.get("state")&&"processing"!==n.get("state")&&"finalizing"!==n.get("state")||(e=!1),"pending"!==n.get("state")&&(t=!0),"rejected"===n.get("state")&&(++o,n.set({"sequence":2},{"silent":!0}),l.showretryAllElem=!!n.get("serverFailure")),"resolved"!==n.get("state")&&"rejected"!==n.get("state")||(i=!1)});var u=c>0?Math.floor(a/c*100):0;100!==u||e||(u=99,n=!0);var d=e?o?"rejected":s||r?i?"aborted":"stopped":"resolved":s?"stopping":n?"finalizing":t?"processing":"pending";return{"count":a,"total":c,"failed":o,"percentage":u,"state":d,"dynamic":"pending"!==d,"isLoadTimeAvailable":this.loadingCount>0}},"className":"csui-progresspanel","childView":m,"childViewContainer":".csui-items","childEvents":{"click:gotolocation":"navigateToLocation","keydown:item":"onChildViewKeydown"},"childViewOptions":function(){return e.extend(this.options,{"enableCancel":this.options.enableCancel,"messageHelper":this.options.messageHelper,"reorderOnSort":!0,"parentView":this})},"template":u,"templateHelpers":function(){var t,i,s=this._computeProgress(),n=1===this.collection.length;return this.options.hideGotoLocationSingleSet||this.isMultiContainer||(t=this.collection.models[0].get("targetLocation"),i=t&&t.url),p.forEach(function(e){s["state_"+e]=l["State_"+e]}),this.panelStateValues.forEach(function(e){s["stateaction_"+e]=l["StateAction_"+e],s["stateaction_all_"+e]=l["StateAction_all_"+e]}),s.cancel=l.Cancel,s.enableCancel=this.options.enableCancel,s.expand=l.Expand,s.collapse=l.Collapse,s.close=l.Close,s.closeAria=l.CloseAria,s.processing="processing"===s.state,s.progressTitleId=e.uniqueId("progressTitle"),s.singleItem=n,s.enableMinimiseButton=this.options.enableMinimiseButton,s.minimize=l.minimize,s.minimizeAria=l.minimizeAria,s.gotoLocation=l.GotoLocationLinkLabel,s.retryAll=l.RetryAll,s.enableRetry=h.enableRetry,e.extend(s,{"targetLocationUrl":i})},"onRender":function(){this.$el.attr("tabindex","0"),this.$el.attr("role","dialog"),this.currentlyFocusedElement(),this._updateHeader(),this.collection.comparator=function(e,t){if(e.get("bundleNumber")===t.get("bundleNumber"))return t.get("sequence")-e.get("sequence")}},"ui":{"header":".csui-header","progressBar":".csui-header .binf-progress","loadingDots":".csui-header .loading-dots","pendingAction":".csui-header .csui-stateaction-pending","processingAction":".csui-header .csui-stateaction-processing","closeAction":".csui-header .csui-close button","collapseAction":".csui-header .csui-expand-up","expandAction":".csui-header .csui-expand-down","minimizeButton":".csui-header .csui-minimize .icon-progresspanel-minimize","expandIcon":".csui-header .csui-expand","gotoLocationElem":".csui-gotolocation-url","retryAll":".csui-show-retryAll","childContainer":".csui-items"},"events":{"click @ui.pendingAction":"doCancel","click @ui.processingAction":"doCancel","click @ui.closeAction":"doClose","keydown @ui.closeAction":"handleKeydownOnClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand","keydown @ui.expandAction":"handleKeydownOnExpand","click @ui.minimizeButton":"_doProcessbarMinimize","keydown @ui.minimizeButton":"onKeyInViewMinimize","click @ui.gotoLocationElem":"handleGotoLocationClick","keydown @ui.gotoLocationElem":"handleGotoLocationClick","click @ui.retryAll":"processRetryAll","keydown @ui.retryAll":"processRetryAll","keydown":"onKeyInParentView"},"doCancel":function(){this.collection.abort("stopped"),this.ui.processingAction.addClass("binf-hidden")},"doCollapse":function(e){this.$el.removeClass("csui-expanded"),e=!1!==e;var t=this.$el.find(".csui-items");t.find(".focused-row").removeClass("focused-row"),this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","down",["up","down"]),this.options.messageHelper.collapsePanel(this,t,t,e),this.stateExpandCollapse="collapsed",this.$el.find(".csui-expand-down").trigger("focus"),this.focusChildIndex=-1,this.focusingOnList=!1},"doExpand":function(e){var t=this.$el.find(".csui-items"),i=e,s=this;e=!1!==e,this.options.messageHelper.switchField(this.$el.find(".csui-header"),".csui-expand","up",["up","down"]),this.options.messageHelper.expandPanel(this,t,t,e),this.stateExpandCollapse="expanded",this.$el.one(this.options.messageHelper.transitionEnd(),function(){s.trigger("ensure:scrollbar"),s.$el.addClass("csui-expanded")}),"keydown"!==i.type||32!==i.keyCode&&13!==i.keyCode?this.ui.collapseAction.trigger("focus"):(t.find(".focused-row").removeClass("focused-row"),setTimeout(function(){s.children.findByIndex(0).setFocus()}),this.focusChildIndex=0,this.focusingOnList=!0)},"handleKeydownOnExpand":function(e){"keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode||this.doExpand(e)},"handleKeydownOnCollapse":function(e){"keydown"!==e.type||13!==e.keyCode&&32!==e.keyCode||this.doCollapse(e)},"onKeyInViewMinimize":function(e){13!==e.keyCode&&32!==e.keyCode||this._doProcessbarMinimize()},"onKeyInParentView":function(e){var i=!1;switch(e.keyCode){case 9:var s=this._getAllFocusableElements();if((this.currentlyFocusedElem.length>0?this.currentlyFocusedElem:document.activeElement)===s[0][0]&&(this.currentFocusIndex=0),this.ui.childContainer.has(e.target).length)e.shiftKey&&(this.currentFocusIndex=s.length-1,this.focusingOnList=!1,i=!0);else{var n=this.currentFocusIndex;e.shiftKey?n--:n++,n>=0&&n<s.length?(this.currentFocusIndex=n,i=!0):n===s.length&&this.focusChildIndex>=0&&(i=!0,this.focusingOnList=!0)}}if(i)return this.trigger("changed:focus",this),this.currentlyFocusedElement(),t(this.currentlyFocusedElem).trigger("focus"),this.$el.find(".focused-row")&&this.$el.find(".focused-row").removeClass("focused-row"),!1},"onChildViewKeydown":function(e,t){var i=this.focusChildIndex;switch(t.keyCode){case 40:i<this.children.length-1&&++i;break;case 38:i>0&&--i}if(!(i<0||i>=this.children.length))return this.focusChildIndex>=0&&this.children.findByIndex(this.focusChildIndex).removeFocus(),this.focusChildIndex=i,this.children.findByIndex(this.focusChildIndex).setFocus(),this.trigger("changed:focus",this),!1},"_doProcessbarMinimize":function(){this.$el.addClass("binf-hidden"),this.parentView.trigger("processbar:minimize")},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t),this.parentView=t,this.parentView.trigger("processbar:finished"),this.listenTo(this.parentView,"processbar:maximize",function(){this.isDestroyed||(this.$el.removeClass("binf-hidden"),this.ui.minimizeButton.trigger("focus"))}),this.doResize(),this.$el.trigger("globalmessage.shown",this),this.trigger("dom:refresh"),this.$el.trigger("focus")},"currentlyFocusedElement":function(){if(this.isDestroyed)return t()
;if(this.focusingOnList&&this.focusChildIndex>=0)this.currentlyFocusedElem=this.children.findByIndex(this.focusChildIndex).setFocus();else{var e=this._getAllFocusableElements();this.currentlyFocusedElem=t(e[this.currentFocusIndex])}return this.currentlyFocusedElem},"_getAllFocusableElements":function(){var e=this.ui.header.find("*[tabindex]:visible").toArray();return e.unshift(this.$el),e},"doClose":function(){var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.isProgressFailed()&&t.trigger("escaped:focus"),this.parentView.trigger("processbar:finished")}},this);this.options.messageHelper.fadeoutPanel(i)},"handleKeydownOnClose":function(){"keydown"!==event.type||13!==event.keyCode&&32!==event.keyCode||this.doClose(event)},"doResize":function(){if(this.options.sizeToParentContainer){var e=parseInt(this.$el.css("min-width"),10),t=(this.$el.width(),this.$el.parent().width());this.uncompressedMinWidth||(this.uncompressedMinWidth=e),this.uncompressedMinWidth>t?this.$el.addClass("compressed"):this.$el.removeClass("compressed");var i=this.$el.width(),s=(t-i)/2;s>0||(s=0),s=n.settings.rtl?-s:s,s="translateX("+s+"px)",this.$el.css({"transform":s})}},"handleGotoLocationClick":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||(e.preventDefault(),e.stopPropagation(),this.navigateToLocation())},"navigateToLocation":function(e){var t=e?e.model:this.collection.models[0],i=t.get("targetLocation");i&&this._nextNode&&this._nextNode.set("id",i.id),this.doCollapse()},"processRetryAll":function(e){("keydown"!==e.type||32!==e.keyCode&&13!==e.keyCode)&&"click"!==e.type||this.trigger("retry:all")}})}),csui.define("csui/controls/globalmessage/impl/nls/globalmessage.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/globalmessage/impl/nls/root/globalmessage.lang",{"FewerDetails":"Fewer details","MoreDetails":"More details...","GotoLocationLinkLabel":"Go to location","CloseDialog":"Close","closeDialogAria":"Close message dialog"}),csui.define("hbs!csui/controls/globalmessage/impl/messagedialog",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  <div class="csui-message-link-div">\r\n    <a href="'+this.escapeExpression((n=null!=(n=t.link_url||(null!=e?e.link_url:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"link_url","hash":{}}):n))+'" class="csui-message-link">'+this.escapeExpression((n=null!=(n=t.link_label||(null!=e?e.link_label:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"link_label","hash":{}}):n))+"</a>\r\n  </div>\r\n"},"3":function(e,t,i,s){var n;return'<div class="csui-details-wrapper">\r\n  <div id="csui-message-details" class="csui-details csui-minheight">\r\n    <div class="csui-text binf-hidden" id="'+this.escapeExpression((n=null!=(n=t.detailsId||(null!=e?e.detailsId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"detailsId","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=t.details_text||(null!=e?e.details_text:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"details_text","hash":{}}):n))+'</div>\r\n    <div class="csui-action csui-message-details-heightsource">\r\n      <a href="javascript:void(0);" class="csui-action-moredetails">'+this.escapeExpression((n=null!=(n=t.action_moredetails||(null!=e?e.action_moredetails:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"action_moredetails","hash":{}}):n))+'</a>\r\n      <a href="javascript:void(0);" class="csui-action-fewerdetails binf-hidden">'+this.escapeExpression((n=null!=(n=t.action_fewerdetails||(null!=e?e.action_fewerdetails:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"action_fewerdetails","hash":{}}):n))+"</a>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-header csui-height-target">\r\n    <div class="csui-state">\r\n        <span class="csui-state-icon csui-icon"></span>\r\n    </div>\r\n    <div class="csui-text" id="'+this.escapeExpression((o=null!=(o=t.headerId||(null!=e?e.headerId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"headerId","hash":{}}):o))+'" title="'+this.escapeExpression((o=null!=(o=t.header_text||(null!=e?e.header_text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"header_text","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.header_text||(null!=e?e.header_text:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"header_text","hash":{}}):o))+'</div>\r\n    <div class="csui-action">\r\n        <button type="button" class="csui-action-close binf-btn binf-btn-default csui-icon" title="'+this.escapeExpression((o=null!=(o=t.closeDialog||(null!=e?e.closeDialog:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeDialog","hash":{}}):o))+'" aria-label="'+this.escapeExpression((o=null!=(o=t.closeDialogAria||(null!=e?e.closeDialogAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"closeDialogAria","hash":{}}):o))+'"/>\r\n    </div>\r\n</div>\r\n\r\n'+(null!=(n=t.if.call(e,null!=e?e.message_with_link:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+"\r\n"+(null!=(n=t.if.call(e,null!=e?e.details_text:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_globalmessage_impl_messagedialog",s),s}),csui.define("css!csui/controls/globalmessage/impl/messagedialog",[],function(){}),csui.define("csui/controls/globalmessage/impl/messagedialog.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","i18n","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","hbs!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/impl/messagedialog","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,s,n,o,r){"use strict";var a={"info":"csui-info","success":"csui-success","success_with_link":"csui-success-with-link","warning":"csui-warning","error":"csui-error","processing":"csui-processing","none":"csui-none"},c={"info":"csui-icon-notification-information-white","success":"csui-icon-notification-success-white","success_with_link":"csui-icon-notification-success-white","warning":"csui-icon-notification-warning-white","error":"csui-icon-notification-error-white","processing":null,"none":null},l={"info":"csui-icon-dismiss-white","success":"csui-icon-dismiss-white","success_with_link":"csui-icon-dismiss-white","warning":"csui-icon-dismiss-white","error":"csui-icon-dismiss-white","processing":null,"none":"csui-icon-dismiss"};return i.ItemView.extend({"constructor":function(e){this.css=r,e.info||(e.info="info"),this.className="csui-messagepanel "+a[e.info],e.context&&e.nextNodeModelFactory&&(this._nextNode=e.context.getModel(e.nextNodeModelFactory)),i.ItemView.prototype.constructor.call(this,e)},"className":"csui-messagepanel "+a.info,"template":o,"ui":{"closeAction":".csui-header .csui-action-close","collapseAction":".csui-details .csui-action-fewerdetails","expandAction":".csui-details .csui-action-moredetails","stateIcon":".csui-state-icon","closeIcon":".csui-action-close","messageLink":".csui-message-link"},"events":{"click @ui.closeAction":"doClose","click @ui.collapseAction":"doCollapse","click @ui.expandAction":"doExpand","click @ui.messageLink":"onClickLink","focusout @ui.closeIcon":"replaceDummyBackImg"},"doResize":function(){var e=this.$el.find(".csui-header");if(this.$el.find(".csui-details").width(e.width()),this.options.sizeToParentContainer){var t=this.$el.width(),i=this.$el.parent().width(),n=(i-t)/2;n>0||(n=0),n=s.settings.rtl?-n:n,n="translateX("+n+"px)",this.$el.css({"transform":n})}},"doCollapse":function(t){this._clearTimeout(),t=!1!==t;var i=this.$el.find(".csui-details"),s=i.find(".csui-text");this.options.messageHelper.switchField(i,".csui-action","moredetails",["moredetails","fewerdetails"]);var n=e.extend({"csuiAfterHide":function(){i.css("width","")}},this);this.options.messageHelper.collapsePanel(n,i,s,t),this.stateExpandCollapse="collapsed"},"doExpand":function(e){this._clearTimeout(),e=!1!==e;var t=this.$el.find(".csui-details"),i=t.find(".csui-text");this.options.messageHelper.switchField(t,".csui-action","fewerdetails",["moredetails","fewerdetails"]),t.css("width",this.$el.find(".csui-header").width()),this.options.messageHelper.expandPanel(this,t,i,e),this.stateExpandCollapse="expanded"},"doShow":function(t,i){var s=i.$el.find(".csui-global-message.position-show");if(s.length){var n=(s.last().find(".csui-header"),s.length);this.$el.find(".csui-header").css({"top":4*n+"px","margin":"0 "+-8*n+"px"});var o=this.$el.find(".csui-details-wrapper");o.length&&o.css({"margin-right":-8*n-5+"px","margin-left":-8*n-5+"px"})}if("success"===this.options.info){var r=this,a=e.extend({"csuiAfterShow":function(){r.doResize(),r._setTimeout()}},this);this.options.messageHelper.showPanel(a,t,i)}else this.options.messageHelper.showPanel(this,t,i);this.doResize(),this.$el.trigger("globalmessage.shown",this),this.$el.find(".csui-action-close").trigger("focus")},"doClose":function(){this._clearTimeout();var t=this,i=e.extend({"csuiAfterHide":function(){t.destroy(),t.trigger("escaped:focus")}},this);this.options.messageHelper.fadeoutPanel(i)},"_setTimeout":function(){var e=this;this.options.enablePermanentHeaderMessages||(this.options.timeout=window.setTimeout(function(){e.doClose()},5e3))},"_clearTimeout":function(){this.options.timeout&&(window.clearTimeout(this.options.timeout),this.options.timeout=void 0)},"headerId":void 0,"detailsId":void 0,"templateHelpers":function(){var t=n.closeDialogAria;this.headerId||(this.headerId=e.uniqueId("header")),this.detailsId||(this.detailsId=this.options.details?e.uniqueId("details"):void 0);var i={"header_text":this.options.message,"headerId":this.headerId,"details_text":this.options.details,"detailsId":this.detailsId,"action_moredetails":n.MoreDetails,"action_fewerdetails":n.FewerDetails,"closeDialog":n.CloseDialog,"closeDialogAria":t};return this.options.link_url&&this.options.targetFolder&&(i=e.extend(i,{"message_with_link":!0,"link_label":n.GotoLocationLinkLabel,"link_url":this.options.link_url})),i},"onClickLink":function(e){e.preventDefault(),e.stopPropagation(),this.doClose(),this.options.targetFolder&&this._nextNode&&this._nextNode.set("id",this.options.targetFolder.get("id"))},"onRender":function(){this.$el.attr("role","alertdialog"),this.$el.attr("aria-labelledby",this.headerId),this.detailsId&&this.$el.attr("aria-describedby",this.detailsId);var e=c[this.options.info];e?this.ui.stateIcon.addClass(e):this.$el.addClass("csui-no-icon");var t=l[this.options.info];if(t&&this.ui.closeIcon.addClass(t),!this.stateExpandCollapse){var i=this.$el.find(".csui-details .csui-action").find(":not(.binf-hidden)");i.hasClass("csui-action-fewerdetails")?this.doExpand(!1):i.hasClass("csui-action-moredetails")&&this.doCollapse(!1)}},"replaceDummyBackImg":function(){this.ui.closeIcon.addClass("csui-action-close-replace-dummy")}})}),csui.define("csui/controls/globalmessage/impl/custom.wrapper.view",["csui/lib/backbone","csui/lib/marionette","css!csui/controls/globalmessage/impl/messagedialog"],function(e,t){"use strict";return t.ItemView.extend({"constructor":function(i){t.ItemView.prototype.constructor.call(this,i);var s=this.getOption("contentView");s instanceof e.View||(s=s.call(this)),this.view=s,this.listenTo(s,"destroy",this.destroy),this.region=new t.Region({"el":this.el})},"className":"csui-messagepanel","template":!1,"onRender":function(){this.region.show(this.view)},"onDestroy":function(){this.region.empty()},"doShow":function(e,t){this.options.messageHelper.showPanel(this,e,t)}})}),csui.define("hbs!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<div class="csui-loaderpanel">\r\n  <div class="binf-row">\r\n    <div class="binf-col-sm-6" id="csui-zipanddownload-stage">\r\n      '+this.escapeExpression((n=null!=(n=t.label||(null!=e?e.label:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"label","hash":{}}):n))+'\r\n    </div>\r\n    <div class="binf-col-sm-4">\r\n      <div class="csui-loaderpanel-inner"></div>\r\n    </div>\r\n    <div class="binf-col-sm-2 bin-pull-right">\r\n      <a class="binf-pull-right csui-loader-cancel">Cancel</a>\r\n    </div>\r\n  </div>\r\n</div>'}});return i.registerPartial("csui_controls_globalmessage_impl_loaderpanel_impl_loaderpanel",s),s}),csui.define("css!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel",[],function(){}),csui.define("csui/controls/globalmessage/impl/loaderpanel/loaderpanel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","i18n","hbs!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel","css!csui/controls/globalmessage/impl/loaderpanel/impl/loaderpanel"],function(e,t,i,s,n,o){return s.ItemView.extend({"template":o,"templateHelpers":function(){return{"label":this.options.label}},"ui":{"cancel":".csui-loader-cancel"},"events":{"click @ui.cancel":"cancelAndHide"},"constructor":function(e){s.ItemView.prototype.constructor.call(this,e)},"cancelAndHide":function(e){this.options.xhr&&this.options.xhr.abort&&this.options.xhr.abort(),this.destroy(!1)},"doShow":function(e,t,i){this.options.messageHelper.showPanel(this,e,t),this.doResize(),this.$el.trigger("globalmessage.shown",this),this.ui.cancel.trigger("focus"),this.updateXHRReference(i)},"updateXHRReference":function(e){e&&(this.options.xhr&&this.options.xhr.abort(),this.options.xhr=e)},"doResize":function(){if(this.options.sizeToParentContainer){var e=parseInt(this.$el.css("min-width"),10),t=(this.$el.width(),this.$el.parent().width());this.uncompressedMinWidth||(this.uncompressedMinWidth=e),this.uncompressedMinWidth>t?this.$el.addClass("compressed"):this.$el.removeClass("compressed");var i=this.$el.width(),s=(t-i)/2;s>0||(s=0),s=n.settings.rtl?-s:s,s="translateX("+s+"px)",this.$el.css({"transform":s})}}})}),csui.define("hbs!csui/dialogs/modal.alert/impl/modal.alert",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  class="binf-modal-dialog binf-modal-'+this.escapeExpression((n=null!=(n=t.dialogSize||(null!=e?e.dialogSize:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"dialogSize","hash":{}}):n))+'"\r\n'},"3":function(e,t,i,s){return'  class="binf-modal-dialog"\r\n'},"5":function(e,t,i,s){var n;return'       aria-labelledby="'+this.escapeExpression((n=null!=(n=t.dlgTitleId||(null!=e?e.dlgTitleId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"dlgTitleId","hash":{}}):n))+'"\r\n'},"7":function(e,t,i,s){var n;return'       aria-describedby="'+this.escapeExpression((n=null!=(n=t.dlgMsgId||(null!=e?e.dlgMsgId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"dlgMsgId","hash":{}}):n))+'"\r\n'},"9":function(e,t,i,s){var n,o;return'      <div class="binf-modal-header '+this.escapeExpression((o=null!=(o=t.headerClass||(null!=e?e.headerClass:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"headerClass","hash":{}}):o))+'">\r\n'+(null!=(n=t.if.call(e,null!=e?e.showTitleCloseButton:e,{"name":"if","hash":{},"fn":this.program(10,s,0),"inverse":this.noop}))?n:"")+'        <h4 class="binf-modal-title">\r\n'+(null!=(n=t.if.call(e,null!=e?e.showTitleIcon:e,{"name":"if","hash":{},"fn":this.program(12,s,0),"inverse":this.noop}))?n:"")+'          <span class="title-text" title="'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+'" id="'+this.escapeExpression((o=null!=(o=t.dlgTitleId||(null!=e?e.dlgTitleId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"dlgTitleId","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.title||(null!=e?e.title:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"title","hash":{}}):o))+"</span>\r\n        </h4>\r\n      </div>\r\n"},"10":function(e,t,i,s){var n;return'          <button type="button" class="binf-close" data-binf-dismiss="modal"\r\n                  aria-label="'+this.escapeExpression((n=null!=(n=t.closeButtonAria||(null!=e?e.closeButtonAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"closeButtonAria","hash":{}}):n))+'" tabindex="0">\r\n            <span class="icon '+this.escapeExpression((n=null!=(n=t.titleCloseIcon||(null!=e?e.titleCloseIcon:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"titleCloseIcon","hash":{}}):n))+'"></span>\r\n          </button>\r\n'},"12":function(e,t,i,s){var n;return'            <span class="icon '+this.escapeExpression((n=null!=(n=t.titleIcon||(null!=e?e.titleIcon:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"titleIcon","hash":{}}):n))+'"></span>\r\n'},"14":function(e,t,i,s){var n;return'      <div class="binf-modal-body" id="'+this.escapeExpression((n=null!=(n=t.dlgMsgId||(null!=e?e.dlgMsgId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"dlgMsgId","hash":{}}):n))+'" title="'+this.escapeExpression((n=null!=(n=t.message||(null!=e?e.message:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"message","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=t.message||(null!=e?e.message:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"message","hash":{}}):n))+"</div>\r\n"},"16":function(e,t,i,s){return'    <div class="binf-modal-footer">\r\n'},"18":function(e,t,i,s){return'    <div class="binf-modal-footer csui-no-body">\r\n'},"20":function(e,t,i,s){var n;return'      <button type="button" class="binf-btn binf-btn-primary csui-yes csui-default" tabindex="0"\r\n              data-binf-dismiss="modal" title="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelYes:n,e))+'">'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelYes:n,e))+"</button>\r\n"},"22":function(e,t,i,s){var n;return'      <button type="button" class="binf-btn binf-btn-default csui-no" tabindex="0"\r\n              data-binf-dismiss="modal" title="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelNo:n,e))+'">'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelNo:n,e))+"</button>\r\n"},"24":function(e,t,i,s){var n;return'      <button class="binf-btn binf-btn-default csui-cancel" tabindex="0"\r\n              data-binf-dismiss="modal" title="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelCancel:n,e))+'">'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.buttons:e)?n.labelCancel:n,e))+"</button>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<div role="alertdialog"\r\n'+(null!=(n=t.if.call(e,null!=e?e.dialogSize:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.program(3,s,0)}))?n:"")+"\r\n"+(null!=(n=t.if.call(e,null!=e?e.showHeader:e,{"name":"if","hash":{},"fn":this.program(5,s,0),"inverse":this.noop}))?n:"")+(null!=(n=t.if.call(e,null!=e?e.message:e,{"name":"if","hash":{},"fn":this.program(7,s,0),"inverse":this.noop}))?n:"")+'>\r\n  <div class="binf-modal-content">\r\n'+(null!=(n=t.if.call(e,null!=e?e.showHeader:e,{"name":"if","hash":{},"fn":this.program(9,s,0),"inverse":this.noop}))?n:"")+"\r\n"+(null!=(n=t.if.call(e,null!=e?e.message:e,{"name":"if","hash":{},"fn":this.program(14,s,0),"inverse":this.noop}))?n:"")+"\r\n"+(null!=(n=t.if.call(e,null!=e?e.message:e,{"name":"if","hash":{},"fn":this.program(16,s,0),"inverse":this.program(18,s,0)}))?n:"")+(null!=(n=t.if.call(e,null!=(n=null!=e?e.buttons:e)?n.showYes:n,{"name":"if","hash":{},"fn":this.program(20,s,0),"inverse":this.noop}))?n:"")+(null!=(n=t.if.call(e,null!=(n=null!=e?e.buttons:e)?n.showNo:n,{"name":"if","hash":{},"fn":this.program(22,s,0),"inverse":this.noop}))?n:"")+(null!=(n=t.if.call(e,null!=(n=null!=e?e.buttons:e)?n.showCancel:n,{"name":"if","hash":{},"fn":this.program(24,s,0),"inverse":this.noop}))?n:"")+"  </div>\r\n  </div>\r\n  </div>\r\n\r\n"}});return i.registerPartial("csui_dialogs_modal.alert_impl_modal.alert",s),s}),csui.define("csui/dialogs/modal.alert/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/dialogs/modal.alert/impl/nls/root/lang",{"YesButtonLabel":"Yes","NoButtonLabel":"No","OkButtonLabel":"OK","CancelButtonLabel":"Cancel","CloseButtonLabel":"Close","CloseButtonAria":"Close dialog","DefaultWarningTitle":"Warning","DefaultInfoTitle":"Information","DefaultErrorTitle":"Error","DefaultSuccessTitle":"Success","DefaultMessageTitle":"Message","DefaultQuestionTitle":"Question"}),csui.define("csui/behaviors/keyboard.navigation/tabkey.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/behaviors/keyboard.navigation/tabables.behavior"],function(e,t,i,s,n,o){"use strict";return o.extend({"constructor":function(e,t){o.prototype.constructor.apply(this,arguments)},"_clearTabIndexes":function(e){s.debug("_clearTabIndexes of TabKeyBehavior for view "+e.constructor.name)&&console.log(s.last)}},{})}),csui.define("css!csui/dialogs/modal.alert/impl/modal.alert",[],function(){}),csui.define("csui/dialogs/modal.alert/modal.alert",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","csui/utils/base","hbs!csui/dialogs/modal.alert/impl/modal.alert","i18n!csui/dialogs/modal.alert/impl/nls/lang","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/lib/binf/js/binf","css!csui/dialogs/modal.alert/impl/modal.alert","css!csui/controls/globalmessage/globalmessage_icons"],function(e,t,i,s,n,o,r,a,c){n=n(e.id);var l=s.ItemView.extend({"className":function(){var e="csui-alert cs-dialog binf-modal binf-fade";return this.options.modalClass&&(e+=" "+this.options.modalClass),e},"template":r,"ui":{"defaultButton":".binf-modal-footer > .csui-default"},"triggers":{"click .csui-yes":"click:yes","click .csui-no":"click:no"},"events":{"shown.binf.modal":"onShown","hide.binf.modal":"onHiding","hidden.binf.modal":"onHidden","keydown":"onKeyDown"},"behaviors":{"TabKeyBehavior":{"behaviorClass":c,"recursiveNavigation":!0}},"constructor":function e(n){s.ItemView.prototype.constructor.apply(this,arguments),n=this.options;var o=t.reduce(e.buttonLabels,function(e,t,i){return e["label"+i]=t,e},{});n.buttons=t.defaults({},t.isEmpty(n.buttons)?e.buttons.Close:n.buttons,o),t.defaults(n,e.defaultOptions.Information,{"centerVertically":!0,"showHeader":""!==n.title}),this._deferred=i.Deferred()},"templateHelpers":function(){var e=t(this.options).clone();return e.dlgTitleId=t.uniqueId("dlgTitle"),e.dlgMsgId=t.uniqueId("dlgMsg"),e},"show":function(){this.render(),this.$el.attr("tabindex",0),this.options.centerVertically&&this.centerVertically(),this.$el.binf_modal("show"),this.triggerMethod("show");var e=this._deferred.promise(),t=this;return e.close=function(){return t.$el.binf_modal("hide"),e},e},"centerVertically":function(){var e,t;e=this.$el.clone(),e.css("display","block"),e.appendTo(i.fn.binf_modal.getDefaultContainer()),t=Math.round((e.height()-e.find(".binf-modal-content").height())/2),t=t>0?t:0,e.remove(),this.$el.find(".binf-modal-content").css("margin-top",t)},"onShown":function(){this._deferred.notify({"state":"shown"}),this._setTabFocus(!1)},"onHiding":function(){this._deferred.notify({"state":"hiding"})},"onHidden":function(e){this.destroy(),this.options.callback&&this.options.callback(this._result),this._result?this._deferred.resolve(this._result):this._deferred.reject(this._result)},"onKeyDown":function(e){switch(e.keyCode){case 13:e.target===this.el?this.ui.defaultButton.trigger("click"):i(e.target).trigger("click");break;case 9:return this._setTabFocus(e.shiftKey)}},"onClickYes":function(){this._result=!0},"onClickNo":function(){this._result=!1},"_setTabFocus":function(e){var t=this.$("*[tabindex=0]"),s=t.length-1,n=this._getStartIndex(s,e,t);if(s>-1){var r=void 0!==this.activeIndex?this.activeIndex:e?0:s;do{var a=i(t[n]);if(o.isVisibleInWindowViewport(a)){this.activeIndex=n,a.trigger("focus");break}n=e?0===n?s:n-1:n===s?0:n+1}while(n!=r)}return!1},"_getStartIndex":function(e,t){var i=0,s=this.activeIndex;return t?(i=e,void 0!==s&&s>0&&(i=this.activeIndex-1)):void 0!==s&&s<e&&(i=s+1),i}},{"defaultOptions":{"Success":{"title":a.DefaultSuccessTitle,"titleIcon":"csui-icon-notification-success-white","showTitleIcon":!0,"titleCloseIcon":"csui-icon-dismiss-white","showTitleCloseButton":!1,"headerClass":"success-header"},"Information":{"title":a.DefaultInfoTitle,"titleIcon":"csui-icon-notification-information-white","showTitleIcon":!0,"titleCloseIcon":"csui-icon-dismiss-white","showTitleCloseButton":!1,"headerClass":"info-header"},"Warning":{"title":a.DefaultWarningTitle,"titleIcon":"csui-icon-notification-warning-white","showTitleIcon":!0,"titleCloseIcon":"csui-icon-dismiss-white","showTitleCloseButton":!1,"headerClass":"warning-header"},"Error":{"title":a.DefaultErrorTitle,"titleIcon":"csui-icon-notification-error-white","showTitleIcon":!0,"titleCloseIcon":"csui-icon-dismiss-white","showTitleCloseButton":!1,"headerClass":"error-header"},"Message":{"title":a.DefaultMessageTitle,"titleIcon":"","showTitleIcon":!1,"titleCloseIcon":"csui-icon-dismiss","showTitleCloseButton":!1,"headerClass":"message-header"},"Question":{"title":a.DefaultQuestionTitle,"titleIcon":"csui-icon-notification-confirmation-white","showTitleIcon":!0,"titleCloseIcon":"csui-icon-dismiss-white","showTitleCloseButton":!1,"headerClass":"question-header"}},"buttons":{"YesNoCancel":{"showYes":!0,"showNo":!0,"showCancel":!0},"YesNo":{"showYes":!0,"showNo":!0,"showCancel":!1},"OkCancel":{"showYes":!0,"labelYes":a.OkButtonLabel,"showNo":!1,"showCancel":!0},"Ok":{"showYes":!0,"labelYes":a.OkButtonLabel,"showNo":!1,"showCancel":!1},"Cancel":{"showYes":!1,"showNo":!1,"showCancel":!0},"Close":{"showYes":!1,"showNo":!1,"showCancel":!0,"labelCancel":a.CloseButtonLabel}},"buttonLabels":{"Yes":a.YesButtonLabel,"No":a.NoButtonLabel,"Ok":a.OkButtonLabel,"Cancel":a.CancelButtonLabel,"Close":a.CloseButtonLabel},"showSuccess":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Success,l.buttons.Close),this._show(s)},"showInfo":function(e,t,i,s){this.showInformation.apply(this,arguments)},"showInformation":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Information,l.buttons.Close),this._show(s)},"showWarning":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Warning,l.buttons.Close),this._show(s)},"showError":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Error,l.buttons.Close),this._show(s)},"showMessage":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Message,l.buttons.Close),this._show(s)},"confirmSuccess":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Success,l.buttons.YesNo),this._show(s)},"confirmInfo":function(e,t,i,s){n.warn("The method 'configInfo' has been deprecated and will be removed.  Use 'configInformation' instead.")&&console.warn(n.last),n.warn("Occurred "+n.getStackTrace(2))&&console.warn(n.last),this.confirmInformation.apply(this,arguments)},"confirmInformation":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Information,l.buttons.YesNo),this._show(s)},"confirmWarning":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Warning,l.buttons.YesNo),this._show(s)},"confirmError":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Error,l.buttons.YesNo),this._show(s)},"confirmQuestion":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Question,l.buttons.YesNo),this._show(s)},"confirmMessage":function(e,t,i,s){return s=this._makeOptions(arguments,l.defaultOptions.Message,l.buttons.YesNo),this._show(s)},"_makeOptions":function(e,i,s){var n=e[0],o=e[1],r=e[2],c=e[3];return"function"!=typeof n&&(c=r,r=o,o=n,n=void 0),c="object"==typeof o?t.clone(o):"object"==typeof r?t.defaults({"message":o},r):t.defaults({"message":o,"title":r},c),c.buttons=t.defaults({},c.buttons,s),c.callback=n,i.closeButtonAria=a.CloseButtonAria,t.defaults(c,i)},"_show":function(e){return new l(e).show()}});return l}),csui.define("csui/controls/globalmessage/globalmessage",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/messagehelper","csui/utils/accessibility","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","csui/controls/globalmessage/impl/messagedialog.view","csui/controls/globalmessage/impl/custom.wrapper.view","csui/controls/globalmessage/impl/loaderpanel/loaderpanel.view","csui/dialogs/modal.alert/modal.alert"],function(e,t,i,s,n,o,r,a,c,l,u){"use strict";var d=e.config();t.defaults(d,{"enablePermanentHeaderMessages":!1}),o.isAccessibleMode()&&(d.enablePermanentHeaderMessages=!0);var h,p=new n,f={};return{"setMessageRegionView":function(e,i){this._cleanupPreviousMessageRegion(),i=t.defaults({},i,{"useClass":!0,"sizeToParentContainer":!0}),i.classes&&(f.classNames=i.classes),i.enableMinimiseButtonOnProgressPanel&&(f.enableMinimiseButtonOnProgressPanel=i.enableMinimiseButtonOnProgressPanel),f.relatedView=i.useClass?void 0:e,f.sizeToParentContainer=i.sizeToParentContainer,f.messageRegionView=e,f.messageRegionView&&f.fileUploadCollection&&f.progressPanel&&(f.progressPanel=this._makeProgressPanel())},"setFileUploadCollection":function(e){f.fileUploadCollection=e,f.progressPanel&&(f.fileUploadCollection?f.progressPanel=this._makeProgressPanel():this.hideFileUploadProgress())},"hideFileUploadProgress":function(){f.progressPanel&&(f.progressPanel.doClose(),f.progressPanel.destroy(),f.progressPanel=void 0)},"showFileUploadProgress":function(e,t){console.warn("this method has been deprecated! please use showProgressPanel."),this.showProgressPanel(e,t)},"showProgressPanel":function(e,i){e&&(f.fileUploadCollection||(f.fileUploadCollection=e),f.progressPanel&&f.progressPanel.options.actionType===i.actionType&&!f.progressPanel.isProgressCompleted()?f.fileUploadCollection.add(e.models):(this.hideFileUploadProgress(),f.fileUploadCollection=e),f.progressPanel=this._makeProgressPanel(t.extend(i,{"enableMinimiseButton":f.enableMinimiseButtonOnProgressPanel})),f.progressPanel.doShow(f.relativeView,f.messageRegionView))},"isActionInProgress":function(e,t,i){var s=!1;return f.progressPanel&&!f.progressPanel.isProgressCompleted()&&f.progressPanel.options.actionType!==e&&(s=!0,u.showError(t,i)),s},"showPermissionApplyingProgress":function(e,t){e&&(f.permissionAppliedCollection=e,f.progressPanel=this.__makePermissionProgressPanel(t)),f.progressPanel&&!e||(f.progressPanel=this._makeProgressPanel(t)),f.progressPanel&&f.progressPanel.doShow(f.relativeView,f.messageRegionView)},"showLoader":function(e,i){this.hideFileUploadProgress(),f.loaderPanel?f.loaderPanel.doShow(f.relativeView,f.messageRegionView,e):f.loaderPanel=this._makeLoaderPanel(t.extend({"xhr":e},i)),f.loaderPanel.listenTo(f.loaderPanel,"destroy",function(e){i.onDestroy&&i.onDestroy(e),f.loaderPanel=void 0}),e&&e.always(function(e){f.loaderPanel&&f.loaderPanel.destroy(),i.onDestroy&&i.onDestroy(e),f.loaderPanel=void 0})},"changeLoaderMessage":function(e,t){f.loaderPanel&&(f.loaderPanel.$el.find("#csui-zipanddownload-stage").text(e),f.loaderPanel.updateXHRReference(t))},"showMessage":function(e,i,s,n){return this._showMessageView(a,t.extend({"info":e,"message":i,"details":s,"messageHelper":p,"sizeToParentContainer":f.sizeToParentContainer,"enablePermanentHeaderMessages":d.enablePermanentHeaderMessages},n))},"showCustomView":function(e){return this._showMessageView(c,{"contentView":e,"messageHelper":p})},"_showMessageView":function(e,t){this._ensureMessageRegion();var i=p.activatePanel(p.createPanel(f,e,t),f.relatedView,f.messageRegionView);return this._addEventHandlers(i),i},"_makeProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":f.fileUploadCollection,
"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":p}),this._ensureMessageRegion();var i=p.activatePanel(p.createPanel(f,r,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"__makePermissionProgressPanel":function(e){e||(e={}),t.defaults(e,{"collection":f.permissionAppliedCollection,"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":p}),this._ensureMessageRegion();var i=p.activatePanel(p.createPanel(f,r,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"_makeLoaderPanel":function(e){e||(e={}),t.defaults(e,{"sizeToParentContainer":f.sizeToParentContainer,"messageHelper":p}),this._ensureMessageRegion();var i=p.activatePanel(p.createPanel(f,l,e,f.progressPanel),f.relatedView,f.messageRegionView,f.progressPanel);return this._addEventHandlers(i),i},"_addEventHandlers":function(e){var t=function(){p.resizePanel(e,f.relatedView)};i(window).on("resize",t),e.listenTo(f.messageRegionView,"resize",t),e.once("before:destroy",function(){i(window).off("resize",t),e.stopListening(f.messageRegionView,"resize",t)})},"_ensureMessageRegion":function(){if(!f.messageRegionView){var e=i.fn.binf_modal.getDefaultContainer(),t=i("<div>",{"style":"position:absolute; top: 0; left: 0; width: 0; height: 100vh;"}).appendTo(e);f.messageRegionView=new s.View({"el":t}),h=!0}},"_cleanupPreviousMessageRegion":function(){h&&(f.messageRegionView.remove(),h=!1),f.progressPanel&&f.progressPanel.destroy(),f={}}}}),csui.define("csui/behaviors/default.action/impl/command",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/log","csui/utils/commands","csui/controls/globalmessage/globalmessage","csui/utils/commandhelper"],function(e,t,i,s,n,o,r,a){"use strict";function c(e){e||(e={}),this.commands=e.commands||o}return n=n(e.id),t.extend(c.prototype,{"executeAction":function(e,s,o){var c=e.get("signature"),l=this.commands.findWhere({"signature":c});try{if(!l)throw new Error("Invalid command: "+c);var u=l.execute(s,o);return t.isArray(u)||(u=[u]),i.when.apply(i,u).fail(function(e){e&&(a.showOfflineMessage(e)||r.showMessage("error",e.message))})}catch(e){n.warn('Executing the command "{0}" failed.\n{1}',!!l&&l.get("signature"),e.message)&&console.warn(n.last)}}}),c.extend=s.View.extend,c}),csui.define("csui/behaviors/default.action/impl/defaultaction",["module","csui/lib/underscore","csui/behaviors/default.action/impl/command","csui/models/nodes","csui/utils/defaultactionitems","csui/utils/log"],function(e,t,i,s,n,o){"use strict";o=o(e.id);var r=i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),e||(e={}),this.actionItems=e.actionItems||n},"executeAction":function(e,t){var n,o;e.original&&e.original.get("id")>0&&(n=e,o=this._fakeActions(e.original),1===e.get("type")&&(e=e.original));var r=this.getAction(e),a={"nodes":new s([e]),"shortcut":n};return o&&this._resetFakedActions(e),r&&i.prototype.executeAction.call(this,r,a,t)},"getAction":function(e){var t,i,n=e.get("type");(1===n||(!window.csui||!window.csui.mobile)&&2===n)&&e.original&&e.original.get("id")>0&&(t=e,e=e.original,i=this._fakeActions(e));var r={"nodes":new s([e]),"shortcut":t},a=!1,c=this.actionItems.find(function(t){if(t.enabled(e)){var i=this.commands.findWhere({"signature":t.get("signature")});try{a=i&&i.enabled(r)}catch(e){o.warn('Evaluating the command "{0}" failed.\n{1}',i.get("signature"),e.message)&&console.warn(o.last)}return!0}},this);return i&&this._resetFakedActions(e),a&&c},"hasAction":function(e){return!!this.getAction(e)},"_fakeActions":function(e){if(!e.actions.length){var i=t.map(this.actionItems.getAllCommandSignatures(this.commands),function(e){return{"signature":e}});return e.actions.reset(i,{"silent":!0}),!0}},"_resetFakedActions":function(e){e.actions.reset([],{"silent":!0})}});return r.version="1.0",r}),csui.define("csui/behaviors/default.action/default.action.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/url","csui/utils/log","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/search.query.factory","csui/behaviors/default.action/impl/defaultaction","csui/utils/node.links/node.links"],function(e,t,i,s,n,o,r,a,c,l,u){"use strict";return r=r(e.id),n.Behavior.extend({"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments);var i=t.options.context;this.view=t,this._nextNode=i&&i.getModel(a),this._searchQuery=i&&i.getModel(c),t.defaultActionController=this.options.defaultActionController||new l},"onExecuteDefaultAction":function(e){e instanceof s.View&&(e=e.model),this.view.defaultActionController.getAction(e)?this.view.defaultActionController.executeAction(e,{"context":this.view.options.context,"originatingView":this.view}):r.can("WARN")&&r.warn("No default action was enabled for {0}.",JSON.stringify(t.pick(e.attributes,"name","id","type")))&&console.warn(r.last)}},{"getDefaultActionNodeUrl":function(e){var t=u.getUrl(e),i=t.lastIndexOf("#");return i>=0?t.substr(i):t}})}),csui.define("csui/behaviors/keyboard.navigation/retainfocus.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,s,n){"use strict";return n.Behavior.extend({"ui":{"control":".csui-control"},"events":{"mousedown @ui.control":"_startActive","focusout @ui.control":"_stopActive","keydown @ui.control":"_stopActive"},"constructor":function(e,t){n.Behavior.prototype.constructor.apply(this,arguments),this._isFocused=!1,this.listenTo(t,"before:render",function(){if(this._isRendering=!0,t.isRendered){var e=this.ui.control[0];this._isFocused=document.activeElement===e}}),this.listenTo(t,"render",function(){this._isRendering=!1}),this.listenTo(t,"dom:refresh",function(){this._reApplyFocus()})},"_reApplyFocus":function(){this._isActive?this.ui.control.addClass("csui-control-active"):this.ui.control.removeClass("csui-control-active"),this._isFocused&&this.ui.control.trigger("focus")},"_startActive":function(){this._isActive=!0,this.ui.control.addClass("csui-control-active")},"_stopActive":function(){this._isRendering||(this.ui.control.removeClass("csui-control-active"),this._isActive=!1)}},{})}),csui.define("hbs!csui/controls/error/impl/error",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  <div class="csui-suggestion">'+this.escapeExpression((n=null!=(n=t.suggestion||(null!=e?e.suggestion:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"suggestion","hash":{}}):n))+"</div>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<div class="csui-error-icon-div">\r\n  <div class="csui-error-icon-parent">\r\n    <div class="csui-error-icon notification_error"></div>\r\n  </div>\r\n\r\n</div>\r\n<div class="csui-message">'+this.escapeExpression((o=null!=(o=t.message||(null!=e?e.message:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"message","hash":{}}):o))+"</div>\r\n"+(null!=(n=t.if.call(e,null!=e?e.suggestion:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_error_impl_error",s),s}),csui.define("css!csui/controls/error/impl/error",[],function(){}),csui.define("csui/controls/error/error.view",["csui/lib/jquery","csui/lib/marionette","hbs!csui/controls/error/impl/error","css!csui/controls/error/impl/error"],function(e,t,i){"use strict";return t.ItemView.extend({"className":function(){var e="csui-error content-tile csui-error-container";return this.options.low&&(e+=" csui-low"),e},"template":i,"modelEvents":{"change":"render"},"ui":{"messageArea":".csui-message"},"events":{"mouseenter":"showPopover","mouseleave":"hidePopover"},"constructor":function(e){e=e||{},t.ItemView.prototype.constructor.call(this,e)},"canShowPopover":function(){return!!this.options.model.get("title")},"onShow":function(){if(this.canShowPopover()){var t=this;this.$el.closest(".csui-disabled").removeClass("csui-disabled"),this.ui.messageArea.binf_popover({"content":this.options.model.get("title"),"html":!0,"placement":function(){var i=t.ui.messageArea,s=i.width(),n=i.height(),o=i.offset(),r=o.left,a=o.top,c=e(window).width()-(r+i.outerWidth(!0)),l=e(window).height()-(a+i.outerHeight(!0));return c>s?"right":r>s?"left":l>n?"bottom":"top"}})}},"showPopover":function(e){this.canShowPopover()&&(e.preventDefault(),e.stopPropagation(),this.ui.messageArea.binf_popover("show"))},"hidePopover":function(e){this.canShowPopover()&&(e.preventDefault(),e.stopPropagation(),this.ui.messageArea.binf_popover("hide"))}})}),csui.define("csui/widgets/error/error.view",["csui/lib/underscore","csui/lib/backbone","csui/controls/error/error.view"],function(e,t,i){"use strict";return i.extend({"className":function(){var t=i.prototype.className;return e.isFunction(t)&&(t=t.call(this)),"csui-error-widget "+t},"constructor":function(e){e||(e={}),e.data||(e.data={}),e.model||(e.model=new t.Model({"message":e.data.message,"suggestion":e.data.suggestion})),i.prototype.constructor.call(this,e)}})}),csui.define("csui/behaviors/widget.container/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/behaviors/widget.container/impl/nls/root/lang",{"loadingWidgetFailedMessage":'"{0}" failed to load.',"loadingWidgetFailedSuggestion":"Please try again later or contact support."}),csui.define("csui/behaviors/widget.container/widget.container.behavior",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/widgets/error/error.view","csui/utils/log","i18n!csui/behaviors/widget.container/impl/nls/lang","csui/lib/jquery.when.all"],function(e,t,i,s,n,o,r){"use strict";var a=s.Behavior.extend({"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this.view=t,this.view.widgetsResolved=this._resolveWidgets()},"_resolveWidgets":function(){var e=[];if(!this.view.enumerateWidgets)throw new s.Error({"name":"UndefinedEnumerateWidgets","message":"Undefined enumerateWidgets method"});return this.view.enumerateWidgets(t.bind(function(t){e.push(i.when(t).then(a.resolveWidget))},this)),i.whenAll.apply(i,e)}},{"getErrorWidget":function(e,i){return{"type":"csui/widgets/error","options":{"message":t.str.sformat(r.loadingWidgetFailedMessage,e.type),"suggestion":r.loadingWidgetFailedSuggestion,"originalWidget":t.extend({},e)},"view":n,"error":i}},"resolveWidget":function(e){if(!e.view){return a._loadWidget(e.type).then(function(t){return e.view=t,e.class=t,e},function(i){o.warn('Loading widget "{0}" failed. {1}',e.type,i)&&console.warn(o.last),o.warn("Occurred "+o.getStackTrace())&&console.warn(o.last),t.extend(e,a.getErrorWidget(e,i))})}return i.Deferred().resolve().promise()},"_loadWidget":function(t){var s,n=i.Deferred(),o=t.lastIndexOf("/");return o<0?s="csui/widgets/"+t:(s=t,t=t.substring(o+1)),e([s+"/"+t+".view"],function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise()}});return a}),csui.define("csui/controls/mixins/view.events.propagation/view.events.propagation.mixin",["csui/lib/underscore","csui/lib/marionette"],function(e,t){"use strict";return{"propagateEventsToViews":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._propagateEventToViews,this,t))},"cancelEventsToViewsPropagation":function(){var t=Array.prototype.slice.call(arguments);e.each(this._eventsToPropagateToViews,e.bind(this._cancelEventToViewsPropagation,this,t))},"_propagateEventToViews":function(i,s){e.each(i,function(e){var i=e;e.listenTo(this,s,function(){if((i._isShown||i._isAttached)&&i._isRendered&&t.isNodeAttached(i.el)){var e=Array.prototype.slice.call(arguments);e.unshift(i,s),t.triggerMethodOn.apply(t,e)}},this)},this)},"_cancelEventToViewsPropagation":function(t,i){e.each(t,function(e){e.stopListening(this,i,void 0,this)},this)},"_eventsToPropagateToViews":["dom:refresh"]}}),csui.define("csui/controls/grid/grid.view",["require","module","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/log"],function(e,t,i,s,n,o,r){r=r(t.id);var a=n.ItemView.extend({"className":function(){var e=[];return this.model.get("className")&&e.push(this.model.get("className")),this._addSizeClasses(e),this._addOffsetClasses(e),this._addPullClasses(e),this._addPushClasses(e),this._addHeightClasses(e),i.unique(e).join(" ")},"attributes":function(){var e;if(void 0!==this.model.get("widget")){var t=this.model.get("widget").type,i=t.lastIndexOf("/");i>0&&(t=t.substring(i+1)),e={"data-csui-widget_type":t,"data-csui-cell_address":this.model.get("widget").cellAddress}}else e={};return e},"constructor":function(e){e.cellBehaviours&&(this.behaviors=i.extend(e.cellBehaviours,this.behaviors)),this._init(e)},"_init":function(e){n.ItemView.prototype.constructor.call(this,i.extend({"template":!1},e)),this.collection?this._createRows():(this._registerModelEvents(),this._createCell()),this.propagateEventsToViews(this.cell||this.rows)},"_registerModelEvents":function(){this.listenTo(this.model,"change:widget",this._updateWidget),this.listenTo(this.model,"change:sizes",this._updateSizes),this.listenTo(this.model,"change:heights",this._updateSizes)},"_updateSizes":function(){var e=i.result(this,"className");this.$el.attr("class",e)},"_updateWidget":function(e){e.cellAddress=this.model.get("widget").cellAddress,this._createCell();var t=i.result(this,"attributes");this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.$el.attr(t),this.render()},"onRender":function(){try{this._renderContent()}catch(t){r.warn("Widget render failed.\n{0}",t.message)&&console.warn(r.last);var e=this.options.grid.getOption("cellConstructionFailed");i.isFunction(e)&&e.call(this.options.grid,this.model,t)}},"onBeforeDestroy":function(){this._destroyContent()},"_addSizeClasses":function(e){var t=this.model.get("sizes");t&&(null!=t.xs&&e.push("binf-col-xs-"+t.xs),null!=t.sm&&e.push("binf-col-sm-"+t.sm),null!=t.md&&e.push("binf-col-md-"+t.md),null!=t.lg&&e.push("binf-col-lg-"+t.lg),null!=t.xl&&e.push("binf-col-xl-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-"+t.xxl))},"_addOffsetClasses":function(e){var t=this.model.get("offsets");t&&(null!=t.xs&&e.push("binf-col-xs-offset-"+t.xs),null!=t.sm&&e.push("binf-col-sm-offset-"+t.sm),null!=t.md&&e.push("binf-col-md-offset-"+t.md),null!=t.lg&&e.push("binf-col-lg-offset-"+t.lg),null!=t.xl&&e.push("binf-col-xl-offset-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-offset-"+t.xxl))},"_addPullClasses":function(e){var t=this.model.get("pulls");t&&(null!=t.xs&&e.push("binf-col-xs-pull-"+t.xs),null!=t.sm&&e.push("binf-col-sm-pull-"+t.sm),null!=t.md&&e.push("binf-col-md-pull-"+t.md),null!=t.lg&&e.push("binf-col-lg-pull-"+t.lg),null!=t.xl&&e.push("binf-col-xl-pull-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-pull-"+t.xxl))},"_addPushClasses":function(e){var t=this.model.get("pushes");t&&(null!=t.xs&&e.push("binf-col-xs-push-"+t.xs),null!=t.sm&&e.push("binf-col-sm-push-"+t.sm),null!=t.md&&e.push("binf-col-md-push-"+t.md),null!=t.lg&&e.push("binf-col-lg-push-"+t.lg),null!=t.xl&&e.push("binf-col-xl-push-"+t.xl),null!=t.xxl&&e.push("binf-col-xxl-push-"+t.xxl))},"_addHeightClasses":function(e){var t=this.model.get("heights");t&&(null!=t.xs&&e.push("row-xs-"+t.xs),null!=t.sm&&e.push("row-sm-"+t.sm),null!=t.md&&e.push("row-md-"+t.md),null!=t.lg&&e.push("row-lg-"+t.lg),null!=t.xl&&e.push("row-xl-"+t.xl),null!=t.xxl&&e.push("row-xxl-"+t.xxl))},"_createRows":function(){this.rows=new l({"el":this.el,"grid":this.options.grid,"collection":this.collection})},"_createCell":function(){var e=this._getCellView(),t=this._getCellViewOptions(),s=i.extend({"model":this.model},t);this.cell&&this.cell.destroy();try{this.cell=new e(s)}catch(e){r.warn("Widget initialization failed.\n{0}",e.message)&&console.warn(r.last);var n=this.options.grid.getOption("cellConstructionFailed");i.isFunction(n)&&n.call(this.options.grid,this.model,e)}},"_getCellView":function(){var e=this.options.grid.getOption("cellView");if(!e||e.prototype instanceof s.View||(e=e.call(this.options.grid,this.model)),!e)throw new n.Error({"name":"NoCellViewError","message":'A "cellView" must be specified'});return e},"_getCellViewOptions":function(){var e=this.options.grid.getOption("cellViewOptions");return i.isFunction(e)&&(e=e.call(this.options.grid,this.model,this)),e},"_renderContent":function(){if(this.cell){new n.Region({"el":this.el}).show(this.cell)}else this.options.grid.$el.hasClass("grid-rows")&&this.$el.addClass("grid-rows"),this.rows.render()},"_destroyContent":function(){this.cell&&this.cell.destroy(),this.rows&&this.rows.destroy()}});i.extend(a.prototype,o);var c=n.CollectionView.extend({"className":"binf-row","childView":a,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.rows,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e.rowBehaviours&&(this.behaviors=i.extend(e.rowBehaviours,this.behaviors)),n.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});i.extend(c.prototype,o);var l=n.CollectionView.extend({"childView":c,"childViewOptions":function(e){return{"grid":this.options.grid,"collection":e.columns,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours,"reorderOnSort":this.options.reorderOnSort}},"constructor":function(){n.CollectionView.prototype.constructor.apply(this,arguments),this.listenTo(this,"add:child",this.propagateEventsToViews)}});i.extend(l.prototype,o);var u=c.extend({"childView":a,"childViewOptions":function(e){return{"grid":this.options.grid,"cellBehaviours":this.options.cellBehaviours,"rowBehaviours":this.options.rowBehaviours}},"constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),c.prototype.constructor.call(this,e)},"_convertCollection":function(e){return new s.Collection(e.columns)}});return l.extend({"className":"cs-grid binf-container-fluid","constructor":function(e){e||(e={}),e.grid=this,e.collection||(e.collection=this._convertCollection(e)),l.prototype.constructor.call(this,e)},"_convertCollection":function(e){return this._convertRows(e.rows,"grid0")},"_convertRows":function(e,t){return e=new s.Collection(e),e.each(function(e,i){var s=e.get("columns");e.cellAddress=t+":r"+i,e.columns=this._convertColumns(s,e.cellAddress)},this),e},"_convertColumns":function(e,t){return e=new s.Collection(e),e.each(function(e,i){var s=e.get("rows");e.cellAddress=t+":c"+i,void 0!==e.get("widget")&&(e.get("widget").cellAddress=e.cellAddress),s&&(e.rows=this._convertRows(s,e.cellAddress))},this),e}},{"RowView":u,"CellView":a})}),csui.define("csui/controls/node-type.icon/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/node-type.icon/impl/nls/root/lang",{"shortcutTypeLabel":"Shortcut to {0}","nodeTypeUnknown":"Unknown"}),csui.define("hbs!csui/controls/node-type.icon/node-type.icon",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'  <img src="'+this.escapeExpression((n=null!=(n=t.imageUrl||(null!=e?e.imageUrl:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"imageUrl","hash":{}}):n))+'" class="csui-icon" alt="" aria-hidden="true">\r\n'},"3":function(e,t,i,s){var n;return null!=(n=t.if.call(e,null!=e?e.mainSvgId:e,{"name":"if","hash":{},"fn":this.program(4,s,0),"inverse":this.program(6,s,0)}))?n:""},"4":function(e,t,i,s){var n;return'    <svg class="csui-icon csui-svg-icon" focusable="false">\r\n      <use xlink:href="'+this.escapeExpression((n=null!=(n=t.spritePath||(null!=e?e.spritePath:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"spritePath","hash":{}}):n))+"#"+this.escapeExpression((n=null!=(n=t.mainSvgId||(null!=e?e.mainSvgId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"mainSvgId","hash":{}}):n))+'"></use>\r\n    </svg>\r\n'},"6":function(e,t,i,s){var n;return'    <span class="'+this.escapeExpression((n=null!=(n=t.mainClassName||(null!=e?e.mainClassName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"mainClassName","hash":{}}):n))+'"></span>\r\n'},"8":function(e,t,i,s,n,o){var r;return null!=(r=t.each.call(e,null!=e?e.overlaySvgIds:e,{"name":"each","hash":{},"fn":this.program(9,s,0,n,o),"inverse":this.noop}))?r:""},"9":function(e,t,i,s,n,o){return'    <svg class="csui-icon csui-svg-icon" focusable="false">\r\n      <use xlink:href="'+this.escapeExpression(this.lambda(null!=o[1]?o[1].spritePath:o[1],e))+"#"+this.escapeExpression(this.lambda(e,e))+'"></use>\r\n    </svg>\r\n'},"11":function(e,t,i,s){var n;return null!=(n=t.each.call(e,null!=e?e.overlayClassNames:e,{"name":"each","hash":{},"fn":this.program(12,s,0),"inverse":this.noop}))?n:""},"12":function(e,t,i,s){return'    <span class="'+this.escapeExpression(this.lambda(e,e))+'"></span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s,n,o){var r;return(null!=(r=t.if.call(e,null!=e?e.imageUrl:e,{"name":"if","hash":{},"fn":this.program(1,s,0,n,o),"inverse":this.program(3,s,0,n,o)}))?r:"")+(null!=(r=t.if.call(e,null!=e?e.overlaySvgIds:e,{"name":"if","hash":{},"fn":this.program(8,s,0,n,o),"inverse":this.program(11,s,0,n,o)}))?r:"")},"useDepths":!0});return i.registerPartial("csui_controls_node-type.icon_node-type.icon",s),s}),csui.define("csui/controls/node-type.icon/node-type.icon.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/nodesprites","i18n!csui/controls/node-type.icon/impl/nls/lang","hbs!csui/controls/node-type.icon/node-type.icon","csui/themes/carbonfiber/svg_sprites/symbol/sprite"],function(e,t,i,s,n,o,r,a){"use strict";var c=i.Model.extend({"constructor":function e(t,i){this.node=i.node,t=this._getAttributesFromNode(),e.__super__.constructor.call(this,t,i),this.listenTo(this.node,"change:id",this._updateModelFromNode).listenTo(this.node,"change:type",this._updateModelFromNode).listenTo(this.node,"change:image_url",this._updateModelFromNode)},"_getAttributesFromNode":function(){var t,i=this.node,s=i.original,r=n.findByNode(i)||{},c=r.get("className"),l=r.get("svgId"),u=c,d=l,h=[],p=[];r.attributes&&(t=r.get("mimeType"));var f=t||i.get("type_name")||i.get("type");if(s&&s.get("id")&&1281!==i.get("type")&&2!==i.get("type")){var b=n.findByNode(s)||{};u=b.get("className"),d=b.get("svgId"),h.push("csui-icon csui-icon-shortcut-overlay"),p.push("themes--carbonfiber--image--icons--shortcut-overlay"),f=e.str.sformat(o.shortcutTypeLabel,b.get("mimeType")||s.get("type_name")||o.nodeTypeUnknown)}var g={"imageUrl":i.get("image_url"),"title":f};return l?(g.spritePath=a.getSpritePath(),g.svgId=l,g.mainSvgId=d,g.overlaySvgIds=p):(g.className=c,g.mainClassName=u,g.overlayClassNames=h),g},"_updateModelFromNode":function(){var e=this._getAttributesFromNode();this.clear({"silent":!0}),this.set(e)}});return s.ItemView.extend({"tagName":"span","attributes":function(){var e=this.model.get("title");return{"class":"csui-icon-group","title":e,"aria-label":e}},"template":r,"constructor":function i(s){s||(s={}),s.model||(this.ownModel=!0,s.model=new c(void 0,{"node":s.node})),i.__super__.constructor.call(this,s),s.el&&t(s.el).attr(e.result(this,"attributes")),this.listenTo(this.model,"change",this.render)},"onRender":function(){this._updateTitle()},"onDestroy":function(){this.ownModel&&this.model.stopListening()},"_updateTitle":function(){var e=this.model.get("title");this.$el.attr("title",e).attr("aria-label",e)}})}),csui.define("csui/controls/progressblocker/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/progressblocker/impl/nls/root/lang",{"loadingText":"Loading data, please wait."}),csui.define("hbs!csui/controls/progressblocker/impl/blocker",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<div class="outer-border">\r\n  <div class="loader">\r\n  </div>\r\n  <div class="binf-sr-only" aria-live="polite" aria-busy="true">\r\n      '+this.escapeExpression((n=null!=(n=t.loadingText||(null!=e?e.loadingText:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"loadingText","hash":{}}):n))+"\r\n  </div>\r\n</div>\r\n"}});return i.registerPartial("csui_controls_progressblocker_impl_blocker",s),s}),csui.define("css!csui/controls/progressblocker/impl/blocker",[],function(){}),csui.define("csui/controls/progressblocker/blocker",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/log","i18n!csui/controls/progressblocker/impl/nls/lang","hbs!csui/controls/progressblocker/impl/blocker","css!csui/controls/progressblocker/impl/blocker"],function(e,t,i,s,n,o,r){"use strict";function a(e){n.debug("Blocking view is suppressing {0} ({1}).",n.getObjectName(e.parentView),e.parentView.cid)&&console.log(n.last),u(e.$el),w.push(e)}function c(e){e===b&&(w.forEach(function(e){n.debug("Blocking view is releasing {0} ({1}).",n.getObjectName(e.parentView),e.parentView.cid)&&console.log(n.last),l(e.$el)}),w=[])}function l(e){e.find(".outer-border").removeClass("binf-hidden")}function u(e){e.find(".outer-border").addClass("binf-hidden")}function d(e){e=e?"with":"without",this===this.blockingView.parentView?n.debug("Blocking view asked for enabling {0} indicator for {1} ({2}), counter: {3}.",e,n.getObjectName(this),this.cid,this.blockingView.counter)&&console.log(n.last):n.debug("Blocking view asked for enabling for {0} indicator for {0} ({1}) by {2} ({3}), counter: {4}.",e,n.getObjectName(this),this.cid,n.getObjectName(this.blockingView.parentView),this.blockingView.parentView.cid,this.blockingView.counter)&&console.log(n.last)}function h(){n.debug("Blocking view delegates enabling for {0} ({1}) to {2} ({3}).",n.getObjectName(this),this.cid,n.getObjectName(this.childWithBlockingView),this.childWithBlockingView.cid)&&console.log(n.last)}function p(e){var t=e?"addClass":"removeClass";i(".binf-widgets .load-container")[t]("csui-no-blocking")}n=n(e.id);var f=e.config();t.defaults(f,{"delay":10,"disableDelay":10,"globalOnly":!1});var b,g,m=f.delay,v=f.disableDelay,y=f.globalOnly,w=[],x=s.ItemView.extend({"className":"load-container binf-hidden","template":r,"constructor":function(e){s.ItemView.prototype.constructor.apply(this,arguments),this.parentView=e.parentView,this.counter=0},"serializeData":function(){return{"loadingText":o.loadingText}},"enable":function(){if(!this.options.local){var e=this._getGlobalBlockingView();if(e){if(n.debug("Blocking view delegates global enabling by {0} ({1}) to {2} ({3}), counter: {4}.",n.getObjectName(this.parentView),this.parentView.cid,n.getObjectName(e.parentView),e.parentView.cid,e.counter)&&console.log(n.last),!g)return e.enable();a(this)}}this.counter?++this.counter:(this.counter=1,this.disableTimeout?(clearTimeout(this.disableTimeout),this.disableTimeout=void 0):this.enableTimeout=setTimeout(t.bind(function(){this.enableTimeout=void 0,this._show(),n.debug("Blocking view enabled by {0} ({1}).",n.getObjectName(this.parentView),this.parentView.cid)&&console.log(n.last),s.triggerMethodOn(this.parentView,"enable:blocking",this)},this),m))},"disable":function(){if(!this.options.local){var e=this._getGlobalBlockingView();if(e&&(n.debug("Blocking view delegates global disabling by {0} ({1}) to {2} ({3}), counter: {4}.",n.getObjectName(this.parentView),this.parentView.cid,n.getObjectName(e.parentView),e.parentView.cid,e.counter)&&console.log(n.last),!g))return e.disable()}this.counter>1?--this.counter:0===this.counter?n.debug("Blocking view has been already disabled by {0} ({1}).",n.getObjectName(this.parentView),this.parentView.cid)&&console.log(n.last):(this.counter=0,this.enableTimeout?(clearTimeout(this.enableTimeout),this.enableTimeout=void 0,c(this)):this.disableTimeout=setTimeout(t.bind(function(){this.disableTimeout=void 0,this._hide(),n.debug("Blocking view disabled by {0} ({1}).",n.getObjectName(this.parentView),this.parentView.cid)&&console.log(n.last),c(this),s.triggerMethodOn(this.parentView,"disable:blocking",this)},this),v))},"onBeforeDestroy":function(){this._clearTimeouts(),this._resetGlobalBlockingView()},"makeGlobal":function(e){b||(g=!!e,b=this,this.$el.addClass("csui-global"))},"_getGlobalBlockingView":function(){if(b&&b!==this&&(y||b.counter))return b},"_resetGlobalBlockingView":function(){b===this&&(b=void 0,this.$el.removeClass("csui-global"))},"_clearTimeouts":function(){this.enableTimeout&&clearTimeout(this.enableTimeout),this.disableTimeout&&clearTimeout(this.disableTimeout)},"_show":function(){this.$el.removeClass("binf-hidden")},"_hide":function(){this.$el.addClass("binf-hidden")}}),_={"blockActions":function(){return d.call(this,!0),l(this.blockingView.$el),this.blockingView.enable(),++this._blockingCounter,this},"blockWithoutIndicator":function(){return d.call(this,!1),u(this.blockingView.$el),this.blockingView.enable(),++this._blockingCounter,this},"unblockActions":function(){return this===this.blockingView.parentView?n.debug("Blocking view asked for disabling for {0} ({1}), counter: {2}.",n.getObjectName(this),this.cid,this.blockingView.counter)&&console.log(n.last):n.debug("Blocking view asked for disabling for {0} ({1}) by {2} ({3}), counter: {4}.",n.getObjectName(this),this.cid,n.getObjectName(this.blockingView.parentView),this.blockingView.parentView.cid,this.blockingView.counter)&&console.log(n.last),this.blockingView.disable(),this._blockingCounter&&--this._blockingCounter,this},"showBlockingView":function(){n.debug("Blocking view is showing for {0} ({1}).",n.getObjectName(this),this.cid)&&console.log(n.last),this.blockingView.render(),this.blockingView.parentView.$el.append(this.blockingView.el)},"destroyBlockingView":function(){for(n.debug("Blocking view is destroying for {0} ({1}).",n.getObjectName(this),this.cid)&&console.log(n.last),this._blockingCounter&&n.debug("Blocking view needs cleanup for {0} ({1}), counter: {2}.",n.getObjectName(this),this.cid,this._blockingCounter)&&console.log(n.last);this._blockingCounter;)this.unblockActions();this.blockingView.destroy()}};x.imbue=function(e,i){var s;Object.getPrototypeOf(e)===Object.prototype?(s=e,e=s.parent,i=s.parentView):s={},i||(i=e);var n=new x({"parentView":i,"local":s.local});e.blockingView=n,e.blockingPrototype=_,t.extend(e,_),e._blockingCounter=0,e.listenTo(i,"render",e.showBlockingView).listenTo(i,"before:destroy",e.destroyBlockingView)};var T={"blockActions":function(){return h.call(this),this.childWithBlockingView.blockActions(),this},"blockWithoutIndicator":function(){return h.call(this),this.childWithBlockingView.blockWithoutIndicator(),this},"unblockActions":function(){return n.debug("Blocking view delegates disabling for {0} ({1}) to {2} ({3}).",n.getObjectName(this),this.cid,n.getObjectName(this.childWithBlockingView),this.childWithBlockingView.cid)&&console.log(n.last),this.childWithBlockingView.unblockActions(),this}};return x.suppressAll=function(){p(!0)},x.resumeAll=function(){p(!1)},x.delegate=function(e,i){if(Object.getPrototypeOf(e)===Object.prototype){var s=e;e=s.parent,i=s.child}e.childWithBlockingView=i,e.childWithBlockingViewPrototype=T,t.extend(e,T)},x}),csui.define("csui/controls/perspective.panel/perspective.animator",["module","csui/lib/underscore","csui/lib/jquery"],function(e,t,i){"use strict";function s(e){this.perspectivePanelView=e}var n=t.extend({"effect":"none"},e.config()),o=n;return s.prototype={"startAnimation":function(e){if("slide"===o){this.perspectivePanelView.$el.redraw().addClass("csui-in-transition"),e.$el.addClass("cs-on-stage-right"),e.triggerMethod("before:show"),this.perspectivePanelView.$el.append(e.el)}else"fade"===o&&e.$el.addClass("csui-fading")},"swapPerspective":function(e,t){var s=i.Deferred();return"slide"===o?e.$el.addClass("cs-on-stage-left"):e.remove(),
"fade"===o&&this.perspectivePanelView.$el.addClass("csui-in-transition"),this._insertPerspective(t),"slide"===o||"fade"===o?t.$el.one(this._transitionEnd(),s.resolve).redraw().removeClass("slide"===o?"cs-on-stage-right":"csui-faded-out"):s.resolve(),s.promise()},"showPerspective":function(e){var t=i.Deferred();return this._insertPerspective(e),"slide"===o||"fade"===o?e.$el.one(this._transitionEnd(),t.resolve).redraw().removeClass("slide"===o?"cs-on-stage-right":"csui-faded-out"):t.resolve(),t.promise()},"finishAnimation":function(){"slide"!==o&&"fade"!==o||this.perspectivePanelView.$el.removeClass("csui-in-transition")},"_insertPerspective":function(e){"fade"===o&&e.$el.addClass("csui-faded-out"),e.triggerMethod("before:show"),this.perspectivePanelView.$el.append(e.el),e.triggerMethod("show")},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]})},s}),csui.define("csui/controls/perspective.panel/perspective.factory",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i,s){function n(e){this.options=e||{}}return t.extend(n.prototype,{"createPerspective":function(e){var i=this;return this._loadPerspective(e.get("type")).then(function(s){return new s(t.extend({"context":i.options.context},e.get("options")))})},"_loadPerspective":function(t){var s,n=i.Deferred(),o=t.lastIndexOf("/");return o<0?s="csui/perspectives/"+t:(s=t,t=t.substring(o+1)),e([s+"/"+t+".perspective.view"],function(e){n.resolve(e)},function(e){n.reject(e)}),n.promise()}}),n.extend=s.View.extend,n}),csui.define("csui/utils/contexts/factories/user",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/authenticated.user"],function(e,t,i,s,n,o,r){"use strict";var a=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);a=!a||"false"!==a[1];var c;return n.extend({"propertyPrefix":"user","constructor":function(i,c){n.prototype.constructor.apply(this,arguments);var l=this.options.authentication||this.options.user||{},u=e.config();if(a&&(this.initialResponse=l.initialResponse||u.initialResponse),!(l instanceof s.Model)){var d=i.getObject(o,c);l=new r(l.attributes||u.attributes,t.defaults({"connector":d},l.options,u.options))}this.property=l},"fetch":function(e){var i;return this.initialResponse&&!c?(i=this.property.prefetch(this.initialResponse,e),c=!0):i=this.property.fetch(e),i.done(t.bind(function(){this.property.connector.authenticator.setUserId(this.property.get("id"))},this)),i}})}),csui.define("csui/utils/contexts/factories/application.scope.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({});return s.extend({"propertyPrefix":"applicationScope","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.applicationScope||{};if(!(a instanceof i.Model)){var c=e.config();a=new n(a.models,t.extend({},a.options,c.options))}this.property=a}})}),csui.define("csui/utils/contexts/factories/node",["module","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"node","constructor":function(a,c){s.prototype.constructor.apply(this,arguments);var l=this.options.node||{},u=e.config();if(!(l instanceof i.Model)){var d=a.getObject(n,c),h=t.extend(!0,{"connector":d,"fields":{"properties":[],"versions.element(0)":["owner_id"]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"commands":r.getAllSignatures()},u.options,l.options);l=new o(l.attributes||u.attributes,h)}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/ancestors",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodeancestors"],function(e,t,i,s,n,o){"use strict";var r=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);r=!r||"false"!==r[1];var a;return s.extend({"propertyPrefix":"ancestors","constructor":function(a,c){s.prototype.constructor.apply(this,arguments);var l=e.config(),u=this.options.ancestors||{};if(r&&(this.initialResponse=u.initialResponse||l.initialResponse),!(u instanceof i.Collection)){var d=a.getModel(n);u=new o(u.models,t.defaults({"autoreset":!0,"node":d},u.options,l.options))}this.property=u,this.listenTo(this.property.node,"change:name",function(){this.property.length>0&&this.property.last().set("name",d.get("name"))})},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!a){var t=this.property.prefetch(this.initialResponse,e);return a=!0,t}return this.property.fetch(e)}})}),csui.define("hbs!csui/controls/breadcrumbs/impl/breadcrumb/impl/breadcrumb",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n,o;return'  <a href="'+this.escapeExpression((o=null!=(o=t.url||(null!=e?e.url:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"url","hash":{}}):o))+'" class="binf-dropdown-toggle csui-subcrumb csui-acc-focusable"\r\n     data-binf-toggle="dropdown" title="'+this.escapeExpression((o=null!=(o=t.subcrumbTooltip||(null!=e?e.subcrumbTooltip:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"subcrumbTooltip","hash":{}}):o))+'">'+this.escapeExpression((o=null!=(o=t.name||(null!=e?e.name:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"name","hash":{}}):o))+'</a>\r\n  <ul class="binf-dropdown-menu" role="menu">\r\n'+(null!=(n=t.each.call(e,null!=e?e.subcrumbs:e,{"name":"each","hash":{},"fn":this.program(2,s,0),"inverse":this.noop}))?n:"")+"  </ul>\r\n"},"2":function(e,t,i,s){var n;return null!=(n=t.if.call(e,null!=e?e.inactive:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.program(5,s,0)}))?n:""},"3":function(e,t,i,s){return'        <li role="menuitem"><a data-id="'+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+'" title="'+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+'">'+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</a>\r\n"},"5":function(e,t,i,s){return'        <li role="menuitem"><a class=\'csui-breadcrumb csui-acc-focusable\' href="'+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+'"\r\n               data-id="'+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+'" title="'+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+'">'+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</a>\r\n"},"7":function(e,t,i,s){var n;return null!=(n=t.if.call(e,null!=e?e.inactive:e,{"name":"if","hash":{},"fn":this.program(8,s,0),"inverse":this.program(10,s,0)}))?n:""},"8":function(e,t,i,s){var n;return"    "+this.escapeExpression((n=null!=(n=t.name||(null!=e?e.name:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+"\r\n"},"10":function(e,t,i,s){var n;return"    <a class='csui-breadcrumb csui-acc-focusable' href=\""+this.escapeExpression((n=null!=(n=t.url||(null!=e?e.url:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"url","hash":{}}):n))+'" data-id="'+this.escapeExpression((n=null!=(n=t.id||(null!=e?e.id:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"id","hash":{}}):n))+'"\r\n       title="'+this.escapeExpression((n=null!=(n=t.name||(null!=e?e.name:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+'">'+this.escapeExpression((n=null!=(n=t.name||(null!=e?e.name:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"name","hash":{}}):n))+"</a>\r\n"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return null!=(n=t.if.call(e,null!=e?e.hasSubCrumbs:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.program(7,s,0)}))?n:""}});return i.registerPartial("csui_controls_breadcrumbs_impl_breadcrumb_impl_breadcrumb",s),s}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/root/lang",{"subcrumbTooltip":"Show full path","breadcrumbAria":"Breadcrumb"}),csui.define("csui/controls/breadcrumbs/impl/breadcrumb/breadcrumb.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/node.links/node.links","hbs!csui/controls/breadcrumbs/impl/breadcrumb/impl/breadcrumb","i18n!csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang"],function(e,t,i,s,n,o){"use strict";return i.ItemView.extend({"tagName":"li","template":n,"modelEvents":{"change":"render"},"events":{"click a.csui-breadcrumb":"onClickLink"},"onClickLink":function(e){e.preventDefault(),e.stopPropagation();var i=this.model;if(i.get("subcrumbs").length>0){var s=t(e.target).data("id");i=this._getModel(s)}this.triggerMethod("click:ancestor",i)},"className":function(){var e=this.model.get("subcrumbs");return this.options.isLastChild?"binf-active":e&&e.length>0?"binf-dropdown":"tail"},"templateHelpers":function(){function t(e){var t=e.connector||e.collection.connector;return e.get("id")>0&&t&&s.getUrl(e,{"connector":t})||"#"}var i=this.options,n=e.map(this.model.get("subcrumbs"),function(i){return e.extend(i.toJSON(),{"url":t(i)})});return{"inactive":this.model.get("inactive")||i.isLastChild,"hasSubCrumbs":n.length>0,"subcrumbs":n,"name":this.model.attributes.displayName||this.model.attributes.name_formatted||this.model.attributes.name,"url":t(this.model),"subcrumbTooltip":o.subcrumbTooltip}},"onRender":function(){},"constructor":function(){i.ItemView.prototype.constructor.apply(this,arguments),this.model.has("subcrumbs")||this.model.set("subcrumbs",[],{"silent":!0})},"_getModel":function(e){for(var t=this.model.get("subcrumbs"),i=null,s=0;s<t.length;s++)if(t[s].get("id")===e){i=t[s];break}return i}})}),csui.define("csui/controls/breadcrumbs/breadcrumbs.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/breadcrumbs/impl/breadcrumb/breadcrumb.view","csui/utils/contexts/factories/next.node","csui/behaviors/keyboard.navigation/tabable.region.behavior"],function(e,t,i,s,n,o,r){return s.CollectionView.extend({"tagName":"ol","className":"binf-breadcrumb","behaviors":{"TabableRegion":{"behaviorClass":r}},"childView":n,"childViewOptions":function(e,t){return{"childIndex":t,"isLastChild":t===(e.get("showAsLink")?this.collection.size():this.collection.size()-1)}},"constructor":function(e){e||(e={}),this.completeCollection=e.collection,e.collection=new i.Collection,s.CollectionView.call(this,e)},"initialize":function(e){this.listenTo(this.completeCollection,"update reset",this.synchronizeCollections);var i=this.context=this.options.context;this._nextNode=e.node||i.getModel(o),this.stop=this.options.stop||{},this.options.noOfItemsToShow=parseInt(this.options.noOfItemsToShow,10),this._startSubCrumbs=void 0!==this.options.startSubCrumbs?parseInt(this.options.startSubCrumbs,10):1,this._subCrumbsLength=0,this.accLastBreadcrumbElementFocused=!0,this.accNthBreadcrumbElementFocused=0,this.resizeTimer=void 0,t(window).on("resize."+this.cid,{"view":this},this._onWindowResize)},"_onWindowResize":function(e){if(e&&e.data&&e.data.view){var t=e.data.view;t.resizeTimer&&clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){t._adjustToFit()},200)}},"events":{"keydown":"onKeyInView"},"_breadcrumbSelector":"a.csui-acc-focusable:visible","isTabable":function(){return this.collection.models.length>1},"currentlyFocusedElement":function(){if(this.isTabable()){if(this.accLastBreadcrumbElementFocused)return this.$(this._breadcrumbSelector+":last");var e=this.$(this._breadcrumbSelector);return t(e[this.accNthBreadcrumbElementFocused])}return t()},"onKeyInView":function(e){var t;switch(e.keyCode){case 37:case 38:t=this.$(this._breadcrumbSelector),this.accLastBreadcrumbElementFocused?t.length>1&&(this.accLastBreadcrumbElementFocused=!1,this.accNthBreadcrumbElementFocused=t.length-2):this.accNthBreadcrumbElementFocused>0&&this.accNthBreadcrumbElementFocused--,this.trigger("changed:focus",this),this.currentlyFocusedElement().trigger("focus");break;case 39:case 40:this.accLastBreadcrumbElementFocused||(t=this.$(this._breadcrumbSelector),this.accNthBreadcrumbElementFocused<t.length-1&&(this.accNthBreadcrumbElementFocused++,this.trigger("changed:focus",this),this.currentlyFocusedElement().trigger("focus")))}},"synchronizeCollections":function(e){var t=this.completeCollection.last(this.completeCollection.length)||[];this.stop&&this.stop.id&&this._removeAncestorsFromStopPoint(t,this.stop.id),this._removeAncestorsToNumItemsToShow(t),this._subCrumbsLength=0,this._refreshBreadCrumbsDisplay(),"boolean"==typeof e?e||this._adjustToFit():this._adjustToFit(),this.trigger("after:synchronized")},"_refreshBreadCrumbsDisplay":function(){var t,i,s=this.completeCollection.last(this.completeCollection.length)||[];this.stop&&this.stop.id&&this._removeAncestorsFromStopPoint(s,this.stop.id),this._removeAncestorsToNumItemsToShow(s),this._subCrumbsLength>0&&(t=e.range(this._startSubCrumbs,this._startSubCrumbs+this._subCrumbsLength).map(function(e){return s[e]}),i={"id":-1,"name":"...","subcrumbs":t},s.splice(this._startSubCrumbs,this._subCrumbsLength,i)),this.collection.reset(s)},"refresh":function(){this._adjustToFit()},"_adjustToFit":function(){var e=this._getMaxDisplayWidth();this._getDisplayWidth()>e?this._shrinkToFit(e):this._getDisplayWidth()<e&&this._expandToFit(e);var i=t.Event("tab:content:field:changed");this.trigger(i)},"_shrinkToFit":function(e){var t=this.collection.length-this._startSubCrumbs-2;e>0&&this._getDisplayWidth()>e&&(t>0||0===t&&2===window.devicePixelRatio&&0===this._subCrumbsLength)&&(this._adjustSubCrumbsLengthBy(1),this._shrinkToFit(e))},"_expandToFit":function(e){var t=this.collection.size()-this._startSubCrumbs-2;e>0&&(this._subCrumbsLength>0&&this._getDisplayWidth()<e?(this._adjustSubCrumbsLengthBy(-1),this._expandToFit(e)):t>0&&this._getDisplayWidth()>e&&this._adjustSubCrumbsLengthBy(1))},"_adjustSubCrumbsLengthBy":function(e){this._subCrumbsLength+=e,this._subCrumbsLength=Math.min(this._subCrumbsLength,this.completeCollection.size()-this._startSubCrumbs),this._refreshBreadCrumbsDisplay()},"_getMaxDisplayWidth":function(){return.9*this.el.offsetWidth},"_getDisplayWidth":function(){for(var e=this.el.children,t=0,i=0;i<e.length;i++)t+=e[i].offsetWidth;return t},"childEvents":{"click:ancestor":"onClickAncestor"},"onClickAncestor":function(t,i){var s={"node":i};if(this.trigger("before:defaultAction",s),!s.cancel){var n=i.get("id");this._nextNode.get("id")===n&&this._nextNode.unset("id",{"silent":!0});var o=this.context&&this.context.viewStateModel,r=o&&o.get("state");r&&this.context.viewStateModel.set("state",e.omit(r,"filter"),{"silent":!0}),this._nextNode.trigger("before:change:id",n),o&&o.set("browsing",o.BROWSING_TYPE.breadcrumbs),this._nextNode.set("id",n)}this.$el.trigger("setCurrentTabFocus")},"hide":function(e){return e?this.el.classList.add("binf-hidden"):this.el.classList.remove("binf-hidden"),!0},"hideSubCrumbs":function(){var e=this.$el.find("li.binf-dropdown");e&&e.hasClass("binf-open")&&this.$el.find(".csui-subcrumb").trigger("click")},"updateStopId":function(e){this.stop.id=e},"_removeAncestorsFromStopPoint":function(e,t){for(var i=0;i<e.length;i++)if(e[i].get("id")===t){e.splice(0,i);break}},"_removeAncestorsToNumItemsToShow":function(e){if(this.options.noOfItemsToShow&&this.options.noOfItemsToShow>=0){var t=this.options.noOfItemsToShow>=e.length?0:e.length-this.options.noOfItemsToShow;e.splice(0,t)}},"onBeforeDestroy":function(){t(window).off("resize."+this.cid,this._onWindowResize)}})}),csui.define("hbs!csui/controls/breadcrumbspanel/impl/breadcrumbspanel",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<div class="binf-row">\r\n  <div class="binf-item binf-col-xs-12">\r\n    <div class="breadcrumb-inner breadcrumb-inner-header" role="navigation"\r\n         aria-label="'+this.escapeExpression((n=null!=(n=t.breadcrumbAria||(null!=e?e.breadcrumbAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"breadcrumbAria","hash":{}}):n))+'"></div>\r\n  </div>\r\n</div>\r\n'}});return i.registerPartial("csui_controls_breadcrumbspanel_impl_breadcrumbspanel",s),s}),csui.define("css!csui/controls/breadcrumbspanel/impl/breadcrumbspanel",[],function(){}),csui.define("csui/controls/breadcrumbspanel/breadcrumbspanel.view",["csui/lib/marionette","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/application.scope.factory","csui/controls/breadcrumbs/breadcrumbs.view","hbs!csui/controls/breadcrumbspanel/impl/breadcrumbspanel","i18n!csui/controls/breadcrumbs/impl/breadcrumb/impl/nls/lang","css!csui/controls/breadcrumbspanel/impl/breadcrumbspanel"],function(e,t,i,s,n,o){"use strict";return e.LayoutView.extend({"attributes":{"id":"breadcrumb-wrap"},"className":"binf-container-fluid","template":n,"ui":{"tileBreadcrumb":".tile-breadcrumb","breadcrumbsWrap":"#breadcrumb-wrap"},"regions":{"breadcrumbsInner":".breadcrumb-inner"},"templateHelpers":function(){return{"breadcrumbAria":o.breadcrumbAria}},"constructor":function(s){e.LayoutView.apply(this,arguments),this.applicationScope=s.context.getModel(i),this.listenTo(this.applicationScope,"change:breadcrumbsVisible",this._showOrHideBreadcrumbs),this.ancestors=this.options.context.getCollection(t),this.listenTo(this,"dom:refresh",function(){this.breadcrumbs&&this.breadcrumbs.refresh()})},"onRender":function(){this._showOrHideBreadcrumbs()},"_showOrHideBreadcrumbs":function(){this._breadcrumbsVisible=this.applicationScope.get("breadcrumbsVisible"),this._breadcrumbsAvailable=this.ancestors.isFetchable(),this._breadcrumbsVisible&&this._breadcrumbsAvailable?this.breadcrumbs||(this.breadcrumbs=new s({"context":this.options.context,"collection":this.ancestors,"fetchOnCollectionUpdate":!1}),this.breadcrumbsInner.show(this.breadcrumbs),this.breadcrumbs.synchronizeCollections(),this.$el.addClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable",this),this.breadcrumbs.triggerMethod("refresh:tabindexes")):this.breadcrumbs&&(this.$el.removeClass("breadcrumb-wrap-visible"),this.breadcrumbsInner.empty(),delete this.breadcrumbs)},"hideBreadcrumbs":function(){this.breadcrumbs&&this.breadcrumbs.hideSubCrumbs(),this.$el.removeClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable:not",this),this.$el.hide()},"showBreadcrumbs":function(){this.$el.addClass("breadcrumb-wrap-visible"),this.triggerMethod("tabable",this),this.$el.show(),this.breadcrumbs&&this.breadcrumbs.triggerMethod("refresh:tabindexes")},"isTabable":function(){return!!this.breadcrumbs&&this.ancestors.size()>1}})}),csui.define("csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin",["csui/lib/underscore","csui/lib/marionette"],function(e,t){"use strict";return{"propagateEventsToRegions":function(){e.each(this._eventsToPropagateToRegions,e.bind(this._propagateEventToRegions,this))},"_propagateEventToRegions":function(i){this.listenTo(this,i,function(){var s;s=this.regionManager?this.regionManager.getRegions():this.getRegions(),e.each(s,function(e){var s=e.currentView;if(s&&(s._isShown||s._isAttached)&&s._isRendered&&t.isNodeAttached(s.el)){var n=Array.prototype.slice.call(arguments);n.unshift(e.currentView,i),t.triggerMethodOn.apply(t,n)}},this)})},"_eventsToPropagateToRegions":["dom:refresh"]}}),csui.define("hbs!csui/controls/perspective.panel/impl/perspective.with.breadcrumb",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){return'<div class="csui-perspective-breadcrumb"></div>\r\n<div class="csui-perspective-view"></div>'}});return i.registerPartial("csui_controls_perspective.panel_impl_perspective.with.breadcrumb",s),s}),csui.define("csui/controls/perspective.panel/impl/perspective.with.breadcrumb.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/namedlocalstorage","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/controls/breadcrumbspanel/breadcrumbspanel.view","csui/utils/contexts/factories/ancestors","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","hbs!csui/controls/perspective.panel/impl/perspective.with.breadcrumb"],function(e,t,i,s,n,o,r,a,c){"use strict";var l=t.LayoutView.extend({"className":"cs-perspective-with-breadcrumb-view","template":c,"regions":{"breadcrumbRegion":".csui-perspective-breadcrumb","perspectiveRegion":".csui-perspective-view"},"constructor":function(i){i||(i={}),this.perspectiveView=i.perspectiveView,t.LayoutView.prototype.constructor.apply(this,arguments),this.propagateEventsToRegions(),this._supportMaximizeWidget=this.perspectiveView._supportMaximizeWidget,this._supportMaximizeWidgetOnDisplay=this.perspectiveView._supportMaximizeWidgetOnDisplay,e.isFunction(this.perspectiveView.serializePerspective)&&(this.serializePerspective=function(e){return this.perspectiveView.serializePerspective.apply(this.perspectiveView,arguments)}),this.widgetsResolved=this.perspectiveView.widgetsResolved;var o,r=this.options.context.perspective.get("type");switch(r){case"left-center-right":o="cs_perspective_no_left_right_margin";break;default:o="cs_perspective_with_left_right_margin"}this.$el.addClass(o),this.user=this.options.context.getModel(s),this.listenTo(this.user,"change",this.updateUserPreferences),this.applicationScope=this.options.context.getModel(n),this.listenTo(this.applicationScope,"change:breadcrumbsVisible",this._showOrHideBreadcrumbs)},"onRender":function(){var e=this.options.context.getCollection(r),t=e.isFetchable();if(this.applicationScope.set("breadcrumbsAvailable",t),t){var i=new o({"context":this.options.context});this.breadcrumbRegion.show(i)}this.perspectiveRegion.show(this.perspectiveView)},"onDomRefresh":function(){this.updateUserPreferences()},"updateUserPreferences":function(){var e=this.user.get("id");if(this.userPreferences=e?new i("userPreferences:"+e):void 0,this._isRendered&&this.userPreferences){var t=this.userPreferences.get("breadcrumbs-visible");void 0===t&&(t=!0),this._setBreadcrumbsVisibility(t)}else this._setBreadcrumbsVisibility(!1)},"_showOrHideBreadcrumbs":function(e,t){var i=this.applicationScope.get("breadcrumbsVisible");this._setBreadcrumbsVisibility(i)},"_setBreadcrumbsVisibility":function(e){var t=this.applicationScope.get("breadcrumbsAvailable");e&&t?(this.$el.addClass("csui-breadcrumbs-visible"),this.perspectiveView.$el.addClass("csui-breadcrumbs-visible")):(this.$el.removeClass("csui-breadcrumbs-visible"),this.perspectiveView.$el.removeClass("csui-breadcrumbs-visible")),this.userPreferences&&this.userPreferences.set("breadcrumbs-visible",e),this.applicationScope.set("breadcrumbsVisible",e)}});return e.extend(l.prototype,a),l}),csui.define("csui/controls/perspective.panel/perspective.with.breadcrumb.factory",["require","csui/lib/underscore","csui/lib/jquery","csui/controls/perspective.panel/perspective.factory","csui/controls/perspective.panel/impl/perspective.with.breadcrumb.view"],function(e,t,i,s,n){return s.extend({"constructor":function e(t){e.__super__.constructor.apply(this,arguments),this.options=t||{}},"createPerspective":function(e){var t=this;return s.prototype.createPerspective.call(this,e).then(function(e){return new n({"context":t.options.context,"perspectiveView":e,"supportMaximizeWidget":e._supportMaximizeWidget})})}})}),csui.define("css!csui/controls/perspective.panel/impl/perspective.panel",[],function(){}),csui.define("csui/controls/perspective.panel/perspective.panel.view",["require","module","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/perspective.panel/perspective.with.breadcrumb.factory","csui/controls/progressblocker/blocker","csui/utils/commandhelper","csui/controls/perspective.panel/perspective.animator","css!csui/controls/perspective.panel/impl/perspective.panel","csui/lib/jquery.redraw","csui/lib/jquery.scrollbarwidth"],function(e,t,i,s,n,o,r,a,c,l){"use strict";var u=s.defaults({},t.config(),{"progressWheel":!0,"waitForData":!0,"perspectiveShowDelay":0,"limitTimeToWaitForData":!0,"maximumTimeToWaitForData":1e3,"detachableBlockingView":!0});u.waitForData||(u.perspectiveShowDelay=0);var d=!1;return i(window).on("beforeunload."+t.id,function(e){d=!0}),n.ItemView.extend({"className":"cs-perspective-panel","template":!1,"constructor":function(){n.View.prototype.constructor.apply(this,arguments),s.defaults(this.options,{"progressWheel":u.progressWheel,"waitForData":u.waitForData,"perspectiveShowDelay":u.perspectiveShowDelay,"limitTimeToWaitForData":u.limitTimeToWaitForData,"maximumTimeToWaitForData":u.maximumTimeToWaitForData,"detachableBlockingView":u.detachableBlockingView});var e=this.options.context;if(this.perspectiveFactory=this.options.perspectiveFactory||new r({"context":e}),this.perspectiveAnimator=new l(this),a.imbue(this),this.blockingView.makeGlobal(this.options.detachableBlockingView),this.listenTo(e,"maximize:widget",this._addMaximizedWidget),this.listenTo(e,"restore:widget:size",this._removeMaximizedWidget),this.listenTo(e,"change:perspective",this.onChangePerspective),this.listenTo(e,"enter:edit:perspective",this.onEnterEditPerspective),this.listenTo(e,"exit:edit:perspective",this.onExitEditPerspective),this.listenTo(e,"serialize:perspective",this.onSerializePerspective),this.options.progressWheel){var t;this.listenTo(e,"request:perspective",this._startPerspectiveLoading).listenTo(e,"error:perspective",this._finishPerspectiveLoading).listenTo(e,"request",function(){this.options.waitForData&&this._startPerspectiveLoading(),this.options.limitTimeToWaitForData&&(t=setTimeout(function(){t=void 0,this._finishPerspectiveLoading()}.bind(this),this.options.maximumTimeToWaitForData))}).listenTo(e,"sync error",function(){t&&(clearTimeout(t),t=void 0),this._finishPerspectiveLoading()})}this.listenTo(this,"render",this.onRendered),this._maximizedWidgets={},this._currentPespectiveStack=[],this._currentPerspectiveSignature=void 0},"_startPerspectiveLoading":function(){this.actionsBlocked||(this.actionsBlocked=!0,this.blockActions())},"_finishPerspectiveLoading":function(){this.actionsBlocked&&(this.actionsBlocked=!1,this.unblockActions())},"onEnterEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(e).always(function(){this.isSwitchingEditMode=!1,this.unblockActions(),this.options.context.trigger("finish:enter:edit:perspective")}.bind(this))},"onSerializePerspective":function(e){if(this.blockActions(),s.isFunction(this.currentPerspectiveView.serializePerspective)){var t=this;this.currentPerspectiveView.serializePerspective(e).done(function(e){t.options.context.trigger("save:perspective",e)}).fail(function(e){t.options.context.trigger("save:perspective",{"error":e}),t._showModalError({"message":e})}).always(function(){t.unblockActions()})}},"onExitEditPerspective":function(e){this.blockActions(),this.isSwitchingEditMode=!0,this.doChangePerspective(this.options.context.perspective).always(function(){this.isSwitchingEditMode=!1,this.unblockActions(),this.options.context.trigger("finish:exit:edit:perspective")}.bind(this))},"onRendered":function(){this.options.context.perspective.get("type")&&this.onChangePerspective()},"onChangePerspective":function(e,t){this.doChangePerspective(e,t)},"doChangePerspective":function(e,t){if(this._isRendered){var s=this.options.context,n=this,o=e||this.options.context.perspective,r=i.Deferred();return d=!1,this.options.progressWheel&&this.blockActions(),this.triggerMethod("before:create:perspective",this,{"perspective":o}),this.perspectiveFactory.createPerspective(o).done(function(e){n.triggerMethod("create:perspective",this,{"perspective":o,"perspectiveView":e}),n._currentPespectiveStack.push(e),e.widgetsResolved.always(function(i){if(n.triggerMethod("resolve:widgets",this,{"perspective":o,"perspectiveView":e}),s.clear(),d)r.resolve(e);else{var a=i.length>1;n._setSupportMaximizeWidget(e,o,a),n._swapPerspective(e,o,t).always(function(){r.resolve(e)})}n._currentPespectiveStack.splice(0,n._currentPespectiveStack.indexOf(e))}),n._currentPespectiveStack.splice(0,n._currentPespectiveStack.indexOf(e))}).fail(function(e){n.options.progressWheel&&n.unblockActions(),d||n._showError(e),r.reject(e)}),r.promise()}return i.Deferred().resolve().promise()},"_isInPerspectiveEditMode":function(e){return"edit"===(e&&e.get("options")?e.get("options"):{}).perspectiveMode},"_setSupportMaximizeWidget":function(e,t,s){this._isInPerspectiveEditMode(t)||!0!==e._supportMaximizeWidget||!s?i("body").removeClass("csui-support-maximize-widget"):i("body").addClass("csui-support-maximize-widget")},"_triggerDomRefreshOnCurrentPerspective":function(){this.currentPerspectiveView&&this.currentPerspectiveView.triggerMethod("dom:refresh")},"_setShowingMaximizedWidget":function(e){e?i("body").addClass("csui-maximized-widget-mode"):i("body").removeClass("csui-maximized-widget-mode")},"_addMaximizedWidget":function(e){if(!this._isInPerspectiveEditMode(this.currentPerspective)){if(void 0===this._maximizedWidgets[this._getCurrentPerspectiveSignature()]){var t={"perspectiveSignature":this._getCurrentPerspectiveSignature(),"cellAddress":this.getCellAddress(e)};this._maximizedWidgets[t.perspectiveSignature]=t,this._maximizeWidgetView(t.cellAddress)}this._triggerDomRefreshOnCurrentPerspective()}},"getCellAddress":function(e){return e.widgetView?e.widgetView.$el.parent().attr("data-csui-cell_address"):e.currentPerspectiveView.$el.find(".binf-row").children().attr("data-csui-cell_address")},"_removeMaximizedWidget":function(e){delete this._maximizedWidgets[this._getCurrentPerspectiveSignature()],this._restoreWidgetViewSize(e.widgetView)},"_getPerspectiveViewEl":function(){return this.currentPerspectiveView.$el.hasClass("csui-perspective-view")?this.currentPerspectiveView.$el:this.currentPerspectiveView.$el.find(".csui-perspective-view")},"_maximizeWidgetView":function(e){this._getPerspectiveViewEl().find(".binf-row > div").each(function(){i(this).attr("data-csui-mwv-old-class",i(this).attr("class")),i(this).attr("data-csui-cell_address")===e?(i(this).parent().addClass("csui-maximized-row"),i(this).attr("class","binf-col-xs-12 csui-maximized-column")):i(this).attr("class","binf-hidden-xs binf-hidden-sm binf-hidden-md binf-hidden-lg")}),this._setShowingMaximizedWidget(!0)},"_restoreWidgetViewSize":function(e){e.$el.parent().parent().removeClass("csui-maximized-row"),this._getPerspectiveViewEl().find(".binf-row > div").each(function(){i(this).attr("class",i(this).attr("data-csui-mwv-old-class"))}),this._setShowingMaximizedWidget(!1),this._triggerDomRefreshOnCurrentPerspective()},"_getCurrentPerspectiveSignature":function(){if(void 0===this._currentPerspectiveSignature){var e=[];!!this.currentPerspectiveView&&this.currentPerspectiveView.$el.find(".binf-row > div").each(function(){var t=i(this).attr("data-csui-cell_address"),s=i(this).attr("data-csui-widget_type"),n=i(this).attr("class");void 0===t&&(t=""),e.push([t,s,n].join(","))}),this._currentPerspectiveSignature=e.join("|")}return this._currentPerspectiveSignature},"_resetWidgetMaximization":function(){this._setShowingMaximizedWidget(!1),this._maximizedWidgets={}},"_swapPerspective":function(e,t,n){function o(){a&&clearTimeout(a),l||(l=!0,s.delay(function(){d||h._showPerspective(e,t,u)},h.options.perspectiveShowDelay))}function r(){h.options.context.fetch().fail(function(t){if(!d)if(window.csui&&window.csui.mobile){
if(500===t.statusCode&&(-1===window.location.href.indexOf("#")||-1!==window.location.href.indexOf("#home")))return void o();0===t.statusCode?c.showOfflineMessage(t):(h._showModalError(t),h.options.context.trigger("reject:perspective",t)),e.destroy()}else o()}).done(o)}var a,l,u=i.Deferred(),h=this,p=window.location.href;return p=p.substr(p.indexOf("#")),this._resetWidgetMaximization(),setTimeout(function(){if(e.render(),this.options.progressWheel&&this.unblockActions(),this.options.waitForData)r(),this.options.limitTimeToWaitForData&&(a=setTimeout(o,this.options.maximumTimeToWaitForData));else{var t=this.currentPerspectiveView?"swap:perspective":"show:perspective";this.once(t,r),o()}}.bind(this)),u},"_showPerspectiveForEditMode":function(e,t){this.currentPerspectiveView.destroy(),this.currentPerspectiveView=e,this.currentPerspective=t,this._currentPerspectiveSignature=void 0,e.triggerMethod("before:show"),this.$el.append(e.el),e.triggerMethod("show")},"_showPerspective":function(e,t,s){function n(e){o.scrollTop(0),r.perspectiveAnimator.finishAnimation(),r.currentPerspectiveView=e,r.currentPerspectiveView.triggerMethod("dom:refresh"),r.currentPerspective=t,s.resolve(e)}var o=i(document.body),r=this,a=this._currentPespectiveStack.indexOf(e);if(-1!==a){if(this._currentPespectiveStack.splice(0,a),this.isSwitchingEditMode)return this._showPerspectiveForEditMode(e,t),void s.resolve(e);this.perspectiveAnimator.startAnimation(e),this.currentPerspectiveView?(this.triggerMethod("before:swap:perspective",this,{"oldPerspectiveView":this.currentPerspectiveView,"newPerspectiveView":e}),this.perspectiveAnimator.swapPerspective(this.currentPerspectiveView,e).done(function(){var t=r.currentPerspectiveView;r.currentPerspectiveView.destroy(),n(e),r.triggerMethod("swap:perspective",r,{"oldPerspectiveView":t,"newPerspectiveView":e})})):(this.triggerMethod("before:show:perspective",this,{"newPerspectiveView":e}),this.perspectiveAnimator.showPerspective(e).done(function(){n(e),r.triggerMethod("show:perspective",r,{"newPerspectiveView":e})}))}},"_showError":function(e){csui.require(["csui/controls/globalmessage/globalmessage"],function(t){t.showMessage("error",e.message)})},"_showModalError":function(e,t){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(i){i.showError(e.message,t)})}})}),csui.define("csui/controls/form/pub.sub",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";return e.extend({},t.Events)}),csui.define("csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/base"],function(e,t,i){"use strict";return{"mixin":function(s){return e.extend(s,{"_rebuildFocusableElements":function(){this.focusableElements=i.findFocusables(this._focusHolder)},"refreshFocusEngage":function(){this._rebuildFocusableElements()},"_maintainTabFocus":function(e){this._focusHolder=e,this._rebuildFocusableElements();var t=this;return e.on("keydown",function(e){var i=t.focusableElements.index(e.target),s=t.focusableElements.length,n=!1;-1!==i&&(9===e.keyCode&&(e.shiftKey||i!==s-1?e.shiftKey&&0===i&&(t.focusableElements.last().trigger("focus"),n=!0):(t.focusableElements.first().trigger("focus"),n=!0)),n&&e.preventDefault(),e.stopPropagation())}),this.listenTo(this,"dom:refresh",function(){this.refreshFocusEngage()}),{"disengage":function(){e.off("keydown")}}},"engageModalKeyboardFocusOnOpen":function(e){this._allyHandles||(this._allyHandles=[]),e=t(e||this.el),this._allyHandles.push(this._maintainTabFocus(e))},"disengageModalKeyboardFocusOnClose":function(){if(this._allyHandles)for(;this._allyHandles.length>0;)this._allyHandles.pop().disengage()},"hasEngagedModalKeyboardFocus":function(){return this._allyHandles&&this._allyHandles.length}})}}}),csui.define("hbs!csui/controls/tab.panel/impl/tab.links",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<ul class="binf-nav '+this.escapeExpression((n=null!=(n=t.tab_type||(null!=e?e.tab_type:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"tab_type","hash":{}}):n))+'" role="tablist"></ul>\r\n'}});return i.registerPartial("csui_controls_tab.panel_impl_tab.links",s),s}),csui.define("hbs!csui/controls/tab.panel/impl/tab.link",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<a href="#'+this.escapeExpression((n=null!=(n=t.uniqueTabId||(null!=e?e.uniqueTabId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"uniqueTabId","hash":{}}):n))+'" id="'+this.escapeExpression((n=null!=(n=t.linkId||(null!=e?e.linkId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"linkId","hash":{}}):n))+'" role="tab" aria-selected="'+this.escapeExpression((n=null!=(n=t.selected||(null!=e?e.selected:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"selected","hash":{}}):n))+'" aria-controls="'+this.escapeExpression((n=null!=(n=t.uniqueTabId||(null!=e?e.uniqueTabId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"uniqueTabId","hash":{}}):n))+'" data-binf-toggle="tab">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.title:e,{"name":"csui-l10n","hash":{}}))+"</a>\r\n"}});return i.registerPartial("csui_controls_tab.panel_impl_tab.link",s),s}),csui.define("csui/utils/handlebars/l10n",["csui/lib/handlebars","csui/utils/base"],function(e,t){return e.registerHelper("csui-l10n",function(e){return t.getClosestLocalizedString(e)}),e.helpers["csui-l10n"]}),csui.define("csui/controls/tab.panel/impl/tab.link.view",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/tab.panel/impl/tab.link","csui/lib/binf/js/binf","csui/utils/handlebars/l10n"],function(e,t,i){"use strict";return t.ItemView.extend({"tagName":"li","className":function(){return this._isOptionActiveTab()?"binf-active":""},"attributes":function(){return{"role":"presentation"}},"template":i,"templateHelpers":function(){return{"linkId":"tablink-"+this.model.get("uniqueTabId"),"selected":this._isOptionActiveTab()}},"events":{"show.binf.tab > a":"onShowingTab","shown.binf.tab > a":"onShownTab"},"ui":{"link":">a"},"constructor":function(){t.ItemView.prototype.constructor.apply(this,arguments)},"_isOptionActiveTab":function(){var e=!1,t=0;return this.options.activeTab&&void 0!==this.options.activeTab.get("tabIndex")&&(t=this.options.activeTab.get("tabIndex")),t=Math.max(0,t),this.model===this.model.collection.at(t)&&(e=!0),e},"activate":function(e){this.$el.removeClass("binf-active"),this.$el.find(">a").removeAttr("aria-selected"),this.ui.link.binf_tab("show"),e&&this.ui.link.trigger("focus")},"isActive":function(){return this.$el.hasClass("binf-active")},"onShowingTab":function(e){this.triggerMethod("before:activate:tab",this)},"onShownTab":function(e){var t=this.model.collection.indexOf(this.model);this.options.activeTab&&this.options.activeTab.set("tabIndex",t),this.triggerMethod("activate:tab",this)}})}),csui.define("csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log"],function(e,t,i,s){"use strict";return{"mixin":function(e){return t.extend(e,{"_findNextFocusableElementIndex":function(e,t){var s=e,n=this.keyboardBehavior.tabableElements.length;if(0===n)return-1;if(s<0||s>=n)return s;for(var o=i(this.keyboardBehavior.tabableElements[s]);!1===this.closestTabable(o);){if((s=!0===t?s-1:s+1)<0||s>=n){s=-1;break}o=i(this.keyboardBehavior.tabableElements[s])}return s},"_findNextValidFocusableElementIndex":function(e,t){return this._findNextFocusableElementIndex(e,t)},"_setFirstAndLastFocusable":function(e){var t,s=this.keyboardBehavior.tabableElements.length;0!==s&&(t=0,t=this._findNextValidFocusableElementIndex(t),t>=0&&t<s&&i(this.keyboardBehavior.tabableElements[t]).prop("tabindex","0"),t=this.keyboardBehavior.tabableElements.length-1,(t=this._findNextValidFocusableElementIndex(t,!0))>=0&&t<s&&i(this.keyboardBehavior.tabableElements[t]).prop("tabindex","0"))},"currentlyFocusedElement":function(e){return this.currentlyFocusedElementInternal(e)},"currentlyFocusedElementInternal":function(e){this._setFirstAndLastFocusable(e);var t=-1,s=this.keyboardBehavior.tabableElements.length;if(s>0){var n=e&&e.shiftKey;if(t=e.elementCursor||(n?s-1:0),this.options.tabPanel&&this.options.tabPanel.activatingTab){var o=this.currentTabPosition;o>=0&&o<s&&(t=o)}t=this._findNextValidFocusableElementIndex(t,n)}if(t>=0&&t<s){this.currentTabPosition=t;var r=i(this.keyboardBehavior.tabableElements[t]);return this._autoScrollUntilElemIsVisible&&this._autoScrollUntilElemIsVisible(r),r}},"_accSetFocusToPreviousOrNextElement":function(e){var t=-1,s=this.keyboardBehavior.tabableElements.length;if(s>0&&(this.currentTabPosition<0?t=0:(e?this.currentTabPosition>0&&(t=this.currentTabPosition-1):this.currentTabPosition<s-1&&(t=this.currentTabPosition+1),t=this._findNextValidFocusableElementIndex(t,e))),t>=0&&t!==this.currentTabPosition)return this.currentTabPosition=t,i(this.keyboardBehavior.tabableElements[t]);this.currentTabPosition=-1},"containTargetElement":function(e){var t=this.$el.find(e.target).length>0;if(t){var s,n;for(s=0;s<this.keyboardBehavior.tabableElements.length;s++){if(n=this.keyboardBehavior.tabableElements[s],i(n).parents(".alpaca-control").find(e.target).length>0&&(this.currentTabPosition=s),n.isSameNode&&n.isSameNode(e.target)){this.currentTabPosition=s;break}if(n===e.target){this.currentTabPosition=s;break}}}return t},"numberOfTabableElements":function(e){return this.keyboardBehavior.tabableElements.length},"closestTabable":function(e){var t,i=!0,s=e;for(t=0;t<10;t++){if(s&&("-1"===s.attr("data-cstabindex")||s.attr("disabled"))){i=!1;break}s=s.parent()}return i}})}}}),csui.define("csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,s,n,o,r){"use strict";return n.Behavior.extend({"constructor":function(e,s){n.Behavior.prototype.constructor.apply(this,arguments),s.keyboardBehavior=this,this.tabableElements=[];var o=this;this.listenTo(s,"refresh:tabable:elements",function(e){o.refreshTabableElements(s,e)}),r.mixin(s),t.extend(s,{"_setFirstAndLastFocusable":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=i(this.keyboardBehavior.tabableElements[0]).prop("tabindex","0"),s=this.keyboardBehavior.tabableElements.length-1;if(t.is("a")){for(t=i(this.keyboardBehavior.tabableElements[s]),t.prop("tabindex","0");!t.is("a")&&s>0;)s--,t=i(this.keyboardBehavior.tabableElements[s]);t.prop("tabindex","0")}}},"_autoScrollUntilElemIsVisible":function(e){var t=e;if(t&&t.hasClass("cs-delete-icon")&&(t=e.parent().parent().find(".cs-tablink")),t&&t.is("a")&&t.hasClass("cs-tablink")){var s=this.options&&this.options.tabPanel,n=t.attr("href");if("#"===n[0]&&(n=n.substr(1)),s&&!1===s._isTablinkVisibleInParents(t)){var o=s._findTabIndexByID?s._findTabIndexByID(n):-1;if(o>=0){var r=i.Deferred();s.skipAutoScroll=!0,t.csuiPromise=r.promise();var a={"animationOff":!0};s._autoScrollTabTo&&s._autoScrollTabTo(o,a).done(function(){s.skipAutoScroll=!1,r.resolve()})}}}},"onKeyInView":function(e){var t;if(0===this.keyboardBehavior.tabableElements.length)return t;this.keyboardBehavior.keyboardActionDeleteTabPosition=void 0;var s=this,n=function(e){var t=s.keyboardBehavior.tabableElements[s.currentTabPosition],n=t&&i(t);if(n&&n.is(":focus")){e.preventDefault(),e.stopPropagation();var o=s.options&&s.options.tabPanel;o&&(o.skipAutoScroll=!0),n.hasClass("cs-delete-icon")&&(s.keyboardBehavior.keyboardActionDeleteTabPosition=s.currentTabPosition-2),n.trigger("click"),void 0===s.keyboardBehavior.keyboardActionDeleteTabPosition&&setTimeout(function(){var e=n.attr("href"),t=i.Event("tab:content:focus",{"tabId":e});s.$el.trigger(t),o&&(o.skipAutoScroll=!1)},100)}};if(9===e.keyCode){var o=e.shiftKey,r=this._accSetFocusToPreviousOrNextElement(o);this._autoScrollUntilElemIsVisible(r),t=r}else if(32===e.keyCode||13===e.keyCode)n.call(this,e);else if(46===e.keyCode){var a=this.keyboardBehavior.tabableElements[this.currentTabPosition];if(a&&i(a).is(":focus")){e.preventDefault(),e.stopPropagation(),this.keyboardBehavior.keyboardActionDeleteTabPosition=this.currentTabPosition-1;var c=i(a).attr("href"),l=i.Event("tab:link:delete",{"tabId":c});this.$el.trigger(l)}}return t}})},"refreshTabableElements":function(e,t){this.tabableElements=e.$el.find("a[href], *[tabindex], *[data-cstabindex]");var s;for(s=this.tabableElements.length-1;s>=0;s--)"-1"===i(this.tabableElements[s]).attr("data-cstabindex")&&this.tabableElements.splice(s,1);if(this.view.currentTabPosition=-1,void 0!==this.keyboardActionDeleteTabPosition){var n=i(this.tabableElements[this.keyboardActionDeleteTabPosition]);n&&n.length>0&&(this.view.currentTabPosition=this.keyboardActionDeleteTabPosition,this.view._autoScrollUntilElemIsVisible(n),n.trigger("focus")),this.keyboardActionDeleteTabPosition=void 0}setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)}})}),csui.define("csui/controls/tab.panel/impl/tab.links.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","hbs!csui/controls/tab.panel/impl/tab.links","csui/controls/tab.panel/impl/tab.link.view","csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior","csui/lib/binf/js/binf"],function(e,t,i,s,n,o){"use strict";return t.CompositeView.extend({"className":function(){var e="tab-links";return"spy"===this.options.mode&&(e+=" scrollspy"),e},"childViewOptions":function(t,i){return e.extend(this.options,{"index":i,"activeTab":this.options.activeTab})},"template":s,"templateHelpers":function(){return{"tab_type":this.tabType}},"childView":n,"childViewContainer":function(){return">."+this.tabType},"behaviors":{"TabLinksKeyboardBehavior":{"behaviorClass":o}},"constructor":function(e){this.tabType=e.tabType||"binf-nav-tabs",t.CompositeView.prototype.constructor.apply(this,arguments),this.listenTo(this.options.activeTab,"change:tabIndex",this._updateActiveTab)},"onChildviewActivateTab":function(e){this.children.each(function(e){var t=e.$el.find("a");void 0!==t.attr("aria-selected")&&t.attr("aria-selected","false")}),e.$el.find("a").attr("aria-selected","true")},"_updateActiveTab":function(){var e=this.options.activeTab.get("tabIndex"),t=this.children.findByIndex(e);t?e===t._index&&(t.isActive()||t.activate()):(e=0,this.children.find(function(t,i){if(t.isActive())return e=i,!0}),this.options.activeTab.set("tabIndex",e))},"_isTablinkVisibleInParents":function(e,t){var s=t&&t.levels||3,n=t&&t.percentX||100,o=t&&t.percentY||100;return i.isElementVisibleInParents(e,s,n,o)},"deleteTabById":function(e){}})}),csui.define("csui/controls/tab.panel/impl/tab.content.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/log","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/lib/binf/js/binf"],function(e,t,i,s,n){"use strict";var o=i.View.extend({"constructor":function(e){i.View.prototype.constructor.apply(this,arguments),this.contentRegion=new i.Region({"el":this.el}),!this.options.delayTabContent||"spy"===this.options.mode||this._isActive()?this._createContent(e):this.listenTo(this.options.tabPanel,"before:activate:tab",this._ensureContent)},"className":function(){var e="";return this.options.mode||(e="binf-tab-pane binf-fade",this._isActive()&&(e+=" binf-in binf-active")),e},"attributes":function(){var e=this.model.get("uniqueTabId");return e||s.warn("Missing unique tab ID in the TabPanel UI component. Please report.")&&console.warn(s.last),{"role":"tabpanel","id":e,"aria-labelledby":"tablink-"+e}},"render":function(){return this._ensureViewIsIntact(),this.triggerMethod("before:render",this),this._renderContent(),this.triggerMethod("render",this),this},"onBeforeDestroy":function(){this._destroyContent()},"_isActive":function(){var e=Math.max(0,this.options.activeTab.get("tabIndex"));return this.model===this.model.collection.at(e)},"_ensureContent":function(e,t,i){t===this&&(this.content||(this._createContent(this.options),this._isRendered&&this.render()))},"_createContent":function(t){var i=this._getContentView(),s=this._getContentViewOptions(),n=e.extend({"model":this.model,"containerCollection":t.containerCollection,"index":t.index},s);this.content=new i(n),this.propagateEventsToViews(this.content)},"_getContentView":function(){var e=this.model.get("contentView")||this.options.tabPanel.getOption("contentView");if(!e||e.prototype instanceof t.View||(e=e.call(this.options.tabPanel,this.model)),!e)throw new i.Error({"name":"NoContentViewError","message":'A "contentView" must be specified'});return e},"_getContentViewOptions":function(){var t=this.options.tabPanel.getOption("contentViewOptions");return e.isFunction(t)&&(t=t.call(this.options.tabPanel,this.model)),t},"_renderContent":function(){this.content&&this.contentRegion.show(this.content)},"_destroyContent":function(){this.content&&(this.cancelEventsToViewsPropagation(this.content),this.contentRegion.reset(),this.content=void 0)}});return e.extend(o.prototype,n),o}),csui.define("csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,s,n,o){"use strict";return n.Behavior.extend({"constructor":function(e,s){n.Behavior.prototype.constructor.apply(this,arguments),s.keyboardBehavior=this,this.tabableElements=[];var r=this;this.listenTo(s,"refresh:tabable:elements",function(e){this.alreadyRefreshedTabableElements=!1,r.refreshTabableElements(s)}),this.listenTo(s,"render",function(){s.children&&s.children.each(function(e){e.content&&r.listenTo(e.content,"render",function(){this.alreadyRefreshedTabableElements=!1,r.refreshTabableElements(s)})}),s.$el.on("tab:content:field:changed",function(){this.alreadyRefreshedTabableElements=!1,this.keyboardAction?r.refreshTabableElementsAndSetFocus(s):r.refreshTabableElements(s),this.keyboardAction=!1})}),o.mixin(s),t.extend(s,{"onKeyInView":function(e){var t;if(!0!==this.keyboardBehavior.alreadyRefreshedTabableElements&&this.keyboardBehavior.refreshTabableElements(this),0===this.keyboardBehavior.tabableElements.length)return t;var s,n,o;if(n=this.keyboardBehavior.tabableElements.length,o=0,9===e.keyCode){for(;o<n&&(!(s=this.keyboardBehavior.tabableElements[o])||!i(s).is(e.target));)o++;o>=0&&o<n&&(this.currentTabPosition=o),t=this._accSetFocusToPreviousOrNextElement(e.shiftKey)}else if(32===e.keyCode||13===e.keyCode){var r=i(this.keyboardBehavior.tabableElements[this.currentTabPosition]);for(r&&r.is(":focus")&&!1===r.hasClass("binf-hidden")&&0===r.closest(".cs-field-write").length&&(e.preventDefault(),e.stopPropagation(),this.keyboardBehavior.keyboardAction=!0,r.trigger("click"));o<n&&(!(s=this.keyboardBehavior.tabableElements[o])||!i(s).is(e.target));)o++;var a=o>=0&&o<n;if(a&&(this.currentTabPosition=o),r=this._accSetFocusToPreviousOrNextElement(e.shiftKey),void 0!==r&&r.prop("tabindex","0"),e.activeTabContent&&e.activeTabContent.alpaca&&140===e.activeTabContent.alpaca.data.type&&a){var c=this.keyboardBehavior.tabableElements[o];c.click()}}return t}})},"onBeforeDestroy":function(){this.view.$el.off("tab:content:field:changed")},"refreshTabableElements":function(e){this.tabableElements=e.options.searchTabContentForTabableElements?e.$el.find(e.options.tabContentAccSelectors).filter(":visible"):[];var t;for(t=this.tabableElements.length-1;t>=0;t--)e.closestTabable&&!1===e.closestTabable(i(this.tabableElements[t]))&&this.tabableElements.splice(t,1);this.view.currentTabPosition=-1,this.alreadyRefreshedTabableElements=!0,setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)},"refreshTabableElementsAndSetFocus":function(e){var t=this.view.currentTabPosition;this.refreshTabableElements(e),i(this.tabableElements[t]).prop("tabindex","0"),i(this.tabableElements[t]).trigger("focus"),this.view.currentTabPosition=t},"updateCurrentTabPosition":function(){var e;for(e=0;e<this.tabableElements.length;e++)if(i(this.tabableElements[e]).is(":focus")){this.view.currentTabPosition=e;break}}})}),csui.define("csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette"],function(e,t,i,s,n){"use strict";return n.Behavior.extend({"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),i.keyboardBehavior=this;var s=this;this.listenTo(i,"refresh:tabable:elements",function(e){s.refreshTabableElements(i,e)}),t.extend(i,{"_setFirstAndLastFocusable":function(e){e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView._setFirstAndLastFocusable&&e.activeTabContent.childTabPanelView._setFirstAndLastFocusable(e)},"currentlyFocusedElement":function(e){if(e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.currentlyFocusedElement)return e.activeTabContent.childTabPanelView.currentlyFocusedElement(e)},"_accSetFocusToPreviousOrNextElement":function(e){if(this.tabPanel&&this.tabPanel.activeTabContent&&this.tabPanel.activeTabContent.childTabPanelView&&this.tabPanel.activeTabContent.childTabPanelView._accSetFocusToPreviousOrNextElement)return this.tabPanel.activeTabContent.childTabPanelView._accSetFocusToPreviousOrNextElement(e)},"containTargetElement":function(e){return!!(e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.containTargetElement)&&e.activeTabContent.childTabPanelView.containTargetElement(e)},"onKeyInView":function(e){if(e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.onKeyInView)return e.activeTabContent.childTabPanelView.onKeyInView(e)},"numberOfTabableElements":function(e){return e&&e.activeTabContent&&e.activeTabContent.childTabPanelView&&e.activeTabContent.childTabPanelView.numberOfTabableElements?e.activeTabContent.childTabPanelView.numberOfTabableElements(e):0}})},"refreshTabableElements":function(e,t){if(e.tabPanel=t,t&&t.activeTabContent&&t.activeTabContent.childTabPanelView){var i=t.activeTabContent.childTabPanelView;i.refreshTabableElements&&i.refreshTabableElements(i);t.activeTabLink,t.activeTabContent;e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()}}})}),csui.define("csui/controls/tab.panel/impl/tab.contents.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/tab.panel/impl/tab.content.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior","csui/lib/binf/js/binf"],function(e,t,i,s,n,o,r){"use strict";var a=i.CollectionView.extend({"className":"binf-tab-content","childView":s,"childViewOptions":function(t,i){return e.extend(this.options,{"index":i,"activeTab":this.options.activeTab})},"behaviors":{},"defaults":{"implementTabContentsDefaultKeyboardHandling":!0,"tabContentAccSelectors":"a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[data-cstabindex], *[contenteditable]"},"constructor":function(t){e.defaults(t,this.defaults),t.implementTabContentsDefaultKeyboardHandling?this.behaviors=e.extend({"TabContentKeyboardBehavior":{"behaviorClass":o}},this.behaviors):!1===t.implementTabContentsDefaultKeyboardHandling&&(this.behaviors=e.extend({"TabContentProxyKeyboardBehavior":{"behaviorClass":r}},this.behaviors)),i.CollectionView.prototype.constructor.apply(this,arguments),this.reactToChildEvent=!1,this.listenTo(this,"add:child",this.propagateEventsToViews)},"onBeforeDestroy":function(){this.reactToChildEvent=!1},"onRender":function(){if(this.reactToChildEvent=!0,this._setLastTabCssClass(),"spy"===this.options.mode){var e=".tab-links.scrollspy";if(this.options&&this.options.tabPanel&&this.options.tabPanel.$el){var t=this.options.tabPanel.$el.attr("id");void 0!==t&&(e="#"+t+" "+e)}this.$el.binf_scrollspy({"target":e})}},"onReorder":function(){this._setLastTabCssClass()},"onAddChild":function(e){this._setLastTabCssClass()},"onRemoveChild":function(e){this._setLastTabCssClass()},"_setLastTabCssClass":function(){if(!0===this.reactToChildEvent){if(this.children.each(function(e){e.$el.hasClass("last-tab-panel")&&e.$el.removeClass("last-tab-panel")}),this.children.length>1){var e=this.getLastVisibleChild(this.collection.length-1);e&&e.$el.addClass("last-tab-panel")}}},"getLastVisibleChild":function(e){var t=this.collection.at(e);if(t){var i=this.children.findByModel(t);return i&&!i.$el.hasClass("binf-hidden")?i:this.getLastVisibleChild(e-1)}},"getTabContentFirstFocusableELement":function(e){var i;if(void 0===e||!0!==this.options.searchTabContentForTabableElements)return i;var s="#"===e.charAt(0)?e.slice(1):e,n=this.collection.findWhere({"uniqueTabId":s});if(n){var o=this.children.findByModel(n),r=o.content,a=0,c=r.$el.find(this.options.tabContentAccSelectors).filter(":visible");if(c.length>0){for(var l=t(c[a]);this.closestTabable&&!1===this.closestTabable(l);){if(++a>=c.length){a=-1;break}l=t(c[a])}a>=0&&a<c.length&&(i=l)}}return i}});return e.extend(a.prototype,n),a}),csui.define("csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/utils/base","csui/lib/marionette"],function(e,t,i,s,n,o){"use strict";return o.Behavior.extend({"constructor":function(e,s){o.Behavior.prototype.constructor.apply(this,arguments),s.keyboardBehavior=this,s.currentTabPosition=e.currentTabPosition||0,this.tabableElements=[];var r=this;this.listenTo(s,"render",function(){r.refreshTabableElements(s),s.$el.on("tab:content:render",function(){r.refreshTabableElements(s)})}),this.listenTo(s,"activate:tab",function(e,s,n){var o=n&&n.$el.find(">a")[0];if(o){var r={"target":o},a=this.tabableElements[this.tabLinksIndex];if(a&&a.containTargetElement&&a.containTargetElement(r)){var c=this.tabableElements[this.tabContentIndex];if(c&&!0!==c.options.searchTabContentForTabableElements){var l=i(a.keyboardBehavior.tabableElements[a.currentTabPosition]);setTimeout(t.bind(function(){this.view._focusOnElement(l)},this),500)}}}}),t.extend(s,{"_checkAndRefreshTabableElements":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=this.keyboardBehavior.tabableElements[this.keyboardBehavior.tabLinksIndex];t.numberOfTabableElements&&0===t.numberOfTabableElements(e)&&t.keyboardBehavior.refreshTabableElements(t)}},"_setFirstAndLastFocusable":function(e){if(this.keyboardBehavior.tabableElements.length>0){var t=this.keyboardBehavior.tabableElements[0];t&&t._setFirstAndLastFocusable&&t._setFirstAndLastFocusable(e);var i=this.keyboardBehavior.tabableElements.length-1;t=this.keyboardBehavior.tabableElements[i],t&&t._setFirstAndLastFocusable&&t._setFirstAndLastFocusable(e)}},"currentlyFocusedElement":function(e){var i=t.extend({"activeTabLink":this.activeTabLink,"activeTabContent":this.activeTabContent},e);this._checkAndRefreshTabableElements(i),this._setFirstAndLastFocusable(i);var s,n=this.keyboardBehavior.tabableElements.length;if(n>0){var o=this.currentTabPosition;(o<0||o>n-1)&&(o=this.currentTabPosition=i.shiftKey?n-1:0),i.shiftKey&&(o=this.currentTabPosition=n-1);var a=this.keyboardBehavior.tabableElements[o];a.currentlyFocusedElement&&void 0!==(s=a.currentlyFocusedElement(i))&&(s.prop("tabindex","0"),this.currentTabPosition===this.tabContentIndex&&(r.skipAutoScroll=!0,this._focusOnElement(s),r.skipAutoScroll=!1))}return s},"accActivateTabableRegion":function(e){e&&(this.currentTabPosition=-1);var t=this.currentlyFocusedElement({"shiftKey":e});this._focusOnElement(t)},"_focusOnElement":function(e){e&&e instanceof i&&(this.tabableRegionBehavior&&(this.tabableRegionBehavior.ignoreFocusEvents=!0),e.trigger("focus"),this.tabableRegionBehavior&&(this.tabableRegionBehavior.ignoreFocusEvents=!1))},"_moveTo":function(e,t){e.preventDefault(),e.stopPropagation();var i=this;t.csuiPromise?t.csuiPromise.done(function(){t.prop("tabindex","0"),i._focusOnElement(t),setTimeout(function(){i.skipAutoScroll=!1},600)}):(t.prop("tabindex","0"),i._focusOnElement(t),setTimeout(function(){i.skipAutoScroll=!1},600))},"onKeyInView":function(e){if(9===e.keyCode||32===e.keyCode||13===e.keyCode||46===e.keyCode){e.activeTabLink=this.activeTabLink,e.activeTabContent=this.activeTabContent;for(var t,s,o=this.currentTabPosition,r=this.keyboardBehavior.tabableElements.length,a=0;a<r;){if((t=this.keyboardBehavior.tabableElements[a])&&t.containTargetElement&&t.containTargetElement(e)){if(0===t.numberOfTabableElements())return void(this.currentTabPosition=-1);break}a++}if(a>=0&&a<r&&(o=this.currentTabPosition=a),o>=0&&o<r&&(t=this.keyboardBehavior.tabableElements[o],t.onKeyInView&&(0===o&&(this.skipAutoScroll=!0),void 0!==(s=t.onKeyInView(e)))))return void this._moveTo(e,s);if(9===e.keyCode&&o>=0&&o<r){var c=-1;for(e.shiftKey?this.currentTabPosition>0&&(c=this.currentTabPosition-1):this.currentTabPosition<r-1&&(c=this.currentTabPosition+1);c>=0&&c<r&&(t=this.keyboardBehavior.tabableElements[c],!t.currentlyFocusedElement||void 0===(s=t.currentlyFocusedElement(e)));)e.shiftKey?c-=1:c+=1;c>=0&&c<r&&c!==this.currentTabPosition?(c===this.tabLinksIndex&&(this.skipAutoScroll=!0),this.currentTabPosition=c,this._moveTo(e,s)):(n.isMSBrowser()?i(e.srcElement).blur():i(e.target).blur(),this.currentTabPosition=-1)}}}})},"onBeforeDestroy":function(){this.view.$el.off("tab:content:render")},"refreshTabableElements":function(e){e.tabLinks.triggerMethod("refresh:tabable:elements",e),e.tabContent.triggerMethod("refresh:tabable:elements",e),this.tabLinksIndex=0,this.tabableElements[this.tabLinksIndex]=e.tabLinks,this.tabContentHeaderIndex=-1,e.tabContentHeader&&(this.tabContentHeaderIndex=1,this.tabableElements[this.tabContentHeaderIndex]=e.tabContentHeader),this.tabContentIndex=e.tabContentHeader?2:1,this.tabableElements[this.tabContentIndex]=e.tabContent,this.view.currentTabPosition=-1,this.view.triggerMethod("refresh:tabindexes")}})}),csui.define("csui/utils/non-emptying.region/non-emptying.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){this.options&&this.options.prependChild?this.el.insertBefore(e.el,this.el.childNodes[0]):this.options&&this.options.index>=0?this.el.insertBefore(e.el,this.el.childNodes[this.options.index]):this.el.appendChild(e.el)},"empty":function(e){var t=this.currentView;return t&&(t.off("destroy",this.empty,this),this.triggerMethod("before:empty",t),e&&e.preventDestroy||this._destroyView(),this.triggerMethod("empty",t),delete this.currentView),this},"_destroyView":function(){var t=this.currentView;!0===t.isDestroyed||t._isDestroyed||(t.supportsDestroyLifecycle||e.triggerMethodOn(t,"before:destroy",t),t.destroy?t.destroy():(t.remove(),"function"==typeof t.isDestroyed?t._isDestroyed=!0:t.isDestroyed=!0),t.supportsDestroyLifecycle||e.triggerMethodOn(t,"destroy",t))}})}),
csui.define("csui/controls/tab.panel/tab.panel.view",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/impl/tab.links.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/models/version","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior","csui/utils/non-emptying.region/non-emptying.region","csui/controls/form/pub.sub","csui/lib/binf/js/binf"],function(e,t,i,s,n,o,r,a,c,l,u,d){"use strict";var h=i.View.extend({"className":"cs-tabpanel tab-panel","attributes":function(){return{"id":this.id||e.uniqueId("cs-tab")}},"events":{"keydown":"onKeyInView"},"behaviors":{"TabableRegionBehavior":{"behaviorClass":c,"notSetFocus":!0,"initialActivationWeight":100},"TabPanelKeyboardBehavior":{"behaviorClass":l}},"constructor":function(e){if(e||(e={}),e.tabPanel=this,e.collection||(e.collection=this._convertCollection(e)),this._generateUniqueTabId(e),e.node){var s=e.node.get("initialPanel");if(s){var n=e.collection.findIndex({"name":s});if(n>=0&&n<e.collection.length){var o=e.collection.at(n);e.activeTab=new t.Model(o.attributes),e.activeTab.set("tabIndex",n),e.selectedTab=new t.Model(o.attributes)}}}e.activeTab||(e.activeTab=new t.Model({"tabIndex":0})),i.View.prototype.constructor.apply(this,arguments),this.linksRegion=new u({"el":this.el}),this.contentRegion=new u({"el":this.el}),this.activeTab=e.activeTab,this.activeTab.get("tabIndex")>=this.collection.length&&this.activeTab.set("tabIndex",this.collection.length-1),this.listenTo(this.collection,"reset",this._generateUniqueTabId),this.listenTo(this.collection,"add",this._setModelUniqueTabId),this.listenTo(this,"activate:tab",this._scrollToActiveTab),this.listenTo(this,"before:destroy",this._destroyContent)},"_scrollToActiveTab":function(e,t,i){if(this.activeTabLink=i,this.activeTabContent=e,this.options.mode){var s=i.$el.find(">a").attr("href"),n=this.getOption("extraScrollTopOffset")||0;"#"===s[0]&&(s=s.substr(1));var o=this.$el.find("div[id='"+s+"']");if(o.length>0){var r=o[0].offsetTop+n;if("spy"===this.options.mode){var c=this.tabContent.$el.data("binf.scrollspy");c&&c.refresh()}this.tabContent.$el.animate({"scrollTop":r},300);var l=i.$el.find(".cs-tablink-text").html(),u=(this.options.node instanceof a?"v":"p")+this.options.node.get("id"),h="pubsub:tab:contents:header:view:change:tab:title:"+u;d.trigger(h,l)}}},"render":function(){return this._ensureViewIsIntact(),i.triggerMethodOn(this,"before:render",this),this._destroyContent(),this._renderContent(),this._bindingToEvents(),i.triggerMethodOn(this,"render",this),this},"_renderContent":function(){var e=this.options.TabLinkCollectionViewClass||n;this.tabLinks=new e(this.options);var t=this.options.TabContentCollectionViewClass||o;this.tabContent=new t(this.options),this.propagateEventsToViews(this.tabLinks,this.tabContent),this.linksRegion.show(this.tabLinks),this.contentRegion.show(this.tabContent);var s=this;this.listenTo(this.tabLinks,"childview:before:activate:tab",function(e){var t=this.tabContent.children.findByModel(e.model),s=t.content;this.activatingTab=!0,i.triggerMethodOn(this,"before:activate:tab",s,t,e)}),this.listenTo(this.tabLinks,"childview:activate:tab",function(e){var t=this.tabContent.children.findByModel(e.model),n=t.content;setTimeout(function(){s.activatingTab=!1},600),i.triggerMethodOn(this,"activate:tab",n,t,e),i.triggerMethodOn(n,"dom:refresh")});var r=0;this.activeTab&&this.activeTab.get("tabIndex")>=0&&this.activeTab.get("tabIndex")<this.collection.length&&(r=this.activeTab.get("tabIndex")),this.activeTabLink=this.tabLinks.children.findByIndex(r),this.activeTabLink&&(this.activeTabContent=this.tabContent.children.findByIndex(r).content)},"_destroyContent":function(){this.$el.off("tab:content:focus"),this.$el.off("tab:link:delete"),this.tabLinks&&(this.cancelEventsToViewsPropagation(this.tabLinks,this.tabContent),this.stopListening(this.tabLinks).stopListening(this.tabContent),this.linksRegion.empty(),this.contentRegion.empty())},"_bindingToEvents":function(){var e=this;this.$el.on("tab:content:focus",function(t){var i=e.tabContent.getTabContentFirstFocusableELement(t.tabId);i&&(e.currentTabPosition=this.keyboardBehavior?this.keyboardBehavior.tabContentIndex:-1,e._moveTo&&e._moveTo(t,i),e.tabContent.keyboardBehavior&&e.tabContent.keyboardBehavior.updateCurrentTabPosition())}),this.$el.on("tab:link:delete",function(t){t.preventDefault(),t.stopPropagation(),e.tabLinks.deleteTabById(t.tabId)})},"_convertCollection":function(i){var s=new t.Collection(i.tabs);return s.each(function(t){t.set("id",e.uniqueId("cs-tab"))}),s},"_generateUniqueTabId":function(i){var s=i instanceof t.Collection?i:i.collection||this.collection;s&&s.each(e.bind(function(e){this._setModelUniqueTabId(e)},this))},"_setModelUniqueTabId":function(t){t&&t.set("uniqueTabId",e.uniqueId("cstab-uid-"),{"silent":!0})},"_isTablinkVisibleInParents":function(e,t){return this.tabLinks._isTablinkVisibleInParents(e,t)}});return e.extend(h.prototype,r),h}),csui.define("csui/controls/tab.panel/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/controls/tab.panel/impl/nls/root/lang",{"deleteTooltip":"Delete","deleteTabAria":"Delete {0}","gotoNextTooltip":"Show next tab","gotoPreviousTooltip":"Show previous tab","requiredTooltip":"Required","showMore":"Show more"}),csui.define("csui/controls/tab.panel/tab.links.ext.scroll.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/models/version","i18n!csui/controls/tab.panel/impl/nls/lang","csui/controls/form/pub.sub"],function(e,t,i,s,n,o){return{"_initializeToolbars":function(i){i=i||{},this.tabsSelector="> ul li",this.tablinksToolbar=t(this.$el.find(".tab-links .tab-links-bar")[0]);var s;this.leftToolbar=t(this.$el.find(".tab-links .left-toolbar")[0]),this.leftToolbar&&0===this.leftToolbar.find(">div.goto_previous_div").length&&(s=i.gotoPreviousTooltip||n.gotoPreviousTooltip,this.leftToolbar.append("<div class='goto_previous_div' title='"+s+"'><span class='icon goto_previous_page'></span></div>"),this.gotoPreviousPage=t(this.$el.find(".tab-links .goto_previous_div")[0]),this.gotoPreviousPage.on("click",e.bind(this._gotoPreviousTabClick,this))),this._hideLeftToolbar(),this.rightToolbar=t(this.$el.find(".tab-links .right-toolbar")[0]),this.rightToolbar&&0===this.rightToolbar.find(">div.goto_next_div").length?(s=i.gotoNextTooltip||n.gotoNextTooltip,this.rightToolbar.append("<div class='goto_next_div' title='"+s+"'><span class='icon goto_next_page'></span></div>"),this.gotoNextPage=t(this.$el.find(".tab-links div.goto_next_div")[0]),this.gotoNextPage.on("click",e.bind(this._gotoNextTabClick,this))):this.gotoNextPage=t(this.$el.find(".tab-links div.goto_next_div")[0]),this.gotoNextPage&&this.gotoNextPage.hide()},"_listenToTabEvent":function(){var e,t=this.tablinksToolbar.find(this.tabsSelector);for(e=0;e<t.length;e++)this._listenToTabIdEvent(e,t)},"_listenToTabIdEvent":function(e,i){var n=this,r=void 0===i?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i;t(r[e]).off("activate.binf.scrollspy").on("activate.binf.scrollspy",function(){var e=t(this).find("a").attr("href"),i=0;if(e&&("#"===e[0]&&(e=e.substr(1)),i=n._findTabIndexByID(e),n.tabContentHeader)){var a=t(r).parent().find("li.binf-active .cs-tablink-text").html(),c=(n.options.node instanceof s?"v":"p")+n.options.node.get("id"),l="pubsub:tab:contents:header:view:change:tab:title:"+c;o.trigger(l,a)}!0===n.activatingTab||!0===n.skipAutoScroll||!0===n.scrollspyActivatingTab&&n.scrollspyActivatingTabId===i||e&&i>=0&&!n._isTablinkVisibleInParents(t(r[i]))&&(n.scrollspyActivatingTab=!0,n.scrollspyActivatingTabId=i,n._autoScrollTabTo(i).done(function(){n.scrollspyActivatingTab=!1,n.scrollspyActivatingTabId=-1}))})},"_beginTabHidden":function(e){var i=!1,s=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(s){var n;for(n=0;n<s.length;n++){var o=this._isTablinkVisibleInParents(t(s[n]));if(o)break;if(!o&&!t(s[n]).hasClass("hidden-by-switch")){i=!0;break}}}return i},"_trailingTabHidden":function(e){var i=!1,s=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(s){var n;for(n=s.length-1;n>=0;n--){var o=this._isTablinkVisibleInParents(t(s[n]));if(o)break;if(!o&&!t(s[n]).hasClass("hidden-by-switch")){i=!0;break}}}return i},"_findTabIndexByID":function(e){var i=-1,s=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector);if(s){var n;for(n=0;n<s.length;n++){var o=t(s[n]).find(">a").attr("href");if("#"===o[0]&&(o=o.substr(1)),e===o){i=n;break}}}return i},"_firstVisibleTabIndex":function(e){var i=-1,s=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(s){var n;for(n=0;n<s.length;n++)if(this._isTablinkVisibleInParents(t(s[n]))){i=n;break}}return i},"_lastVisibleTabIndex":function(e){var i=-1,s=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;if(s){var n;for(n=s.length-1;n>=0;n--)if(this._isTablinkVisibleInParents(t(s[n]))){i=n;break}}return i},"_showLeftToolbar":function(){this.leftToolbar&&this.leftToolbar.show(),this.tablinksToolbar&&this.tablinksToolbar.addClass("with-left-toolbar")},"_hideLeftToolbar":function(){this.leftToolbar&&this.leftToolbar.hide(),this.tablinksToolbar&&this.tablinksToolbar.removeClass("with-left-toolbar")},"_hideTabLinkByRequiredSwitch":function(e){if(e&&e instanceof t){e.addClass("binf-hidden hidden-by-switch"),this._hideTab(e),e.find("a").attr("data-cstabindex","-1");var i=e.find(".cs-delete-icon");void 0!==i.attr("data-cstabindex")&&i.attr("data-cstabindex","-1")}},"_showTabLinkByRequiredSwitch":function(e,i){e&&e instanceof t&&(e.removeClass("binf-hidden hidden-by-switch"),this._showTab(e),e.find("a").removeAttr("data-cstabindex"),!0===i&&e.find(".cs-delete-icon").attr("data-cstabindex","0"))},"_hideTab":function(e){e&&e instanceof t&&(e.css("width",""),e.css("text-overflow","clip"),e.hide())},"_showTab":function(e){e&&e instanceof t&&(e.css("width",""),e.css("text-overflow","ellipsis"),e.show())},"_showLastTab":function(e){var i,s=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;for(i=s.length-1;i>=0;i--){var n=t(s[i]);if(!this._isTablinkVisibleInParents(n)&&!n.hasClass("hidden-by-switch")){this._showTab(n);break}}},"_enableToolbarState":function(e){var t=void 0===e?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):e;t&&this.$el.is(":visible")&&(this._beginTabHidden(t)?this._showLeftToolbar():this._hideLeftToolbar(),this.gotoNextPage&&this.gotoNextPage.toggle(this._trailingTabHidden(t)))},"_gotoPreviousTabClick":function(e){i.trigger("closeToggleAction"),this._gotoPreviousTab({"event":e})},"_gotoNextTabClick":function(e){i.trigger("closeToggleAction");var s=(t.Deferred(),this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector)),n=this._lastVisibleTabIndex(s);if(n>=0&&n<s.length){var o,r=-1;for(o=n+1;o<s.length;o++){var a=t(s[o]);if(!a.hasClass("hidden-by-switch")&&!this._isTablinkVisibleInParents(a)){r=o;break}}if(r>=0&&r<s.length)return this._gotoNextTab({"tabs":s,"visibleTabIndex":r})}return t.Deferred().resolve()},"_gotoPreviousTab":function(i){i||(i={}),i.event&&i.event.preventDefault(),i.event&&i.event.stopPropagation();var s,n=i.deferred?i.deferred:t.Deferred(),o=void 0===i.tabs?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i.tabs,r=o.length-1,a=i.visibleTabIndex;if(void 0!==a&&a>=0&&a<=r&&this._isTablinkVisibleInParents(t(o[a])))return n.resolve();var c=!1;for(s=0;s<=r;s++){var l=t(o[s]);if(this._isTablinkVisibleInParents(l)){0===s&&this._hideLeftToolbar();var u;for(u=s-1;u>=0;u--){var d=t(o[u]);if(d&&!this._isTablinkVisibleInParents(d)&&!d.hasClass("hidden-by-switch")){d.css("visibility","binf-hidden"),d.css("width",""),d.show();var h=d.width();d.css("text-overflow","clip"),d.width(0),d.css("visibility",""),c=!0;var p=!0===i.animationOff?0:"fast";d.animate({"width":"+="+h},p,e.bind(function(){d.css("width",""),d.css("text-overflow","ellipsis");var e=!1;if(void 0!==a&&a>=0&&a<=r&&!1===this._isTablinkVisibleInParents(t(o[a]))&&(e=!0),e){var s={"tabs":o,"deferred":n};i.event&&(s.event=i.event),void 0!==a&&(s.visibleTabIndex=a),void 0!==i.animationOff&&(s.animationOff=i.animationOff),this._gotoPreviousTab(s)}else this._enableToolbarState(o),this.autoScrollingLastTab=!1,n.resolve()},this));break}}break}s===r&&(this._showLastTab(o),this._enableToolbarState(o),this.autoScrollingLastTab=!1,n.resolve())}return!1===c?n.resolve():void 0===i.deferred?n.promise():void 0},"_gotoNextTab":function(i){i||(i={}),i.event&&i.event.preventDefault(),i.event&&i.event.stopPropagation();var s,n=i.deferred?i.deferred:t.Deferred(),o=void 0===i.tabs?this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector):i.tabs,r=o.length-1,a=i.visibleTabIndex;if(void 0!==a&&a>=0&&a<=r&&this._isTablinkVisibleInParents(t(o[a])))return n.resolve();var c=!1;for(s=0;s<=r;s++){var l=t(o[s]);if(this._isTablinkVisibleInParents(l)){if(this.leftToolbar.is(":hidden")&&this._showLeftToolbar(),l){c=!0;var u=!0===i.animationOff?0:"fast";l.animate({"width":"-="+l.width()},u,e.bind(function(){l.hide(),l.css("width","");var e=!1;if(void 0!==a&&a>=0&&a<=r&&!1===this._isTablinkVisibleInParents(t(o[a]))&&(e=!0),e){var s={"tabs":o,"deferred":n};i.event&&(s.event=i.event),void 0!==a&&(s.visibleTabIndex=a),void 0!==i.animationOff&&(s.animationOff=i.animationOff),this._gotoNextTab(s)}else this._enableToolbarState(o),this.autoScrollingLastTab=!1,n.resolve()},this))}break}s===r&&(this._showLastTab(o),this._enableToolbarState(o),this.autoScrollingLastTab=!1,n.resolve())}return!1===c?n.resolve():void 0===i.deferred?n.promise():void 0},"_autoScrollLastTab":function(){this.autoScrollingLastTab=!0;var t=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),i=this._gotoNextTab({"tabs":t,"visibleTabIndex":t.length-1});return i.done(e.bind(function(){this.autoScrollingLastTab=!1},this)),i},"_autoScrollFirstTabAsync":function(i,s,n,o){var r=void 0===n?0:n;if(r<0&&r>=s.length)return o?void o.resolve():t.Deferred().resolve();var a=o||t.Deferred();return this._gotoPreviousTab({"tabs":s}).done(e.bind(function(){this._isTablinkVisibleInParents(i)?a.resolve():(r++,this._autoScrollFirstTabAsync(i,s,r,a))},this)),void 0===o?a:void 0},"_autoScrollFirstTab":function(){var i=t.Deferred();this.autoScrollingLastTab=!0;var s=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),n=t(s[0]);return!this._isTablinkVisibleInParents(n)&&s.length>0?this._autoScrollFirstTabAsync(n,s).done(e.bind(function(){this._enableToolbarState(s),this.autoScrollingLastTab=!1,i.resolve()},this)):this.autoScrollingLastTab=!1,i.promise()},"_autoScrollTabTo":function(i,s){s||(s={});var n=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),o=e.extend({"visibleTabIndex":i},s,{"tabs":n}),r=this._firstVisibleTabIndex(n),a=this._lastVisibleTabIndex(n);if(r>=0&&r<n.length&&a>=0&&a<n.length&&i>=0&&i<n.length){this.autoScrollingLastTab=!0;var c;if(i<r)c=this._gotoPreviousTab(o);else{if(!(i>a))return this.autoScrollingLastTab=!1,t.Deferred().resolve();c=this._gotoNextTab(o)}return c.done(e.bind(function(){this.autoScrollingLastTab=!1},this)),c}return t.Deferred().resolve()},"_autoScrolling":function(){if(this.autoScrollingLastTab||!0===this.activatingTab||!0===this.skipAutoScroll)return t.Deferred().resolve();var e,i=-1,s=this.tablinksToolbar&&this.tablinksToolbar.find(this.tabsSelector),n=!1;for(e=0;e<s.length;e++){var o=t(s[e]);if(-1===i&&o.hasClass("binf-active")){!1===this._isTablinkVisibleInParents(o)&&(n=!0),i=e;break}}return n?this._autoScrollTabTo(i):t.Deferred().resolve()}}}),csui.define("hbs!csui/controls/tab.panel/impl/tab.links.ext",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){return'  <div class="left-toolbar"></div>\r\n'},"3":function(e,t,i,s){return'  <div class="right-toolbar"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return(null!=(n=t.if.call(e,null!=e?e.toolbar:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+'\r\n<div class="tab-links-bar">\r\n  <span class="fadeout"></span>\r\n  <ul class="binf-nav '+this.escapeExpression((o=null!=(o=t.tab_type||(null!=e?e.tab_type:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"tab_type","hash":{}}):o))+'" role="tablist"></ul>\r\n</div>\r\n\r\n'+(null!=(n=t.if.call(e,null!=e?e.toolbar:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_tab.panel_impl_tab.links.ext",s),s}),csui.define("hbs!csui/controls/tab.panel/impl/tab.link.ext",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){var n;return'    <span class="cs-icon-required category_required" aria-label="'+this.escapeExpression((n=null!=(n=t.required_tooltip||(null!=e?e.required_tooltip:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"required_tooltip","hash":{}}):n))+'"></span>\r\n'},"3":function(e,t,i,s){var n,o;return'  <div class="cs-tablink-delete" title="'+this.escapeExpression((o=null!=(o=t.delete_tooltip||(null!=e?e.delete_tooltip:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"delete_tooltip","hash":{}}):o))+'">\r\n    <span class="icon '+this.escapeExpression((o=null!=(o=t.delete_icon||(null!=e?e.delete_icon:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"delete_icon","hash":{}}):o))+' cs-delete-icon" role="button"\r\n          '+(null!=(n=t.if.call(e,null!=e?e.removeable:e,{"name":"if","hash":{},"fn":this.program(4,s,0),"inverse":this.noop}))?n:"")+'\r\n          aria-label="'+this.escapeExpression((o=null!=(o=t.deleteTabAria||(null!=e?e.deleteTabAria:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"deleteTabAria","hash":{}}):o))+'"></span>\r\n  </div>\r\n'},"4":function(e,t,i,s){return'data-cstabindex="0"'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return'<a href="#'+this.escapeExpression((o=null!=(o=t.uniqueTabId||(null!=e?e.uniqueTabId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"uniqueTabId","hash":{}}):o))+'" id="'+this.escapeExpression((o=null!=(o=t.linkId||(null!=e?e.linkId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"linkId","hash":{}}):o))+'" role="tab" aria-selected="'+this.escapeExpression((o=null!=(o=t.selected||(null!=e?e.selected:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"selected","hash":{}}):o))+'" aria-controls='+this.escapeExpression((o=null!=(o=t.uniqueTabId||(null!=e?e.uniqueTabId:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"uniqueTabId","hash":{}}):o))+' class="cs-tablink" data-binf-toggle="tab" title="'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.title:e,{"name":"csui-l10n","hash":{}}))+'">\r\n'+(null!=(n=t.if.call(e,null!=e?e.required:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+'  <span class="cs-tablink-text">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.title:e,{"name":"csui-l10n","hash":{}}))+"</span>\r\n</a>\r\n"+(null!=(n=t.if.call(e,null!=e?e.allow_delete:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")}});return i.registerPartial("csui_controls_tab.panel_impl_tab.link.ext",s),s}),csui.define("csui/controls/tab.panel/impl/tab.link.ext.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.link.view","hbs!csui/controls/tab.panel/impl/tab.link.ext","i18n!csui/controls/tab.panel/impl/nls/lang","csui/lib/binf/js/binf"],function(e,t,i,s){"use strict";return t.extend({"template":i,"templateHelpers":function(){return{"linkId":"tablink-"+this.model.get("uniqueTabId"),"selected":this._isOptionActiveTab(),"required_tooltip":s.requiredTooltip,"delete_icon":this.options.delete_icon||"circle_delete","delete_tooltip":this.options.delete_tooltip||s.deleteTooltip,"deleteTabAria":e.str.sformat(s.deleteTabAria,this.model.get("title"))}},"events":{"show.binf.tab > a":"onShowingTab","shown.binf.tab > a":"onShownTab","focus .cs-delete-icon":"onFocusDeleteIcon","blur .cs-delete-icon":"onBlurDeleteIcon","click .cs-tablink-delete":"onDelete"},"ui":{"link":">a","deleteIcon":".cs-delete-icon","deleteIconParent":".cs-tablink-delete"},"constructor":function(e){this.options=e||{},t.prototype.constructor.apply(this,arguments),this.listenTo(this.model,"action:updated",function(){this._setRemoveable()})},"onRender":function(){this._setRemoveable()},"_setRemoveable":function(){this.model.get("removeable")?(this.ui.deleteIcon.addClass("removeable"),this.ui.deleteIcon.attr("data-cstabindex","0"),this.ui.deleteIconParent.removeClass("binf-hidden")):(this.ui.deleteIcon.removeClass("removeable"),this.ui.deleteIcon.removeAttr("data-cstabindex"),this.ui.deleteIconParent.addClass("binf-hidden"))},"onFocusDeleteIcon":function(){this.ui.deleteIconParent.addClass("focused")},"onBlurDeleteIcon":function(){this.ui.deleteIconParent.removeClass("focused")},"onDelete":function(e){e.preventDefault(),e.stopPropagation(),this.deleteCurrentTab()},"deleteCurrentTab":function(){!0===this.model.get("allow_delete")&&!0===this.model.get("removeable")&&this.triggerMethod("delete:tab")}})}),csui.define("csui/controls/tab.panel/tab.links.ext.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.links.view","hbs!csui/controls/tab.panel/impl/tab.links.ext","csui/controls/tab.panel/impl/tab.link.ext.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/lib/binf/js/binf"],function(e,t,i,s,n){"use strict";var o=t.extend({"template":i,"templateHelpers":function(){return{"tab_type":this.options.tabType||"binf-nav-tabs","toolbar":!!this.options.toolbar}},"events":{"click .left-toolbar":"onToolbarClicked","click .right-toolbar":"onToolbarClicked"},"childView":s,"childViewContainer":function(){return".tab-links-bar >."+this.tabType},"childViewOptions":function(t,i){return e.extend(this.options,{})},"constructor":function(e){this.options=e||{},t.prototype.constructor.apply(this,arguments),this.listenTo(this,"metadata:schema:updated",function(e){this.children.findByModel(e).render()},this)},"onToolbarClicked":function(e){e.preventDefault(),e.stopPropagation()},"deleteTabById":function(e){var t=!1;if(void 0===e)return t;var i="#"===e.charAt(0)?e.slice(1):e,s=this.collection.findWhere({"uniqueTabId":i});if(s){var n=this.children.findByModel(s);n&&(n.deleteCurrentTab(),t=!0)}return t}});return e.extend(o.prototype,n),o}),csui.define("csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/utils/log","csui/lib/marionette","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin"],function(e,t,i,s,n,o){"use strict";return n.Behavior.extend({"constructor":function(e,i){n.Behavior.prototype.constructor.apply(this,arguments),i.keyboardBehavior=this,this.tabableElements=[];var s=this;this.listenTo(i,"refresh:tabable:elements",function(e){s.refreshTabableElements(i,e)}),o.mixin(i),t.extend(i,{"onKeyInView":function(e){var t;return 0===this.keyboardBehavior.tabableElements.length?t:(9===e.keyCode&&(t=this._accSetFocusToPreviousOrNextElement(e.shiftKey)),t)}})},"refreshTabableElements":function(e,t){this.tabableElements=e.$el.find("button:not([disabled])").filter(":visible"),this.view.currentTabPosition=-1,setTimeout(function(){e._setFirstAndLastFocusable&&e._setFirstAndLastFocusable()},50)}})}),csui.define("csui/controls/mixins/global.alert/global.alert.mixin",[],function(){"use strict";return{"prepareForGlobalAlert":function(){this.listenTo(this,"global.alert.inprogress",this.handleAlertInProgress),this.listenTo(this,"global.alert.completed",this.handleAlertComplete)},"handleAlertInProgress":function(){this.currentlyFocusedElement!==this.disableCurrentFocusElementHandler&&(this.originalCurrentlyFocusedElement=this.currentlyFocusedElement),this.currentlyFocusedElement=this.disableCurrentFocusElementHandler},"disableCurrentFocusElementHandler":function(){},"handleAlertComplete":function(){null!=this.originalCurrentlyFocusedElement&&(this.currentlyFocusedElement=this.originalCurrentlyFocusedElement,this.originalCurrentlyFocusedElement=void 0)}}}),csui.define("csui/utils/contexts/factories/metadata.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({});return s.extend({"MetadataModelPrefix":"MetadataModel","propertyPrefix":"MetadataModel","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.MetadataModel||{};if(!(a instanceof i.Model)){var c=e.config();a=new n(a.models,t.extend({},a.options,c.options))}this.property=a}})}),csui.define("csui/controls/mixins/view.state/metadata.view.state.mixin",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/contexts/factories/metadata.factory"],function(e,t,i,s){"use strict";return{"getViewStateDropdown":function(){return this.context&&this.context.viewStateModel.getViewState("dropdown")},"getDefaultViewStateDropdown":function(){return this.context&&this.context.viewStateModel.getDefaultViewState("dropdown")},"setViewStateDropdown":function(e,t){var i=this.context&&this.context.viewStateModel;return t&&(t.default&&i.setDefaultViewState("dropdown",e),t.title&&i.setViewState("dropdownTitle",t.title)),i.setViewState("dropdown",e)},"setViewStateId":function(e,i){var n=this.context&&this.context.getModel(s),o=t.clone(n.get("metadata_info"));o&&(o.id=e,o.model=i.model,n.set("metadata_info",o,i))},"getViewStateId":function(e){var i=this.context&&this.context.getModel(s),n=t.clone(i.get("metadata_info"));if(n)return n.id},"isMetadataNavigation":function(){var e=this.context&&this.context.getModel(s);if(e){var t=e.get("metadata_info");if(t)return t.navigator}return!0},"getThumbnailViewState":function(){var e=this.context&&this.context.getModel(s);if(e){var t=e.get("metadata_info");if(t)return t.isThumbnailView}},"getViewStateSelectedProperty":function(){var e=this.context&&this.context.getModel(s);if(e){var t=e.get("metadata_info");if(t)return t.selectedProperty}}}}),csui.define("csui/controls/mixins/view.state/node.view.state.mixin",["module","csui/lib/underscore","csui/lib/marionette","csui/utils/log"],function(e,t,i,s){"use strict";return s=s(e.id),{"getViewStatePage":function(){return this._parsePageInfo(this.context.viewStateModel.getViewState("page"))},"getDefaultViewStatePage":function(){return this._parsePageInfo(this.context.viewStateModel.getDefaultViewState("page"))},"_parsePageInfo":function(e){if(e&&(e=e.split("_"),e.length>1))try{return{"top":parseInt(e[0]),"skip":parseInt(e[1])}}catch(e){s.error("invalid page info in url.")}},"setViewStatePage":function(e,t,i){var s=this.context.viewStateModel;return e=e>50?100:e,i&&i.default&&s.setDefaultViewState("page",e+"_"+t,i),s.setViewState("page",e+"_"+t,i)},"getViewStateOrderBy":function(e){var t=e?e.order_by:this.context.viewStateModel.getViewState("order_by");return this._formatOrderBy(t)},"_formatOrderBy":function(e){return e&&e.replace(/_desc/g," desc").replace(/_asc/g," asc")},"getDefaultViewStateOrderBy":function(){var e=this.context.viewStateModel.getDefaultViewState("order_by");return this._formatOrderBy(e)},"setViewStateOrderBy":function(e,i){var s=this.context.viewStateModel;if(!e||!e.length)return s.setViewState("order_by",void 0,i);var n=s.getViewState("order_by"),o=e.join();return o!==n?(o=o.replace(/ /g,"_"),i&&i.default&&s.setDefaultViewState("order_by",o,t.omit(i,"default")),s.setViewState("order_by",o,i)):void 0},"getViewStateFilter":function(){return this.context.viewStateModel.getViewState("filter",!0)},"setViewStateFilter":function(e,t){if(this.getViewStateFilter()!==e){var i=this.context.viewStateModel;return t||(t={}),t.encode=!0,t&&t.default&&i.setDefaultViewState("filter",e,t),i.setViewState("filter",e,t)}},"getViewStateTabIndex":function(){var e=this.context.viewStateModel.getViewState("tab");if(e)try{e=parseInt(e)}catch(e){s.error("invalid tab info in url.")}return e},"setViewStateTabIndex":function(e,t){var i=this.context.viewStateModel;return t&&t.default&&i.setDefaultViewState("tab",e,t),i.setViewState("tab",e,t)}}}),csui.define("csui/controls/tile/behaviors/blocking.behavior",["csui/lib/underscore","csui/lib/marionette","csui/controls/progressblocker/blocker"],function(e,t,i){"use strict";function s(t,i){i=this.options||i||{};var s=i[t];return e.isFunction(s)?i[t].call(this.view):s}return t.Behavior.extend({"constructor":function(e,n){t.Behavior.prototype.constructor.apply(this,arguments);var o=s.call(this,"blockingParentView",e);o?i.delegate(n,o):i.imbue(n),this.collection&&n.listenTo(n.collection,"request",n.blockActions).listenTo(n.collection,"sync",n.unblockActions).listenTo(n.collection,"destroy",n.unblockActions).listenTo(n.collection,"error",n.unblockActions),n.model&&n.listenTo(n.collection,"request",n.blockActions).listenTo(n.collection,"sync",n.unblockActions).listenTo(n.collection,"error",n.unblockActions)}})}),csui.define("csui/controls/tile/behaviors/infinite.scrolling.behavior",["require","csui/lib/jquery","csui/lib/underscore","csui/lib/marionette"],function(e,t,i,s){"use strict";function n(e){var t=this.options||{},s=t[e];return i.isFunction(s)?t[e].call(this.view):s}return s.Behavior.extend({"defaults":{"content":null,"contentParent":null,"fetchMoreItemsThreshold":95},"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(t,"render",this._bindScrollingEvents),this.listenTo(t,"before:destroy",this._unbindScrollingEvents)},"_bindScrollingEvents":function(){var e=n.call(this,"contentParent");this._contentParent=e?this.view.$(e):this.view.$el,this._contentParent.on("scroll."+this.view.cid,i.bind(this._checkScrollPosition,this));var t=n.call(this,"content");this._content=t?this.view.$(t):e?this._contentParent.children().first():this.view.$el},"_checkScrollPosition":function(){var e,s=n.call(this,"fetchMoreItemsThreshold");e=1===this._content.length?this._content.height():i.reduce(this._content,function(e,i){return e+t(i).height()},0);var o=e-this._contentParent.height();100*this._contentParent.scrollTop()/o>=s&&this._checkScrollPositionFetch()},"_checkScrollPositionFetch":function(){var e=this.view.collection;if(e.length<e.totalCount&&!e.fetching&&e.skipCount<e.length){var t=this;this.view.trigger("before:collection:scroll:fetch"),e.setSkip(e.length,!1),e.fetch({"reset":!1,"remove":!1,"merge":!1,"success":function(){t.view.trigger("collection:scroll:fetch")}})}},"_unbindScrollingEvents":function(){this._contentParent&&this._contentParent.off("scroll."+this.view.cid)}})}),csui.define("csui/controls/tile/behaviors/parent.scrollbar.updating.behavior",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/controls/tile/behaviors/perfect.scrolling.behavior"],function(e,t,i,s){"use strict";function n(e){t.event.trigger("csui:update:scrollbar",{"view":e},e.el,!1)}function o(t,i){var s=i||this.options||{},n=s[t];return e.isFunction(n)?s[t].call(this.view):n}var r=i.Region.extend({"constructor":function(e){i.Region.prototype.constructor.apply(this,arguments),this._swapping=!1,this.listenTo(this,"before:swapOut",function(){this._swapping=!0}).listenTo(this,"swapOut",function(){this._swapping=!1}).listenTo(this,"show",function(){this._requestScrollbarUpdate()}).listenTo(this,"empty",function(){this._swapping||this._requestScrollbarUpdate()})},"_requestScrollbarUpdate":function(){n(this._parent._parent)}});return i.Behavior.extend({"constructor":function(n,r){if(i.Behavior.prototype.constructor.apply(this,arguments),s.usePerfectScrollbar()){var a=o.call(this,"updateOnWindowResize");this._renderState=0,this.listenTo(r,"before:render",function(){
this._renderState=1}).listenTo(r,"render",function(){this._renderState=0,this._requestScrollbarUpdate()}).listenTo(r,"update:scrollbar",this._requestScrollbarUpdate).listenToOnce(r,"before:render",function(){a&&(t(window).on("resize."+r.cid,e.bind(this._updateScrollbar,this)),this.listenToOnce(r,"before:destroy",function(){t(window).off("resize."+r.cid)})),r instanceof i.CollectionView&&r.collection&&this.listenTo(r.collection,"reset",function(){this._resetTriggered=!0}).listenTo(r,"before:render:collection",function(){++this._renderState}).listenTo(r,"render:collection",function(){this._resetTriggered=!1,--this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"render:empty",function(){!this._resetTriggered&&this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"add:child",function(){this._renderState||this._requestScrollbarUpdate()}).listenTo(r,"remove:child",function(){this._resetTriggered||this._renderState||this._requestScrollbarUpdate()})})}},"_requestScrollbarUpdate":function(){n(this.view)}},{"Region":r})}),csui.define("hbs!csui/controls/tile/behaviors/impl/searching.behavior",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<form class="search-box binf-hidden">\r\n  <input class="search" type="search" placeholder="'+this.escapeExpression((n=null!=(n=t.searchPlaceholder||(null!=e?e.searchPlaceholder:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchPlaceholder","hash":{}}):n))+'" style="display: none">\r\n  <span class="clearer csui-icon formfield_clear"></span>\r\n</form><span class="icon icon-search" title="'+this.escapeExpression((n=null!=(n=t.searchIconTitle||(null!=e?e.searchIconTitle:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchIconTitle","hash":{}}):n))+'" aria-label="'+this.escapeExpression((n=null!=(n=t.searchIconAria||(null!=e?e.searchIconAria:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"searchIconAria","hash":{}}):n))+'" role="button"></span>\r\n'}});return i.registerPartial("csui_controls_tile_behaviors_impl_searching.behavior",s),s}),csui.define("csui/controls/tile/behaviors/searching.behavior",["csui/lib/underscore","csui/lib/marionette","hbs!csui/controls/tile/behaviors/impl/searching.behavior","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i){"use strict";function s(t){var i=this.options||{},s=i[t];return e.isFunction(s)?i[t].call(this.view):s}return t.Behavior.extend({"defaults":{"searchPlaceholder":"Type to filter","headerTitle":".tile-title","searchButton":".tile-controls"},"ui":function(){return{"headerTitle":s.call(this,"headerTitle"),"searchBox":".search-box","searchInput":".search","clearer":".clearer"}},"triggers":{"click .icon-search":"toggle:search"},"constructor":function(e,i){t.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(i,"render",this._renderSearchButton),this.listenTo(i,"toggle:search",this._toggleSearching)},"_renderSearchButton":function(){var e=s.call(this,"searchButton"),t=this.view.$(e),n=s.call(this,"searchPlaceholder"),o=s.call(this,"searchIconTitle"),r=o||"Search",a=s.call(this,"searchIconAria"),c=a||r,l={"searchPlaceholder":n,"searchIconTitle":r,"searchIconAria":c};t.html(i(l)),this.view._bindUIElements.call(this)},"_toggleSearching":function(){var e=this;this.ui.searchInput.val(""),this.ui.clearer.toggle(!1),this.ui.headerTitle.toggle("fade"),this.ui.searchBox.removeClass("binf-hidden"),this.ui.searchInput.toggle("blind",{"direction":"right"},200,function(){e.ui.searchInput.is(":visible")&&e.ui.searchInput.trigger("focus")})}})}),csui.define("csui/behaviors/drag.drop/dnd.item.behaviour",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone"],function(e,t,i,s){var n=i.Behavior.extend({"constructor":function(e,t){this.view=t,i.Behavior.prototype.constructor.apply(this,arguments),this._registerListeners()},"_registerListeners":function(){this.listenTo(this.view,"render",this._initDnD)},"_initDnD":function(){this.$el.addClass(n.DRAGGABLE_CLASSNAME),this.$el.attr(n.DRAGGABLE_DATA_ATTR,this.view.model.cid)}},{"DRAGGABLE_CLASSNAME":"csui-draggable-item","DRAGGABLE_DATA_ATTR":"data-csui-draggable-item"});return n}),csui.define("csui/behaviors/drag.drop/dnd.container.behaviour",["require","i18n","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/behaviors/drag.drop/dnd.item.behaviour","csui/lib/jquery.ui/js/jquery-ui"],function(e,t,i,s,n,o,r){return n.Behavior.extend({"defaults":{"placeholder":void 0,"handle":void 0,"draggableItem":"."+r.DRAGGABLE_CLASSNAME,"disableDraggable":".csui-draggable-item-disable","over":!1,"receive":!1,"helper":"original"},"constructor":function(e,t){this.view=t,n.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(this.view,"render",this._initSorting)},"_getPlaceholder":function(e){var t=this.options.placeholder;if(!t||i.isString(t)){var n=t;t=function(){var t=e[0].nodeName.toLowerCase(),i=s("<"+t+">");return i.addClass("ui-sortable-placeholder").addClass(n||e[0].className).removeClass("ui-sortable-helper"),i}}return t.call(this,e)},"_initSorting":function(){this.view.$el.addClass("csui-dnd-container"),this.$el.sortable({"items":this.options.draggableItem,"cancel":this.options.disableDraggable,"handle":this.options.handle,"placeholder":{"element":this._getPlaceholder.bind(this),"update":function(){}},"helper":this.options.helper,"start":this._onSortStart.bind(this),"stop":this._onSortStop.bind(this),"over":this.options.over,"out":this.options.out,"receive":this.options.receive})},"_onSortStart":function(e,t){this.$el.addClass("csui-drag-start"),this.options.start&&this.options.start(e,t)},"_onSortStop":function(e,t){this.$el.removeClass("csui-drag-start");var i=t.item.attr(r.DRAGGABLE_DATA_ATTR),s=this.view.collection.get(i),n=this.view.collection.indexOf(s),o=this.$el.find("[data-csui-draggable-item="+i+"]").index();n!==o&&(this.view.collection.remove(s,{"silent":!0}),this.view.collection.add(s,{"at":o,"silent":!0}),this.view.collection.trigger("sort"),this.options.stop&&this.options.stop(e,t))}})}),csui.define("csui/perspectives/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/impl/nls/root/lang",{"invalidWidgetOptions":"Some widgets have options that require values before the perspective can be saved. Please click on each of the highlighted widgets and check for any required options that have missing values.","invalidWidget":"Some widgets are not configurable. Please remove these widgets to save.","widgetsMigrated":"Single shortcut widgets were converted to shortcut group widgets.","widgetValidationFailed":"Validation failed for some of the widgets."}),csui.define("csui/perspectives/mixins/perspective.edit.mixin",["require","csui/lib/underscore","csui/lib/jquery","csui/utils/log","i18n!csui/perspectives/impl/nls/lang","csui/models/node/node.model","csui/models/widget/widget.model","csui/utils/contexts/factories/connector","csui/utils/perspective/perspective.util"],function(e,t,i,s,n,o,r,a,c){"use strict";var l=["otcs_node_picker","otconws_workspacetype_id","otcs_user_picker","otconws_metadata"],u={"mixin":function(d){return t.extend(d,{"prepareForEditMode":function(){this.listenTo(this,"update:widget:options",function(e){var t=e.widgetView.model.get("widget");"csui/perspective.manage/widgets/perspective.widget"===t.type&&(t=t.options),t.options=e.options,e.widgetView.model.set("hasValidOptions",e.isValid,{"silent":!0})})},"_notifyAboutWidgetMigrations":function(){csui.require(["csui/controls/globalmessage/globalmessage"],function(e){e.showMessage("info",n.widgetsMigrated)})},"_resolveWidgets":function(e){function s(e,i){if(e.useInstead){var n=e.useInstead.get("view");return t.isFunction(n.migrateData)&&(i.options=n.migrateData(i.type,i.options)),i.type=e.useInstead.id,i.view=n,s(e.useInstead,i)}return e}var n=this,o=i.Deferred(),r=t.chain(e).pluck("type").unique().map(function(e){return{"id":e}}).value(),a=t.map(r,function(e){return n._resolveWidget(e,!0)});return i.whenAll.apply(i,a).always(function(i){var a=!1,c={};t.each(r,function(e,t){c[e.id]=i[t]});var l=t.map(e,function(e){var t=c[e.type],i=s(t,e);return t!==i&&(a=!0),i});a&&n._notifyAboutWidgetMigrations(),o.resolve(l)}),o},"_resolveWidget":function(e,t){var s=this,n=i.Deferred(),o=function(e){t?n.resolve(c):n.reject(e)},a=function(){var t=c.get("manifest");t.deprecated&&t.useInstead?(c.deprecated=t.deprecated,s._resolveWidget({"id":t.useInstead}).then(function(t){e.view=t.view,c.useInstead=t,n.resolve(c)},o)):(e.view=c.get("view"),n.resolve(c))},c=new r({"id":e.id||e.type});return c.fetch().then(a,o),n.promise()},"serializeWidget":function(e,s){var o=i.Deferred(),r=e.get("widget");if("csui/widgets/error"===r.type)return r=r.options.originalWidget,r=t.pick(r,"type","kind","options",c.getExtraWidgetKeys()),o.resolve({"widget":r}),o.promise();if(!1!==e.get("hasValidOptions")){var a=r.type,l=r.options;delete l.___pman_opencallout,"csui/perspective.manage/widgets/perspective.widget"===a&&(a=l.widget.id,r.type=a,l=l.options),l=u.removeNullsInObject(l),this._resolveWidget(r).done(t.bind(function(e){var i=e?e.get("manifest"):{},n=i&&i.options?i.options:{},a=[];this.collectionConstantData(l,n,a,s+"/options"),r=t.pick(r,"type","kind",c.getExtraWidgetKeys()),r.options=l,o.resolve({"widget":r,"constantsData":a})},this)).fail(function(e){o.reject({"error":n.invalidWidget})})}else o.reject({"error":n.invalidWidgetOptions});return o.promise()},"collectionConstantData":function(e,i,s,n){t.isEmpty(i)||(t.isArray(e)?t.each(e,function(e,t){this.collectionConstantData(e,i.items,s,n+"/"+t)},this):t.isObject(e)?t.each(e,function(e,t){i.fields&&i.fields[t]&&this.collectionConstantData(e,i.fields[t],s,n+"/"+t)},this):-1!==l.indexOf(i.type)&&s.push({"type":i.type,"path":n}))},"executeCallbacks":function(e,s,n){if(this.options.perspectiveMode===c.MODE_PERSONALIZE)return i.Deferred().resolve().promise();this.perspectiveWidgets=e;var o=i.Deferred();return e=t.filter(e,function(e){return"csui/widgets/error"!==e.widget.type}),this.loadCallbacks(e).then(t.bind(function(e){var r=t.map(e,t.bind(function(e){return this.initializeWidget(e,s,n)},this));i.whenAll.apply(i,r).then(function(){o.resolve()},function(e){o.reject(e)})},this)),o.promise()},"loadCallbacks":function(n){var o=this,r=i.Deferred(),a=t.chain(n).groupBy(function(e){return e.widget.type}).map(function(n){var r=i.Deferred();return o._resolveWidget(t.pick(n[0].widget,"type")).done(function(i){var n=!!i&&i.get("manifest"),o=!!n&&n.callback;o?e([o],function(e){e&&t.isFunction(e)?(i.type=i.id,r.resolve(t.extend(i,new e))):r.reject()},function(e){s.warn("Failed to load callback. {0}",e),r.reject(e)}):r.resolve()}).fail(function(){r.resolve()}),r.promise()}).compact().value();return i.whenAll.apply(i,a).then(function(e){r.resolve(t.compact(e))}),r.promise()},"initializeWidget":function(e,s,n){var o=i.Deferred(),r=t.filter(this.perspectiveWidgets,function(t){return t.widget.type===e.type}),c=s.get("id")?"update":"create",l={"priority":parseInt(s.get("priority"))||void 0,"title":s.get("title")||"","overrideType":s.get("overrideType"),"scope":s.get("scope")||"","containerType":parseInt(s.get("containerType"))||void 0,"perspectiveParentId":parseInt(s.get("override_id"))||parseInt(s.get("perspectivesVolId"))||void 0,"overrideObjId":parseInt(s.get("node"))||void 0,"assetContainerId":s.get("assetContainerId")||void 0},u={"mode":c,"widgets":r,"settings":l,"connector":n.getObject(a)};if("update"==c){var d=this.getPreviousWidgets&&this.getPreviousWidgets(s);u.previousWidgets=t.filter(d,function(t){return t.widget.type===e.type})}var h=this.getHiddenWidgetOptions(e,u,s);return i.when(h).done(t.bind(function(e){o.resolve()},this)).fail(function(e){o.reject(e[0]||e)}),o.promise()},"getHiddenWidgetOptions":function(e,s,n){var o=i.Deferred(),r=i.Deferred(),a=[],c=[],l=r.promise(),u=!1;return e&&t.has(e,"defineWidgetOptionsCommon")&&t.has(e,"defineWidgetOptionsEach")?(t.has(e,"ensureContainer")&&t.isFunction(e.ensureContainer)&&e.ensureContainer(s)?l=this.ensureContainer(s):u=!0,u&&r.resolve(),i.when(l).done(function(r){if(!t.has(s.settings,"assetContainerId")||t.isUndefined(s.settings.assetContainerId)){var l=r?r.id:s.settings.overrideObjId,u={"assetContainerId":l};t.extend(s.settings,u),n.set(u)}var d=e.defineWidgetOptionsCommon(s);if(!d||"object"!=typeof d||!t.has(d,"state"))return o.reject(),o.promise();i.when(d).done(function(n){t.has(s,"widgets")&&t.isArray(s.widgets)&&(t.each(s.widgets,function(o,r){t.has(o,"newOptions")||(o.newOptions={}),t.extend(o.newOptions,n),a.push(e.defineWidgetOptionsEach(o,s)),i.when(a[r]).done(function(e){t.extend(o.newOptions,e)}).fail(function(e){c.push(e)})}),i.when.apply(this,a).done(function(){o.resolve(s)}).fail(function(e){c.push(e),o.reject(c)}))}).fail(function(e){c.push(e),o.reject(c)})}).fail(function(e){r.reject(e),o.reject([e])}),o.promise()):(o.reject(),o.promise())},"ensureContainer":function(e){function s(){return t.now()+Math.random().toString().substring(2)}var n=i.Deferred();return t.has(e.settings,"assetContainerId")&&!isNaN(parseInt(e.settings.assetContainerId))?n.resolve(!1):(this.perspectiveAssetsVolume=new o({"id":"volume","type":954},{"connector":e.connector}),this.perspectiveAssetsVolume.fetch().then(t.bind(function(){var t={"url":e.connector.connection.url+"/nodes","type":"POST","data":{"type":955,"parent_id":this.perspectiveAssetsVolume.get("id"),"name":"assets_"+s()},"success":function(e){n.resolve(e)},"error":function(e){n.reject(e.responseJSON)}};e.connector.makeAjaxCall(t).done(function(e){n.resolve(e)}).fail(function(e){n.reject(e)})},this))),n.promise()},"getEmptyPlaceholderWidget":function(e){return e||(e=this.options),{"type":c.getEmptyPlaceholderWidgetType(e.perspectiveMode),"className":"csui-draggable-item-disable","__isPlacehoder":!0,"options":{}}},"isEmptyPlaceholder":function(e){return c.isEmptyPlaceholder(e,this.options.perspectiveMode)},"validateAndGenerateWidgetId":function(e){t.each(e,function(e,t){c.hasWidgetId(e)||(e[c.KEY_WIDGET_ID]=c.generateWidgetId(this.options.perspectiveMode)+t)},this);var i=t.pluck(e,c.KEY_WIDGET_ID);return i.length!==t.uniq(i).length?(s.warn("Found duplicate widget IDs: {0}",i)&&console.warn(s.last),!1):!!t.every(e,c.hasWidgetId)||(s.warn("Found widgets with No Ids: {0}",e)&&console.warn(s.last),!1)}})},"removeNullsInObject":function(e){function i(i,s){("object"==typeof i||t.isArray(i))&&u.removeNullsInObject(i),(t.isNull(i)||t.isUndefined(i)||0===i.length||t.isObject(i)&&t.isEmpty(i))&&(t.isArray(e)?e.splice(s,1):delete e[s])}if(t.isArray(e))for(var s=e.length-1;s>=0;s--)i(e[s],s);else t.each(e,i);return e}};return u}),csui.define("csui/perspectives/flow/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/flow/impl/nls/root/lang",{"tileLabel":"Single Width","headerLabel":"Double Width","fullpageLabel":"Full Page"}),csui.define("css!csui/perspectives/impl/perspective",[],function(){}),csui.define("css!csui/perspectives/flow/impl/flow.perspective",[],function(){}),csui.define("csui/perspectives/flow/flow.perspective.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/models/widget/widget.collection","csui/utils/base","csui/controls/grid/grid.view","csui/utils/log","csui/behaviors/widget.container/widget.container.behavior","csui/behaviors/drag.drop/dnd.item.behaviour","csui/behaviors/drag.drop/dnd.container.behaviour","csui/perspectives/mixins/perspective.edit.mixin","csui/utils/perspective/perspective.util","i18n!csui/perspectives/flow/impl/nls/lang","i18n!csui/perspectives/impl/nls/lang","css!csui/perspectives/impl/perspective","css!csui/perspectives/flow/impl/flow.perspective"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f,b,g){"use strict";var m=t.config();i.defaults(m,{"defaultWidgetKind":"tile","widgetSizes":{"fullpage":{"widths":{"xs":12},"heights":{"xs":"full"}},"header":{"widths":{"xs":12,"md":8,"xl":6}},"widetile":{"widths":{"xs":12,"lg":6}},"tile":{"widths":{"xs":12,"sm":6,"md":4,"xl":3}}}});var v=c.extend({"className":function(){var e="cs-perspective cs-flow-perspective grid-rows",t=i.result(c.prototype,"className");return t&&(e=e+" "+t),e},"cellView":function(e){var t=e.get("widget");if(t){if(!t.view)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved:'+t.error});return t.view}},"cellViewOptions":function(e,t){var i=e.get("widget"),s={"context":this.options.context,"data":i&&i.options||{},"model":void 0,"perspectiveMode":this.options.perspectiveMode,"widgetContainer":t};return s[f.KEY_WIDGET_ID]=i[f.KEY_WIDGET_ID],s},"cellConstructionFailed":function(e,t){var s=e.get("widget");if(s){var n=u.getErrorWidget(s,t.message);e.set("widget",i.defaults(n,s.attributes))}},"constructor":function(e){e||(e={}),e=s.extend(!0,{},e),this._preInitialize(e),c.prototype.constructor.call(this,e),this._postInitialize()},"_preInitialize":function(e){if(e.widgets||(e.widgets=[]),e.perspectiveMode?(this._prepareOptionsForEditMode(e),this.prepareForEditMode()):e.widgets=i.reject(e.widgets,f.isHiddenWidget,this),!e.collection){var t=i.chain(m).pick(function(e,t){return t.indexOf("-widgets")>=0}).values().flatten();t&&t._wrapped&&t._wrapped.length>0&&(e.widgets=i.filter(e.widgets,function(e){return i.contains(t._wrapped,e.type)})),e.widgets=i.filter(e.widgets,function(e){return void 0!=a.filterUnSupportedWidgets(e,m)}),e.collection=this._createCollection(e)}},"_postInitialize":function(){this.options.perspectiveMode&&this._registerEditEvents()},"_prepareOptionsForEditMode":function(t){function s(e,t){var i=n._prepareGridCell(e,t);n.collection.at(0).columns.add(i,{"at":t}),n.options.context.fetch()}var n=this,o=i.findIndex(t.widgets,f.isHiddenWidget,this);-1===o&&(o=t.widgets.length),t.widgets.splice(o,0,this.getEmptyPlaceholderWidget(t)),t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this,"perspectiveMode":t.perspectiveMode},"DnDItemBehaviour":{"behaviorClass":d}},this._createDnDPlaceholderWidget(),t.reorderOnSort=!0,t.rowBehaviours={"DnDContainerBehaviour":{"behaviorClass":h,"placeholder":this._getDnDPlaceholder.bind(this),"handle":".csui-pman-widget-masking","helper":"clone","start":function(e,t){var i=n.$el.find(".binf-popover");i.length&&(i.removeClass("pman-ms-popover"),i.hide(),i.binf_popover("destroy"))},"over":i.bind(function(e,t){var i=this._getDnDPlaceholder(t.helper),s=t.placeholder;s.show(),s.attr("class",i.attr("class")),s.html(i.html()),s.css("visibility","visible"),s.data("pman.widget",t.helper.data("pman.widget")),s.removeData("isBeyondLayout"),t.helper.data("pman.widget")&&this._resolveWidget({"type":t.helper.data("pman.widget").id}).done(function(e){s.data("pman.widget.view",e)})},this),"out":function(e,t){t.placeholder.hide(),t.placeholder.data("isBeyondLayout",!0)},"receive":i.bind(function(e,t){if(!0===t.placeholder.data("isBeyondLayout")||!t.placeholder.data("pman.widget.view"))return void t.sender.sortable("cancel");if(t.position.top>0){var n,o=t.placeholder.data("pman.widget"),r=t.item.index(),a=o.get("manifest"),c=t.placeholder.data("pman.widget.view");n=f.isEligibleForLiveWidget(a)?{"type":o.id,"kind":a.kind,"view":c.get("view")}:{"type":"csui/perspective.manage/widgets/perspective.widget","kind":a.kind,"options":{"options":{},"widget":o},"view":c=this.pespectiveWidgetView},n.options=i.extend({"___pman_isdropped":!0},n.options),c?s(n,r):this._resolveWidget(n).done(function(e){s(n,r)})}this._ensurePlaceholder(),t.sender.sortable("cancel")},this),"stop":i.bind(function(){this._ensurePlaceholder()},this)}}},"_ensurePlaceholder":function(){var e=this.collection.at(0).columns,t=this,i=e.find(function(e){return this.isEmptyPlaceholder(e.get("widget"))},this);if(i){var s=e.indexOf(i),n=this._getPlaceholderIdealIndex(s);s!==n&&(e.remove(i),e.add(i,{"at":n}))}else{var o=this.getEmptyPlaceholderWidget();this._resolveWidget(o).done(function(i){var s=t._createCell(o,i,e.length),n=t._getPlaceholderIdealIndex();e.add(s,{"at":n+1})})}},"_getPlaceholderIdealIndex":function(e){var t=this.collection.at(0).columns,i=t.length;switch(e=e||-1,this.options.perspectiveMode){case f.MODE_PERSONALIZE:for(;i-- >e&&f.isHiddenWidget(t.at(i).get("widget")););return i;case f.MODE_EDIT_PERSPECTIVE:return i-1;default:return e}},"_createDnDPlaceholderWidget":function(){var e=this,t={"type":"csui/perspective.manage/widgets/perspective.placeholder"};this._resolveWidget(t).done(function(i){var s=e._createCell(t,i,0);s.className="pman-dnd-hover-placeholder",e.dndPlaceholderCell=new c.CellView({"grid":e,"model":new n.Model(s)}),e.dndPlaceholderCell.render()}),this._resolveWidget({"type":"csui/perspective.manage/widgets/perspective.widget"}).done(function(t){e.pespectiveWidgetView=t.get("view")})},"_getDnDPlaceholder":function(e){var t=e.data("pman.widget");if(t){var i=t.attributes.manifest.kind;i||(i=m.defaultWidgetKind);var s=m.widgetSizes[i];this.dndPlaceholderCell.model.set({"sizes":s.widths,"heights":s.heights})}return this.dndPlaceholderCell.$el},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){var i=e.collection.at(0).columns,s=t.model;i.remove(s)}),this.listenTo(this,"update:widget:size",function(e,t){var i=m.widgetSizes[t],s=e.model.get("widget");s.kind=t,e.model.set({"sizes":i.widths,"heights":i.heights,"widget":s})}),this.listenTo(this,"replace:widget",this._replaceWidget),this.listenTo(this,"hide:widget show:widget",function(e){this._ensurePlaceholder()}),this.options.perspectiveMode===f.MODE_PERSONALIZE&&this.listenTo(this,"update:widget:options",function(e){var t=e.widgetView,i=t.model.get("widget");this.isEmptyPlaceholder(i)&&(delete i.__isPlacehoder,t.model.unset("className",{"silent":!0}),t.$el.removeClass("csui-draggable-item-disable"),this._ensurePlaceholder())})},"_replaceWidget":function(e,t){if(this.getPManPlaceholderWidget){var i=this,s=this.collection.at(0).columns;this._resolveWidget(t).done(function(){i.isEmptyPlaceholder(e.model.get("widget"))||(t.kind=e.model.get("widget").kind);var n=i._prepareGridCell(t,s.indexOf(e.model));i.options.context.clear(),e.model.set(n),i.options.context.fetch(),i._ensurePlaceholder()})}},"_createCollection":function(e){var t=this,s=new n.Collection;if(e.perspectiveMode)this.widgetsResolved=this._resolveWidgets(e.widgets).always(function(o){var r=s.add({}),a=i.map(e.widgets,function(e,i){return t._createCell(e,o[i],i)});return r.columns=new n.Collection(a),o});else{var o=i.chain(e.widgets).pluck("type").unique().map(function(e){return{"id":e}}).value(),a=new r(o);this.widgetsResolved=a.fetch().then(function(){return s.add({}).columns=t._createColumns(e.widgets,a),a})}return s},"_createColumns":function(e,t){var s=i.map(e,function(e,i){var s=t.get(e.type);return this._createCell(e,s,i)}.bind(this));return new n.Collection(s)},"_prepareGridCell":function(e,t){var s=e.kind;s||(s=m.defaultWidgetKind);var n=m.widgetSizes[s];return{"sizes":n.widths,"heights":n.heights,"className":e.className,"widget":i.defaults({"kind":s,"cellAddress":"grid0:r0:c"+t},e)}},"_createCell":function(e,t,s){var n=t.get("view"),o=t.get("manifest")||{},r=o.supportedKinds,a=e.kind;if(a&&r&&i.contains(r,a)||(a=o.kind),e.kind=a,n)return e.view=n,this._prepareGridCell(e,s);var c=t.get("error");l.warn('Loading widget "{0}" failed. {1}',e.type,c)&&console.warn(l.last);var d=m.widgetSizes[m.defaultWidgetKind];return{"sizes":d.widths,"heights":d.heights,"widget":u.getErrorWidget(e,c)}},"getSupportedWidgetSizes":function(e,t){return i.map(e.supportedKinds,function(e){return{"kind":e,"label":b[e+"Label"],"selected":t.model.get("widget").kind===e}})},"serializePerspective":function(e){var t=this,n=s.Deferred(),o=this.collection.at(0).columns,r=o.filter(function(e){return!this.isEmptyPlaceholder(e.get("widget"))},this),a=r.map(function(e,i){return t.serializeWidget(e,"/options/widgets/"+i)});return s.whenAll.apply(s,a).done(function(s){t.executeCallbacks(s,e,t.options.context).done(function(){var e=i.pluck(s,"widget"),o=i.flatten(i.pluck(s,"constantsData")),r={"perspective":{"type":"flow","options":{"widgets":e}},"constant_data":o,"constant_extraction_mode":1};t.validateAndGenerateWidgetId(e)?n.resolve(r):n.reject(g.widgetValidationFailed)}).fail(function(e){e=i.filter(e,function(e){return!!e.error}),n.reject(e[0].error)})},this).fail(function(e){e=i.filter(e,function(e){return!!e.error}),n.reject(e[0].error)}),n.promise()},"getPreviousWidgets":function(e){var t=e.getPerspective(),s=t&&t.options?t.options.widgets:{};return s=i.map(s,function(e){return{"widget":e}})},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0});return p.mixin(v.prototype),v}),csui.define("csui/perspectives/grid/grid.perspective.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","css!csui/perspectives/impl/perspective"],function(e,t,i,s,n,o,r){var a=e.config();return o.extend({"className":function(){var e="cs-perspective cs-grid-perspective grid-rows",i=t.result(o.prototype,"className");return i&&(e=e+" "+i),e},"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new s.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"behaviors":{"WidgetContainer":{"behaviorClass":r}},"constructor":function(e){e||(e={}),e=i.extend(!0,{},e);var s=e.rows;if(s&&s.length>0&&a.supportedWidgets){var r=s[0].columns;s[0].columns=t.filter(r,function(e){return t.contains(a.supportedWidgets,e.widget.type)}),r.length>1&&a.widgetSizes&&t.each(r,function(e){e.sizes=a.widgetSizes,e.heights={}})}t.each(s,function(e){e.columns=t.filter(e.columns,function(e){return void 0!=n.filterUnSupportedWidgets(e.widget,a)})}),o.prototype.constructor.call(this,e)},"enumerateWidgets":function(e){this._enumerateWidgetRow(this.options.collection,e)},"_enumerateWidgetRow":function(e,t){e.each(function(e){e.columns.each(function(e){var i=e.get("widget");i&&t(i),e.rows&&this._enumerateWidgetRow(e.rows,t)},this)},this)},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0})}),csui.define("css!csui/perspectives/zone/impl/zone.perspective",[],function(){}),csui.define("csui/perspectives/zone/zone.perspective.view",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/perspectives/mixins/perspective.edit.mixin","css!csui/perspectives/impl/perspective","css!csui/perspectives/zone/impl/zone.perspective"],function(e,t,i,s,n,o,r,a,c){function l(e,i){var s;return i?s=i[e]:void 0===(s=l.call(this,e,this.options||{}))&&(s=this[e]),t.isFunction(s)?s.call(this):s}var u=e.config(),d=r.extend({"className":function(){var e="cs-perspective cs-zone-perspective grid-rows ",i=t.result(r.prototype,"className");return i&&(e+=i),e},"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new n.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e,t){var i=e.get("widget");return{"context":this.options.context,"data":i&&i.options||{},"model":void 0,"perspectiveMode":this.options.perspectiveMode,"widgetContainer":t}},"cellConstructionFailed":function(e,i){var s=e.get("widget");if(s){var n=a.getErrorWidget(s,i.message);e.set("widget",t.defaults(n,s.attributes))}},"behaviors":{"WidgetContainer":{"behaviorClass":a}},"constructor":function(e){e||(e={}),e=i.extend(!0,{},e),e.collection||(e.collection=this._createCollection(e)),e.collection.each(function(e,t){e.columns.each(function(e,i){e.get("widget").cellAddress="grid0:r"+t+":c"+i})}),"edit"===e.perspectiveMode&&this.prepareForEditMode(),r.prototype.constructor.call(this,e)},"_createCollection":function(e){var i=new s.Collection,r=l.call(this,"zoneNames");t.extend(u,{"unSupportedWidgets":l.call(this,"unSupportedWidgets")}),t.mapObject(e,function(i,s){t.contains(r,s)&&(o.filterUnSupportedWidgets(i,u)||(e[s]=void 0))});var a=this._getLayoutName(e);if(a){var c=l.call(this,"zoneLayouts"),d=c[a];if(!d)throw new n.Error({"name":"InvalidLayoutContentError","message":"Missing widget in the important perspective zone"});var h=i.add({}),p=t.map(d.zoneOrder,function(i){var s=t.defaults({"widget":e[i]},d.zoneSizes[i]);return e[i].className&&(s.className=(s.className||"")+" "+e[i].className),s});h.columns=new s.Collection(p)}return i},"_getLayoutName":function(e){var i=l.call(this,"zoneNames");return t.reduce(i,function(i,s){return e[s]&&!t.isEmpty(e[s])&&(i&&(i+="-"),i+=s),i},"")},"enumerateWidgets":function(e){var s=l.call(this,"zoneNames"),n=t.compact(t.map(s,function(e){var i=this.options[e];return!t.isEmpty(i)&&i},this));if("edit"===this.options.perspectiveMode){var o=t.map(n,function(){var t=i.Deferred();return e(t),t});this._resolveWidgets(n).then(function(e){t.each(n,function(e,t){o[t].resolve(e)})})}else t.each(n,e,this)},"serializeOptions":function(e){var s=this,n=i.Deferred(),o=this._getLayoutName(this.options),r=l.call(this,"zoneLayouts"),a=r[o],c=this.collection.at(0).columns,u=t.map(a.zoneOrder,function(e,t){return"csui/perspective.manage/widgets/perspective.placeholder"===c.at(t).get("widget").type?i.Deferred().resolve({"zone":e,"config":{"widget":{}}}):s.serializeWidget(c.at(t),"/options/"+e).then(function(t){return{"zone":e,"config":t}})});return i.whenAll.apply(i,u).done(function(i){var o=t.map(t.filter(i,function(e){return e.config&&e.config.widget&&!t.isEmpty(e.config.widget)}),function(e){return e.config});s.executeCallbacks(o,e,s.options.context).done(function(){n.resolve(i)}).fail(function(e){e=t.filter(e,function(e){return!!e.error}),n.reject(e[0].error)})}).fail(function(e){e=t.filter(e,function(e){return!!e.error}),n.reject(e[0].error)}),n.promise()},"getPreviousWidgets":function(e){var i=e.get("perspective"),s=this._getLayoutName(this.options),n=l.call(this,"zoneLayouts"),o=n[s],r={};return o&&o.zoneOrder&&(r=t.map(t.filter(o.zoneOrder,function(e){return i&&i.options&&!t.isEmpty(i.options[e])}),function(e){return{"widget":i.options[e]}})),r}});return c.mixin(d.prototype),d}),csui.define("csui/perspectives/left-center-right/left-center-right.perspective.view",["require","module","csui/lib/jquery","csui/lib/underscore","csui/perspectives/zone/zone.perspective.view","csui/behaviors/widget.container/widget.container.behavior","i18n!csui/perspectives/impl/nls/lang"],function(e,t,i,s,n,o,r){var a=t.config();return s.defaults(a,{"zoneNames":["left","center","right"],"zoneLayouts":{"center":{"zoneOrder":["center"],"zoneSizes":{"center":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"left":{"zoneOrder":["left"],"zoneSizes":{"left":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"right":{"zoneOrder":["right"],"zoneSizes":{"right":{"sizes":{"xs":12},"heights":{"xs":"full"}}}},"left-center":{"zoneOrder":["center","left"],"zoneSizes":{"left":{"sizes":{"md":4,"xl":3},"pulls":{"md":8,"xl":9},"heights":{"xs":"full"}},"center":{"sizes":{"md":8,"xl":9},"pushes":{"md":4,"xl":3},"heights":{"xs":"full"}}}},"center-right":{"zoneOrder":["center","right"],"zoneSizes":{"center":{"sizes":{"md":8,"xl":9},"heights":{"xs":"full"}},"right":{"sizes":{"md":4,"xl":3},"heights":{"xs":"full"}}}},"left-right":{"zoneOrder":["left","right"],"zoneSizes":{"left":{"sizes":{"md":6},"heights":{"xs":"full"}},"right":{"sizes":{"md":6},"heights":{"xs":"full"}}}},"left-center-right":{"zoneOrder":["center","left","right"],"zoneSizes":{"left":{"sizes":{"sm":6,"md":6,"lg":3,"xl":3},"pulls":{"lg":6,"xl":6},"heights":{"xs":"full"}},"center":{"sizes":{"sm":12,"md":12,"lg":6,"xl":6},
"pushes":{"lg":3,"xl":3},"heights":{"xs":"full"}},"right":{"sizes":{"sm":6,"md":6,"lg":3,"xl":3},"heights":{"xs":"full"}}}}}}),n.extend({"className":function(){var e="cs-left-center-right-perspective",t=s.result(n.prototype,"className");return t&&(e=e+" "+t),e},"zoneNames":a.zoneNames,"zoneLayouts":a.zoneLayouts,"unSupportedWidgets":a.unSupportedWidgets,"constructor":function(e){e&&"edit"===e.perspectiveMode&&this._prepareForEditMode(e),n.prototype.constructor.apply(this,arguments),e&&"edit"===e.perspectiveMode&&this._registerEditEvents()},"_prepareForEditMode":function(t){t.left&&!s.isEmpty(t.left.type)||(t.left={"kind":"tile","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.center&&!s.isEmpty(t.center.type)||(t.center={"kind":"fullpage","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.right&&!s.isEmpty(t.right.type)||(t.right={"kind":"tile","type":"csui/perspective.manage/widgets/perspective.placeholder"}),t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this}}},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){if(e.getPManPlaceholderWidget){var i=e.getPManPlaceholderWidget();this._resolveWidget(i).done(function(){t.model.set("widget",i)})}}),this.listenTo(this,"replace:widget",function(e,t){var i=this;this._resolveWidget(t).done(function(){i.options.context.clear(),e.model.set("widget",t),i.options.context.fetch()})}.bind(this))},"serializePerspective":function(e){var t=this,n=i.Deferred();return this.serializeOptions(e).then(function(e){var i=s.flatten(e.map(function(e){return e.config.constantsData||[]})),o=s.reduce(e,function(e,t){return e[t.zone]=t.config.widget,e},{}),a={"perspective":{"type":"left-center-right","options":o},"constant_data":i,"constant_extraction_mode":1},c=s.reject(s.values(o),s.isEmpty);t.validateAndGenerateWidgetId(c)?n.resolve(a):n.reject(r.widgetValidationFailed)},n.reject),n.promise()},"_supportMaximizeWidget":!0,"_supportMaximizeWidgetOnDisplay":!0})}),csui.define("csui/perspectives/single/single.perspective.view",["module","csui/lib/underscore","csui/perspectives/zone/zone.perspective.view"],function(e,t,i){var s=e.config();return t.defaults(s,{"zoneNames":["widget"],"zoneLayouts":{"widget":{"zoneOrder":["widget"],"zoneSizes":{"widget":{"sizes":{"xs":12},"heights":{"xs":"full"}}}}}}),i.extend({"className":function(){var e="cs-single-perspective",s=t.result(i.prototype,"className");return s&&(e=e+" "+s),e},"zoneNames":s.zoneNames,"zoneLayouts":s.zoneLayouts,"unSupportedWidgets":s.unSupportedWidgets,"constructor":function(e){i.prototype.constructor.apply(this,arguments)}})}),csui.define("csui/utils/contexts/factories/active.tab.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){var n=i.Model.extend({"defaults":{"tabIndex":0}});return s.extend({"propertyPrefix":"activeTab","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.activeTab||{};if(!(a instanceof i.Model)){var c=e.config();a=new n(a.attributes,t.extend({},a.options,c.options))}this.property=a}})}),csui.define("csui/perspectives/tabbed/behaviors/tab.extensions.behavior",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/non-emptying.region/non-emptying.region"],function(e,t,i,s,n){"use strict";return s.Behavior.extend({"constructor":function(e,t){s.Behavior.prototype.constructor.apply(this,arguments),this.listenTo(t,"render",this.renderExtension),this.listenTo(t,"before:destroy",this.destroyExtension),this.listenTo(t,"dom:refresh",this.refreshTab)},"renderExtension":function(){var e,t=this.view.options,i=t.tabBarLeftExtensionViewClass,s=t.tabBarLeftExtensionViewOptions,n=t.tabBarRightExtensionViewClass,o=t.tabBarRightExtensionViewOptions;this.tabBarLeftExtensionsRegion=this.showExtension(i,s,0),e=this.tabBarLeftExtensionsRegion?2:1,this.tabBarRightExtensionsRegion=this.showExtension(n,o,e),this.view._initializeToolbars()},"showExtension":function(e,t,i){var s;return e&&"function"==typeof e&&(this.tabBarExtensionView=new e(t),this.tabBarExtensionView.$el.addClass("tab-extension"),t.customClass&&this.tabBarExtensionView.$el.addClass(t.customClass),s=new n({"el":this.view.el,"index":i}),s.show(this.tabBarExtensionView)),s},"refreshTab":function(){this.view._enableToolbarState(),this.tabBarExtensionView&&this.tabBarExtensionView.triggerMethod("dom:refresh")},"destroyExtension":function(){this.tabBarLeftExtensionsRegion&&this.tabBarLeftExtensionsRegion.empty(),this.tabBarRightExtensionsRegion&&this.tabBarRightExtensionsRegion.empty()}})}),csui.define("hbs!csui/perspectives/tabbed/impl/tabbed.perspective",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){return'<div class="cs-header"></div>\r\n<div class="cs-content"></div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed_impl_tabbed.perspective",s),s}),csui.define("css!csui/perspectives/tabbed/impl/tabbed.perspective",[],function(){}),csui.define("csui/perspectives/tabbed/tabbed.perspective.view",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/tab.panel/tab.panel.view","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/contexts/factories/active.tab.factory","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/perspectives/tabbed/behaviors/tab.extensions.behavior","csui/controls/mixins/view.state/node.view.state.mixin","csui/utils/contexts/factories/next.node","hbs!csui/perspectives/tabbed/impl/tabbed.perspective","css!csui/perspectives/impl/perspective","css!csui/perspectives/tabbed/impl/tabbed.perspective"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f,b,g){"use strict";var m=e.config(),v=["Business Workspace"],y=a.RowView.extend({"cellView":function(e){var t=e.get("widget");if(t){var i=t.view;if(!i)throw new n.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved: '+t.error});return i}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"constructor":function(){a.RowView.prototype.constructor.apply(this,arguments)}}),w=r.extend({"contentView":y,"contentViewOptions":function(e){return{"context":this.options.context,"columns":e.get("columns")}},"constructor":function(e){e||(e={}),t.defaults(e,{"delayTabContent":!1,"toolbar":!0,"TabLinkCollectionViewClass":h,"tabBarLeftExtensionViewClass":e.tabBarLeftExtensionViewClass,"tabBarLeftExtensionViewOptions":e.tabBarLeftExtensionViewOptions,"tabBarRightExtensionViewClass":e.tabBarRightExtensionViewClass,"tabBarRightExtensionViewOptions":e.tabBarRightExtensionViewOptions}),e.tabs&&t.each(e.tabs,function(e,i){t.each(e.columns,function(e,t){e.widget.cellAddress="tab"+i+":r0:c"+t})}),this.behaviors=t.extend({"TabExtensionsBehavior":{"behaviorClass":p}},this.behaviors),s(window).on("resize",{"view":this},this._onWindowResize),r.prototype.constructor.call(this,e)},"_onWindowResize":function(e){e&&e.data&&e.data.view&&e.data.view._enableToolbarState()}});t.extend(w.prototype,d);var x=n.LayoutView.extend({"className":"cs-tabbed-perspective cs-perspective binf-container-fluid","template":g,"behaviors":{"WidgetContainer":{"behaviorClass":c}},"regions":{"headerRegion":"> .cs-header","contentRegion":"> .cs-content"},"constructor":function(e){e||(e={}),e=s.extend(!0,{},e),this.context=e.context,this.activeTab=this._initActiveTabFromViewState();var i=this.context&&this.context.viewStateModel;i&&i.set(i.CONSTANTS.ALLOW_WIDGET_URL_PARAMS,!1),i&&i.addUrlParameters(["tab"],this.context);var r=e&&e.header&&e.header.widget;r&&(e.header.widget=o.filterUnSupportedWidgets(r,m)),e.tabs&&(e.tabs=t.each(e.tabs,function(e,i){e.columns=t.filter(e.columns,function(e,t){return void 0!=o.filterUnSupportedWidgets(e.widget,m)})})),n.LayoutView.prototype.constructor.call(this,e),this.listenTo(this.context.viewStateModel,"change:state",this.onViewStateChanged),this.nextNode=this.context.getModel(b),this.listenTo(this.nextNode,"change:id",this._resetTab),this.listenTo(this.context,"retain:perspective",this._onPerspectiveRetainedOrChanged),this.listenTo(this.context,"change:perspective",this._onPerspectiveRetainedOrChanged),this.propagateEventsToRegions()},"onRender":function(){this.navigationHeader=this.options.header.widget?this._createWidget(this.options.header.widget):{},this.tabPanel=new w(t.extend({"activeTab":this.activeTab,"delayTabContent":this.options.delayTabContent,"tabBarLeftExtensionViewClass":this.navigationHeader.tabBarLeftExtensionView,"tabBarLeftExtensionViewOptions":this.navigationHeader.tabBarLeftExtensionViewOptions,"tabBarRightExtensionViewClass":this.navigationHeader.tabBarRightExtensionView,"tabBarRightExtensionViewOptions":this.navigationHeader.tabBarRightExtensionViewOptions,"disableExtensionOnFirstTab":this.navigationHeader.disableExtensionOnFirstTab,"disableExtensionOnOtherTabs":this.navigationHeader.disableExtensionOnOtherTabs},this.options)),this._updateToggleHeaderState(),this.listenTo(this.tabPanel,"activate:tab",this._onActiveTab),t.isEmpty(this.navigationHeader)||this.headerRegion.show(this.navigationHeader),this.contentRegion.show(this.tabPanel),this.headerRegion.$el.on(this._transitionEnd(),t.bind(function(e){e.target===this.headerRegion.el&&(this.$el.removeClass("cs-toggling"),this.triggerMethod("dom:refresh"))},this));var e=this.context.viewStateModel;e.set("browsing",e.BROWSING_TYPE.none)},"_onActiveTab":function(e,t,i){this._updateToggleHeaderState(e,t,i),this._notifyHeader()},"_notifyHeader":function(e,t,i){var s=this.tabPanel.activeTab.get("tabIndex"),n=this.tabPanel.activeTab.get("isCollapsed");this.navigationHeader.triggerMethod("active:tab",{"tabIndex":s,"isCollapsed":n})},"onBeforeRender":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"onBeforeDestroy":function(){this.setViewStateTabIndex(0,{"default":!0}),this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"enumerateWidgets":function(e){var i=this.options&&this.options.header&&this.options.header.widget;i&&e(i),t.each(this.options.tabs,function(i){t.each(i.columns||[],function(t){t.widget&&e(t.widget)})})},"_createWidget":function(e){var t=e.view;if(!t)throw new n.Error({"name":"UnresolvedWidgetError","message":'Widget not resolved: "'+e.type+'"'});return new t({"context":this.options.context,"data":e.options||{}})},"_updateToggleHeaderState":function(e,t,i){var s=i?i.model.collection.indexOf(i.model):this.activeTab&&this.activeTab.get("tabIndex")||0,n=0===s?"removeClass":"addClass",o=this.$el.hasClass("cs-collapse");("removeClass"===n&&o||"addClass"===n&&!o)&&(this.$el.addClass("cs-toggling"),this.$el[n]("cs-collapse")),this.tabPanel.activeTab.set("isCollapsed",s>0),this.tabPanel&&this.tabPanel.tabLinks&&this.setViewStateTabIndex(s)},"onDomRefresh":function(){this.onViewStateChanged()},"_initActiveTabFromViewState":function(){var e=this.getViewStateTabIndex();if(e)return new i.Model({"tabIndex":e})},"onViewStateChanged":function(e){function t(e){var t=o.el.querySelectorAll("[role=tabpanel]");if(t&&t.length>e)return s(t[e]).height()>0}function i(e,s){t(s)?e.activate():setTimeout(i.bind(a,e,s),50)}var n=this.getViewStateTabIndex()||0,o=this.tabPanel,r=o&&this.tabPanel.tabLinks,a=this;if(r){var c=r.children.findByIndex(n);c&&!c.isActive()&&i(c,n)}},"_onPerspectiveRetainedOrChanged":function(){var e=this.context.viewStateModel;-1!==v.indexOf(this.nextNode.get("type_name"))&&(e.get("browsing")!==e.BROWSING_TYPE.breadcrumbs&&this.setViewStateTabIndex(0,{"default":!0}),e.set("browsing",e.BROWSING_TYPE.none))},"_resetTab":function(){var e=this.context.viewStateModel;if(e.get("browsing"))return void(e.get("browsing")!==e.BROWSING_TYPE.breadcrumbs&&e.set("browsing",e.BROWSING_TYPE.none));this.setViewStateTabIndex(0,{"default":!0})},"_transitionEnd":t.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_supportMaximizeWidget":!0});return t.extend(x.prototype,l),t.extend(x.prototype,f),x}),csui.define("hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"1":function(e,t,i,s){return'  <div class="left-toolbar"></div>\r\n'},"3":function(e,t,i,s){return'  <div class="right-toolbar"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n,o;return(null!=(n=t.if.call(e,null!=e?e.toolbar:e,{"name":"if","hash":{},"fn":this.program(1,s,0),"inverse":this.noop}))?n:"")+'\r\n<div class="tab-links-bar">\r\n  <span class="fadeout"></span>\r\n  <ul class="binf-nav '+this.escapeExpression((o=null!=(o=t.tab_type||(null!=e?e.tab_type:e))?o:t.helperMissing,"function"==typeof o?o.call(e,{"name":"tab_type","hash":{}}):o))+'" role="tablist"></ul>\r\n</div>\r\n\r\n'+(null!=(n=t.if.call(e,null!=e?e.toolbar:e,{"name":"if","hash":{},"fn":this.program(3,s,0),"inverse":this.noop}))?n:"")+'\r\n<div class="csui-pman-add-newtab">\r\n  <button class="icon icon-action-add" title="Add tab"></button>\r\n</div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed-flow_impl_edit.perspective_tab.links",s),s}),csui.define("hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link",["module","hbs","csui/lib/handlebars"],function(e,t,i){var s=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,s){var n;return'<a href="#'+this.escapeExpression((n=null!=(n=t.uniqueTabId||(null!=e?e.uniqueTabId:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"uniqueTabId","hash":{}}):n))+'" class="cs-tablink" data-binf-toggle="tab" title="'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.title:e,{"name":"csui-l10n","hash":{}}))+'">\r\n  <span class="cs-tablink-text">'+this.escapeExpression((t["csui-l10n"]||e&&e["csui-l10n"]||t.helperMissing).call(e,null!=e?e.title:e,{"name":"csui-l10n","hash":{}}))+'</span>\r\n  <input class="csui-pman-editinput binf-hidden" tabindex="-1">\r\n</a>\r\n<div class="cs-tablink-delete" title="'+this.escapeExpression((n=null!=(n=t.removeTab||(null!=e?e.removeTab:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"removeTab","hash":{}}):n))+'">\r\n  <span class="icon clear-icon-white cs-delete-icon" role="button" data-cstabindex="0"></span>\r\n</div>\r\n'}});return i.registerPartial("csui_perspectives_tabbed-flow_impl_edit.perspective_tab.link",s),s}),csui.define("csui/perspectives/tabbed-flow/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/perspectives/tabbed-flow/impl/nls/root/lang",{"deleteConfirmTitle":"Remove Tab","deleteConfirmMsg":"Are you sure, you want to remove Tab?","removeTab":"Remove Tab","newTabTitle":"Tab","newTabInput":"Add tab label"}),csui.define("css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link",[],function(){}),csui.define("csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link.view",["csui/lib/underscore","csui/controls/tab.panel/impl/tab.link.view","hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link","i18n!csui/perspectives/tabbed-flow/impl/nls/lang","csui/lib/binf/js/binf","css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link"],function(e,t,i,s){return t.extend({"template":i,"templateHelpers":function(){return{"removeTab":s.removeTab}},"className":function(){return this._isOptionActiveTab()?"pman-edit-tab binf-active":"pman-edit-tab"},"events":function(){return e.extend(t.prototype.events,{"click @ui.link":"_onShowTab","dblclick @ui.tabLink":"_onTabClick","keydown @ui.editInput":"_onInputKeydown","keyup @ui.editInput":"_onInputKeyup","focusout @ui.editInput":"_onInputFocusOut","click @ui.tabRemove":"_onTabRemove"})},"ui":function(){return e.extend(t.prototype.ui,{"editInput":".csui-pman-editinput","tabLink":".cs-tablink-text","tabRemove":".cs-delete-icon"})},"_onShowTab":function(e){this.model.get("title")||(e.preventDefault(),e.stopPropagation())},"_onTabRemove":function(){var e=this;csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.confirmQuestion(s.deleteConfirmMsg,s.deleteConfirmTitle).done(function(t){t&&e._doRemoveTab()})})},"_doRemoveTab":function(){this.model.get("title")||this.trigger("enable:addTab"),this.trigger("remove:tab",this.model)},"_onTabClick":function(e){e.preventDefault(),e.stopPropagation(),this._editTab()},"_editTab":function(){var e;this.ui.tabLink.text()?(e=this.ui.tabLink.text(),this.ui.editInput.val(e)):this.ui.editInput.attr("placeholder",s.newTabInput),this._setEdit(!0)},"_setEdit":function(e){if(e){if(this.options&&this.options.tabPanel&&this.options.tabPanel.activatingTab)return;this.trigger("disable:addTab"),this.ui.tabRemove.addClass("binf-hidden"),this.ui.editInput.removeClass("binf-hidden"),this.ui.tabLink.addClass("binf-hidden"),this.trigger("before:edit",this)}else this.ui.tabLink.removeClass("binf-hidden"),this.ui.editInput.addClass("binf-hidden"),this.activate(),this.ui.link.trigger("focus")},"_onInputFocusOut":function(){if(!this.ui.tabLink.text())return void this._doRemoveTab();this._setEdit(!1),this.ui.tabRemove.removeClass("binf-hidden"),this.trigger("enable:addTab")},"_onInputKeydown":function(e){var t=e.target.value;32==e.which&&(!t&&e.preventDefault(),e.stopPropagation())},"_onInputKeyup":function(e){var t=e.target.value;if(!(t&&0!==t.length||13!=e.which&&27!=e.which))return void this._doRemoveTab();switch(e.which){case 13:this._setTabTitle(t);break;case 27:this._setEdit(!1)}},"_setTabTitle":function(e){this.ui.tabLink.text(e),this._setEdit(!1),this.model.set("title",e)},"onShow":function(){this.model.get("title")||this._editTab()},"constructor":function(){t.prototype.constructor.apply(this,arguments)}})}),csui.define("css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links",[],function(){}),csui.define("csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links.view",["csui/lib/underscore","csui/controls/tab.panel/tab.links.ext.view","hbs!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links","csui/perspectives/tabbed-flow/impl/edit.perspective/tab.link.view","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","i18n!csui/perspectives/tabbed-flow/impl/nls/lang","csui/lib/binf/js/binf","css!csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links"],function(e,t,i,s,n,o){return t.extend({"template":i,"childView":s,"childViewContainer":function(){return"."+this.tabType},"ui":{"addNewTab":".csui-pman-add-newtab"},"triggers":{"before:edit":"before:edit"},"events":{"click @ui.addNewTab":"_onAddNewTab"},"childViewOptions":function(t,i){return e.extend(this.options,{})},"childEvents":{"remove:tab":"_onRemoveTab","enable:addTab":"enableAddTab","disable:addTab":"disableAddTab","before:edit":"onBeforeEditTab"},"constructor":function(){t.prototype.constructor.apply(this,arguments)},"_onRemoveTab":function(e){var t=e.isActive(),i=this.collection.indexOf(e.model);if(this.collection.remove(e.model),t&&(i>=this.collection.length&&(i=this.collection.length-1),!(i<0))){var s=this.collection.at(i);this.children.findByModel(s).activate()}},"_onAddNewTab":function(){if(!this.ui.addNewTab.hasClass("csui-pman-disable-newtab")){var e={"title":""};this.options.tabPanel.collection.add(e)}},"enableAddTab":function(){this.ui.addNewTab.removeClass("csui-pman-disable-newtab"),this.keyboardBehavior.refreshTabableElements(this)},"disableAddTab":function(){this.ui.addNewTab.addClass("csui-pman-disable-newtab")},"onBeforeEditTab":function(e){this.trigger("before:edit",e)}})}),csui.define("csui/perspectives/tabbed-flow/tabbed-flow.perspective.view",["require","module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/models/widget/widget.collection","csui/models/widget/widget.model","csui/controls/tab.panel/tab.panel.view","csui/controls/grid/grid.view","csui/behaviors/widget.container/widget.container.behavior","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/utils/contexts/factories/active.tab.factory","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/perspectives/tabbed/behaviors/tab.extensions.behavior","csui/utils/log","csui/perspectives/tabbed-flow/impl/edit.perspective/tab.links.view","hbs!csui/perspectives/tabbed/impl/tabbed.perspective","css!csui/perspectives/impl/perspective","css!csui/perspectives/tabbed/impl/tabbed.perspective"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f,b,g,m,v,y){"use strict";var w=t.config();i.defaults(w,{"defaultWidgetKind":"tile","widgetSizes":{"fullpage":{"widths":{"xs":12}},"tile":{"widths":{"md":6,"xl":4}},"header":{"widths":{"xs":12,"md":8,"xl":6}}}});var x=u.RowView.extend({"cellView":function(e){var t=e.get("widget");if(t){if(!t.view)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget "'+t.type+'" not resolved:'+t.error});return t.view}},"cellViewOptions":function(e){var t=e.get("widget");return{"context":this.options.context,"data":t&&t.options||{},"model":void 0}},"constructor":function(e){e&&"edit"===e.perspectiveMode&&this._prepareForEditMode(e),u.RowView.prototype.constructor.apply(this,arguments),"edit"===this.options.perspectiveMode&&(this._initEditMode(),this._registerEditEvents())},"_prepareForEditMode":function(t){t.cellBehaviours={"PerspectiveWidgetConfig":{"behaviorClass":e("csui/perspective.manage/behaviours/pman.widget.config.behaviour"),"perspectiveView":this,"perspectiveSelector":".perspective-editing .cs-perspective #"+t.tabId}}},"_initEditMode":function(){var e=this,t={"type":"csui/perspective.manage/widgets/perspective.placeholder"};C._resolveWidget(t).done(function(i){var s=C._createCell(t,i);e.options.collection.add(s)})},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){var i=t.model;e.collection.remove(i)}),this.listenTo(this,"replace:widget",this._replaceWidget)},"_replaceWidget":function(e,t){if(this.getPManPlaceholderWidget){var i=this;C._resolveWidget(t).done(function(){e.model.get("widget").type!==i.getPManPlaceholderWidget().type&&(t.kind=e.model.get("widget").kind);var s=C._prepareCell(t);e.model.set(s);var n=i.getPManPlaceholderWidget(),o=i.collection;o.filter(function(e){return e.get("widget").type===n.type}).length>0||C._resolveWidget(n).done(function(e){var t=C._createCell(n,e,o.length);o.add(t)})})}}}),_=l.extend({"contentView":x,"contentViewOptions":function(e){return{"context":this.options.context,"columns":e.get("columns"),"perspectiveMode":this.options.perspectiveMode,"tabId":e.get("uniqueTabId")}},"constructor":function(e){e||(e={}),i.defaults(e,{"delayTabContent":!1,"toolbar":!0,"TabLinkCollectionViewClass":b,"tabBarExtensionViewClass":e.tabBarExtensionViewClass,"tabBarExtensionViewOptions":e.tabBarExtensionViewOptions,"enableExtensionOnFirstTab":e.enableExtensionOnFirstTab}),"edit"===e.perspectiveMode&&i.extend(e,{"TabLinkCollectionViewClass":v}),this.behaviors=i.extend({"TabExtensionsBehavior":{"behaviorClass":g}},this.behaviors),s(window).on("resize",{"view":this},this._onWindowResize),l.prototype.constructor.call(this,e)},"render":function(){return l.prototype.render.apply(this),this.listenTo(this.collection,"change reset remove",i.bind(function(e){this._enableToolbarState(),this.activatingTab=!1,this.skipAutoScroll=!1,this._autoScrolling()},this)),this.listenTo(this.tabLinks,"before:edit",function(e){this.skipAutoScroll=!1,this.tabsSelector=s(this.$el.find(".tab-links .tab-links-bar")[0]).find("> ul li"),this.tablinksToolbar=s(this.$el.find(".tab-links .tab-links-bar")[0]),this[e&&e.model.get("title")?"_autoScrolling":"_autoScrollLastTab"]().done(i.bind(function(){this._enableToolbarState(),e&&e.ui&&e.ui.editInput.trigger("focus")},this))}),this},"onDomRefresh":function(){this._enableToolbarState()},"_onWindowResize":function(e){e&&e.data&&e.data.view&&e.data.view._enableToolbarState()}});i.extend(_.prototype,f);var T=o.ItemView.extend({"className":"cs-tabbed-perspective-header","constructor":function(t){if(t||(t={}),t.header||(t.header={}),"edit"===t.perspectiveMode){var s=e("csui/perspective.manage/behaviours/pman.widget.config.behaviour");this.behaviors=i.extend({"PerspectiveWidgetConfig":{"behaviorClass":s,"perspectiveView":this}},this.behaviors)}o.ItemView.call(this,i.extend({"template":!1},t)),"edit"===this.options.perspectiveMode&&(this._initEditMode(t),this._registerEditEvents())},"_initEditMode":function(e){!this.options.header.widget&&this.getPManPlaceholderWidget&&this._handleReplaceWidget(this,this.getPManPlaceholderWidget())},"_ensureRegion":function(){return this.headerContainer||(this.headerContainer=new o.Region({"el":this.el})),this.headerContainer},"onRender":function(){if(this.options.header.widget){this.navigationHeader=this._createWidget(this.options.header.widget);this._ensureRegion().show(this.navigationHeader)}},"_createWidget":function(e){var t=e.view;if(!t)throw new o.Error({"name":"UnresolvedWidgetError","message":'Widget not resolved: "'+e.type+'"'});return new t({"context":this.options.context,"data":e.options||{}})},"_registerEditEvents":function(){var e=this;this.listenTo(this,"delete:widget",function(t){if(e.getPManPlaceholderWidget){var i=e.getPManPlaceholderWidget();C._resolveWidget(i).done(function(){e._replaceWidget(i)})}}),this.listenTo(this,"replace:widget",this._handleReplaceWidget)},"_replaceWidget":function(e){this.options.header.widget=e,this.render()},"_handleReplaceWidget":function(e,t){var i=this;C._resolveWidget(t).done(function(){i._replaceWidget(t)})},"getPManWidgetConfig":function(){return this.options.header.widget}}),C=o.LayoutView.extend({"className":"cs-tabbed-perspective cs-perspective binf-container-fluid cs-tabbed-flow-perspective","template":y,"regions":{"headerRegion":"> .cs-header","contentRegion":"> .cs-content"},"constructor":function(e){e||(e={}),e=s.extend(!0,{},e),e.collection||(e.collection=this._createCollection(e)),o.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions()},"onRender":function(){this.headerView=new T(this.options),this.headerRegion.show(this.headerView),this.tabPanel=new _(i.extend({"activeTab":this.activeTab,"delayTabContent":this.options.delayTabContent,"tabBarExtensionViewClass":this.headerView.navigationHeader.tabBarExtensionView,"tabBarExtensionViewOptions":this.headerView.navigationHeader.tabBarExtensionViewOptions,"enableExtensionOnFirstTab":this.headerView.navigationHeader.enableExtensionOnFirstTab},this.options)),this._updateToggleHeaderState(),this.listenTo(this.tabPanel,"activate:tab",this._updateToggleHeaderState),this.contentRegion.show(this.tabPanel),this.headerRegion.$el.on(this._transitionEnd(),i.bind(function(e){e.target===this.headerRegion.el&&(this.$el.removeClass("cs-toggling"),this.triggerMethod("dom:refresh"))},this))},"onBeforeRender":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"onBeforeDestroy":function(){this.headerRegion&&this.headerRegion.$el&&this.headerRegion.$el.off(this._transitionEnd())},"_updateToggleHeaderState":function(e,t,i){if("edit"!==this.options.perspectiveMode){var s=i?i.model.collection.indexOf(i.model):this.activeTab&&this.activeTab.get("tabIndex")||0,n=0===s?"removeClass":"addClass",o=this.$el.hasClass("cs-collapse");("removeClass"===n&&o||"addClass"===n&&!o)&&(this.$el.addClass("cs-toggling"),this.$el[n]("cs-collapse"))}},"_transitionEnd":i.once(function(){var e,t={"transition":"transitionend","WebkitTransition":"webkitTransitionEnd","MozTransition":"transitionend","OTransition":"oTransitionEnd otransitionend"},i=document.createElement("div");for(e in t)if(void 0!==i.style[e])return t[e]}),"_createCollection":function(e){e.tabs&&(e.tabs=i.each(e.tabs,function(e){e.widgets=i.filter(e.widgets,function(e){return void 0!=r.filterUnSupportedWidgets(e,w)})}));var t=new n.Collection(e.tabs),s=i.chain(e.tabs).map(function(e){return e.widgets}).flatten().pluck("type").unique().map(function(e){return{"id":e}}).value(),o=e.header&&e.header.widget&&r.filterUnSupportedWidgets(e.header.widget,w),c=new a(s),l=this;return o&&c.add({"id":o.type}),t.each(function(e){e.set("id",i.uniqueId("cs-tab"))}),this.widgetsResolved=c.fetch().then(function(){if(o){var e=c.get(o.type),s=e.get("view");if(s)i.extend(o,{"view":s});else{var n=e.get("error");m.warn('Loading widget "{0}" failed. {1}',o.type,n)&&console.warn(m.last),i.extend(o,d.getErrorWidget(o,n))}}return t.each(function(e){e.set("columns",l._createColumns(e.get("widgets"),c))}),c}),t},"_createColumns":function(e,t){return i.map(e,function(e){var i=t.get(e.type);return C._createCell(e,i)}.bind(this))}},{"_prepareCell":function(e){return e.kind||(e.kind=w.defaultWidgetKind),{"sizes":(w.widgetSizes[e.kind]||{}).widths,"widget":{"type":e.type,"options":e.options,"view":e.view}}},"_createCell":function(e,t){var s=t.get("view"),n=t.get("manifest")||{},o=n.supportedKinds,r=e.kind;r&&o&&i.contains(o,r)||(r=n.kind),e.kind=r,r||(r=w.defaultWidgetKind);w.widgetSizes[r];if(s)return e.view=s,C._prepareCell(e);var a=t.get("error");return m.warn('Loading widget "{0}" failed. {1}',e.type,a)&&console.warn(m.last),{"sizes":w.widgetSizes[w.defaultWidgetKind].widths,"widget":d.getErrorWidget(e,a)}},"_resolveWidget":function(e){var t=s.Deferred(),i=new c({"id":e.type});return i.fetch().then(function(){e.view=i.get("view"),t.resolve(i)},function(e){t.reject(e)}),t.promise()}});return i.extend(C.prototype,h),C}),csui.define("csui/pages/start/impl/location",[],function(){return{get"search"(){return location.search},get"href"(){return location.href},get"hash"(){return location.hash}}}),csui.define("csui/pages/start/perspective.router",["csui/lib/backbone","csui/lib/jquery","csui/lib/underscore","csui/utils/contexts/factories/application.scope.factory","csui/pages/start/impl/location","csui/utils/url"],function(e,t,i,s,n,o){"use strict";var r,a;return e.Router.extend({"constructor":function(t){e.Router.prototype.constructor.apply(this,arguments),this.context=t.context,this._routeWithSlashes=t.routeWithSlashes,this.applicationScope=this.context.getModel(s),this.listenTo(this,"other:route",this.onOtherRoute)},"execute":function(t,i){return this.trigger("before:route",this),this._restoreUrlParamsFromViewState(),e.Router.prototype.execute.apply(this,arguments)},"_restoreUrlParamsFromViewState":function(){if(!this.urlParams||0===this.urlParams.length){var e=this.context.viewStateModel,t=e.get(e.CONSTANTS.URL_PARAMS);t&&i.isString(t)&&(t=JSON.parse(t))&&(this.urlParams=t.slice())}},"getUrlParametersList":function(){return this.urlParams},"addUrlParameters":function(e){var t=this.getUrlParametersList()||[];this.urlParams=i.unique(t.concat(e));var s=this.context.viewStateModel;s.set(s.CONSTANTS.URL_PARAMS,this.urlParams),this._clearViewStateModel(this.urlParams)},"_clearViewStateModel":function(e){var t,s=this.context.viewStateModel,n=s.get("state");i.keys(n).forEach(function(i){-1===e.indexOf(i)&&(delete n[i],t=!0)}),t&&(s.unset("state",{"silent":!0}),s.set("state",n))},"getActiveRouter":function(){return r},"getPreviousRouter":function(){return a},"onViewStateChanged":function(){},"getInitialViewState":function(){return{}},"activate":function(e){if(r!==this){a=r,r=this;var t=this.getUrlParametersList();a&&!this.restoring&&t&&t.length>0&&(t.length=0),this._activeRouterChanged()}this.context.viewStateModel.set("enabled",this.isViewStateModelSupported()),
e&&this._initializeViewState()},"_initializeViewState":function(){var e=this.context.viewStateModel,t=e.get("state");t&&0===i.keys(t).length&&e.unset("state",{"silent":!0}),e.set("state",this.getInitialViewState(),{"silent":!0})},"_activeRouterChanged":function(){var e=this.context.viewStateModel;r===this&&(e.set("activeRouterInstance",this),this.listenTo(e,"change:state",this.onViewStateChanged),a&&a.stopListening(e,"change:state",a.onViewStateChanged))},"buildUrlParams":function(){var e=this.urlParams,s=this.context,n=s&&s.viewStateModel,o=n&&n.get("state"),r=n.get("default_state"),a=[],c=n&&n.get("initialUrlParams");return c&&c.length&&(a=a.concat(c),a.forEach(function(t){o[t.name]=t.value,e=e||[],e.push(t.name)})),e&&o&&e.forEach(function(e){var t=o[e],i=r&&r[e];t&&t!==i&&this._addToParamsArray(a,{"name":e,"value":t})}.bind(this)),a=a||[],i.keys(o).forEach(function(e){if(-1!==a.indexOf(e)){if(r&&r[e]===o[e])return!0;this._addToParamsArray(a,{"name":e,"value":o[e]})}}.bind(this)),t.param(a)},"_addToParamsArray":function(e,t){if(t&&t.name){var i=!1;if(e.some(function(e){if(e.name===t.name)return i=!0,!0}),!i)return e.push(t),!0}},"restore":function(t){var i=this.context.viewStateModel,s=t.fragment,n=t.scopeId;i?(this.restoring=!0,i.set(i.CONSTANTS.URL_PARAMS,t.urlParam),i.get(i.CONSTANTS.CURRENT_ROUTER)===i.get(i.CONSTANTS.LAST_ROUTER)?this.applicationScope.set("id",""):i.get("enabled")?n?this.applicationScope.set("id",n):this.applicationScope.set("id",""):s&&e.Router.prototype.navigate.call(this,s,{"trigger":!0})):window.history.back()},"initSessionViewState":function(){var e=this.context&&this.context.viewStateModel;e&&e.set(e.CONSTANTS.SESSION_STATE,{})},"initDefaultViewState":function(){if(!this.restoring){var e=this.context&&this.context.viewStateModel;e&&e.set(e.CONSTANTS.DEFAULT_STATE,{})}},"getUrlParamsNotInFragment":function(e){var t=[],s=i.keys(o.urlParams(e)),n=this.getUrlParametersList();return n&&n.forEach(function(e){-1===s.indexOf(e)&&t.push(e)}),t},"initViewStateFromUrlParams":function(e,s){var n,o=this.context&&this.context.viewStateModel;if(i.isString(e)){n=this.getUrlParametersList()?i.pick(t.parseParams(e),this.getUrlParametersList()):t.parseParams(e);var r=this.context.viewStateModel.get("default_state");if(r){var a={};i.extend(a,n),i.extend(n,r),i.extend(n,a)}}else n=e;o&&o.unset("state",{"silent":!0})&&o.set("state",n,{"silent":s})},"isViewStateModelSupported":function(){return!1},"navigate":function(t,i){var s=this.buildUrlParams(),c=t;if(s&&(t+="?"+s),this!==r&&this.activate(!0),this.trigger("before:route",this),this._routeWithSlashes){var l=a?a.getUrlParametersList():[];l=l||[];var u=this.getUrlParamsNotInFragment(t);u&&(l=l.concat(u)),t=o.appendQuery(t,o.mergeUrlParams(t,n.search,l)),t+=n.hash}var d=this.context.viewStateModel,h=d.CONSTANTS,p=d.get(h.CURRENT_ROUTER);if(this.name!==p){var f={"router":this.name,"fragment":c,"scopeId":this.applicationScope,"navigateOptions":i,"state":d.get(h.STATE),"sessionState":d.get(h.SESSION_STATE),"defaultState":d.get(h.DEFAULT_STATE)};d.updateRoutingHistory(f)}d.set("initialUrlParams",void 0);var b=e.Router.prototype.navigate.call(this,t,i);return this.initSessionViewState(),d.get(h.CURRENT_ROUTER)!==this.name&&(d.set(h.CURRENT_ROUTER,this.name),this.initDefaultViewState()),d.set(h.CURRENT_ROUTER_FRAGMENT,c),d.set(h.CURRENT_ROUTER_NAVIGATE_OPTIONS,i),this.applicationScope?d.set(h.CURRENT_ROUTER_SCOPE_ID,this.applicationScope.get("id")):d.unset(h.CURRENT_ROUTER_SCOPE_ID),this.restoring=!1,b}})}),csui.define("csui/pages/start/perspective.routing",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/utils/routing","csui-ext!csui/pages/start/perspective.routing"],function(e,t,i,s,n,o){"use strict";function r(e){var i=[],s=t.chain(o).flatten(!0).filter(function(e){if(!e.isDefault)return!0;i.push(e)}).concat(i).unique().reverse().value(),r=n.routesWithSlashes();this._routers=t.map(s,function(i,s){var n=new i(t.extend({"routeWithSlashes":r},e));return n.name||(n.name=s),n.on("before:route",t.bind(this._informOthers,this)),n},this),this._context=e.context,this._originalHistoryLength=history.length}var a,c=t.extend({"handlerUrlPathSuffix":"/app","rootUrlPath":null},e.config());return t.extend(r.prototype,i.Events,{"start":function(){var e;if(n.routesWithSlashes())e={"pushState":!0,"root":null!=c.rootUrlPath&&c.rootUrlPath||s.combine(new s(new s(location.pathname).getCgiScript()).getPath(),c.handlerUrlPathSuffix)};else{e={"root":i.history.decodeFragment(location.pathname)}}i.history.start(e),this._context&&this._context.viewStateModel.set("history",!0)},"hasRouted":function(){return history.length>this._originalHistoryLength},"addUrlParameters":function(e,t){this._routers.some(function(i){if(i.name===e)return i.addUrlParameters(t),!0})},"restoreRouter":function(e){this._routers.some(function(t){if(t.name===e.router)return t.restoring=!0,t.restore(e),!0})},"_informOthers":function(e){t.each(this._routers,function(t){t!==e&&t.trigger("other:route",t,e)})}}),r.routesWithSlashes=n.routesWithSlashes,{"getInstance":function(e){return a||(a=new r(e)),a},"routesWithSlashes":n.routesWithSlashes}}),csui.define("csui/pages/start/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/nls/root/lang",{"ProductName":"OpenText Content Server","UserTitle":"{1}","NodeTitle":"{1} {0} - {2}","MetadataTitle":"{0} of {1} - {2}","PermissionsTitle":"Permissions of {0} - {1}","SearchTitle":'Searching for "{0}"',"FavoritesTitle":"Favorites - {0}","MyAssignmentsTitle":"My Assignments - {0}","RecentlyAccessedTitle":"Recently Accessed - {0}"}),csui.define("csui/pages/start/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/pages/start/impl/nls/root/lang",{"UserLoadingTitle":"Loading current user...","NodeLoadingTitle":"Loading {0}...","Home":"Home","mainNavigationAria":"Main navigation","profileMenuTitle":"Profile Menu","profileMenuAria":"Profile Menu of {0}","profileImageAlt":"Profile Menu of {0}"}),csui.define("csui/pages/start/impl/landing.perspective.router",["csui/lib/underscore","csui/utils/base","csui/pages/start/perspective.router","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/user","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r){"use strict";return i.extend({"routes":{"*other":"openLandingPerspective"},"name":"Landing","constructor":function(e){i.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(s),this.listenTo(this.applicationScope,"change:id",this._updateHomeUrl),this.user=this.context.getModel(n),this.listenTo(this.user,"change:id",this._updatePageTitle)},"openLandingPerspective":function(){this._updatePageTitle(),this.applicationScope.set("id","")},"onViewStateChanged":function(){this._updateHomeUrl()},"restore":function(e){this.openLandingPerspective(e)},"_updateHomeUrl":function(){this.applicationScope.id||(this!==this.getActiveRouter()&&this.activate(!0),this._updatePageTitle(),this.navigate(""))},"_updatePageTitle":function(){""===this.applicationScope.id&&(document.title=this.user.has("name")?e.str.sformat(o.UserTitle,t.formatMemberName(this.user),o.ProductName):r.UserLoadingTitle)}},{"isDefault":!0})}),csui.define("csui/pages/start/impl/node.perspective.router",["module","csui/lib/jquery","csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/next.node","csui/models/node/node.model","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r,a){"use strict";return s.extend({"routes":{"nodes/:id":"openNodePerspective","nodes/:id(?*query_string)":"openNodePerspective"},"name":"Node","constructor":function(e){s.prototype.constructor.apply(this,arguments),this.nextNode=this.context.getModel(n),this.listenTo(this.nextNode,"change:id",this._updateNodeUrl),this.listenTo(this.nextNode,"change:id",this._updatePageTitle),this.listenTo(this.nextNode,"change:name",this._updatePageTitle)},"openNodePerspective":function(e,t){o.usesIntegerId&&(e=parseInt(e));var i=e&&e!==this.nextNode.get("id");this.restoring||this.initViewStateFromUrlParams(t,i),this.activate(!1);var s=this.context,n=s.viewStateModel;i&&(this.nextNode.get("id")&&n.set("browsing",n.BROWSING_TYPE.navigation),this.nextNode.set("id",e)),setTimeout(function(){i&&n&&n.get("state")&&n.get("state").filter&&n.trigger("change:state")},1e3)},"onOtherRoute":function(){this.nextNode.clear({"silent":!0})},"isViewStateModelSupported":function(){return!0},"onViewStateChanged":function(){this.nextNode.get("id")&&this._updateNodeUrl()},"restore":function(e){this.openNodePerspective(e.sessionState.id,e.state)},"_updateNodeUrl":function(){var e=this.nextNode,t=e.get("id"),i="nodes/"+encodeURIComponent(t);this!==this.getActiveRouter()&&this.activate(!0),this.navigate(i)},"initSessionViewState":function(){this._updateSessionState()},"_updateSessionState":function(){var e=this.nextNode,t=e&&e.get("id"),s=this.context&&this.context.viewStateModel;if(s&&t){var n={};i.extend(n,s.get(s.CONSTANTS.SESSION_STATE)),i.extend(n,{"id":t}),s.unset(s.CONSTANTS.SESSION_STATE,{"silent":!0}),s.set(s.CONSTANTS.SESSION_STATE,n)}},"_updatePageTitle":function(){this.nextNode.has("name")?document.title=i.str.sformat(r.NodeTitle,this.nextNode.get("name"),this.nextNode.get("type_name"),r.ProductName):document.title=i.str.sformat(a.NodeLoadingTitle,this.nextNode.get("id"))}})}),csui.define("csui/pages/start/impl/search.perspective.router",["module","csui/lib/underscore","csui/pages/start/perspective.router","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/user","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r){"use strict";var a=e.config();return t.defaults(a,{"showTitle":!0}),i.extend({"routes":{"search/*path":"openSearchPerspective"},"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.searchQuery=this.context.getModel(s),this.listenTo(this.searchQuery,"change",this._updateSearchUrl)},"openSearchPerspective":function(e){var i,s=t.reduce(e.split("/"),function(e,t){return i?(e[i]=null!=t?decodeURIComponent(t).trim():"",i=void 0):i=decodeURIComponent(t),e},{});this._updatePageTitle(),this.context.getModel(n).ensureFetched().then(t.bind(function(){this.searchQuery.set(s,{"silent":!!this.searchQuery.get("query_id")})},this))},"onOtherRoute":function(){this.searchQuery.clear({"silent":!0})},"routerURL":function(e){return t.reduce(e.attributes,function(e,t,i){return e+=t?"/"+encodeURIComponent(i)+"/"+encodeURIComponent(t):"/"+encodeURIComponent(i)+"/%20"},"search")},"_updateSearchUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=this.routerURL(this.searchQuery);this._updatePageTitle(),this.navigate(e)},"_updatePageTitle":function(){a.showTitle&&(document.title=t.str.sformat(o.SearchTitle,this.searchQuery.get("where")))},"_extractParameters":function(e,i){var s=e.exec(i).slice(1);return t.map(s,function(e,t){return e||null})}})}),csui.define("csui/pages/start/impl/metadata.perspective.router",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/pages/start/perspective.router","csui/utils/contexts/factories/metadata.factory","csui/models/node/node.model","i18n!csui/pages/start/nls/lang","i18n!csui/pages/start/impl/nls/lang"],function(e,t,i,s,n,o,r,a,c){"use strict";return n.extend({"routes":{"nodes/:node_id/metadata":"openMetadata","nodes/:node_id/metadata(?*query_string)":"openMetadata","nodes/:node_id/metadata/navigator":"openMetadataNavigator","nodes/:node_id/metadata/navigator(?*query_string)":"openMetadataNavigator"},"name":"Metadata","constructor":function(e){n.prototype.constructor.apply(this,arguments),this.metadataModel=this.context.getModel(o),this.listenTo(this.metadataModel,"change:metadata_info",this._updateUrl),this.listenTo(this.metadataModel,"change:metadata_info",this._updatePageTitle)},"openMetadata":function(e,t){this._open(e,t,!1)},"openMetadataNavigator":function(e,t){this._open(e,t,!0)},"isViewStateModelSupported":function(){return!0},"getInitialViewState":function(){var e=this.metadataModel&&this.metadataModel.get("metadata_info");if(e&&e.selectedTab){var t=e.selectedTab;if(i.isString(t))return{"dropdown":t};if(t instanceof s.Model){var n=t.get("name"),o=t.get("title");return{"dropdown":n||o}}}return{}},"_open":function(e,t,i){r.usesIntegerId&&(e=parseInt(e));var s=this.metadataModel.get("metadata_info"),n=!s||e&&e!==s.id;this.initViewStateFromUrlParams(t,n),this.activate(!1),n&&this.metadataModel.set("metadata_info",{"id":e,"navigator":i})},"onOtherRoute":function(){this.metadataModel.clear({"silent":!0});var e=this.context.viewStateModel;e.unset(e.CONSTANTS.METADATA_CONTAINER),e.unset("displayBreadcrumbUpToParentOnly")},"onViewStateChanged":function(){var e=this.metadataModel.get("metadata_info");e&&e.id&&this._updateUrl();var t=this.context.viewStateModel.getViewState("dropdownTitle");e&&e.model&&t&&this._updatePageTitle()},"_updateUrl":function(){this!==this.getActiveRouter()&&this.activate(!0);var e=this.metadataModel.get("metadata_info"),t=e.id,i="nodes/"+encodeURIComponent(t)+"/metadata";e.navigator&&(i+="/navigator",this.context.viewStateModel.set("displayBreadcrumbUpToParentOnly",!0)),this.navigate(i)},"_updatePageTitle":function(){var e=this.metadataModel.get("metadata_info");if(e.model){var t;this.context.viewStateModel&&(t=this.context.viewStateModel.getViewState("dropdownTitle")),document.title=e.model.has("name")&&t?i.str.sformat(a.MetadataTitle,t,e.model.get("name"),a.ProductName):i.str.sformat(c.NodeLoadingTitle,e.model.get("id"))}}})}),csui.define("csui/pages/start/impl/root.perspective.router",["csui/lib/underscore","csui/pages/start/perspective.router","i18n!csui/pages/start/nls/lang"],function(e,t,i){"use strict";var s={"myassignments":e.str.sformat(i.MyAssignmentsTitle,i.ProductName),"recentlyaccessed":e.str.sformat(i.RecentlyAccessedTitle,i.ProductName),"favorites":e.str.sformat(i.FavoritesTitle,i.ProductName)};return t.extend({"name":"Root","routes":{"myassignments":"openMyAssignmentsPerspective","myassignments(?*query_string)":"openMyAssignmentsPerspective","recentlyaccessed":"openRecentlyAccessedPerspective","recentlyaccessed(?*query_string)":"openRecentlyAccessedPerspective","favorites":"openFavoritesPerspective","favorites(?*query_string)":"openFavoritesPerspective"},"constructor":function(e){t.prototype.constructor.apply(this,arguments),this.listenTo(this.applicationScope,"change:id",this._updateUrl)},"openRecentlyAccessedPerspective":function(e){this.openApplicationScope("recentlyaccessed",e)},"openMyAssignmentsPerspective":function(e){this.openApplicationScope("myassignments",e)},"openFavoritesPerspective":function(e){this.openApplicationScope("favorites",e)},"openApplicationScope":function(e,t){this.initViewStateFromUrlParams(t),this.activate(!1),this._updatePageTitle(),this.applicationScope.set("id",e)},"isViewStateModelSupported":function(){return!0},"onViewStateChanged":function(){this._updateUrl()},"_updateUrl":function(){var e=this.applicationScope.id;s[e]&&(this!==this.getActiveRouter()&&this.activate(!0),this._updatePageTitle(),this.navigate(e))},"_updatePageTitle":function(){document.title=s[this.applicationScope.id]}})}),csui.define("csui/utils/classic.nodes/impl/core.classic.nodes",[],function(){"use strict";return[{"equals":{"type":215},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":[130,134]},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"view","objId":e.get("id"),"show":1,"nexturl":location.href}}},{"equals":{"type":206},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTask","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":204},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskList","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":205},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseTaskGroup","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":212},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"BrowseMilestone","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":207},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewChannel","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":208},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ViewNews","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":218},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"OpenPoll","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":299},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"RunReport","objId":e.get("id"),"nexturl":location.href}}},{"equals":{"type":384},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"ProspectorBrowse","objId":e.get("id"),"order":"-SCORE","summaries":1,"nexturl":location.href}}},{"equals":{"type":31214},"forced":!0,"urlQuery":function(e){return{"func":"ll","objAction":"addresubmission","RS_FUNCTION":"Edit","RSID":e.get("followup_id"),"objId":e.get("location_id"),"nexturl":location.href}}}]}),csui.define("csui/utils/content.helper",["csui/utils/url","csui/models/version"],function(e,t){"use strict";function i(i){var s=new e(i.connector.connection.url).getCgiScript(),n={"func":"doc.fetchcsui","nodeid":i.get("id")};return(i instanceof t||i.get("version_number"))&&(n.vernum=i.get("version_number")),e.appendQuery(s,e.combineQueryString(n))}return{"getContentPageUrl":i}}),csui.define("csui/utils/impl/core.defaultactionitems",["csui/utils/classic.nodes/classic.nodes","csui/utils/smart.nodes/smart.nodes"],function(e,t){"use strict";return[{"equals":{"type":[144,736,2]},"signature":"OpenDocument","sequence":10},{"type":140,"signature":"Navigate","sequence":30},{"type":258,"signature":"ExecuteSavedQuery","sequence":30},{"signature":"OpenSpecificClassicPage","sequence":600,"decides":function(t){return e.isForced(t)}},{"equals":{"container":!0},"signature":"Browse","sequence":700},{"signature":"OpenSpecificNodePerspective","sequence":800,"decides":function(e){return t.isSupported(e)}}]}),csui.define("csui/utils/non-attaching.region/non-attaching.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){}})}),csui.define("csui/utils/script-executing.region/script-executing.region",["csui/lib/marionette"],function(e){"use strict";return e.Region.extend({"constructor":function(t){e.Region.prototype.constructor.apply(this,arguments)},"attachHtml":function(e){this.$el.html("").append(e.el)}})}),csui.define("csui/utils/node.links/impl/core.node.links",["csui/utils/url"],function(e){"use strict";return[{"equals":{"type":140},"getUrl":function(e){return e.get("url")}},{"equals":{"type":258},"getUrl":function(t){return e.combine("search/query_id/",t.get("id"))}},{"sequence":1e3,"getUrl":function(t){return e.combine("nodes/",t.get("id"))}}]}),csui.define("csui/utils/open.authenticated.page",["csui/lib/jquery","csui/utils/url"],function(e,t){"use strict";function i(i,s,n){function o(e,t){var i=c.createElement("input");i.setAttribute("name",e),i.setAttribute("value",t),i.setAttribute("type","hidden"),l.appendChild(i)}var r=new t(i.connection.url).getCgiScript(),a=i.connection.session.ticket,c=function(){return n||(n={}),(n.window||(!1===n.openInNewTab?window:window.open("","_blank"))).document}(),l=function(){var e=c.createElement("form");return e.setAttribute("method","post"),e.setAttribute("action",r),c.body.appendChild(e),e}();return o("func","csui.authenticate"),o("otcsticket",a),o("nexturl",s),l.submit(),e.Deferred().resolve().promise()}return i}),csui.define("csui/utils/smart.nodes/impl/core.smart.nodes",[],function(){"use strict";return[{"equals":{"type":[144,736,2]}},{"equals":{"container":!0},"sequence":1e3}]}),csui.define("csui/utils/taskqueue",["module","csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/log"],function(e,t,i,s,n){"use strict";function o(e){this.parallelism=e&&e.parallelism||1/0,this.pending=new a(void 0,{"model":r}),this.pending.on("add",this.dequeue,this),this.active=new a(void 0,{"model":r})}n=n(e.id);var r=s.Model.extend({"constructor":function(e,i){s.Model.prototype.constructor.apply(this,arguments),this.deferred=t.Deferred()},"promise":function(){return this.deferred.promise()}}),a=s.Collection.extend({"model":r});return i.extend(o.prototype,{"dequeue":function(){var e;n.debug("Pending queue {0} contains {1} tasks, active queue {0} contains {1} tasks.",this.pending.cid,this.pending.length,this.active.cid,this.active.length)&&console.log(n.last),this.active.length<this.parallelism&&(e=this.pending.shift())&&(this.execute(e),this.dequeue())},"execute":function(e){n.debug("Executing task {0}...",e.cid)&&console.log(n.last),this.active.add(e),e.get("worker")().done(e.deferred.done).fail(e.deferred.fail).always(i.bind(function(){this.active.remove(e),this.dequeue()},this))}}),o.Task=r,o.TaskCollection=a,o.version="1.0",o}),csui.define("csui/models/node/node.addable.type.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.addable.type.collection"],function(e,t,i,s,n,o){return s.extend({"propertyPrefix":"addableTypes","constructor":function(r,a){s.prototype.constructor.apply(this,arguments);var c=this.options.addableTypes||{};if(!(c instanceof i.Collection)){var l=r.getModel(n,a),u=e.config();c=new o(c.models,t.defaults({"autoreset":!0},c.options,u.options,{"node":l}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/context",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/utils/base","csui/utils/log","csui/models/view.state.model"],function(e,t,i,s,n,o,r){"use strict";function a(e,t){return this._getFactory(e,t,!0).property}function c(e,t){return!!this._getFactory(e,t,!1)}return s.Controller.extend({"constructor":function(t){this.cid=e.uniqueId("context"),s.Controller.prototype.constructor.apply(this,arguments),this._factories={},e.each(this.options.factories,function(e,t){e.internal=!0}),this.viewStateModel=r},"getModel":a,"getCollection":a,"getObject":a,"hasModel":c,"hasCollection":c,"hasObject":c,"getFactory":function(e,t){return this._getFactory(e,t,!0)},"clear":function(e){return o.info("Clearing the context started.")&&console.log(o.last),this.triggerMethod("before:clear",this),e&&e.all?this._destroyAllFactories():this._destroyNonPermanentFactories(),o.info("Clearing the context succeeded.")&&console.log(o.last),this.triggerMethod("clear",this),this},"fetch":function(i){o.info("Fetching the context started.")&&console.log(o.last),this.triggerMethod("request",this),this._destroyTemporaryFactories();var s=this,r=e.chain(this._factories).filter(function(e){return s._isFetchable(e)}).map(function(t){var s=i?e.clone(i):{};return t.fetch(s)}).compact().value();return t.when.apply(t,r).then(function(){o.info("Fetching the context succeeded.")&&console.log(o.last),s.triggerMethod("sync",s)},function(e,i,r){var a=new n.Error(e);return o.error("Fetching the context failed: {0}",a)&&console.error(o.last),s.triggerMethod("error",a),t.Deferred().reject(a)})},"_isFetchable":function(e){return!e.options.detached&&(e.isFetchable?e.isFetchable():!!e.fetch)},"_destroyTemporaryFactories":function(){this._factories=e.pick(this._factories,function(e){if(!e.options.temporary)return!0;e.destroy()},this)},"_destroyNonPermanentFactories":function(){this._factories=e.pick(this._factories,function(e){if(e.options&&e.options.permanent)return!0;e.destroy()},this)},"_destroyAllFactories":function(){e.each(this._factories,function(e){e.destroy()}),this._factories={}},"_getPropertyName":function(t,i){i||(i={});var s=i.attributes||{};return i.unique&&(s=e.extend({"stamp":e.uniqueId()},s)),e.reduce(s,function(e,t,i){return null==t?e:null!==e?e+"-"+i+"-"+t:i+"-"+t},t.prototype.propertyPrefix)},"_getFactory":function(t,s,n){if("string"==typeof t)return this._factories[t];s||(s={});var o,r,a,c=t.prototype.propertyPrefix,l=this.options.factories||{};s.internal?!(o=s[c])||o.internal||o instanceof i.Model||(r={"attributes":o.attributes,"unique":o.unique}):(o=s[c],void 0!==o||e.isEmpty(s)||(a=e.omit(s,"detached","permanent","temporary","unique"),e.isEmpty(a)||(s[c]=e.defaults(a,l[c]))),e.defaults(s,{"internal":!0},l),r={"attributes":s.attributes,"unique":s.unique},r.attributes||!o||o.internal||o instanceof i.Model||(r={"attributes":o.attributes,"unique":o.unique}));var u=this._getPropertyName(t,r),d=this._factories[u];return!d&&n&&(s.factoryName=u,d=new t(this,s),this._factories[u]=d),d}})}),csui.define("csui/utils/contexts/context.plugin",["csui/lib/underscore","csui/lib/backbone"],function(e,t){"use strict";function i(e){this.context=e.context}return e.extend(i.prototype,t.Events,{"isFetchable":function(e){}}),i.extend=t.Model.extend,i}),csui.define("csui/utils/contexts/impl/node.opening.context",["csui/utils/contexts/context","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/next.node","csui/utils/node.links/node.links","csui/utils/contexts/factories/user"],function(e,t,i,s,n){"use strict";var o={"fields":{"properties":[],"columns":[],"versions.element(0)":["mime_type"]},"includeResources":["metadata","perspective"]};return e.extend({"constructor":function(s){e.prototype.constructor.apply(this,arguments),this.connector=this.getObject(t,{"permanent":!0,"detached":!0}),this.user=this.getModel(n,{"permanent":!0}),this.nextNode=this.getModel(i,{"options":o,"permanent":!0,"detached":!0}).on("change:id",this.onNextNodeChanged,this)},"_isFetchable":function(t){return e.prototype._isFetchable.apply(this,arguments)&&(t.property!==this.user||!this.user.get("id"))},"openNodePage":function(e){this.triggerMethod("before:open:page",this,this.nextNode),window.open(s.getUrl(e))}})}),csui.define("csui/utils/contexts/factories/previous.node",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/node/node.model"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"previousNode","constructor":function(i,r){s.prototype.constructor.apply(this,arguments);var a=i.getObject(n,r),c=e.config();this.property=new o(void 0,t.defaults({"connector":a},c.options))}})}),csui.define("csui/utils/contexts/impl/delayed.actions.for.node",["csui/utils/commands","csui/utils/defaultactionitems"],function(e,t){"use strict";function i(i){i.resetCommands(),i.resetDefaultActionCommands(),i.setCommands(e.getAllSignatures()),i.setDefaultActionCommands(t.getAllCommandSignatures(e)),i.setEnabledDelayRestCommands(!0,!1)}function s(e){e.nextNode.delayRestCommands&&(e.nextNode.delayedActions.on("request",n,e).on("sync",o,e).on("error",r,e),e.nextNode.actions.on("reset update",a,e),l(e))}function n(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchStarted(),e.trigger("request",e,{},{}),e.fetching=this.nextNode.delayedActions.fetching}}function o(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchSucceeded(),e.trigger("sync",e,{},{})}}function r(){if(this.relayingActionEvents){var e=this.node.delayedActions;e._fetchFailed(),e.trigger("error",e,{},{})}}function a(){this.relayingActionEvents&&u(this)}function c(e){e.nextNode.delayRestCommands&&(e.relayingActionEvents=!1)}function l(e){e.nextNode.delayRestCommands&&(e.relayingActionEvents=!0)}function u(e){e.nextNode.delayRestCommands&&e.node.actions.reset(e.nextNode.actions.models)}return{"delayCommands":i,"relayActionEvents":s,"suppressRelayingActionEvents":c,"resumeRelayingActionEvents":l,"updateNodeActions":u}}),csui.define("csui/utils/contexts/browsing/browsing.context",["require","csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui/utils/contexts/factories/node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/impl/delayed.actions.for.node","csui-ext!csui/utils/contexts/browsing/browsing.context"],function(e,t,i,s,n,o,r){"use strict";var a={"fields":{"properties":[],"columns":[]},"includeResources":["metadata","perspective"]};return i.extend({"constructor":function(e){i.prototype.constructor.apply(this,arguments),this.on("request",this._changeNode,this),this.previousNode=this.getModel(n,{"permanent":!0,"detached":!0}),o.relayActionEvents(this),this.node=this.getModel(s,{"options":a,"permanent":!0,"detached":!0});var c=t.chain(e&&e.plugins||r).flatten(!0).unique().reverse().value();this._plugins=t.map(c,function(e){return new e({"context":this})},this),t.invoke(this._plugins,"onCreate")},"_isFetchable":function(e){return i.prototype._isFetchable.apply(this,arguments)&&t.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"onNextNodeChanged":function(){!1!==this.nextNode.get("container")?this.enterContainer():this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})},"enterContainer":function(){this.triggerMethod("before:enter:container",this,this.nextNode),this.nextNode.fetch().then(function(){return this._enteringContainer=!0,this.fetch()}.bind(this)).fail(function(e){csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString())})})},"_changeNode":function(){this._enteringContainer&&(this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes),this.node.clear({"silent":!0}),this.node.set(this.nextNode.attributes),o.updateNodeActions(this),this.nextNode.clear({"silent":!0}),this._enteringContainer=!1)},"fetch":function(){function e(){i.prototype.fetch.apply(s,t)}var t=Array.prototype.slice.apply(arguments),s=this;return!this._enteringContainer&&this.node.isFetchable()?(this.triggerMethod("before:enter:container",this,this.node),this.node.fetch().then(e)):e()}})}),csui.define("csui/utils/contexts/page/page.context",["csui/lib/underscore","csui/utils/contexts/context","csui-ext!csui/utils/contexts/page/page.context"],function(e,t,i){"use strict";return t.extend({"constructor":function(){t.prototype.constructor.apply(this,arguments);var s=e.chain(i).flatten(!0).unique().reverse().value();this._plugins=e.map(s,function(e){return new e({"context":this})},this)},"_isFetchable":function(i){return t.prototype._isFetchable.apply(this,arguments)&&e.all(this._plugins,function(e){return!1!==e.isFetchable(i)})}})}),csui.define("csui/utils/contexts/portal/portal.context",["csui/lib/underscore","csui/utils/contexts/impl/node.opening.context","csui-ext!csui/utils/contexts/portal/portal.context"],function(e,t,i){"use strict";return t.extend({"constructor":function(s){t.prototype.constructor.apply(this,arguments);var n=e.chain(s&&s.plugins||i).flatten(!0).unique().reverse().value();this._plugins=e.map(n,function(e){return new e({"context":this})},this),e.invoke(this._plugins,"onCreate")},"_isFetchable":function(i){return t.prototype._isFetchable.apply(this,arguments)&&e.all(this._plugins,function(e){return!1!==e.isFetchable(i)})},"onNextNodeChanged":function(){this.openNewNodePage()},"openNewNodePage":function(){this.openNodePage(this.nextNode),this.nextNode.clear({"silent":!0})}})}),csui.define("csui/utils/contexts/perspective/perspective.context.plugin",["csui/utils/contexts/context.plugin"],function(e){"use strict";return e.extend({"onCreate":function(){},"onApply":function(){},"onClear":function(){},"onRefresh":function(){}})}),
csui.define("csui/utils/contexts/perspective/landing.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/landing.perspectives"],function(e,t,i,s){var n=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(n.prototype);var o=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByUser":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"module":"json!csui/utils/contexts/perspective/impl/perspectives/user.json","sequence":1e4}]);return s&&r.add(e.flatten(s,!0)),r}),csui.define("csui/utils/contexts/perspective/impl/landing.perspective.context.plugin",["csui/lib/underscore","csui/utils/log","csui/utils/contexts/factories/user","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/landing.perspectives","csui/models/perspective/personalization.model"],function(e,t,i,s,n,o,r){"use strict";return n.extend({"constructor":function(e){n.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(s).on("change:id",this._fetchLandingPerspective,this),this.userFactory=this.context.getFactory(i),this.user=this.userFactory.property},"_fetchLandingPerspective":function(){this.applicationScope.id||(this.context.triggerMethod("request:perspective",this),this.userFactory.fetch({"success":e.bind(this._onUserFetchSuccess,this,this.user),"error":e.bind(this.context.rejectPerspective,this.context)}))},"_onUserFetchSuccess":function(t){r.loadPersonalization(t,this.context).then(e.bind(this._changePerspective,this,t),e.bind(this.context.rejectPerspective,this.context))},"_changePerspective":function(t,i){var s,n=o.findByUser(t);if((e.isEmpty(t.get("perspective"))&&e.isEmpty(i)||n.get("important"))&&(s=n.get("module")),s)return this.context.overridePerspective(t,s);this.context.applyPerspective(t,!1,i)}})}),csui.define("csui/utils/contexts/perspective/node.perspectives",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/node.perspectives"],function(e,t,i,s){var n=t.Model.extend({"defaults":{"sequence":100,"important":!1,"module":null},"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(i)}});i.mixin(n.prototype);var o=t.Collection.extend({"model":n,"comparator":"sequence","constructor":function(e,i){t.Collection.prototype.constructor.apply(this,arguments)},"findByNode":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),r=new o([{"equals":{"type":258},"module":"json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","sequence":100},{"equals":{"type":144},"important":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json","sequence":100},{"equals":{"container":!0},"persist":!0,"module":"json!csui/utils/contexts/perspective/impl/perspectives/container.json","sequence":1e3},{"module":"json!csui/utils/contexts/perspective/impl/perspectives/metadata.json","sequence":1e4}]);return s&&r.add(e.flatten(s,!0)),r}),csui.define("csui/utils/contexts/perspective/plugins/node/node.extra.data",["csui/lib/underscore","csui-ext!csui/utils/contexts/perspective/plugins/node/node.extra.data"],function(e,t){"use strict";return{"getModelFields":function(i){var s={};return t&&e.each(t,function(t){t.getModelFields&&e.mapObject(t.getModelFields(i),function(t,i){s[i]=e.union(s[i],t)})}),s},"getModelExpand":function(i){var s={};return t&&e.each(t,function(t){t.getModelExpand&&e.mapObject(t.getModelExpand(i),function(t,i){s[i]=e.union(s[i],t)})}),s}}}),csui.define("csui/utils/contexts/perspective/plugins/node/node.perspective.context.plugin",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/node.perspectives","csui/utils/classic.nodes/classic.nodes","csui/utils/contexts/impl/delayed.actions.for.node","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/models/perspective/personalization.model"],function(e,t,i,s,n,o,r,a,c,l,u,d,h){"use strict";function p(){this.node=this.context.getModel(s,{"options":g})}var f=e.config(),b=f.sendOriginParams,g={"fields":d.getModelFields(),"expand":d.getModelExpand(),"includeResources":["metadata","perspective"]};return a.extend({"constructor":function(e){a.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(r),this.nextNodeFactory=this.context.getFactory(n,{"options":g,"permanent":!0,"detached":!0}),this.nextNode=this.nextNodeFactory.property,u.relayActionEvents(this),this.nextNode.on("change:id",this._fetchNodePerspective,this),this.previousNode=this.context.getModel(o,{"permanent":!0,"detached":!0}),p.call(this)},"onClear":function(){this._clearModels(!0)},"onRefresh":function(){this._clearModels(!1)},"isFetchable":function(e){return e.property!==this.node},"_clearModels":function(e){function t(){this.previousNode.clear({"silent":!0}),this.previousNode.set(this.node.attributes,{"silent":!0}),e?p.call(this):this.node.clear({"silent":!0})}if("node"!==this.applicationScope.id)return t.call(this),this.nextNode.clear({"silent":!0});t.call(this);var i=!e&&(this.context.hasCollection("children")||this.context.hasCollection("children2"));if(this.node.set(this.nextNode.attributes,{"silent":i}),i){(this.context.hasCollection("children")&&this.context.getCollection("children")||this.context.hasCollection("children2")&&this.context.getCollection("children2")).once("reset update",function(){this.node.triggerAllChanges(),u.updateNodeActions(this),u.resumeRelayingActionEvents(this)},this)}else u.updateNodeActions(this),u.resumeRelayingActionEvents(this)},"_fetchNodePerspective":function(){i.trigger("closeToggleAction");var e=this.nextNode.get("id");if(!(null==e||e<=0)){this.context.triggerMethod("request:perspective",this),this.applicationScope.set("id","node"),u.suppressRelayingActionEvents(this);var s={"success":t.bind(this._onNodeFetchSuccess,this,this.nextNode),"error":t.bind(this.context.rejectPerspective,this.context)};b&&(s.headers={"X-OriginParams":location.search}),this.nextNodeFactory.fetch(s)}},"_onNodeFetchSuccess":function(e){h.loadPersonalization(e,this.context).then(t.bind(this._changePerspective,this,e),t.bind(this.context.rejectPerspective,this.context))},"_changePerspective":function(e,i){var s=l.getUrl(e);if(s)return void window.location.replace(s);var n,o=c.findByNode(e);if((t.isEmpty(e.get("perspective"))&&t.isEmpty(i)||!e.get("container")||o.get("important"))&&(n=o.get("module")),o&&e.set({"persist":o.get("persist")},{"silent":!0}),n)return this.context.overridePerspective(e,n);this.context.applyPerspective(e,!1,i)}})}),csui.define("csui/utils/contexts/perspective/search.perspectives",["module","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/rules.matching/rules.matching.mixin","csui-ext!csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,s,n){var o=e.config();t.defaults(o,{"perspectiveCollection":[{"module":"json!csui/utils/contexts/perspective/impl/perspectives/search.json","sequence":1e4}]});var r=i.Model.extend({"defaults":{"sequence":100,"module":null},"constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments),this.makeRulesMatching(t)}});s.mixin(r.prototype);var a=i.Collection.extend({"model":r,"comparator":"sequence","constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)},"findByQuery":function(e){return this.find(function(t){return t.matchRules(e,t.attributes)})}}),c=new a(o.perspectiveCollection);return n&&c.add(t.flatten(n,!0)),c}),csui.define("csui/utils/contexts/perspective/impl/search.perspective.context.plugin",["require","csui/lib/underscore","csui/lib/backbone","csui/utils/log","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives"],function(e,t,i,s,n,o,r,a){"use strict";return r.extend({"constructor":function(e){r.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(o),this.searchQuery=this.context.getModel(n,{"permanent":!0,"detached":!0}).on("change",this._fetchSearchPerspective,this)},"_fetchSearchPerspective":function(){if("search"!==this.applicationScope.get("id")){var e=a.findByQuery(this.searchQuery),t=this.searchQuery.get("forcePerspectiveChange");this.applicationScope.set("id","search"),this.context.loadPerspective(e.get("module"),t),this.listenToOnce(this.context,"sync:perspective",function(){this.searchQuery.unset("forcePerspectiveChange",{"silent":!0})})}}})}),csui.define("csui/utils/contexts/perspective/impl/metadata.perspective.context.plugin",["module","csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/lib/jquery","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/metadata.factory","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/log","csui/models/node/node.model"],function(e,t,i,s,n,o,r,a,c,l,u){"use strict";return u=u(e.id),a.extend({"constructor":function(e){a.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(o),this.metadataModel=this.context.getModel(r,{"permanent":!0,"detached":!0}).on("change:metadata_info",this._fetchMetadataPerspective,this),this.listenTo(this.context,"clear",this._prepareContext)},"_prepareContext":function(){if("properties"===this.applicationScope.get("id")){this.node=this.context.getModel(c);var e=this.metadataModel.get("metadata_info").id;this.node.set("id",e);var i=this.metadataModel.get("metadata_info"),s=!1;this.containerNode&&this.containerNode.get("id")&&(this._syncContextToNode(this.containerNode),s=!0),i.navigator?s||this.node.fetch({"success":t.bind(this._doneFetchingNode,this,this.node),"error":t.bind(this._errorFetchingNode,this,this.node)}):this.node.fetch({"success":function(){s||this._syncContextToNode(this.node)}.bind(this),"error":t.bind(this._errorFetchingNode,this,this.node)}),this.listenTo(this.node,"change:id",this._contextNodeIdChanged)}},"_doneFetchingNode":function(){var e=this.node.clone();this._contextNodeIdChanged(),e.set("id",this.node.get("parent_id")),e.fetch({"success":t.bind(this._syncContextToNode,this,e),"error":t.bind(this._errorFetchingNode,this,e)})},"_syncContextToNode":function(e){var t=this.context,i=t.viewStateModel;t.triggerMethod("sync:perspective",this.context,e),i.set(i.CONSTANTS.METADATA_CONTAINER,{"id":e.get("id"),"name":e.get("name")})},"_errorFetchingNode":function(e){u.error("Unable to fetch node {%0}. ",this.node.get("id"))},"_contextNodeIdChanged":function(){var e=t.clone(this.metadataModel.get("metadata_info"));e.id=this.node.get("id"),e.model=this.node,this.metadataModel.set("metadata_info",e)},"_fetchMetadataPerspective":function(){var e=this.metadataModel.get("metadata_info"),i=e.model;if("properties"!==this.applicationScope.get("id")){this.containerNode=this.context.getFactory(l).property,this.containerNode&&this.containerNode.get("id")&&(this.containerNode=this.containerNode.clone()),this.applicationScope.set("id","properties");var s;s=e.navigator?"metadata.navigation.json":"metadata.json",this.context.loadPerspective("json!csui/utils/contexts/perspective/impl/perspectives/"+s)}else if(i)this.node.set(i.attributes);else{var n=this.context.getModel(c);n.set("id",e.id),n.fetch({"success":function(){this.node=n.clone(),e.model=this.node}.bind(this),"error":t.bind(this._errorFetchingNode,this,n)})}}})}),csui.define("csui/utils/contexts/perspective/impl/root.perspective.context.plugin",["csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/perspective.context.plugin"],function(e,t,i,s){"use strict";var n={"myassignments":"myassignmentstable","recentlyaccessed":"recentlyaccessedtable","favorites":"favorites2.table"};return s.extend({"constructor":function(e){s.prototype.constructor.apply(this,arguments),this.applicationScope=this.context.getModel(i).on("change",this._fetchRootPerspective,this)},"_fetchRootPerspective":function(){var e=this.applicationScope.id;n[e]&&!this.loadingPerspective&&this.context.loadPerspective("json!csui/utils/contexts/perspective/impl/perspectives/"+n[e]+".json")}})}),csui.define("csui/utils/contexts/perspective/plugins/node/impl/node.extra.data",[],function(){"use strict";return{"getModelFields":function(e){return{"properties":[],"columns":[]}},"getModelExpand":function(e){return{"properties":["reserved_user_id"]}}}}),csui.define("csui/utils/contexts/factories/global.error",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory"],function(e,t,i,s){"use strict";var n=i.Model.extend({"defaults":{"message":null,"details":null}});return s.extend({"propertyPrefix":"globalError","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.globalError||{};if(!(a instanceof i.Model)){var c=e.config();a=new n(a.attributes,t.extend({},a.options,c.options)),this.options.permanent=!0}this.property=a}})}),csui.define("csui/utils/contexts/perspective/perspective.guide",["csui/lib/underscore"],function(e){function t(){}function i(e){return Object.keys(e).sort().reduce(function(t,i){return t[i]=e[i],t},{})}return t.prototype={"isNew":function(t,s){var n=i(e.omit(s,["showWidgetInMaxMode","id","canEditPerspective"])),o=i(e.omit(t,["showWidgetInMaxMode","id","canEditPerspective"]));return!e.isEqual(n,o)}},t}),csui.define("csui/utils/contexts/perspective/perspective.context",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/base","csui/utils/log","csui/utils/contexts/context","csui/utils/contexts/factories/user","csui/utils/contexts/factories/global.error","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/perspective.guide","csui-ext!csui/utils/contexts/perspective/perspective.context"],function(e,t,i,s,n,o,r,a,c,l,u,d,h){"use strict";return r.extend({"constructor":function(e){r.prototype.constructor.apply(this,arguments),t.defaults(this.options,{"online":!0}),this.perspective=new s.Model,this.perspectiveGuide=new d,this._applicationScope=this.getModel(l,{"permanent":!0,"detached":!0}),this.options.online&&(this._user=this.getModel(a,{"options":{"includeResources":["perspective"]},"permanent":!0}));var i=t.chain(e&&e.plugins||h).flatten(!0).concat([u]).unique().reverse().value();this._plugins=t.map(i,function(e){return new e({"context":this})},this),t.invoke(this._plugins,"onCreate")},"fetchPerspective":function(){return t.find(this._plugins,function(e){return e instanceof u})._fetchLandingPerspective(),this},"_destroyNonPermanentFactories":function(){r.prototype._destroyNonPermanentFactories.apply(this,arguments),t.invoke(this._plugins,"onClear")},"_isFetchable":function(e){return r.prototype._isFetchable.apply(this,arguments)&&(e.property!==this._user||!this._user.get("id"))&&t.all(this._plugins,function(t){return!1!==t.isFetchable(e)})},"loadPerspective":function(t,n){var r=i.Deferred(),a=this;o.debug('Using perspective from "{0}".',t)&&console.log(o.last),this.triggerMethod("request:perspective",this.context),this.loadingPerspective=r.promise(),e([t],function(e){var t=new s.Model({"perspective":e});a.loadingPerspective=!1,a.applyPerspective(t,n)},function(e){a.loadingPerspective=!1,a.rejectPerspective(e)})},"overridePerspective":function(i,s){var n=this;return o.debug('Overriding the perspective in {0} with "{1}".',o.getObjectName(i),s)&&console.log(o.last),e([s],function(e){i.set("perspective",e),n.applyPerspective(i)},t.bind(this.rejectPerspective,this))},"applyPerspective":function(e,t,i){this.triggerMethod("sync:perspective",this,e),this._interceptApplyPerspective(e,t).done(this._continueApplyingPerspective.bind(this,e,t,i)).fail(function(e){e&&this.rejectPerspective(e)}.bind(this))},"_continueApplyingPerspective":function(e,i,s){var n=s||e.get("perspective")||{};if(i||this.perspectiveGuide.isNew(this.perspective.attributes,n)){var r=this.viewStateModel;r&&r.set(r.CONSTANTS.ALLOW_WIDGET_URL_PARAMS,!0),this.triggerMethod("before:change:perspective",this,e),o.info("Perspective has changed")&&console.log(o.last),this.perspective.clear(),this.perspective.set(n),this.triggerMethod("change:perspective",this.perspective,e)}else{o.info("Perspective has not changed")&&console.log(o.last),this._destroyTemporaryFactories(),t.invoke(this._plugins,"onRefresh"),this.triggerMethod("retain:perspective",this,e),this.fetch()}},"rejectPerspective":function(e,t){function i(){r._informFailure(t).then(function(){r.trigger("reject:perspective")})}var r=this;t||(t=e),t instanceof Error||(t=new n.Error(t)),this.triggerMethod("error:perspective",this,t),e&&e instanceof s.Model?(e.set("id",-1,{"silent":!0}),r.trigger("current:folder:changed",e),csui.require(["json!csui/utils/contexts/perspective/impl/perspectives/error.global.json"],function(i){o.debug("Showing error perspective for {0}.",o.getObjectName(e))&&console.log(o.last),e.set("perspective",i,{"silent":!0}),r.getModel(c).set({"message":t.message,"details":t.errorDetails}),r.applyPerspective(e)},function(){i()})):i()},"_interceptApplyPerspective":function(e,s){return this._plugins.reduce(function(n,o){return n.then(function(){if(t.isFunction(o.onApply)){var n=o.onApply(e,s);return!1===n?i.Deferred().reject():n}})},i.Deferred().resolve())},"_informFailure":function(e){var s=!1,n=i.Deferred();return 0===e.statusCode&&(s=t.find(this._plugins,function(t){if(t.offlineErrorHandler)return t.offlineErrorHandler(e)})),s||csui.require(["csui/dialogs/modal.alert/modal.alert"],function(t){t.showError(e.toString()).always(n.resolve)}),n.promise()}})}),csui.define("csui/utils/contexts/factories/appcontainer",["csui/utils/contexts/factories/factory","csui/models/mixins/appcontainer/appcontainer.mixin","csui/utils/contexts/factories/ancestors","csui/utils/url","csui/lib/jquery","csui/lib/underscore"],function(e,t,i,s,n,o){"use strict";function r(e){return e.type_name=e.name,delete e.name,e}function a(e,t,i,s){e.forEach(function(e){e.trigger(t,e,i,s)})}var c=e.extend({"propertyPrefix":"appcontainer","constructor":function(t,s){e.prototype.constructor.call(this,t,s);var n=this.options.models;this.node=n.container,this.addableTypes=n.addableTypes,this.children=n.children,this.connector=this.node.connector;var o=t.getFactory(i);this.ancestors=o.property,this.listenTo(t,"request",function(){o.options.detached=!0}),this.property={},this.makeAppContainer(s)},"isFetchable":function(){return this.node.isFetchable()},"fetch":function(e){var t=this.children.getResourceFieldsUrlQuery(),i=s.combineQueryString(this.children.getBrowsableUrlQuery(),{"fields":o.without(t.fields,"properties")}),c=new s(this.connector.connection.url).getApiBase(2),l=s.combine(c,"app/container",this.node.get("id")),u=s.appendQuery(l,i),d=[this.children,this.ancestors,this.addableTypes],h=this;return a(d,"request",{},e),this.connector.makeAjaxCall({"url":u}).then(function(t,i,s){var o,c=t.results,l={"silent":!0},u=c.contents.map(function(e){return h.massageResponse(e)}),p=h.children.prefetch({"collection":t.collection,"links":t.links,"results":u},l),f=h.ancestors.prefetch({"ancestors":c.ancestors},l),b=c.add_menu;if(b)b=c.add_menu.map(r),o=h.addableTypes.prefetch(b,{"parse":!1,"silent":!0});else{var g=c.addable_node_types;g&&(o=h.addableTypes.prefetch(g,l))}return n.when(f,o,p).then(function(){return a(d,"reset",t,e),a(d,"sync",t,e),n.Deferred().resolve(t,i,s)})},function(t,i,s){return a(d,"error",t,e),n.Deferred().reject(t,i,s)})}});return t.mixin(c.prototype),c}),csui.define("csui/utils/contexts/factories/children",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/nodechildren","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"children","constructor":function(a,c){c||(c={}),s.prototype.constructor.apply(this,arguments);var l=this.options.children||{},u=l.options&&l.options.commands||r;if(!(l instanceof i.Collection)){var d=a.getModel(n,c),h=e.config();l=new o(l.models,t.defaults({"autoreset":!0,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"commands":u.getAllSignatures()},h.options,l.options,{"node":d}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/children2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.children2/node.children2","csui/utils/commands"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"children2","constructor":function(a,c){c||(c={}),s.prototype.constructor.apply(this,arguments);var l=this.options.children2||{},u=l.options&&l.options.commands||r;if(!(l instanceof i.Collection)){var d=a.getModel(n,c),h=e.config();l=new o(l.models,t.defaults({"autoreset":!0,"fields":{"properties":[]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"commands":u.getAllSignatures()},h.options,l.options,{"useSpecialPaging":c.useSpecialPaging},{"node":d}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/children"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"columns","constructor":function(t,o){s.prototype.constructor.apply(this,arguments);var r=this.options.columns||{};if(!(r instanceof i.Collection)){var a=t.getModel(n,o);e.config();r=a.columns}this.property=r}})}),csui.define("csui/utils/contexts/factories/columns2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node.columns2","csui/utils/log"],function(e,t,i,s,n,o,r){"use strict";function a(e,t){return e.map(function(e){e=e.toJSON();var i=e.key;switch(e.column_key=i,i){case"name":e.default_action=!0,e.contextual_menu=!1,e.editable=!0,e.filter_key=i;break;case"type":e.default_action=!0;break;case"modify_date":e.initialSortingDescending=!0}return t[i]=e,e.sort_key&&(e.sort=!0,delete e.sort_key),e})}function c(e,t,i){var s,n=t.get("key"),o=n.lastIndexOf("_formatted"),a=500+i;if(o>=0){if(s=e[n.substr(0,n.length-10)])return void(s.definitions_order=a)}s=e[n],s?s.definitions_order=a:r.warn('No definition found for the column "{0}".',n)}function l(e,i){return e.length!==i.length||e.some(function(e,s){var n=t.pick(i[s],d),o=t.pick(e.attributes,d);return!t.isEqual(n,o)})}r=r(e.id);var u=s.extend({"propertyPrefix":"columns2","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var r=this.options.columns2||{};if(r instanceof i.Collection)this.property=r;else{var a=r.options&&r.options.node||e.getModel(n,t);this.property=new o,this.node=a,a.columns.on("reset",this._resetColumns,this),this._resetColumns()}},"_resetColumns":function(){var e=this.node,t={},i=a(e.definitions,t);e.columns.each(c.bind(null,t)),l(this.property,i)?this.property.reset(i):this.property.trigger("remain",this.property)}}),d=["description","key","multi_value","name","type","type_name"];return u}),csui.define("csui/utils/contexts/factories/usernodepermission",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/user","csui/utils/contexts/factories/connector","csui/models/authenticated.user.node.permission"],function(e,t,i,s,n,o,r,a){"use strict";return n.extend({"propertyPrefix":"userNodePermission","constructor":function(i,c){n.prototype.constructor.apply(this,arguments);var l=this.options.userNodePermission||{},u=e.config();if(!(l instanceof s.Model)){var d=i.getObject(r,c),h=i.getModel(o);l=new a(l.attributes,t.defaults({"connector":d,"user":h,"node":this.options.node},l.options,u.options))}this.property=l},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/volume",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/node","csui/models/node/node.model"],function(e,t,i,s,n,o){return s.extend({"propertyPrefix":"volume","constructor":function(r,a){s.prototype.constructor.apply(this,arguments);var c=this.options.volume||{};if(!(c instanceof i.Model)){var l=r.getModel(n,a),u=e.config();l.setExpand("properties","volume_id"),c=new o(t.extend({},l.get("volume_id"),c.attributes||u.attributes),t.extend({"connector":l.connector},c.options,u.options)),this.listenTo(l,"change:volume_id",function(){c.set(l.get("volume_id"))})}this.property=c}})}),csui.define("csui/models/widget/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("csui/models/widget/nls/root/lang",{"searchResults":"Search Results","ra_access_date_last":"Last Accessed","ra_parent_id":"Location","ra_size":"Size","ma_type":"Type","ma_name":"Name","ma_location_name":"Location","ma_date_due":"Due Date","ma_priority":"Priority","ma_status":"Status","ma_from_user_name":"From","fav_parent_id":"Location","fav_size":"Size","owner":"Owner","created":"Created","createdBy":"Created by","modified":"Modified","size":"Size","type":"Type"}),csui.define("csui/models/widget/favorites.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f){"use strict";var b=d.extend({"constructor":function(e,t){if(e&&!e.title){var i="fav_"+e.column_key;e.title=f[i]}d.prototype.constructor.call(this,e,t)}}),g=h.extend({"model":b,"getColumnModels":function(t,i){var s=h.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!=t||(e.sort=!0)}),s}}),m=p.extend({"parse":function(e,t){var i,s;return e.data&&e.data.properties?(i=e.data.properties,s=e.data.versions):(i=e,s=e.versions),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:s&&(i.size=s.file_size)),!i.mime_type&&s&&s.mime_type&&(i.mime_type=s.mime_type),p.prototype.parse.call(this,e,t)}}),v=t.Collection.extend({"model":m,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s),this.columns=new g},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getRequestedCommandsUrlQuery(),this.getBrowsableUrlQuery());return e=i.combine(e,"/members/favorites"),t?e+"?"+t:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.columns&&this.columns.resetColumnsV2(e,this.options),this.parseBrowsedItems(e,t)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});return l.mixin(v.prototype),u.mixin(v.prototype),s.mixin(v.prototype),n.mixin(v.prototype),o.mixin(v.prototype),r.mixin(v.prototype),a.mixin(v.prototype),c.mixin(v.prototype),v}),csui.define("csui/utils/contexts/factories/favorites",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/favorites.model","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r){"use strict";return s.extend({"propertyPrefix":"favorites","constructor":function r(a,c){s.prototype.constructor.apply(this,arguments);var l=this.options.favorites||{};if(!(l instanceof i.Collection)){var u=a.getObject(n,c),d=e.config();l=new o(l.models,t.extend({"connector":u},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"includeResources":["metadata"],"commands":r.getAllSignatures()})}})}),csui.define("csui/utils/contexts/factories/favoritescolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"favorites_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/favorites2",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/favorites2","csui/utils/defaultactionitems","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a){"use strict";return s.extend({"propertyPrefix":"favorites2","constructor":function r(a,c){s.prototype.constructor.apply(this,arguments);var l=this.options.favorites||{};if(!(l instanceof i.Collection)){var u=a.getObject(n,c),d=e.config();l=new o(l.models,t.extend({"connector":u,"autoreset":!0},l.options,d.options,r.getDefaultResourceScope()))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":["mime_type","owner_id"]},"expand":{"properties":["original_id","parent_id","reserved_user_id","custom_view_search"]},"stateEnabled":!0,"includeResources":[],"commands":a.getAllSignatures()})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{
"properties":["container","id","name","original_id","type","type_name","parent_id","container","custom_view_search","version_number"],"favorites":["name","tab_id"],"versions.element(0)":["mime_type"]},"expand":{"properties":["original_id"]},"stateEnabled":!0,"includeResources":[],"commands":r.getAllCommandSignatures(a)})},"getDefaultsOnlyResourceScope":function(){return t.deepClone({"fields":{"properties":[],"favorites":["name","tab_id"],"versions.element(0)":[]},"expand":{"properties":["original_id","parent_id","reserved_user_id"]},"stateEnabled":!0,"includeResources":[],"commands":r.getAllCommandSignatures(a)})}})}),csui.define("csui/utils/contexts/factories/favorite2groups",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/favorites2","csui/models/favorite2groups","csui/utils/commands","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a){"use strict";return s.extend({"propertyPrefix":"favorites2groups","constructor":function c(l,u){s.prototype.constructor.apply(this,arguments);var d=this.options.favoriteGroups||{};if(!(d instanceof i.Collection)){var h=e.config(),p=l.getObject(n,u),f=l.getCollection(o,u);d=new r(d.models,t.extend({"favorites":f,"connector":p,"autoreset":!0,"commands":a.getAllSignatures()},d.options,h.options,c.getDefaultResourceScope()))}this.property=d},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[]}})}})}),csui.define("csui/utils/contexts/factories/favorite2columns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/favorites2"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"favorites2_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/models/widget/myassignments.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f,b){"use strict";var g=h.extend({"constructor":function(e,t){if(e&&!e.title){var i="ma_"+e.column_key;e.title=b[i]}h.prototype.constructor.call(this,e,t)}}),m=p.extend({"model":g,"constructor":function(e,t){e||(e=[{"key":"type","type":2,"sort":!0,"default_action":!0,"name":"Type"},{"key":"name","type":-1,"sort":!0,"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name","name":"Name"},{"key":"location_id","type":2,"sort":!0,"name":"Location"},{"key":"date_due","type":-7,"sort":!0,"name":"Due Date"},{"key":"priority","type":2,"sort":!0,"name":"Priority"},{"key":"status","type":2,"sort":!0,"initialSortingDescending":!0,"name":"Status"},{"key":"from_user_name","type":-1,"sort":!0,"name":"From"}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),p.prototype.constructor.call(this,e,t)},"getColumnModels":function(t,i){var s=p.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"location_id"!==t&&"date_due"!==t&&"priority"!==t&&"status"!==t&&"from_user_name"!==t||(e.sort=!0,"location_id"===t&&(e.sort_key="location_name"))}),s},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.assignments||{};!i.location_id_expand&&i.name&&(i.location_id_expand=e.clone(i.name),i.location_id_expand.key="location_id_expand",i.location_id_expand.name="Location"),!i.from_user_id_expand&&i.name&&(i.from_user_id_expand=e.clone(i.name),i.from_user_id_expand.key="from_user_id_expand",i.from_user_id_expand.name="From"),!i.location_name&&i.name&&(i.location_name=e.clone(i.name),i.location_name.key="location_name",i.location_name.name="Location Name"),!i.from_user_name&&i.name&&(i.from_user_name=e.clone(i.name),i.from_user_name.key="from_user_name",i.from_user_name.name="From");var s=e.keys(i);return this.getColumnModels(s,i)}}),v=f.extend({"parse":function(e,t){var i=e.data.assignments;i.short_name=i.name;var s=i.from_user_id_expand||{},n=s.first_name||"";return n=n+" "+(s.last_name||""),(!n.length||1===n.length&&" "===n)&&(n=s.name),i.from_user_name=n,e.data&&e.data.assignments&&(e.data.properties=e.data.assignments),f.prototype.parse.call(this,e,t)}}),y=t.Collection.extend({"model":v,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeStateRequestor(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s),this.columns=new m},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),t=i.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getStateEnablingUrlQuery(),this.getRequestedCommandsUrlQuery());return e=i.combine(e,"/members/assignments"),t?e+"?"+t:e},"parse":function(t,i){return t.results=e.filter(t.results,function(e){return 398!=e.data.assignments.type}),this.parseBrowsedState(t,i),this.parseBrowsedItems(t,i)},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands)}});u.mixin(y.prototype);var w=y.prototype._compareValues;return y.prototype._compareValues=function(e,t,i){if(e.indexOf("date")>=0){if(null===t)return 1;if(null===i)return-1}return w.apply(this,arguments)},d.mixin(y.prototype),s.mixin(y.prototype),n.mixin(y.prototype),o.mixin(y.prototype),r.mixin(y.prototype),a.mixin(y.prototype),c.mixin(y.prototype),l.mixin(y.prototype),y}),csui.define("csui/utils/contexts/factories/myassignments",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/myassignments.model","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"myassignments","constructor":function r(a,c){s.prototype.constructor.apply(this,arguments);var l=this.options.myassignments||{};if(!(l instanceof i.Collection)){var u=a.getObject(n,c),d=e.config();l=new o(l.models,t.extend({"connector":u},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)},"isFetchable":function(){return!window.csui||!window.csui.mobile||!this.property.fetched}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"assignments":[]},"stateEnabled":!0,"includeResources":["metadata"]})}})}),csui.define("csui/utils/contexts/factories/myassignmentscolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/myassignments"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"myassignments_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/models/widget/recentlyaccessed/server.adaptor.mixin",["csui/lib/underscore","csui/utils/url"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"url":function(){var e=this.connector.getConnectionUrl().getApiBase("v2"),i=t.combineQueryString(this.getAdditionalResourcesUrlQuery(),this.getResourceFieldsUrlQuery(),this.getExpandableResourcesUrlQuery(),this.getStateEnablingUrlQuery(),this.getRequestedCommandsUrlQuery(),this._getSubtypesUrlQuery());return e=t.combine(e,"/members/accessed"),i?e+"?"+i:e},"parse":function(e,t){return this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t)},"_getSubtypesUrlQuery":function(){var e="";if(this.options.recentlyAccessedSubtypes)for(var t=0;t<this.options.recentlyAccessedSubtypes.length;t++)e=e.concat("where_type=",this.options.recentlyAccessedSubtypes[t],"&");return e}})}}}),csui.define("csui/models/widget/recentlyaccessed.model",["csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/v2.additional.resources/v2.additional.resources.mixin","csui/models/mixins/v2.fields/v2.fields.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","csui/models/mixins/v2.commandable/v2.commandable.mixin","csui/models/mixins/state.requestor/state.requestor.mixin","csui/models/mixins/v2.delayed.commandable/v2.delayed.commandable.mixin","csui/models/browsable/client-side.mixin","csui/models/browsable/v2.response.mixin","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","i18n!csui/models/widget/nls/lang","csui/models/widget/recentlyaccessed/server.adaptor.mixin","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a,c,l,u,d,h,p,f,b,g){"use strict";var m=h.extend({"constructor":function(e,t){if(e&&!e.title){var i="ra_"+e.column_key;e.title=b[i]}h.prototype.constructor.call(this,e,t)}}),v=p.extend({"model":m,"constructor":function(e,t){e||(e=[{"key":"type","type":2,"sort":!0,"default_action":!0,"name":"Type"},{"key":"name","type":-1,"sort":!0,"default_action":!0,"contextual_menu":!1,"editable":!0,"filter_key":"name","name":"Name"},{"key":"reserved","type":5,"name":"Reserved"},{"key":"parent_id","type":15,"sort":!0,"name":"Parent ID"},{"key":"access_date_last","type":-7,"sort":!0,"name":"Last Accessed"},{"key":"size","type":2,"sort":!0,"name":"Size"},{"key":"modify_date","type":-7,"sort":!0,"initialSortingDescending":!0,"name":"Modified"},{"key":"favorite","type":5,"name":"Favorite"}],e.forEach(function(e,t){e.definitions_order=t+100,e.column_key=e.key})),p.prototype.constructor.call(this,e,t)},"getColumnModels":function(t,i){var s=p.prototype.getColumnModels.call(this,t,i);return e.each(s,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"access_date_last"!==t&&"modify_date"!==t&&"parent_id"!==t&&"size"!==t||(e.sort=!0,"parent_id"===t&&(e.sort_key="parent_name"))}),s},"getV2Columns":function(t){var i=t.results&&t.results[0]&&t.results[0].metadata&&t.results[0].metadata.properties||{};return!i.access_date_last&&i.modify_date&&(i.access_date_last=e.clone(i.modify_date),i.access_date_last.key="access_date_last",i.access_date_last.name="Last Accessed"),!i.parent_name&&i.name&&(i.parent_name=e.clone(i.name),i.parent_name.key="parent_name",i.parent_name.name="Location Name"),p.prototype.getV2Columns.call(this,t)}}),y=f.extend({"parse":function(e,t){var i,s,n,o;return e.data&&e.data.properties?(i=e.data.properties,s=e.data.versions,n=e.data.properties_user,o=e.data.properties.parent_id_expand):(i=e,s=e.versions,n=e.properties_user,o=e.parent_id_expanded),i.short_name=i.name,i.size||(i.container?i.size=i.container_size:s&&(i.size=s.file_size)),!i.mime_type&&s&&s.mime_type&&(i.mime_type=s.mime_type),!i.access_date_last&&n&&n.access_date_last&&(i.access_date_last=n.access_date_last),i.parent_name="",!i.parent_name&&o&&o.name&&(i.parent_name=o.name),f.prototype.parse.call(this,e,t)}}),w=t.Collection.extend({"model":y,"constructor":function(i,s){t.Collection.prototype.constructor.apply(this,arguments),s&&(this.options=e.pick(s,["connector","autoreset","includeResources","fields","expand","commands","recentlyAccessedSubtypes"])),this.makeConnectable(s).makeFetchable(s).makeAdditionalResourcesV2Mixin(s).makeFieldsV2(s).makeExpandableV2(s).makeStateRequestor(s).makeCommandableV2(s).makeClientSideBrowsable(s).makeBrowsableV2Response(s).makeDelayedCommandableV2(s).makeServerAdaptor(s),this.columns=new v},"_prepareModel":function(e,i){return i||(i={}),i.promotedActionCommands=this.promotedActionCommands,i.nonPromotedActionCommands=this.nonPromotedActionCommands,t.Collection.prototype._prepareModel.call(this,e,i)},"clone":function(){var t=new this.constructor(this.models,this.options);return this.columns&&t.columns.reset(this.columns.toJSON()),t.actualSkipCount=this.actualSkipCount,t.skipCount=this.skipCount,t.topCount=this.topCount,t.totalCount=this.totalCount,t.filteredCount=this.filteredCount,t.filters=e.deepClone(this.filters),t.orderBy=this.orderBy,t.expand=e.clone(this.expand),t.includeActions=this.includeActions,t.includeCommands=e.clone(this.includeCommands),t.defaultActionCommands=e.clone(this.defaultActionCommands),t.commands=e.clone(this.commands),t},"getResourceScope":function(){return e.deepClone({"fields":this.fields,"expand":this.expand,"includeResources":this._additionalResources,"commands":this.commands,"defaultActionCommands":this.defaultActionCommands})},"setResourceScope":function(e){this.excludeResources(),e.includeResources&&this.includeResources(e.includeResources),this.resetFields(),e.fields&&this.setFields(e.fields),this.resetExpand(),e.expand&&this.setExpand(e.expand),this.resetCommands(),e.commands&&this.setCommands(e.commands),this.resetDefaultActionCommands(),e.defaultActionCommands&&this.setDefaultActionCommands(e.defaultActionCommands)}});return u.mixin(w.prototype),d.mixin(w.prototype),i.mixin(w.prototype),s.mixin(w.prototype),n.mixin(w.prototype),o.mixin(w.prototype),r.mixin(w.prototype),a.mixin(w.prototype),c.mixin(w.prototype),l.mixin(w.prototype),g.mixin(w.prototype),w}),csui.define("csui/utils/contexts/factories/recentlyaccessed",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/recentlyaccessed.model","csui/utils/commands","csui/utils/defaultactionitems","csui/utils/deepClone/deepClone"],function(e,t,i,s,n,o,r,a){"use strict";return s.extend({"propertyPrefix":"recentlyaccessed","constructor":function r(a,c){s.prototype.constructor.apply(this,arguments);var l=this.options.recentlyaccessed||{};if(!(l instanceof i.Collection)){var u=a.getObject(n,c),d=e.config();l=new o(l.models,t.extend({"connector":u,"recentlyAccessedSubtypes":d.recentlyAccessedSubtypes},l.options,d.options,r.getDefaultResourceScope(),{"autoreset":!0}))}this.property=l},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"stateEnabled":!0,"includeResources":["metadata"],"commands":r.getAllSignatures()})},"getLimitedResourceScope":function(){return t.deepClone({"fields":{"properties":["container","id","name","original_id","type","type_name","parent_id","reserved","custom_view_search","version_number"],"versions.element(0)":["mime_type"]},"expand":{"properties":["parent_id","reserved_user_id"]},"stateEnabled":!0,"includeResources":[],"commands":a.getAllCommandSignatures(r)})}})});csui.define("csui/utils/contexts/factories/recentlyaccessedcolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/recentlyaccessed"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"recentlyaccessed_columns","constructor":function(e,t){s.prototype.constructor.apply(this,arguments);var o=this.options.columns||{};if(!(o instanceof i.Collection)){o=e.getCollection(n,t).columns}this.property=o}})}),csui.define("csui/utils/contexts/factories/member",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/member"],function(e,t,i,s,n,o){"use strict";return s.extend({"propertyPrefix":"member","constructor":function(r,a){s.prototype.constructor.apply(this,arguments);var c=this.options.member||{};if(!(c instanceof i.Model)){var l=r.getObject(n,a),u=e.config();c=new o(c.attributes||u.attributes,t.defaults({"connector":l},c.options,u.options))}this.property=c},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i){"use strict";return{"mixin":function(t){return e.extend(t,{"makeSearchMetadataResponse":function(e){return this},"parseSearchMetadataResponse":function(e,t){return e}})}}}),csui.define("csui/models/widget/search.results/search.metadata/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone"],function(e,t,i){"use strict";return{"mixin":function(i){return e.extend(i,{"makeServerAdaptor":function(e){return this},"sync":function(i,s,n){var o=t.Deferred();return n=e.defaults({"parse":!0},n),this.trigger("request",this,{},n),setTimeout(function(){n.success.call(n.context,{},"success",{}),o.resolve()}.bind(this)),o.promise()},"parse":function(e,t){return this.parseSearchMetadataResponse(e,t)}})}}}),csui.define("csui/models/widget/search.results/search.metadata/search.metadata.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.results/search.metadata/search.metadata.mixin","csui/models/widget/search.results/search.metadata/server.adaptor.mixin"],function(e,t,i,s,n,o,r){"use strict";var a=i.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),c=i.Collection.extend({"model":a,"comparator":"sequence","constructor":function e(t,i){e.__super__.constructor.apply(this,arguments),this.makeConnectable(i).makeFetchable(i).makeSearchMetadataResponse(i).makeServerAdaptor(i)},"getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new c(this.map(function(e){return e.attributes}))}});return s.mixin(c.prototype),n.mixin(c.prototype),o.mixin(c.prototype),r.mixin(c.prototype),c}),csui.define("csui/utils/contexts/factories/search.metadata.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/models/widget/search.results/search.metadata/search.metadata.model"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"searchMetadata","constructor":function(o,r){s.prototype.constructor.apply(this,arguments);var a=this.options.metadata||{};if(!(a instanceof i.Collection)){var c=e.config();a=new n(a.models,t.extend({},a.options,c.options))}this.property=a},"isFetchable":function(){return!!this.options},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("csui/utils/contexts/factories/task.queue.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/taskqueue"],function(e,t,i,s,n){return s.extend({"propertyPrefix":"taskQueue","constructor":function(i){s.prototype.constructor.apply(this,arguments);var o=this.options.taskQueue||{};if(!(o instanceof n)){var r=e.config();o=new n(t.extend({},o.options,r.options))}this.property=o}})}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/document.overview"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/favorites2.table.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/favorites2.table"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/container.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/nodestable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/metadata.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/metadata","options":{}}}]}]}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/metadata.navigation.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/metadata.navigation"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/myassignmentstable.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/myassignmentstable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/recentlyaccessedtable.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/recentlyaccessedtable"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/search.json",{"type":"left-center-right","options":{"center":{"type":"csui/widgets/search.results","className":"search-results-container"}}}),csui.define("json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json",{"type":"grid","options":{"rows":[{"columns":[{"sizes":{"md":12},"heights":{"xs":"half"},"widget":{"type":"csui/widgets/placeholder","options":{"label":"Saved Query","color":"#fff","bgcolor":"#cccc88"}}},{"sizes":{"md":12},"heights":{"xs":"full"},"widget":{"type":"csui/widgets/search.results","options":{}}}]}]}}),csui.define("csui/models/widget/search.box/server.adaptor.mixin",["csui/lib/underscore","csui/lib/jquery","csui/utils/url"],function(e,t,i){"use strict";return{"mixin":function(s){return e.extend(s,{"makeServerAdaptor":function(e){return this},"url":function(){return i.combine(this.connector.connection.url,"searchbar?enterprise_slices=true")},"parse":function(e,i){var s=e.options.fields.slice.optionLabels,n=e.schema.properties.slice.enum,o={};return o.slices=[],t.each(n,function(e){o.slices.push({"sliceId":n[e],"sliceDisplayName":s[e]})}),o}})}}}),csui.define("csui/models/widget/search.box.model",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/url","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/widget/search.box/server.adaptor.mixin"],function(e,t,i,s,n,o,r){"use strict";var a=i.Model.extend({"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.call(this,e,t),this.makeConnectable(t).makeFetchable(t).makeServerAdaptor(t)}});return n.mixin(a.prototype),o.mixin(a.prototype),r.mixin(a.prototype),e.extend(a.prototype,{"isFetchable":function(){return!!this.options}}),a}),csui.define("csui/utils/contexts/factories/search.box.factory",["module","csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","csui/models/widget/search.box.model"],function(e,t,i,s,n,o,r){"use strict";var a=/\bprefetch(?:=([^&]*)?)/i.exec(location.search);a=!a||"false"!==a[1];var c;return n.extend({"propertyPrefix":"searchBox","constructor":function(i,c){n.prototype.constructor.apply(this,arguments);var l=this.options.searchBox||{},u=e.config();if(a&&(this.initialResponse=l.initialResponse||u.initialResponse),!(l instanceof s.Collection)){var d=i.getObject(o,c);l=new r(l.attributes||u.attributes,t.defaults({"connector":d},l.options,u.options,{"autofetch":!0}))}this.property=l},"isFetchable":function(){return this.property.isFetchable()},"fetch":function(e){if(this.initialResponse&&!c){var t=this.property.prefetch(this.initialResponse,e);return c=!0,t}return this.property.fetch(e)}})}),csui.define("csui/temporary/activeviews/icons/icons",[],function(){"use strict";return[{"equals":{"type":30309},"className":"csui-icon mime_active_view","sequence":30},{"equals":{"type":30303},"className":"csui-icon mime_web_report","sequence":30}]}),csui.define("csui/temporary/appearances/icons/icons",[],function(){"use strict";return[{"equals":{"type":480},"className":"csui-icon mime_appearance","sequence":30}]}),csui.define("css!csui/temporary/cop/icons/icons",[],function(){}),csui.define("csui/temporary/cop/icons/icons",["css!csui/temporary/cop/icons/icons"],function(){"use strict";return[{"equals":{"type":356},"className":"csui-icon csui-temporary-cop-blog","sequence":30},{"equals":{"type":357},"className":"csui-icon mime_blog_entry","sequence":30},{"equals":{"type":1257},"className":"csui-icon mime_collaborative_place","sequence":30},{"equals":{"type":123475},"className":"csui-icon mime_faq","sequence":30},{"equals":{"type":123476},"className":"csui-icon mime_faq_entry","sequence":30},{"equals":{"type":123469},"className":"csui-icon mime_forum","sequence":30},{"equals":{"type":123470},"className":"csui-icon mime_forum_topics_replies","sequence":30},{"equals":{"type":130},"className":"csui-icon mime_topic","sequence":30},{"equals":{"type":5573},"className":"csui-icon mime_wiki","sequence":30},{"equals":{"type":5574},"className":"csui-icon mime_wiki_page","sequence":30},{"equals":{"type":3030202},"className":"csui-icon mime_community","sequence":30}]}),
csui.define("bundles/csui-data",["csui/behaviors/default.action/default.action.behavior","csui/behaviors/default.action/impl/defaultaction","csui/behaviors/keyboard.navigation/retainfocus.behavior","csui/behaviors/keyboard.navigation/tabkey.behavior","csui/behaviors/widget.container/widget.container.behavior","csui/controls/error/error.view","csui/controls/globalmessage/globalmessage","css!csui/controls/globalmessage/globalmessage_icons","csui/controls/grid/grid.view","csui/controls/node-type.icon/node-type.icon.view","csui/controls/progressblocker/blocker","csui/controls/globalmessage/impl/progresspanel/progresspanel.view","i18n!csui/controls/globalmessage/impl/nls/globalmessage.lang","csui/controls/perspective.panel/perspective.animator","csui/controls/perspective.panel/perspective.panel.view","csui/controls/breadcrumbs/breadcrumbs.view","csui/controls/form/pub.sub","csui/controls/mixins/keyboard.navigation/modal.keyboard.navigation.mixin","csui/controls/tab.panel/tab.panel.view","csui/controls/tab.panel/tab.links.ext.scroll.mixin","csui/controls/tab.panel/tab.links.ext.view","csui/controls/tab.panel/impl/tab.link.ext.view","csui/controls/tab.panel/impl/tab.contents.view","csui/controls/tab.panel/behaviors/common.keyboard.behavior.mixin","csui/controls/tab.panel/behaviors/tab.contents.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.contents.proxy.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.links.keyboard.behavior","csui/controls/tab.panel/behaviors/tab.panel.keyboard.behavior","csui/controls/tab.panel/impl/tab.link.view","csui/controls/tab.panel/impl/tab.links.view","i18n!csui/controls/tab.panel/impl/nls/lang","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/controls/mixins/global.alert/global.alert.mixin","csui/controls/mixins/view.state/metadata.view.state.mixin","csui/controls/mixins/view.state/node.view.state.mixin","csui/controls/tile/behaviors/blocking.behavior","csui/controls/tile/behaviors/infinite.scrolling.behavior","csui/controls/tile/behaviors/parent.scrollbar.updating.behavior","csui/controls/tile/behaviors/perfect.scrolling.behavior","csui/controls/tile/behaviors/searching.behavior","csui/dialogs/modal.alert/modal.alert","csui/perspectives/flow/flow.perspective.view","csui/perspectives/grid/grid.perspective.view","csui/perspectives/left-center-right/left-center-right.perspective.view","csui/perspectives/single/single.perspective.view","csui/perspectives/tabbed/tabbed.perspective.view","csui/perspectives/tabbed-flow/tabbed-flow.perspective.view","csui/perspectives/zone/zone.perspective.view","csui/perspectives/mixins/perspective.edit.mixin","csui/pages/start/perspective.router","csui/pages/start/perspective.routing","csui/pages/start/impl/landing.perspective.router","csui/pages/start/impl/node.perspective.router","csui/pages/start/impl/search.perspective.router","csui/pages/start/impl/metadata.perspective.router","csui/pages/start/impl/root.perspective.router","i18n!csui/pages/start/impl/nls/lang","csui/utils/classic.nodes/impl/core.classic.nodes","csui/utils/content.helper","csui/utils/handlebars/l10n","csui/utils/impl/core.defaultactionitems","csui/utils/non-attaching.region/non-attaching.region","csui/utils/non-emptying.region/non-emptying.region","csui/utils/script-executing.region/script-executing.region","csui/utils/node.links/impl/core.node.links","csui/utils/open.authenticated.page","csui/utils/smart.nodes/impl/core.smart.nodes","csui/utils/taskqueue","csui/behaviors/keyboard.navigation/tabables.behavior","csui/behaviors/keyboard.navigation/tabable.region.behavior","csui/models/node/node.addable.type.factory","csui/controls/perspective.panel/perspective.factory","csui/utils/contexts/context","csui/utils/contexts/context.plugin","csui/utils/contexts/browsing/browsing.context","csui/utils/contexts/page/page.context","csui/utils/contexts/portal/portal.context","csui/utils/contexts/perspective/impl/landing.perspective.context.plugin","csui/utils/contexts/perspective/plugins/node/node.perspective.context.plugin","csui/utils/contexts/perspective/impl/search.perspective.context.plugin","csui/utils/contexts/perspective/impl/metadata.perspective.context.plugin","csui/utils/contexts/perspective/impl/root.perspective.context.plugin","csui/utils/contexts/perspective/plugins/node/node.extra.data","csui/utils/contexts/perspective/plugins/node/impl/node.extra.data","csui/utils/contexts/perspective/landing.perspectives","csui/utils/contexts/perspective/node.perspectives","csui/utils/contexts/perspective/perspective.context","csui/utils/contexts/perspective/perspective.guide","csui/utils/contexts/perspective/perspective.context.plugin","csui/utils/contexts/perspective/search.perspectives","csui/utils/contexts/factories/ancestors","csui/utils/contexts/factories/appcontainer","csui/utils/contexts/factories/children","csui/utils/contexts/factories/children2","csui/utils/contexts/factories/columns","csui/utils/contexts/factories/columns2","csui/utils/contexts/factories/connector","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/global.error","csui/utils/contexts/factories/node","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/user","csui/utils/contexts/factories/usernodepermission","csui/utils/contexts/factories/volume","csui/utils/contexts/factories/application.scope.factory","csui/utils/contexts/factories/favoritescolumns","csui/utils/contexts/factories/favorite2groups","csui/utils/contexts/factories/favorites","csui/utils/contexts/factories/favorites2","csui/utils/contexts/factories/favorite2columns","csui/utils/contexts/factories/myassignmentscolumns","csui/utils/contexts/factories/myassignments","csui/utils/contexts/factories/recentlyaccessedcolumns","csui/utils/contexts/factories/recentlyaccessed","csui/utils/contexts/factories/member","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.metadata.factory","csui/utils/contexts/factories/metadata.factory","csui/utils/contexts/factories/task.queue.factory","csui/pages/start/impl/location","json!csui/utils/contexts/perspective/impl/perspectives/document.overview.json","json!csui/utils/contexts/perspective/impl/perspectives/favorites2.table.json","json!csui/utils/contexts/perspective/impl/perspectives/container.json","json!csui/utils/contexts/perspective/impl/perspectives/metadata.json","json!csui/utils/contexts/perspective/impl/perspectives/metadata.navigation.json","json!csui/utils/contexts/perspective/impl/perspectives/myassignmentstable.json","json!csui/utils/contexts/perspective/impl/perspectives/recentlyaccessedtable.json","json!csui/utils/contexts/perspective/impl/perspectives/search.json","json!csui/utils/contexts/perspective/impl/perspectives/saved.query.json","csui/widgets/error/error.view","csui/utils/contexts/factories/search.query.factory","csui/utils/contexts/factories/search.box.factory","csui/temporary/activeviews/icons/icons","csui/temporary/appearances/icons/icons","csui/temporary/cop/icons/icons","i18n!csui/models/widget/nls/lang"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"csui/bundles/csui-data",!0)}),csui.define("csui/pages/start/impl/perspective.factory",["csui/controls/perspective.panel/perspective.factory"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.factory" instead.'),e}),csui.define("csui/pages/start/impl/perspective.router",["csui/utils/routing"],function(e){"use strict";function t(){}return t.routesWithSlashes=e.routesWithSlashes,t}),csui.define("csui/pages/start/impl/perspective.panel/perspective.animator",["csui/controls/perspective.panel/perspective.animator"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.animator" instead.'),e}),csui.define("csui/pages/start/impl/perspective.panel/perspective.panel.view",["csui/controls/perspective.panel/perspective.panel.view"],function(e){"use strict";return console.warn('DEPRECATED: depend on the module "csui/controls/perspective.panel/perspective.panel.view" instead.'),e});
//# sourceMappingURL=csui-data.js.map