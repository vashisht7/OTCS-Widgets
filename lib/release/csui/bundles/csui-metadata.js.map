{"version":3,"sources":["../../src/controls/tableheader/comment/comment.button.view.js","../../src/widgets/metadata/versions.toolbaritems!csui-ext","../../src/widgets/metadata/versions.toolbaritems.js","../../src/widgets/metadata/impl/metadata.tabcontentcollection.view.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems!csui-ext","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.js","../../src/widgets/metadata/impl/header/rightbar/toolbaritems.masks.js","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template!hbs","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu!css","../../src/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view.js","../../src/widgets/metadata/versions.toolbaritems.mask!csui-ext","../../src/widgets/metadata/versions.toolbaritems.mask.js","../../src/widgets/metadata/header.item.name/menuitems!csui-ext","../../src/widgets/metadata/header.dropdown.menu.items.js","../../src/widgets/metadata/header.dropdown.menu.items.mask.js","../../src/widgets/metadata/impl/metadata!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name!css","../../src/widgets/metadata/impl/header/item.name/metadata.item.name.view.js","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!hbs","../../src/widgets/metadata/impl/header/leftbar/header.leftbar!css","../../src/widgets/metadata/impl/header/leftbar/header.leftbar.view.js","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!hbs","../../src/widgets/metadata/impl/header/rightbar/header.rightbar!css","../../src/widgets/metadata/impl/header/rightbar/header.rightbar.view.js","../../src/widgets/metadata/impl/header/metadata.header!hbs","../../src/widgets/metadata/impl/header/metadata.header!css","../../src/widgets/metadata/impl/header/metadata.header.view.js","../../src/widgets/metadata/property.panels/categories/impl/category.form.view.js","../../src/widgets/metadata/metadata.general.form.fields!csui-ext","../../src/widgets/metadata/metadata.general.form.fields.js","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view!css","../../src/widgets/metadata/general.form.fields/impl/general.form.fields.view.js","../../src/widgets/metadata/general.form.fields/general.form.field.behavior.js","../../src/widgets/metadata/metadata.general.action.fields!csui-ext","../../src/widgets/metadata/metadata.general.action.fields.js","../../src/widgets/metadata/general.action.fields/impl/general.action.fields.view.js","../../src/widgets/metadata/general.action.fields/general.action.field.behavior.js","../../src/widgets/metadata/general.panels/node/server.adaptor.mixin.js","../../src/widgets/metadata/general.panels/node/node.general.form.model.js","../../src/widgets/metadata/general.panels/document/document.general.form.model.js","../../src/widgets/metadata/general.panels/node/impl/node.general.form!hbs","../../src/widgets/metadata/general.panels/node/impl/node.general.form!css","../../src/widgets/metadata/general.panels/node/node.general.form.view.js","../../src/widgets/metadata/general.panels/document/impl/document.general.form!hbs","../../src/widgets/metadata/general.panels/document/impl/document.general.form!css","../../src/widgets/metadata/general.panels/document/document.general.form.view.js","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.model.js","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!hbs","../../src/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form!css","../../src/widgets/metadata/general.panels/shortcut/shortcut.general.form.view.js","../../src/widgets/metadata/general.panels/url/url.general.form.model.js","../../src/widgets/metadata/general.panels/url/impl/url.general.form!hbs","../../src/widgets/metadata/general.panels/url/impl/url.general.form!css","../../src/widgets/metadata/general.panels/url/url.general.form.view.js","../../src/widgets/metadata/metadata.general.panels!csui-ext","../../src/widgets/metadata/metadata.general.panels.js","../../src/widgets/metadata/property.panels/general/metadata.general.property.controller.js","../../src/widgets/metadata/metadata.property.panels!csui-ext","../../src/widgets/metadata/metadata.property.panels.js","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!hbs","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu!css","../../src/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view.js","../../src/widgets/metadata/add.properties/toolbaritems!csui-ext","../../src/widgets/metadata/add.properties.menuitems.js","../../src/widgets/metadata/add.properties.menuitems.mask.js","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!hbs","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header!css","../../src/widgets/metadata/impl/tab.contents.header/tab.contents.header.view.js","../../src/widgets/metadata/impl/metadata.properties.view.js","../../src/widgets/metadata/metadata.properties.view.js","../../src/widgets/metadata/impl/metadata.properties.content.view.js","../../src/utils/versions.default.action.items!csui-ext","../../src/utils/versions.default.action.items.js","../../src/widgets/metadata/impl/versions/metadata.versions.columns.js","../../src/widgets/metadata/impl/versions/metadata.versions!hbs","../../src/widgets/metadata/impl/versions/metadata.versions!css","../../src/widgets/metadata/impl/versions/metadata.versions.view.js","../../src/models/audit/server.adaptor.mixin.js","../../src/models/audit/audit.collection.js","../../src/widgets/metadata/impl/audit/metadata.audit.columns.js","../../src/widgets/metadata/impl/audit/metadata.audit!hbs","../../src/widgets/metadata/impl/audit/metadata.audit!css","../../src/widgets/metadata/impl/audit/metadata.audit.view.js","../../src/widgets/metadata/metadata.panels!csui-ext","../../src/widgets/metadata/metadata.panels.js","../../src/controls/tab.panel/impl/tab.link.dropdown!hbs","../../src/controls/tab.panel/impl/tab.link.dropdown.view.js","../../src/controls/tab.panel/impl/tab.links.dropdown!hbs","../../src/controls/tab.panel/impl/tab.links.dropdown!css","../../src/controls/tab.panel/tab.links.dropdown.view.js","../../src/widgets/metadata/impl/metadata.dropdowntab.view.js","../../src/widgets/metadata/impl/metadata.controller.js","../../src/widgets/metadata/metadata.view.js","../../src/widgets/metadata/metadata.action.one.item.properties.view.js","../../src/widgets/metadata/impl/common/base.metadata.action.view.js","../../src/widgets/metadata/impl/add.properties/metadata.add.categories.view.js","../../src/widgets/metadata/metadata.add.categories.controller.js","../../src/widgets/metadata/metadata.add.item.controller.js","../../src/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior.js","../../src/widgets/metadata/impl/metadata.navigation.list.view.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!hbs","../../src/widgets/metadata/impl/metadata.navigation.list.behavior.js","../../src/widgets/metadata/impl/common/metadata.action.multiple.items!css","../../src/widgets/metadata/impl/common/metadata.action.multiple.items.view.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller.js","../../src/widgets/metadata/impl/add.items/metadata.add.item.controller.js","../../src/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller.js","../../src/widgets/metadata/metadata.add.document.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller.js","../../src/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller.js","../../src/widgets/metadata/metadata.copy.move.items.controller.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!hbs","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang.js","../../src/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation!css","../../src/widgets/metadata/impl/metadatanavigation/metadatanavigation.view.js","../../src/widgets/metadata.navigation/impl/nls/lang.js","../../src/widgets/metadata.navigation/impl/nls/root/lang.js","../../src/widgets/metadata.navigation/impl/metadata.navigation!css","../../src/widgets/metadata.navigation/metadata.navigation.view.js","../../src/widgets/document.overview/impl/nls/lang.js","../../src/widgets/document.overview/impl/nls/root/lang.js","../../src/widgets/document.overview/impl/document.overview!hbs","../../src/widgets/document.overview/impl/document.overview!css","../../src/widgets/document.overview/document.overview.view.js","../../src/widgets/document.overview/document.overview.manifest.json!json","../../src/widgets/metadata/metadata.manifest.json!json","../../src/widgets/metadata.navigation/metadata.navigation.manifest.json!json","../../src/widgets/document.overview/impl/nls/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/root/document.overview.manifest.js","../../src/widgets/document.overview/impl/nls/document.overview.manifest!i18n","../../src/widgets/metadata/impl/nls/metadata.manifest.js","../../src/widgets/metadata/impl/nls/root/metadata.manifest.js","../../src/widgets/metadata/impl/nls/metadata.manifest!i18n","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest.js","../../src/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest!i18n","csui-metadata.js"],"names":["csui","define","require","_","Marionette","ViewEventsPropagationMixin","TabableRegionBehavior","CommentButtonView","View","extend","className","behaviors","behaviorClass","constructor","options","call","this","listenTo","model","render","self","CommentDialogView","contentRegion","Region","el","window","s","contexts","config","roId","get","commentDialogView","connector","nodeid","CSID","context","triggerMethod","propagateEventsToViews","show","prototype","lang","ToolItemsFactory","extraToolItems","TooItemModel","toolbarItems","tableHeaderToolbar","main","signature","name","ToolbarItemVersionInfo","icon","svgId","ToolbarItemVersionDownload","ToolbarItemVersionDelete","ToolbarItemPromoteVersion","maxItemsShown","dropDownIcon","dropDownSvgId","rightToolbar","ToolbarItemVersionPurgeAll","hAlign","each","moduleToolItems","toolItems","key","targetToolbar","Error","toolItem","addItem","TabContentCollectionView","base","attributes","apply","arguments","currentlyFocusedElement","event","reverseDirection","shiftKey","elToFocus","currentlyFocusedElementInternal","totalElements","keyboardBehavior","tabableElements","length","cursor","isElementVisibleInParent","$el","elementCursor","module","ToolItemMask","GlobalMenuItemsMask","ToolbarItemsMasks","globalMask","toolbars","reduce","toolbar","mask","normalize","source","extendMask","storeMask","hbs","Handlebars","t","template","1","depth0","helpers","partials","data","3","5","helper","escapeExpression","cancel_edit_name_tooltip","helperMissing","hash","compiler","stack1","goBack","sidebarToggleTitle","nameAria","unless","read_only","fn","program","inverse","noop","show_dropdown_menu","edit_name_id","placeholder_text","required_tooltip","edit_name","hideCancelButton","registerPartial","btnId","showMoreAria","showMoreTooltip","hasCommands","$","log","Backbone","commands","ToolItemView","NodeCollection","FilteredToolItemsCollection","DropdownMenuBehavior","PerfectScrollingBehavior","lazyloadingTemplate","GlobalMessage","id","CompositeView","childView","childViewContainer","childViewOptions","role","command","collection","findWhere","templateHelpers","uniqueId","showMore","ui","dropdownToggle","dropdownMenu","loadingIconsDiv","PerfectScrolling","contentParent","suppressScrollX","includePadding","status","nodes","container","containerCollection","delayedActions","toolItemsMask","reorderOnSort","defaults","originatingView","addClass","result","_triggerMenuItemAction","_closeToggle","_hide","_show","actions","_updateMenuItems","silentFetch","refilter","onRender","fetching","fetchingNonPromotedActions","binf_dropdown","find","removeClass","adjustDropdown","bind","trigger","dropdownLeftOffset","offset","left","originatingViewLeftOffest","dropdownWidth","outerWidth","originatingViewWidth","width","margin","innerWidth","rightOffset","renderLazyActions","node","lazyActionsRetrieved","isLocallyCreatedNode","isLocallyCreated","nonPromotedActionCommands","append","setEnabledLazyActionCommands","done","newCollection","lazyActions","blockingEle","animate","remove","models","filter","isDestroyed","_isDestroyed","children","undefined","push","addChild","renderTextOnly","fail","request","error","showMessage","message","on","debounce","delegateEvents","blockingElement","onRenderCollection","onDestroy","undelegateEvents","off","dropdownToggleEl","parent","hasClass","toolItemView","args","setTimeout","targetView","execute","resp","warn","console","last","dynamicMasks","_updateMask","modified","restoreMask","silent","forEach","oldExtraToolItems","addExtraToolItems","dropdownMenuList","ToolbarItemInformation","ToolbarItemCopyLink","ToolbarItemEdit","ToolbarItemEmailLinkShort","ToolbarItemPermissions","ToolbarItemRename","ToolbarItemDownload","ToolbarItemReserve","ToolbarItemUnreserve","ToolbarItemCopy","ToolbarItemMove","ToolbarItemAddVersion","ToolbarItemDelete","ToolbarCollect","MenuItemZipAndDownload","shortcut","ToolbarItemOriginalCopyLink","ToolbarItemOriginalEdit","ToolbarItemOriginalShare","ToolbarItemOriginalReserve","ToolbarItemOriginalUnreserve","ToolbarItemOriginalCopy","ToolbarItemOriginalMove","ToolbarItemOriginalDownload","ToolbarItemOriginalDelete","NodeTypeIconView","DropdownMenuView","versionCommands","versionToolbarItems","VersionsToolbarItemsMask","dropdownMenuItems","DropdownMenuItemsMask","VersionModel","ItemNameBehavior","i18n","MetadataItemNameView","ItemView","modelHasEmptyName","readonly","placeHolderName","emptyObjectNameAria","cancelEditNameTooltip","switch_language_tooltip","switchLanguageTooltip","showDropdownMenu","goBackTooltip","expand","mode","contextMenuDiv","nameEditDiv","nameInput","nameEditCancelIcon","titleError","toggleIcon","toggleWrapper","backEle","titleHeader","modelEvents","change","events","keydown","mouseenter","mouseleave","keydown @ui.nameInput","click @ui.toggleIcon","click @ui.backEle","keydown @ui.toggleIcon","keydown @ui.backEle","keydown @ui.toggleWrapper","ItemName","nameSchema","_nameSchema","toggleSideBar","keyCode","type","toggleSideBarEvent","preventDefault","stopPropagation","setToggleIconTabIndex","attr","leftBar","parentWrapper","closest","sideBarEle","toggleClass","direction","hide","collapse","sideBarHidden","that","promise","Event","ensureTitleLabelIcon","required","_updateName","settings","rtl","addItemPlaceHolderName","_createDropdownMenu","cid","view","_onWindowResize","_applyToggle","Object","mdn","is","_removeToggle","_destroyDropdownMenu","focus","_toggleEditMode","validate","dropdownMenuView","cancelEventsToViewsPropagation","destroy","oView","isVersionModel","toolbarItemsMask","dropdownMenuListInProperties","showPermissionView","showPropertiesCommand","ddm","metadataScenario","prop","resizeTimer","clearTimeout","_setHideShowToggleButton","isLandscape","matchMedia","matches","isPortrait","navBar","css","display","positin","editing","_nodeIconView","triggerMethodOn","onMouseEnterName","onMouseLeaveName","onKeyDown","parents","inputBoxNameChange","setInputBoxValue","_validateAndSave","currentValue","getValue","trim","inputValue","getInputBoxValue","setValue","sender","success","showInlineError","clearInlineError","_onKeyInView","target","onKeyInView","edit","setFocus","value","iName","setEditModeFocus","_getErrorMessageFromResponse","err","setReadOnly","setPlaceHolder","updateNameSchema","val","placeholder","back_button","showBackIcon","back","click @ui.back","e","srcElement","onClickClose","right_label","close_metadata_button_tooltip","is_shortcut","show_close_icon","TableToolbarView","ApplicationScopeModelFactory","BooleanFieldView","MetadataHeaderRightBarView","LayoutView","templateValues","showCloseIcon","closeMetadataButtonTooltip","showShortcutSwitch","shortcutNode","right_static_label","viewOriginalMessage","original","viewShortcutMessage","regions","extraToolbarRegion","shortcutSwitchLabel","closeIcon","click @ui.shortcutSwitchLabel","click @ui.closeIcon","toolbarItemsMasks","showExtraRightActionBar","_showExtraRightActionBar","applicationScope","getModel","removeContainer","toolbarView","onClickShortcutSwitch","4","show_only_required_fields_switch","7","9","10","12","14","xif","MetadataHeaderLeftBarView","MetadataHeaderView","showRequiredFieldsSwitch","only_required_fields_label","onlyRequiredFieldsLabel","leftbar","header","rightbar","click .metadata-header","_createMetadataHeaderLeftBarView","_createMetadataItemNameView","_createMetadataHeaderRightBarView","leftbarView","lbv","viewNode","metadataItemNameView","inv","_getNameSchema","action","rightbarView","rbv","onBeforeDestroy","requiredFieldSwitchView","onClickHeader","$elem","getNameInputBoxValue","validateName","getNameValue","setNameEditModeFocus","generalForm","first","formSchema","properties","Url","FormView","_saveField","_disableItem","onRequestProcessing","propagatedView","metadataView","values","getValues","_saveChanges","changes","isDataUpdating","keys","_validate","_removeInternalProperties","_blockActions","makeAjaxCall","url","combine","urlBase","response","_updateMetadataToken","jqxhr","preValues","form","formField","propertyId","refresh","always","unblockActions","_unblockActions","Deferred","reject","resolve","categoryData","categoryId","stateId","categorySchema","stateSchema","stateData","propertyName","debug","metadata_token","metadataTokenValue","state","categories","childrenByPropertyId","extraGeneralFormFields","MetadataGeneralFormFieldModel","Model","sequence","controller","controllerOptions","MetadataGeneralFormFieldCollection","Collection","comparator","metadataGeneralFormFields","flatten","add","CollectionView","getChildView","fieldDescriptor","fieldDescriptors","formModel","formView","generalFormView","fetchedModels","displayedModels","layoutMode","formViewOptions","_triggerRenderForms","map","formViewId","once","without","GeneralFormFieldCollectionView","ModalAlert","Behavior","_insertFieldExtensions","_emptyExtensionRegion","getGeneralFormFieldValues","formValues","fieldRegion","currentView","roles","roleName","fieldParent","getOption","isFunction","fieldViewOptions","fieldModels","pluck","fieldViews","empty","getFieldDescriptors","methodName","parameters","forms","promises","chain","fieldControllerDescriptor","Controller","method","compact","when","then","generalActionFields","MetadataGeneralActionFieldModel","MetadataGeneralActionFieldCollection","metadataGeneralActionFields","GeneralActionFieldCollectionView","getGeneralActionFieldValues","NodeSpriteCollection","SizeView","FormModel","NodeResourceMixin","prototypeExt","makeServerAdaptor","nodeId","str","sformat","connection","parse","schema","title","general","omit","_addCreatorInfo","_addOwnerInfo","_addCreateDateInfo","_addModifyDateInfo","_addMimeTypeInfo","_addSizeInfo","_addItemidInfo","_ensurePlaceholder","_addReserveInfo","_addMimeTypeClassNameInfo","ret","sizeView","column","has","size","getValueData","formattedValue","fields","hidden","label","formFieldSizeLabel","alpacaPlaceholderNotAvailable","itemId","formFieldItemIdLabel","tooltip","create_date","format","modify_date","ownerField","isOwnerExists","owner","type_control","NoOwner","formatMemberName","create_user_id","creator","mime_type","findTypeByNode","formFieldTypeLabel","mimeTypeClassName","findClassByNode","description","desc","alpacaPlaceholderDescription","reserve_info","formFieldReservedByLabel","mixin","ServerAdaptorMixin","NodeGeneralFormModel","makeNodeResource","column_name","sizeVal","getReadableFileSizeString","DefaultActionBehavior","GeneralFormFieldBehavior","GeneralActionFieldBehavior","formTemplate","NextNodeModelFactory","defaultAction","generalFormFields","generalFormFieldDescriptors","generalActionFieldDescriptors","fieldToRefresh","union","fetch","_stopListeningToThumbnailClick","defaultActionController","getAction","noDefaultActionExist","formTemplateHelpers","type_name","node_name","showThumbnail","showSize","size_formatted","reserved","openDoc","aria_label","openDocAria","_getLayout","layout","alpaca","bindings","_getBindings","owner_user_id","version_number_name","owner_id","field","targetField","isThumbnailView","thumbnailViewState","save","wait","patch","updateRenderedForm","updateReserveFieldDisplay","_showDefaultImage","_listenToThumbnailClick","checkAndScrollElemToViewport","currentTarget","listenToOnce","async","nonReadOnlyFields","$form","updateForm","isReservedClicked","isUnreservedClicked","alpacaForm","requiredSwitch","requireSwitched","i","thumbnail","imgUrl","reserveInfoElem","defaultThumbnailEl","_thumbnailClickHandler","_handleThumbnailClick","enabled","nextNode","_closeMetadata","Thumbnail","NodeGeneralFormView","_showImage","doc_name","imgSrc","imgAlt","docPreviewAlt","loadUrl","img","thumbnailNotLoadedEl","one","evt","clientHeight","clientWidth","split","indexOf","SpecificNodeModel","SyncableMixin","ShortcutGeneralFormModel","makeSyncableFromMultipleSources","_mergeSources","specificNodeModel","nodeGeneralFormModel","specProperties","generalProperties","set","sync","specNodeModel","nodeGeneralModel","specificModelPromise","generalModelPromise","syncFromMultipleSources","NodeModelFactory","temporary","original_id","UrlGeneralFormModel","DocumentGeneralFormModel","DocumentGeneralFormView","ShortcutGeneralFormView","UrlGeneralFormView","RulesMatchingMixin","extraGeneralPanels","MetadataGeneralPanelModel","contentModel","contentView","contentViewOptions","makeRulesMatching","MetadataGeneralPanelCollection","findByNode","item","matchRules","generalPanels","equals","getPropertyPanels","generalPanel","_getGeneralPanel","getPropertyPanelsForCreate","deferred","getPropertyPanelsForMove","_getPropertyPanelsForMoveAndCopy","getPropertyPanelsForCopy","panel","MetadataGeneralPropertyController","extraPropertyPanels","MetadataPropertyPanelModel","MetadataPropertyPanelCollection","metadataPropertyPanels","addTitleTooltip","BlockingView","at","addNewProperties","formCollection","originalFormCollection","blockingParentView","delegate","imbue","toolItemFactory","_reRender","_isRendered","_isRendering","_ensureLazyActionsRetrieved","suppressAddProperties","addNewCat","aria-haspopup","aria-label","_onClickAddButton","_executeAction","executeOptions","inheritance","parentView","addPropertiesCallback","cancelled","actionsCommands","lazyActionsAreRetrieved","addPropertiesActionsAreRetrieved","isNodeLocallyCreated","nonPromotedCommands","actionsAreRetrieved","getSignatures","additionalPropertiesCommands","getAdditionalActionCommands","addPropertiesToolbar","addNewCategory","requiredFieldsLabelId","PubSub","tabContentsHeaderTemplate","tagName","leftTabContentsHeader","rightTabContentsHeader","tabContentsHeaderTitle","requiredSwitchEle","requiredSwitchIcon","click @ui.requiredSwitchIcon","pubsubPostFix","objPubSubId","_changeTabTitle","_showRequiredSwitch","isRequiredCatPresent","_hideRequiredSwitch","html","requiredFieldSwitchModel","labelId","fieldvalue","reset","curVal","onClickRequiredIconDiv","onClickWriteField","flagWriteField","hideRequiredFieldsSwitch","TabPanelView","TabLinkCollectionViewExt","TabLinksScrollMixin","CategoryFormView","AppliedCategoryCollection","MetadataFormCollection","MetadataUtils","AddPropertiesDropdownMenuView","AddPropertiesMenuItemsMask","TabContentHeaderView","MetadataTabContentCollectionView","AppliedCategoryActionsCollection","urlResource","fetched","categories_add","MetadataPropertiesViewImpl","classNames","isTouchBrowser","topAlignLabel","rtlEnabled","_propertyPanels","formMode","allForms","_generalFormFieldDescriptors","_generalActionFieldDescriptors","isTabable","notTabableRegion","delete_icon","tabType","extraScrollTopOffset","delete_tooltip","removeCategoryTooltip","getContentView","TabLinkCollectionViewClass","TabContentCollectionViewClass","searchTabContentForTabableElements","tabContentAccSelectors","scrollXMarginOffset","scrollYMarginOffset","enforcedRequiredAttrsForFolders","tempNode","clone","autoreset","newCategories","removedCategories","widths","_updateToTextAreaScrollbar","blockActions","_checkFormFetching","_syncForms","_fetchingForms","_fetchForms","_resetRequiredSwitchView","flag","overlay","onRendered","resolveHasRequiredFields","has_required_fields","tabLinks","tabContentHeader","addPropertiesView","contentHeaderRegion","_updateScrollbar","scrollTop","top","_getModelFromCollectionByTitle","isString","_getModelIndex","index","_activateTab","modelOrTitle","matchIndex","_activateTabByIndex","activeTab","findByIndex","activate","_activateSelectedPropertyTab","selectedProperty","dataFetched","singleFormModel","hasRequiredField","_createAddPropertiesView","_initializeOthers","metadataUtils","AlpacaFormOptionsSchemaHaveRequiredFields","_setTablinksAttributes","stopListening","tabContent","_onDeleteCategory","updateTitle","allFormsRendered","formRendered","childViewContent","content","isRenderFinished","formHtmlRegion","hideStickyHeader","_onRequiredSwitch","before","_hideNotRequiredFormFields","apv","firstVisibleTabLink","firstVisibleTab","tabModel","findByModel","isActive","_computeTablinkWidth","_enableToolbarState","objPubSubTabId","innerText","metadataHeaderView","onShow","tabLinksBar","tabLinksBarWidth","totalTablinksWidth","numTabs","$tabLink","oneTablinkWidth","totalWidthCheck1","totalWidthCheck2","onPanelActivated","validateForms","allFormsValid","tab","isCurrentFormValid","_hideValidationError","_showValidationError","getFormsValues","formFieldValues","formFieldRoles","category","catId","toString","isEmpty","removedCatId","generalTab","_addValidationErrorElement","after","validationErrorElem","hideValidationErrorMessageIconTooltip","formValidationErrorMessage","_clearValidationError","_loadPanels","_loadGeneralFormFields","_loadGeneralActionFields","panelModels","where","role_name","panelModelsLength","categoryModels","sortBy","toLowerCase","concat","_normalizeModels","_checkCategoriesActions","showError","getPropertyPanelsFailTitle","categoryActions","autofetch","cat","serverError","_getRespError","getCategoryActionsFailTitle","getActionsForACategoryFailMessage","gotoPreviousTooltip","gotoPreviousCategoryTooltip","gotoNextTooltip","gotoNextCategoryTooltip","_initializeToolbars","_listenToTabEvent","siblings","newWidth","widForEle","dirForEle","tabLinksEle","tabLinksEleWidth","parseInt","replace","addCatAt","respModel","catModel","doAddModelProperties","additionalAddOpts","tabContentRendered","_autoScrollTabTo","animationOff","newTab","removeAttr","_listenToTabIdEvent","formContent","newFormView","renderEvent","tabLink","tabToDelete","categoryName","removeCategoryWarningTitle","removeCategoryWarningMessage","confirmWarning","_removeCategory","isNumber","_removeTab","fullUrl","removeCategoryFailMessageTitle","removeCategoryFailMessage","previousIndex","_index","previousTab","hideNotRequired","appliedToWholeForm","_hideTabLinkByRequiredSwitch","_showTabLinkByRequiredSwitch","onReorder","tabLinkViews","_views","keysSortedByIndex","sort","view1","view2","currentTabPosition","responseJSON","MessageHelper","hasMessages","toHtml","text","clear","MetadataPropertiesView","MetadataPropertiesContentView","tabOptions","childTabPanelView","_ensureViewIsIntact","mdv","ActionItemCollection","extraActions","defaultActionItems","TableColumnModel","idAttribute","TableColumnCollection","getColumnKeys","deepClone","align","versionColumnVersionNumberTitle","versionColumnSizeTitle","LayoutViewEventsPropagationMixin","ToolbarView","DelayedToolbarView","TableView","PaginationView","Accessibility","TableRowSelectionToolbarView","ToolbarCommandController","NodeColumnCollection","NodeVersionCollection","metadataVersionsColumns","accessibleTable","isAccessibleTable","defaultPageSize","defaultPageSizes","MetadataVersionsTableView","tableRowSelectionToolbarView","tableView","childContainer","paginationView","tableRowSelectionToolbarRegion","tableRegion","paginationRegion","pageSize","ddItemsList","__super__","selectedNodes","getAllSignatures","onlyClientSideDefinedColumns","versions","commandController","_setTableView","_setTableRowSelectionToolbar","_setTableRowSelectionToolbarEventListeners","_setPagination","propagateEventsToRegions","_updateCollection","_tableRowSelectionToolbarView","tableColumns","columns","columnsWithSearch","orderBy","actionItems","contains","cmdOption","actionItem","cmd","toolbarCommandController","selectedChildren","defaultDDList","skipPaginationUpdateRequest","apiUrl","getApiBase","query","combineQueryString","getBrowsableUrlQuery","parseBrowsedState","resetColumnsV2","auditEvents","results","audit_event_types","audit","isFetchable","ConnectableMixin","FetchableMixin","BrowsableMixin","BrowsableV2ResponseMixin","BrowsableV1RequestMixin","NodeChildrenColumnModel","NodeChildrenColumnCollection","NodeModel","auditObject","auditName","auditDate","userIdKey","dateType","AuditColumnModel","AuditColumnCollection","resetCollection","getV2Columns","getColumnModels","columnKeys","definitions","metadata","audit_name","audit_date","user_id","AuditEventModel","AuditEventCollection","AuditModel","AuditCollection","makeConnectable","makeFetchable","makeBrowsable","makeBrowsableV2Response","makeBrowsableV1Request","date","user","ConnectorFactory","metadataAuditTableColumns","MemberCollection","UserView","MetadataAuditTableView","initialize","getObject","eventsSearchBoxView","searchBoxes","searchBox","eventDropDownOpts","doNotShowDropDown","tableCaptionView","accFocusedColumn","getUserSearchboxOptions","memberFilter","limit","displayText","highlighter","lightWeight","getEventSearchboxOptions","_retrieveDisplayText","_retrieveEvents","filteredModels","focused","showHintOnFocus","dropDownOpts","lookup","afterSelect","clearOnSelect","valueChangedEventName","keywords","menu","userSearchOptions","eventSearchOptions","columnsWithTypeaheadSearchbox","selectColumn","haveDetailsRowExpandCollapseColumn","wfElementID","customLabels","emptyTableText","auditNoResultsPlaceholder","extraPanels","MetadataPanelModel","MetadataPanelCollection","metadataPanels","counter","uniqueTabId","TabLinkView","itemTemplate","_linkClicked","link","binf_tab","_parent","addToolTipContent","single_item","TabLinkDropDownView","collectionTemplate","TabLinksDropdownKeyboardBehavior","toggle","menuButton","selectedLabel","selected","activeTabIndex","selectedTabTitle","selectedTab","_setSelection","_getModelIndexByPropertyValue","_refreshSelection","_updateSelection","propertty","indexToReturn","some","selectedId","menuItems","onChildviewClickLink","onChildviewClearActiveTab","pick","activateDropdownTab","TabLinkDropDownCollectionView","implementTabContentsDefaultKeyboardHandling","delayTabContent","tabs","_buildTabs","_nodeChanged","customProperties","executeCommand","prepend","onActivateTab","tabPane","dropdownElement","_updateTabs","_convertCollection","hasChanged","MetadataController","Events","createItem","formsValues","version","MetadataDropdownTabView","MetadataViewStateMixin","CommandHelper","PermissionsView","MetadataModelFactory","MetadataView","disableViewState","_isViewStateModelEnabled","isMetadataNavigation","_backToPreviousPerspective","unset","initialPanel","assignTo","shortcutResourceScope","getResourceScope","setResourceScope","actionsPromise","_ensureCompleteNode","supportOriginatingView","baseOriginatingView","_saveItemName","metadataTabView","getViewStateDropdown","viewStateModel","onViewStateChanged","mhv","_listenToDropdownSelection","selection","getDefaultViewStateDropdown","dropDownName","setViewStateDropdown","default","_onDropDownSelectionChanged","resultsView","shortcutOriginal","itemName","metadataController","originalNodeInCollection","contextualNode","errorMsg","failedToSaveName","_ensureCompleteVersionNode","checkExpansion","property","isObject","setExpand","expandable","invoke","actionsNeeded","restoreLastRouter","_setNextNodeModelFactory","origView","MetadataActionOneItemPropertiesView","metadataPropertiesView","_updateSchema","setNameFieldFocus","suppressHeaderView","extraViewClass","bNameIsValid","bFormsAreValid","parent_id","firstFocusCalled","DialogView","BaseMetadataActionView","baseDisplayForm","dialogOptions","okAction","OkButtonClick","_cancelAction","cancelAction","CancelButtonClick","buttons","OkButtonTitle","defaultDialogOkButtonTitle","click","CancelButtonTitle","defaultDialogCancelButtonTitle","actionToken","CancelButtonActionToken","disabled","dialogTitle","defaultDialogTitle","dialog","largeSize","buttonModel","footerView","button","updateButton","buttonAttributes","FormCollection","MetadataAddCategoriesView","displayForm","catName","catCollection","metadataAddItemPropView","baseUIOptions","callerProcessData","addNewCategoryDialogTitle","okButtonTitle","addNewCategoryDialogAddButtonTitle","_addCategory","error2","catData","category_id","formData","FormData","JSON","stringify","contentType","processData","addNewCategoryFailTitle","addNewCategoryFailMessage","AppliedCategoryFormModel","NodePicker","MetadataAddCategoriesController","AddNewCategory","startLocation","selectableTypes","unselectableNodes","selectMultiple","selectCategoryTitle","globalSearch","selectButtonLabel","selectCategoryButtonLabel","_loadNewCategoryForm","_displayAddCategoryForm","resp3","error3","_getCategoryModel","formOptions","resp2","formType","categoryExistsMessage","allowDeleteCat","pId","inheritanceVal","ajaxOptions","categoryForm","categoryOptions","categoryModel","allow_delete","removeable","loadNewCategoryFailTitle","loadNewCategoryFailMessage","nodeSpriteCollection","MetadataAddItemController","getAtLeastOneNode","addableTypeName","addItemMetadataDialogTitleGeneric","addItemView","completeFormCollection","addItemMetadataDialogTitle1","addButtonTitle","addItemMetadataDialogButtonAddTitle","_addItem","cancelButtonActionToken","updateButtons","getButtons","buttonView","enable","failedToCreateItem","responseText","TabPosition","none","list","refreshTabableElements","selIndex","selectedIndex","selectedElem","selectedIndexElem","_focusHeader","headerFocusable","headerElement","_focusList","getSelectedIndex","getSelectedItem","_setFocus","_headerIsInFocus","_listIsInFocus","inFocus","_checkFocusAndSetCurrentTabPosition","_setFirstAndLastFocusable","_resetFocusedListElem","_moveTo","$preElem","clickBack","selectAt","which","_selectFirst","_selectLast","_selectPrevious","_selectNext","SimpleListView","MetadataNavigationListKeyboardBehavior","nameAttribute","enableIcon","initialActivationWeight","onRenderItem","onBeforeDestroyItem","verNum","thumbnailView","image_url","show_required","enforcedRequire","enforcedRequiredAttrs","titleEl","cssClasses","validated","requiredPassedTooltip","requiredTooltip","onBeforeShow","_showChildViews","_showScrollPosition","internal","navigationRegion","initiallySelected","findIndex","setSelectedIndex","firstSelected","MetadataNavigationListView","MetadataNavigationListBehavior","jsonPath","MetadataActionMultipleItemsView","commonCategories","initialFormData","requiredFields","initiallySelectedModel","_getInitiallySelectedModel","applyFlag","_subscribeToMetadataViewEvents","setInitialCategories","onClickItem","onClickBack","_showNode","validateAndSetValuesToNode","cancelClick","advanced_versioning","getRequiredFields","resultType","nonValidateFields","nonValidateFieldsIds","nvField","match","reqFieldId","reqField","n","validateAndSetValuesToAllNode","valid","formsValid","_checkForAlpacaRequiredFields","reqArray","nullCount","arrayElement","toArray","checkNull","element","Array","childElement","iValue","iKey","onItemNameChanged","newName","selectedItem","MetadataAddMultipleItemsController","_getCommonCategories","metadataAddItems","addItemsMetadataDialogTitle","addDocumentMetadataDialogAddButtonTitle","_addItems","allValid","extended_data","extendedData","missingRequiredMetadataForObjects","MetadataAddOneItemController","addItemsRequiredMetadata","items","openMetadata","file","tempName","utilOptions","docParentId","addableType","newFiles","grep","ContainerHasEnforcedEmptyRequiredMetadata","hasRequiredMetadata","metadataDeferred","_addOneItemWithRequiredMetadata","_addMultipleItemsWithRequiredMetadata","_makeNodeCollectionFromItems","addDocumentMetadataDialogTitle","addFolderMetadataDialogTitle","addItemMetadataDialogButtonUploadTitle","folderLen","fileLen","nodesLen","cmdStatus","addDocumentsMetadataDialogTitle","addFoldersMetadataDialogTitle","fileObject","itemObject","MetadataAddMultipleDocsController","missingRequiredMetadataForDocuments","MetadataAddDocumentController","fileUploadCollection","fileModels","fileUploadModel","cmdOptions","userAction","MetadataCopyMoveOneItemController","_CopyMoveItem","MetadataCopyMoveMultipleItemsController","_CopyMoveItems","modelValid","ActionCollection","MetadataCopyMoveItemsController","CopyMoveItemsWithMetadata","CopyMoveItemsRequiredMetadata","_copyMoveItemsWithMetadata","targetFolder","_copyMoveOneItemWithRequiredMetadata","_copyMoveMultipleItemsWithRequiredMetadata","ContainerHasEnforcedEmptyRequiredMetadataOnNodes","requiredMetadata","enforcedItems","enfItem","copyOneItemMetadataDialogTitle","copyItemsMetadataDialogButtonTitle","moveOneItemMetadataDialogTitle","moveItemsMetadataDialogButtonTitle","_extendDialogTitle","copyMultipleItemsMetadataDialogTitle","moveMultipleItemsMetadataDialogTitle","extDialogTitle","inheritanceOriginalProperties","inheritanceDestinationProperties","inheritanceMergedProperties","root","en-us","en","searchPlaceholder","versionsTitle","MetadataNavigationView","_addUrlParametersSupport","getViewStateSelectedProperty","getThumbnailViewState","inMetadataNavigationView","isTabularView","metadataNavigationView","isExpandedView","_getBackButtonTitle","cascadeDestroy","_modelIdChanged","getPrototypeOf","viewStateMode","metadataContainer","getViewStateId","setViewStateId","_moveToNextItemAfterDeleteOrMove","nextIndex","indexOfItemDeleteOrMove","onItemBeforeDelete","onItemDeleted","onItemBeforeMove","onItemMoved","removedNode","setSelectedElementByModelId","getItemByModelId","setSelectedElement","onMetadataClose","_getCommonContainerId","addUrlParameters","FetchNodeFailTitle","FetchNodeFailMessage","ChildrenCollectionFactory","Children2CollectionFactory","NodesTableView","MetadataNavigationViewImpl","DefaultActionController","nodeExtraData","useV2RestApi","_ensureCompleteData","mnv","_loadingDataByMetadata","loadCollectionAfterModel","_loadCollection","ensureModelInCollection","setCollectionToOptions","metadataModel","metadataInfo","contextCollection","ensureFetched","getCollection","defaultActionCommands","getAllCommandSignatures","delayRestCommands","setFields","getModelFields","response2","_showFetchNodeFailMessage","errorObj","ToolbarItemOpen","ToolbarItemProperties","location","docPreviewImgAlt","created","createdBy","ownedBy","lambda","ParentCellView","CommentView","FavoriteStarView","documentOverviewTemplate","DocumentOverviewView","_createModel","reloadWidget","parentNode","click .command-btn","click .thumbnail_section","onBackButton","history","_updateFieldsToRefersh","_handleClickThumbnail","stopImmediatePropagation","_executeCommand","_handleClickButton","reserved_user_id","maxLength","minLength","hideInitValidationError","rows","_updateModel","getLastRouterInfo","_showNodeIcon","_showMetadataItemName","_showThumbnail","_addLocationView","_addCommentView","_addFavoriteView","_checkDescriptionContent","_checkEditPermission","_overrideDefaultScroll","validateInputName","_destroyThumbnail","thumbnailSet","hasOwnProperty","renderLocation","nameEdit","commentOptions","commentView","descEle","favoriteOptions","popoverAtBodyElement","favoriteView","_destroyForm","parentEl","margin-top","height","overflow-y","padding-top","$schema","kind","select_types","toolItemMasks","widgetTitle","widgetDescription","idTitle","idDescription","initialPanelTitle","initialPanelDescription","dropdownMenuTitle","dropdownMenuDescription","addPropertiesTitle","addPropertiesDescription","styleLoad"],"mappings":"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","file":"csui-metadata.js","sourcesContent":["csui.define('csui/controls/tableheader/comment/comment.button.view',['require',\r\n  'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior'\r\n], function (require,\r\n    _,\r\n    Marionette,\r\n    ViewEventsPropagationMixin,\r\n    TabableRegionBehavior) {\r\n\r\n  var CommentButtonView = Marionette.View.extend({\r\n\r\n    className: 'csui-comment-button',\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function CommentButtonView(options) {\r\n      Marionette.View.call(this, options);\r\n      this.listenTo(this.model, 'change', this.render);\r\n    },\r\n\r\n    render: function () {\r\n      var self = this;\r\n      require(['esoc/widgets/utils/commentdialog/commentdialog.view'],\r\n          function (CommentDialogView) {\r\n            var contentRegion = new Marionette.Region({\r\n              el: self.el\r\n            });\r\n\r\n            var globalConfig = (typeof window.require !== \"undefined\") ?\r\n                               window.require.s.contexts._.config :\r\n                               window.csui.require.s.contexts._.config;\r\n            globalConfig.roId = self.model.get('id');\r\n\r\n            var commentDialogView = new CommentDialogView({\r\n              connector: self.model.connector,\r\n              nodeid: self.model.get('id'),\r\n              CSID: self.model.get('id'),\r\n              model: self.model,\r\n              context: self.options.context\r\n            });\r\n\r\n            commentDialogView.listenTo(commentDialogView, 'before:render', function () {\r\n              self.triggerMethod('before:render', self);\r\n            });\r\n            commentDialogView.listenTo(commentDialogView, 'render', function () {\r\n              self.triggerMethod('render', self);\r\n            });\r\n\r\n            self.propagateEventsToViews(commentDialogView);\r\n            contentRegion.show(commentDialogView);\r\n          }, function () {}\r\n      );\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(CommentButtonView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return CommentButtonView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems',['csui/lib/underscore',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/controls/toolbar/toolitem.model'\r\n], function (_, lang, ToolItemsFactory, extraToolItems, TooItemModel) {\r\n\r\n  var toolbarItems = {\r\n\r\n    tableHeaderToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"VersionProperties\",\r\n              name: lang.ToolbarItemVersionInfo,\r\n              icon: \"icon icon-toolbar-metadata\",\r\n              svgId: \"themes--carbonfiber--image--generated_icons--action_properties32\"\r\n            },\r\n            {\r\n              signature: \"VersionDownload\",\r\n              name: lang.ToolbarItemVersionDownload\r\n            },\r\n            {\r\n              signature: \"VersionDelete\",\r\n              name: lang.ToolbarItemVersionDelete\r\n            },\r\n            {\r\n              signature: \"PromoteVersion\",\r\n              name: lang.ToolbarItemPromoteVersion\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 5,\r\n          dropDownIcon: \"icon icon-toolbar-more\",\r\n          dropDownSvgId: \"themes--carbonfiber--image--generated_icons--action_more32\"\r\n        }),\r\n    rightToolbar: new ToolItemsFactory(\r\n        {\r\n          main: [\r\n            {\r\n              signature: \"PurgeAllVersions\",\r\n              name: lang.ToolbarItemVersionPurgeAll\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          hAlign: \"right\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.tabcontentcollection.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.contents.view',\r\n    'csui/utils/base'\r\n], function(_, TabContentCollectionView, base) {\r\n\r\n    // This view is specific to metadata view which overrides the 'currentlyFocusedElement' function such that \r\n    // only the tab contents elements visible in the current view port of the are focused on TAB and SHIFT+TAB.\r\n\r\n    var MetadataTabContentCollectionView = TabContentCollectionView.extend({\r\n\r\n        constructor: function MetadataTabContentCollectionView(attributes, options) {\r\n            TabContentCollectionView.prototype.constructor.apply(this, arguments);\r\n            _.extend(this, {\r\n                currentlyFocusedElement: function(event) {\r\n                    var reverseDirection = event && event.shiftKey;\r\n                    var elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    var totalElements = this.keyboardBehavior.tabableElements.length;\r\n                    var cursor =  (reverseDirection ? totalElements - 1 : 0);\r\n                    while(!base.isElementVisibleInParent(elToFocus, this.$el, 1, 1) && \r\n                            cursor >= 0 && cursor < totalElements) { \r\n                        event.elementCursor = cursor = cursor  + (reverseDirection ? -1 : 1);\r\n                        elToFocus = this.currentlyFocusedElementInternal(event);\r\n                    }\r\n                    return elToFocus;\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    return  MetadataTabContentCollectionView;\r\n});\n","\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/impl/header/rightbar/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel, extraToolItems) {\r\n  'use strict';\r\n  \r\n  var toolbarItems = {\r\n\r\n    rightToolbar: new ToolItemsFactory({\r\n          main: [\r\n          ]\r\n        }\r\n    )\r\n  };\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  // Keep the keys in sync with csui/widgets/search.results/toolbaritems\r\n  var toolbars = ['rightToolbar'];\r\n\r\n  function ToolbarItemsMasks() {\r\n    var config = module.config(),\r\n        globalMask = new GlobalMenuItemsMask();\r\n    // Create and populate masks for every toolbar\r\n    this.toolbars = _.reduce(toolbars, function (toolbars, toolbar) {\r\n      var mask = new ToolItemMask(globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        source = source[toolbar];\r\n        if (source) {\r\n          mask.extendMask(source);\r\n        }\r\n      });\r\n      // Enable restoring the mask to its initial state\r\n      mask.storeMask();\r\n      toolbars[toolbar] = mask;\r\n      return toolbars;\r\n    }, {});\r\n  }\r\n\r\n  ToolbarItemsMasks.toolbars = toolbars;\r\n\r\n  return ToolbarItemsMasks;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"title-edit-icon-div\\\"></div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-metadata-item-name-dropdown\\\"></div>\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"    <span class=\\\"csui-undo edit-cancel inline-edit-icon\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.cancel_edit_name_tooltip || (depth0 != null ? depth0.cancel_edit_name_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"cancel_edit_name_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-metadata-item-name\\\">\\r\\n<span class=\\\"csui-toggle-wrapper binf-hidden\\\">\\r\\n  <span class=\\\"icon circular1 arrow_back cs-go-back binf-hidden1\\\" style=\\\"display:none;\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBack || (depth0 != null ? depth0.goBack : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBack\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n  <span class=\\\"csui-icon csui-metadata-listview csui-metadata-listview-expand-icon\\\" role=\\\"button\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.sidebarToggleTitle || (depth0 != null ? depth0.sidebarToggleTitle : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"sidebarToggleTitle\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"0\\\"></span>\\r\\n</span><span class=\\\"csui-type-icon\\\"></span>\\r\\n<div role=\\\"heading\\\" aria-level=\\\"2\\\" class=\\\"title-header\\\">\\r\\n<span class=\\\"title binf-line-clamp\\\" tabindex=\\\"0\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.nameAria || (depth0 != null ? depth0.nameAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"nameAria\",\"hash\":{}}) : helper)))\n    + \"\\\" role=\\\"button\\\"\\r\\n      aria-expanded=\\\"false\\\">\\r\\n    \"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\r\\n</span>\\r\\n</div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.read_only : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_dropdown_menu : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n<div class=\\\"title-edit-div\\\">\\r\\n  <label id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"binf-hidden\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"</label>\\r\\n  <span class=\\\"cs-icon-required category_required\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.required_tooltip || (depth0 != null ? depth0.required_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"required_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  <input type=\\\"text\\\" class=\\\"title-input\\\" placeholder=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.placeholder_text || (depth0 != null ? depth0.placeholder_text : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"placeholder_text\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n         value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name || (depth0 != null ? depth0.edit_name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.edit_name_id || (depth0 != null ? depth0.edit_name_id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"edit_name_id\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-required=\\\"true\\\">\\r\\n\"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.hideCancelButton : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"</div>\\r\\n</div>\\r\\n<div class=\\\"title-error-div\\\">\\r\\n  <span class=\\\"title-error\\\" title=\\\"\\\"></span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_item.name_metadata.item.name', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-dropdown\\\">\\r\\n    <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n            aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreAria || (depth0 != null ? depth0.showMoreAria : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreAria\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreTooltip || (depth0 != null ? depth0.showMoreTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <span class=\\\"csui-button-icon icon-expandArrowDown\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.showMoreTooltip || (depth0 != null ? depth0.showMoreTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showMoreTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n  </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"csui-loading-parent-wrapper binf-disabled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.hasCommands : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<li role=\\\"menuitem\\\" class=\\\"csui-loading-parent-wrapper binf-disabled\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</li>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_dropdown.menu_lazy.loading.template', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',[\r\n  'module', \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/utils/log', \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/commands', 'csui/controls/toolbar/toolitem.view',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/header/dropdown.menu/lazy.loading.template',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'css!csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, $, _, log, Backbone, Marionette, commands, ToolItemView,\r\n    NodeCollection, FilteredToolItemsCollection, template, TabableRegionBehavior,\r\n    DropdownMenuBehavior, PerfectScrollingBehavior, lang, lazyloadingTemplate, base,\r\n    GlobalMessage) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  // TODO: Make common dropdown menu control to be used in both the table header and the metadata header\r\n\r\n  var DropdownMenuView = Marionette.CompositeView.extend({\r\n    className: \"cs-dropdown-menu\",\r\n    template: template,\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem',\r\n        command: this.collection.commands &&\r\n                 this.collection.commands.findWhere({signature: model.get('signature')})\r\n      };\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        hasCommands: !!this.collection.length,\r\n        btnId: _.uniqueId('dropdownMenuButton'),\r\n        showMoreTooltip: lang.showMore,\r\n        showMoreAria: lang.showMoreAria\r\n      };\r\n    },\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle',\r\n      dropdownMenu: '.binf-dropdown-menu',\r\n      loadingIconsDiv: '.csui-loading-parent-wrapper'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      },\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: '.binf-dropdown-menu',\r\n        suppressScrollX: true,\r\n        includePadding: true\r\n      }\r\n    },\r\n\r\n    constructor: function DropdownMenuView(options) {\r\n      var status = {\r\n        nodes: new NodeCollection([options.model]),\r\n        container: options.container,\r\n        containerCollection: options.containerCollection,\r\n        context: options.context\r\n      };\r\n      options.status = status;\r\n      this.commands = options.commands || commands;\r\n      options.collection = new FilteredToolItemsCollection(\r\n          options.toolItems, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolItemsMask\r\n          });\r\n\r\n      options.reorderOnSort = true;\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      _.defaults(this.options, options.toolItems.options);  // set options from ToolItemFactory\r\n\r\n      this.originatingView = options.originatingView;\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.model, \"sync\", this.render)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle)\r\n          .listenTo(this.model, \"change\", this.render);\r\n      if (this.model.delayedActions) {\r\n        this.listenTo(this.model.delayedActions, 'request', this._hide)\r\n            .listenTo(this.model.delayedActions, 'sync error', this._show);\r\n      }\r\n      if (this.model.actions) {\r\n        this.listenTo(this.model.actions, 'update', this._updateMenuItems);\r\n      }\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.silentFetch = true;\r\n      this.collection.refilter();\r\n      this.render();\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.model.delayedActions && this.model.delayedActions.fetching) {\r\n        this._hide();\r\n      }\r\n      if (!this.collection.length) {\r\n        var node                 = this.options.model ? this.options.model : this.model,\r\n            lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n            isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n        if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n            node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n          this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n          this.ui.loadingIconsDiv.removeClass('binf-hidden');\r\n          this.fetchingNonPromotedActions = true;\r\n          node.setEnabledLazyActionCommands(\r\n              true).done(_.bind(function () {\r\n            this.fetchingNonPromotedActions = false;\r\n            var blockingElement = this.$el.find('.csui-loading-parent-wrapper');\r\n            blockingElement.animate(\"width: 0\", 300, _.bind(function () {\r\n              blockingElement.addClass('binf-hidden');\r\n              this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              //UpdateToolItems silently and re-render dropdown menu;\r\n              this._updateMenuItems();\r\n            }, this));\r\n          }, this));\r\n        }\r\n      } else {\r\n        //state variable for fetching nonpromoted actions started or not\r\n        this.fetchingNonPromotedActions = false;\r\n        this.ui.dropdownToggle.binf_dropdown();\r\n        this.ui.dropdownMenu.find(\"> li > a.binf-hidden\").removeClass('binf-hidden');\r\n        var adjustDropdown = _.bind(function () {\r\n          this.trigger(\"update:scrollbar\");\r\n          this.ui.dropdownMenu.removeClass('adjust-dropdown-menu');\r\n          var dropdownLeftOffset        = this.ui.dropdownMenu.offset().left,\r\n              originatingViewLeftOffest = this.options.originatingView.$el.offset().left,\r\n              dropdownWidth             = this.ui.dropdownMenu.outerWidth(),\r\n              originatingViewWidth      = this.options.originatingView.$el.width(),\r\n              margin                    = (window.innerWidth - originatingViewWidth) / 2,\r\n              rightOffset               = originatingViewWidth -\r\n                                          (dropdownLeftOffset + dropdownWidth - margin);\r\n          if (dropdownLeftOffset + dropdownWidth > originatingViewLeftOffest +\r\n              originatingViewWidth ||\r\n              (rightOffset + dropdownWidth > originatingViewWidth)) {\r\n            this.ui.dropdownMenu.addClass('adjust-dropdown-menu');\r\n          }\r\n        }, this);\r\n        var renderLazyActions = _.bind(function () {\r\n          var self = this;\r\n          var node                 = this.options.model ? this.options.model : this.model,\r\n              lazyActionsRetrieved = !!node && !!node.get('csuiLazyActionsRetrieved'),\r\n              isLocallyCreatedNode = !!node && !!node.isLocallyCreated;\r\n          if (!!node && !lazyActionsRetrieved && node.nonPromotedActionCommands &&\r\n              node.nonPromotedActionCommands.length && !isLocallyCreatedNode) {\r\n            this.fetchingNonPromotedActions = true;\r\n            this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n            node.setEnabledLazyActionCommands(\r\n                true).done(function () {\r\n              self.fetchingNonPromotedActions = false;\r\n              var newCollection = new FilteredToolItemsCollection(\r\n                  self.options.toolItems, {\r\n                    status: self.options.status,\r\n                    commands: self.commands,\r\n                    delayedActions: self.options.containerCollection &&\r\n                                    self.options.containerCollection.lazyActions,\r\n                    lazyActions: self.options.containerCollection &&\r\n                                 self.options.containerCollection.lazyActions,\r\n                    mask: self.options.toolItemsMask\r\n                  });\r\n\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n              //As per UX review comments, 300 ms given before rendering lazy actions\r\n              blockingEle.animate(\"width: 0\", 300, function () {\r\n                blockingEle.remove();\r\n                if (self.collection.models.length !== newCollection.models.length) {\r\n                  _.filter(newCollection.models, function (model) {\r\n                    if (self.isDestroyed === true || self._isDestroyed) {\r\n                      self.children = undefined;\r\n                    } else {\r\n                      var signature = model.get(\"signature\");\r\n                      if (!self.collection.find({signature: signature})) {\r\n                        self.collection.models.push(model);\r\n                        var lazyToolItemView = self.addChild(model, ToolItemView);\r\n                        lazyToolItemView.renderTextOnly();\r\n                      }\r\n                    }\r\n                  });\r\n                }\r\n              });\r\n\r\n            }).fail(function (request) {\r\n              self.fetchingNonPromotedActions = false;\r\n              var blockingEle = self.ui.dropdownMenu.find('.csui-loading-parent-wrapper'),\r\n                  error       = new base.Error(request);\r\n              blockingEle.length && blockingEle.remove();\r\n              GlobalMessage.showMessage('error', error.message);\r\n            });\r\n          }\r\n        }, this);\r\n        this.ui.dropdownToggle.on('binf.dropdown.after.show', adjustDropdown);\r\n        this.ui.dropdownToggle.on('binf.dropdown.before.show', renderLazyActions);\r\n        $(window).on('resize.metadata.header.dropdown.menu', _.debounce(adjustDropdown, 100));\r\n        this.delegateEvents();\r\n      }\r\n    },\r\n\r\n    onRenderCollection: function () {\r\n      if (this.collection.length && this.fetchingNonPromotedActions) {\r\n        //loading icons div appended to dropdown,\r\n        //but before fectching nonpromoted actions collection reset event trigger from dropDownMenu Behavior\r\n        // in this case we are removing loding icons div from drop down and appended again\r\n        var loadingIconsDiv = this.ui.dropdownMenu.find('.csui-loading-parent-wrapper');\r\n        loadingIconsDiv.length && loadingIconsDiv.remove();\r\n        this.ui.dropdownMenu.append(lazyloadingTemplate);\r\n      }\r\n    },\r\n\r\n    onDestroy: function () {\r\n      this.undelegateEvents();\r\n      $(window).off(\"resize.metadata.header.dropdown.menu\");\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      return $(this.ui.dropdownToggle);\r\n    },\r\n\r\n    _hide: function () {\r\n      this.$el.addClass('binf-invisible');\r\n    },\r\n\r\n    _show: function () {\r\n      this.$el.removeClass('binf-invisible');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        dropdownToggleEl.binf_dropdown('toggle');\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      var toolItem = args.toolItem;\r\n      var signature = toolItem.get(\"signature\");\r\n      var command = this.commands.get(signature);\r\n\r\n      // TODO: Remove this. Commands coming from various modules cannot \r\n      // be just hardcoded at at a central place. Use the {execute: false}\r\n      // attribute to catch the button click in the owning view.\"\r\n      if (signature === 'Rename') {\r\n        // IE is picky with Enter keypress triggered by Bootstrap not it was not stopped fast enough\r\n        setTimeout(_.bind(function () {\r\n          this.trigger('rename', this);\r\n        }, this), 200);\r\n      } else {\r\n        var status = {\r\n          context: this.options.context,\r\n          nodes: new NodeCollection([this.model]),\r\n          container: this.options.container,\r\n          collection: this.options.containerCollection,\r\n          originatingView: this.options.targetView ? this.options.targetView : this.originatingView\r\n        };\r\n\r\n        try {\r\n          // If the command was not found and the toolitem is executable, it is\r\n          // a developer's mistake.\r\n          if (!command) {\r\n            throw new Error('Command \"' + signature + '\" not found.');\r\n          }\r\n\r\n          // TODO: Remove the code specifgic to two commands.\r\n          // trigger some selected events so code like navigation can handle it if needed\r\n          signature === 'Delete' && (this.trigger('metadata:item:before:delete', this));\r\n          signature === 'Move' && (this.trigger('metadata:item:before:move', this));\r\n\r\n          command.execute(status)\r\n              .done(_.bind(function (resp) {\r\n                // trigger some selected events so code like navigation can handle it if needed\r\n                signature === 'Delete' && (this.trigger('metadata:item:deleted', this));\r\n              }, this));\r\n        } catch (error) {\r\n          log.warn('Executing the command \"{0}\" failed.\\n{1}',\r\n              command.get('signature'), error.message) && console.warn(log.last);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return DropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/versions.toolbaritems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask',\r\n  // Load and external tool item masks\r\n  'csui-ext!csui/widgets/metadata/versions.toolbaritems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask, dynamicMasks) {\r\n  'use strict';\r\n  dynamicMasks || (dynamicMasks = []);\r\n  var VersionsToolbarItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function VersionsToolbarItemsMask(options) {\r\n      var config     = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n      this.context = options.context;\r\n      this.node = !!options.node ? options.node : options.model;\r\n      this._updateMask();\r\n      this.listenTo(this.node, 'change:id', this._updateMask);\r\n    },\r\n    _updateMask: function () {\r\n      var modified = this.restoreMask({silent: true});\r\n      dynamicMasks.forEach(function (mask) {\r\n        mask = mask({\r\n          context: this.context,\r\n          node: this.node\r\n        });\r\n        if (mask) {\r\n          modified = this.extendMask(mask, {silent: true}) || modified;\r\n        }\r\n      }, this);\r\n      if (modified) {\r\n        this.trigger('update', this);\r\n      }\r\n    }\r\n  });\r\n\r\n  return VersionsToolbarItemsMask;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items',['csui/lib/underscore',\r\n  //'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'i18n!csui/controls/tabletoolbar/impl/nls/localized.strings',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/header.dropdown.menu.items',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/header.item.name/menuitems'\r\n], function (_, lang, ToolItemsFactory, TooItemModel, extraToolItems,\r\n    oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n    dropdownMenuList: new ToolItemsFactory({\r\n          main: [\r\n            {signature: \"Properties\", name: lang.ToolbarItemInformation},\r\n            {signature: \"CopyLink\", name: lang.ToolbarItemCopyLink},\r\n            {signature: \"Edit\", name: lang.ToolbarItemEdit},\r\n            {signature: \"EmailLink\", name: lang.ToolbarItemEmailLinkShort},\r\n            {signature: \"permissions\", name: lang.ToolbarItemPermissions},\r\n            {signature: \"Rename\", name: lang.ToolbarItemRename},\r\n            {signature: \"Download\", name: lang.ToolbarItemDownload},\r\n            {signature: \"ReserveDoc\", name: lang.ToolbarItemReserve},\r\n            {signature: \"UnreserveDoc\", name: lang.ToolbarItemUnreserve},\r\n            {signature: \"Copy\", name: lang.ToolbarItemCopy},\r\n            {signature: \"Move\", name: lang.ToolbarItemMove},\r\n            {signature: \"AddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"Delete\", name: lang.ToolbarItemDelete},\r\n            {signature: \"Collect\", name: lang.ToolbarCollect},\r\n            {signature: \"ZipAndDownload\", name: lang.MenuItemZipAndDownload}\r\n          ],\r\n          shortcut: [\r\n            {signature: \"OriginalCopyLink\", name: lang.ToolbarItemOriginalCopyLink},\r\n            {signature: \"OriginalEdit\", name: lang.ToolbarItemOriginalEdit},\r\n            {signature: \"OriginalEmailLink\", name: lang.ToolbarItemOriginalShare},\r\n            {signature: \"OriginalReserveDoc\", name: lang.ToolbarItemOriginalReserve},\r\n            {signature: \"OriginalUnreserveDoc\", name: lang.ToolbarItemOriginalUnreserve},\r\n            {signature: \"OriginalCopy\", name: lang.ToolbarItemOriginalCopy},\r\n            {signature: \"OriginalMove\", name: lang.ToolbarItemOriginalMove},\r\n            {signature: \"OriginalAddVersion\", name: lang.ToolbarItemAddVersion},\r\n            {signature: \"OriginalDownload\", name: lang.ToolbarItemOriginalDownload},\r\n            {signature: \"OriginalDelete\", name: lang.ToolbarItemOriginalDelete}\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0, // force toolbar to immediately start with a drop-down list\r\n          dropDownIcon: \"icon icon-expandArrowDown\",\r\n          dropDownSvgId: \"themes--carbonfiber--image--generated_icons--action_caret_down32\"\r\n        }\r\n    )\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/header.dropdown.menu.items.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var DropdownMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function DropdownMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return DropdownMenuItemsMask;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadata',[],function(){});\n","\ncsui.define('css!csui/widgets/metadata/impl/header/item.name/metadata.item.name',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',['csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/node-type.icon/node-type.icon.view', 'csui/utils/base',\r\n  'hbs!csui/widgets/metadata/impl/header/item.name/metadata.item.name',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/widgets/metadata/impl/header/dropdown.menu/dropdown.menu.view',\r\n  'csui/utils/commands/versions',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/models/version', 'csui/behaviors/item.name/item.name.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'i18n', 'css!csui/widgets/metadata/impl/metadata',\r\n  'css!csui/widgets/metadata/impl/header/item.name/metadata.item.name'\r\n], function ($, _, Backbone, Marionette, NodeTypeIconView, base, template, lang,\r\n    DropdownMenuView, versionCommands, versionToolbarItems, VersionsToolbarItemsMask, dropdownMenuItems, DropdownMenuItemsMask, VersionModel,\r\n    ItemNameBehavior, TabableRegionBehavior, ViewEventsPropagationMixin, i18n) {\r\n  'use strict';\r\n\r\n  var MetadataItemNameView = Marionette.ItemView.extend({\r\n\r\n        className: 'cs-metadata-item-name-container',\r\n        template: template,\r\n\r\n        templateHelpers: function () {\r\n          return {\r\n            name: this.modelHasEmptyName ? (this.readonly ? this.placeHolderName : '') :\r\n                  this.options.model.get(\"name\"),\r\n            edit_name: this.modelHasEmptyName ? '' : this.options.model.get(\"name\"),\r\n            edit_name_id: _.uniqueId('cs-metadata-edit-name'),\r\n            placeholder_text: this.placeHolderName,\r\n            nameAria: this.options.model.get(\"name\") || lang.emptyObjectNameAria,\r\n            cancel_edit_name_tooltip: lang.cancelEditNameTooltip,\r\n            switch_language_tooltip: lang.switchLanguageTooltip,\r\n            show_dropdown_menu: this.options.showDropdownMenu ? true : false,\r\n            read_only: this.readonly,\r\n            goBack: lang.goBackTooltip,\r\n            sidebarToggleTitle: lang.expand,\r\n            hideCancelButton: this.options.mode && this.options.mode === 'create'\r\n          };\r\n        },\r\n\r\n        ui: {\r\n          // note: if you change the template or this mapping, be sure not to break the behavior code\r\n          name: '.title',\r\n          contextMenuDiv: '.csui-metadata-item-name-dropdown',\r\n          nameEditDiv: '.title-edit-div',\r\n          nameInput: '.title-input',\r\n          nameEditCancelIcon: '.edit-cancel',\r\n          titleError: '.title-error',\r\n          toggleIcon: '.csui-metadata-listview',\r\n          toggleWrapper: '.csui-toggle-wrapper',\r\n          backEle: '.arrow_back',\r\n          titleHeader: '.title-header'\r\n        },\r\n\r\n        modelEvents: {\r\n          'change': 'render'\r\n        },\r\n\r\n        events: {\r\n          'keydown': 'onKeyInView',\r\n          'mouseenter': 'onMouseEnterName',\r\n          'mouseleave': 'onMouseLeaveName',\r\n          'keydown @ui.nameInput': 'onKeyDown',\r\n          'click @ui.toggleIcon': 'toggleSideBar',\r\n          'click @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleIcon': 'toggleSideBar',\r\n          'keydown @ui.backEle': 'goBack',\r\n          'keydown @ui.toggleWrapper': '_onKeyInView'\r\n        },\r\n\r\n        behaviors: function () {\r\n          return {\r\n            ItemName: {\r\n              behaviorClass: ItemNameBehavior,\r\n              nameSchema: this._nameSchema,\r\n              mode: this.options.mode\r\n            },\r\n            TabableRegionBehavior: {\r\n              behaviorClass: TabableRegionBehavior\r\n            }\r\n          };\r\n        },\r\n\r\n        toggleSideBar: function (event) {\r\n          if (!!event && (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click')) {\r\n            this.toggleSideBarEvent();\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n        //Calling this method from MetadataPropertiesView to set tabindex\r\n        setToggleIconTabIndex: function () {\r\n          this.ui.toggleIcon.attr('tabindex', 0);\r\n        },\r\n\r\n        toggleSideBarEvent: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                    $(sideBarEle).show('blind', {direction: this.direction}, '200', function () {\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(this.ui.backEle).hide();\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                    this.sideBarHidden = false;\r\n                  } else {\r\n                    var that = this;\r\n                    $(sideBarEle).hide('blind', {direction: this.direction}, '200', function () {\r\n                      parentWrapper.toggleClass(\"csui-hide-side-bar\");\r\n                      $(window).trigger(\"resize.tableview\");\r\n                    });\r\n                    $(that.ui.backEle).show().trigger('focus');\r\n                    this.sideBarHidden = true;\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  }\r\n                  $(sideBarEle).promise().done(function () {\r\n                    var event = $.Event('toggled:navigationbar');\r\n                    this.closest('.metadata-navigation').find('.cs-metadata').trigger(event);\r\n                  });\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        // adapt the sidebar toggle button\r\n        ensureTitleLabelIcon: function () {\r\n          if (this.leftBar && this.leftBar.length > 0) {\r\n            var parentWrapper = this.leftBar.closest(\".metadata-navigation\");\r\n            if (!!parentWrapper) {\r\n              if (parentWrapper.length > 0) {\r\n                var sideBarEle = this.leftBar;\r\n                if (sideBarEle.length > 0) {\r\n                  if (parentWrapper.hasClass('csui-hide-side-bar')) {\r\n                    $(this.ui.toggleIcon).attr('title', lang.expand).attr('aria-label',\r\n                        lang.expand);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-expand-icon').removeClass(\r\n                        'csui-metadata-listview-collapse-icon');\r\n                  } else {\r\n                    $(this.ui.toggleIcon).attr('title', lang.collapse).attr('aria-label',\r\n                        lang.collapse);\r\n                    $(this.ui.toggleIcon).addClass('csui-metadata-listview-collapse-icon').removeClass(\r\n                        'csui-metadata-listview-expand-icon');\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        constructor: function MetadataItemNameView(options) {\r\n          options || (options = {});\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, options.nameSchema);\r\n\r\n          // be the first listener, before the ones of the behavior, so behavior listeners already\r\n          // see updated ui elements\r\n          this.listenTo(options.model, \"change:name\", this._updateName);\r\n\r\n          this.direction = !!i18n.settings.rtl ? 'right' : 'left';\r\n\r\n          Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.placeHolderName = lang.addItemPlaceHolderName;\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n\r\n          // create dropdown menu\r\n          this.options.showDropdownMenu && this._createDropdownMenu();\r\n\r\n          $(window).on('resize.'+ this.cid, {view: this}, this._onWindowResize);\r\n        },\r\n\r\n        goBack: function (event) {\r\n          if (event.keyCode === 13 || event.keyCode === 32 || event.type === 'click') {\r\n            this.options.originatingView.triggerMethod('metadata:close');\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n          }\r\n        },\r\n\r\n        _applyToggle: function () {\r\n          if (!!this.sideBarHidden) {} else {\r\n            this.ui.toggleWrapper instanceof Object &&\r\n            this.ui.toggleWrapper.removeClass('binf-hidden');\r\n            this.$el.addClass(\"csui-metadata-header-with-toggle\");\r\n            if (this.options.originatingView && !!this.options.originatingView.mdn &&\r\n                !!this.options.originatingView.mdn.$el.is(\":visible\")) {\r\n              if (this.ui.backEle instanceof Object) {\r\n                this.ui.backEle.hide();\r\n              }\r\n            }\r\n          }\r\n        },\r\n\r\n        _removeToggle: function () {\r\n          if (this.ui.toggleWrapper instanceof Object) {\r\n            this.ui.toggleWrapper.addClass('binf-hidden');\r\n            this.$el.removeClass(\"csui-metadata-header-with-toggle\");\r\n          }\r\n          if (!!this.sideBarHidden) {\r\n            this.toggleSideBarEvent();\r\n          }\r\n        },\r\n\r\n        onDestroy: function () {\r\n          this._destroyDropdownMenu();\r\n          $(window).off('resize.' + this.cid).off('resize.tableview.' + this.cid);\r\n        },\r\n\r\n        _updateName: function () {\r\n          var name = this.model.get(\"name\");\r\n          this.modelHasEmptyName = name ? false : true;\r\n          this.render();\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          this.validate();\r\n        },\r\n\r\n        _destroyDropdownMenu: function () {\r\n          if (this.dropdownMenuView) {\r\n            this.cancelEventsToViewsPropagation(this.dropdownMenuView);\r\n            this.dropdownMenuView.destroy();\r\n          }\r\n        },\r\n\r\n        _createDropdownMenu: function () {\r\n          var oView = this.options.originatingView;\r\n          var isVersionModel = this.options.model instanceof VersionModel;\r\n          // TODO: Pass toolItems to the constructor of this component instead\r\n          // of sniffing some other ones.\r\n          var toolItems,\r\n              toolItemsMask = this.options.toolbarItemsMask;\r\n          if (oView && oView.options && oView.options.toolbarItems &&\r\n              oView.options.toolbarItems.dropdownMenuListInProperties) {\r\n            toolItems = oView.options.toolbarItems.dropdownMenuListInProperties;\r\n          } else {\r\n            if(isVersionModel) {\r\n              toolItems = versionToolbarItems.tableHeaderToolbar;\r\n            } else {\r\n              toolItems = dropdownMenuItems.dropdownMenuList;\r\n            }\r\n          }\r\n          if (!toolItemsMask) {\r\n            if(isVersionModel) {\r\n              toolItemsMask = new VersionsToolbarItemsMask(this.options);\r\n            } else {\r\n              toolItemsMask = new DropdownMenuItemsMask();\r\n            }\r\n          }\r\n          if (this.options.showPermissionView) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"permissions\");\r\n                });\r\n          } else if (this.options.showPropertiesCommand !== true) {\r\n            toolItems = toolItems.collection.filter(\r\n                function (command) {\r\n                  return (command.get(\"signature\") != \"Properties\" && command.get(\"signature\") != \"VersionProperties\");\r\n                });\r\n          }\r\n          this._destroyDropdownMenu();\r\n          var ddm = this.dropdownMenuView = new DropdownMenuView({\r\n            model: this.options.model,\r\n            container: this.options.container,\r\n            containerCollection: this.options.collection || this.options.containerCollection,\r\n            toolItems: toolItems,\r\n            toolItemsMask: toolItemsMask,\r\n            originatingView: this.options.originatingView,\r\n            targetView: this.options.targetView,\r\n            context: this.options.context,\r\n            commands: isVersionModel ?  versionCommands : this.options.commands,\r\n            metadataScenario: this.options.metadataScenario\r\n          });\r\n          this.listenTo(ddm, 'rename', _.bind(this._toggleEditMode, this, true));\r\n          this.listenTo(ddm, 'metadata:item:before:delete', _.bind(function (args) {\r\n            this.trigger('metadata:item:before:delete', args);\r\n          }, this));\r\n          this.listenTo(ddm, 'metadata:item:before:move', _.bind(function (args) {\r\n            this.trigger('metadata:item:before:move', args);\r\n          }, this));\r\n          this.listenTo(ddm, 'metadata:item:deleted', _.bind(function (args) {\r\n            this.trigger('metadata:item:deleted', args);\r\n          }, this));\r\n          ddm.$el.on('keydown', _.bind(function (event) {\r\n            if (event.keyCode === 9 && event.shiftKey) {\r\n              if (this.ui.backEle.is(':visible') || this.ui.toggleIcon.is(':visible')) {\r\n                this.ui.name.prop('tabindex', 0);\r\n                event.stopPropagation();\r\n              }\r\n            }\r\n          }, this));\r\n          this.propagateEventsToViews(this.dropdownMenuView);\r\n        },\r\n\r\n        _onWindowResize: function (event) {\r\n          if (event && event.data && event.data.view) {\r\n            var self = event.data.view;\r\n            // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n            if (self.resizeTimer) {\r\n              clearTimeout(self.resizeTimer);\r\n            }\r\n\r\n            self.resizeTimer = setTimeout(function () {\r\n              self._setHideShowToggleButton();\r\n            }, 200);\r\n          }\r\n        },\r\n\r\n        _setHideShowToggleButton: function (event) {\r\n\r\n          var isLandscape = window.matchMedia(\"(orientation: landscape)\").matches,\r\n              isPortrait  = window.matchMedia(\"(orientation: portrait)\").matches,\r\n              self        = !!event && !!event.data && !!event.data.view ? event.data.view : this;\r\n\r\n          self.leftBar = self.options.originatingView &&\r\n                         self.options.originatingView.$el.find(\".metadata-sidebar\");\r\n\r\n          if (self.leftBar && self.leftBar.length > 0) {\r\n            var navBar = self.leftBar.closest(\".metadata-navigation\");\r\n            if (isLandscape) {\r\n              if (window.innerWidth <= 1280) {\r\n                if (!!self.sideBarHidden) {\r\n                  self.ui.toggleWrapper instanceof Object &&\r\n                  self.ui.toggleWrapper.removeClass('binf-hidden');\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                    self.ui.backEle.attr(\"tabindex\", 0);\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                } else {\r\n                  self._applyToggle(event);\r\n                  self.leftBar.removeClass('binf-hidden');\r\n                  if (navBar.hasClass('csui-hide-side-bar')) {\r\n                    self.leftBar.show();\r\n                    navBar.toggleClass(\"csui-hide-side-bar\");\r\n                    if (self.ui.backEle instanceof Object) {\r\n                      self.ui.backEle.hide();\r\n                    }\r\n                    $(window).trigger(\"resize.tableview\");\r\n                  }\r\n                  this.ensureTitleLabelIcon();\r\n                }\r\n              } else {\r\n                this.sideBarHidden = false;\r\n                self._removeToggle(event);\r\n                if (navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.show();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  if (self.ui.backEle instanceof Object) {\r\n                    self.ui.backEle.hide();\r\n                  }\r\n                }\r\n                $(window).trigger(\"resize.tableview\");\r\n                this.ensureTitleLabelIcon();\r\n              }\r\n            } else if (isPortrait) {\r\n              self._applyToggle(event);\r\n              if (self.leftBar.length > 0) {\r\n                if (!navBar.hasClass('csui-hide-side-bar')) {\r\n                  self.leftBar.hide();\r\n                  navBar.toggleClass(\"csui-hide-side-bar\");\r\n                  $(window).trigger(\"resize.tableview\");\r\n                }\r\n                if (self.ui.backEle instanceof Object) {\r\n                  self.ui.backEle.css({display: \"inline-block\", positin: \"relative\"});\r\n                  self.ui.backEle.attr(\"tabindex\", 0);\r\n                }\r\n              }\r\n              this.ensureTitleLabelIcon();\r\n            }\r\n          }\r\n        },\r\n\r\n        currentlyFocusedElement: function () {\r\n          if (!!this.ui.backEle && $(this.ui.backEle).is(':visible')) {\r\n            return this.ui.backEle;\r\n          } else if (!!this.ui.toggleIcon && $(this.ui.toggleIcon).is(':visible')) {\r\n            return this.ui.toggleIcon;\r\n          } else if (!!this.options.mode && this.options.mode === 'create') {\r\n            return $(this.ui.nameInput);\r\n          } else {\r\n            return $(this.ui.name);\r\n          }\r\n        },\r\n\r\n        onRender: function () {\r\n          this.editing = false;\r\n          this.ui.nameEditDiv.addClass('binf-hidden');\r\n\r\n          if (this._nodeIconView) {\r\n            this._nodeIconView.destroy();\r\n          }\r\n          this._nodeIconView = new NodeTypeIconView({\r\n            el: this.$('.csui-type-icon').get(0),\r\n            node: this.options.model\r\n          });\r\n          // for shortcut objects add one more wrapper to apply special styling to overlay element.\r\n          if (this.model.get('type') === 1) {\r\n            this._nodeIconView.$el.addClass('csui-metadata-shortcut-overlay');\r\n          }\r\n          this._nodeIconView.render();\r\n\r\n          if (this.dropdownMenuView) {\r\n            this.dropdownMenuView.render();\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'before:show', this.dropdownMenuView,\r\n                this);\r\n            this.ui.contextMenuDiv.append(this.dropdownMenuView.el);\r\n            Marionette.triggerMethodOn(this.dropdownMenuView, 'show', this.dropdownMenuView, this);\r\n          }\r\n\r\n          if (this.modelHasEmptyName) {\r\n            this.ui.nameInput.addClass('csui-empty-with-placeholder');\r\n            this.ui.nameInput.attr('placeholder', this.placeHolderName);\r\n            if (this.readonly) {\r\n              this.ui.name.addClass('csui-empty-with-placeholder');\r\n            }\r\n          }\r\n\r\n          this._setHideShowToggleButton();\r\n\r\n        },\r\n\r\n        onMouseEnterName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onMouseLeaveName: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          if (this.$el.parents(\".cs-item-action-metadata\").find(\r\n                  \"div[class='load-container']\").length >\r\n              0) {\r\n            return false;\r\n          }\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (this.modelHasEmptyName && this.inputBoxNameChange !== true) {\r\n            this.setInputBoxValue('');\r\n            this.inputBoxNameChange = true;\r\n            this.ui.nameInput.removeClass('csui-empty-with-placeholder');\r\n          }\r\n        },\r\n\r\n        _validateAndSave: function () {\r\n          var currentValue = this.getValue().trim();\r\n          var inputValue = this.getInputBoxValue();\r\n          inputValue = inputValue.trim();\r\n\r\n          if (inputValue.length === 0 || currentValue !== inputValue) {\r\n            var success = this.validate(inputValue);\r\n            if (success === true) {\r\n              var self = this;\r\n              this.setInputBoxValue(inputValue);\r\n              this.setValue(inputValue);\r\n              this.modelHasEmptyName = false;\r\n              this.trigger(\"metadata:item:name:save\", {\r\n                sender: this,\r\n                success: function () {\r\n                  self._toggleEditMode(false, false);\r\n                },\r\n                error: function (error) {\r\n                  self.setValue(currentValue);\r\n                  self._toggleEditMode(true);\r\n                  self.showInlineError(error);\r\n                }\r\n              });\r\n            }\r\n          } else {\r\n            this.clearInlineError();\r\n            this._toggleEditMode(false, false);\r\n          }\r\n        },\r\n\r\n        _onKeyInView: function (event) {\r\n          if (event.keyCode === 9 && !event.shiftKey) {\r\n            if ($(event.target).is(this.ui.backEle)) {\r\n              this.ui.toggleIcon.trigger('focus');\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            } else if ($(event.target).is(this.ui.toggleIcon)) {\r\n              this.ui.name.trigger('focus');\r\n              event.stopPropagation();\r\n              event.preventDefault();\r\n            }\r\n          }\r\n        },\r\n        // call proxies\r\n        onKeyInView: function (event) {\r\n          if (this.readonly) {\r\n            return;\r\n          }\r\n          if (!!this.options.mode && this.options.mode === 'create') {\r\n            return true;\r\n          }\r\n          //prevent propagation to dialog box tabable behavior (e.g. Recently Access)\r\n          if (event.keyCode === 9 && event.shiftKey) {\r\n            event.stopPropagation();\r\n          }\r\n          return this.ItemNameBehavior.onKeyInView(event);\r\n        },\r\n\r\n        _toggleEditMode: function (edit, setFocus) {\r\n          //prevent toggle for item name on create dialog\r\n          if (this.options.mode != 'create') {\r\n            return this.ItemNameBehavior._toggleEditMode(edit, setFocus);\r\n          }\r\n        },\r\n\r\n        getValue: function () {\r\n          return this.ItemNameBehavior.getValue();\r\n        },\r\n\r\n        setValue: function (value) {\r\n          return this.ItemNameBehavior.setValue(value);\r\n        },\r\n\r\n        getInputBoxValue: function () {\r\n          return this.ItemNameBehavior.getInputBoxValue();\r\n        },\r\n\r\n        setInputBoxValue: function (value) {\r\n          return this.ItemNameBehavior.setInputBoxValue(value);\r\n        },\r\n\r\n        validate: function (iName) {\r\n          return this.ItemNameBehavior.validate(iName);\r\n        },\r\n\r\n        setEditModeFocus: function () {\r\n          return this.ItemNameBehavior.setEditModeFocus();\r\n        },\r\n\r\n        showInlineError: function (error) {\r\n          return this.ItemNameBehavior.showInlineError(error);\r\n        },\r\n\r\n        clearInlineError: function () {\r\n          return this.ItemNameBehavior.clearInlineError();\r\n        },\r\n\r\n        _getErrorMessageFromResponse: function (err) {\r\n          return this.ItemNameBehavior._getErrorMessageFromResponse(err);\r\n        },\r\n        // end of: proxies\r\n\r\n        // TODO: Deprecate this method and prefer using name field schema\r\n        // for flags like readonly and required\r\n        setReadOnly: function (mode) {\r\n          mode = mode ? true : false;\r\n          var focus;\r\n          if ((this.readonly ? true : false) !== mode) {\r\n            this.readonly = mode;\r\n            this.render();\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n            this.validate();\r\n          } else {\r\n            focus = $(this.ui.nameInput).is(\":focus\");\r\n            if (!focus) {\r\n              this.validate();\r\n            }\r\n          }\r\n        },\r\n\r\n        setPlaceHolder: function (placeHolderName) {\r\n          placeHolderName || (placeHolderName = lang.addItemPlaceHolderName);\r\n          if (this.placeHolderName !== placeHolderName) {\r\n            this.placeHolderName = placeHolderName;\r\n            this.render();\r\n          }\r\n        },\r\n\r\n        updateNameSchema: function (nameSchema) {\r\n          if (this.modelHasEmptyName && this.ui.nameInput.val() === \"\" && !nameSchema.readonly) {\r\n            nameSchema.required = true;\r\n          }\r\n          this._nameSchema = _.extend({\r\n            required: true,\r\n            readonly: false\r\n          }, nameSchema);\r\n          this.readonly = this._nameSchema.readonly;\r\n          this.render();\r\n          this.ui.nameInput[0].placeholder = this.placeHolderName;\r\n          var focus = $(this.ui.nameInput).is(\":focus\");\r\n          this._toggleEditMode(focus || this.modelHasEmptyName || false, false);\r\n          return this.ItemNameBehavior.updateNameSchema(nameSchema);\r\n        }\r\n\r\n      }\r\n  );\r\n\r\n  _.extend(MetadataItemNameView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataItemNameView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <span class=\\\"icon arrow_back cs-go-back\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.goBackTooltip || (depth0 != null ? depth0.goBackTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"goBackTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"\\r\\n        role=\\\"link\\\"></span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_leftbar_header.leftbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/leftbar/header.leftbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'hbs!csui/widgets/metadata/impl/header/leftbar/header.leftbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/leftbar/header.leftbar'\r\n], function (_, $, Marionette, template, lang, TabableRegionBehavior) {\r\n  'use strict';\r\n\r\n  var MetadataHeaderLeftBarView = Marionette.ItemView.extend({\r\n    className: 'metadata-header-left-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        goBackTooltip: lang.goBackTooltip\r\n      };\r\n      return templateValues;\r\n    },\r\n\r\n    behaviors: function () {\r\n      if (this.options.showBackIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      back: '.cs-go-back'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.back': 'onClickClose'\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(target).trigger('click');\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataHeaderLeftBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showBackIcon) {\r\n        return $(this.ui.back);\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('metadata:close');\r\n    }\r\n  });\r\n\r\n  return MetadataHeaderLeftBarView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"binf-row shortcut-div\\\">\\r\\n    <a href=\\\"#\\\" class=\\\"shortcut-switch\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.right_label || (depth0 != null ? depth0.right_label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"right_label\",\"hash\":{}}) : helper)))\n    + \"</a>\\r\\n  </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <div class=\\\"metadata-header-floating-rightbar\\\">\\r\\n    <span class=\\\"icon close cs-metadata-close\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.close_metadata_button_tooltip || (depth0 != null ? depth0.close_metadata_button_tooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"close_metadata_button_tooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"<div class=\\\"csui-extra-header-wrapper\\\"></div>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_close_icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_rightbar_header.rightbar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/rightbar/header.rightbar',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/commands', 'csui/controls/tabletoolbar/tabletoolbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'hbs!csui/widgets/metadata/impl/header/rightbar/header.rightbar',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/contexts/factories/application.scope.factory',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'css!csui/widgets/metadata/impl/header/rightbar/header.rightbar'\r\n], function (_, $, Backbone, Marionette, commands, TableToolbarView,\r\n    toolbarItems, ToolbarItemsMasks, ViewEventsPropagationMixin, template, lang,\r\n    ApplicationScopeModelFactory, BooleanFieldView, TabableRegionBehavior) {\r\n\r\n  var MetadataHeaderRightBarView = Marionette.LayoutView.extend({\r\n\r\n    className: 'metadata-header-right-bar',\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    regions: {\r\n      extraToolbarRegion: '.csui-extra-header-wrapper'\r\n    },\r\n\r\n    behaviors: function () {\r\n      if ((this.options.showShortcutSwitch && this.options.shortcutNode) ||\r\n          this.options.showCloseIcon) {\r\n        return {\r\n          TabableRegionBehavior: {\r\n            behaviorClass: TabableRegionBehavior\r\n          }\r\n        };\r\n      } else {\r\n        return {};\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      shortcutSwitchLabel: 'a.shortcut-switch',\r\n      closeIcon: '.cs-metadata-close'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView',\r\n      'click @ui.shortcutSwitchLabel': 'onClickShortcutSwitch',\r\n      'click @ui.closeIcon': 'onClickClose'\r\n    },\r\n\r\n    constructor: function MetadataHeaderRightBarView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      if (!options.toolbarItemsMasks) {\r\n        options.toolbarItemsMasks = new ToolbarItemsMasks();\r\n      }\r\n\r\n      if (!options.toolbarItems) {\r\n        options.toolbarItems = toolbarItems;\r\n      }\r\n      Marionette.LayoutView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.options.showExtraRightActionBar) {\r\n        this.options.parent.$el.addClass(\"extended-headers\");\r\n        this._showExtraRightActionBar();\r\n      }\r\n    },\r\n\r\n    _showExtraRightActionBar: function (args) {\r\n      var collection       = this.collection || this.options.model.collection,\r\n          container        = this.options.container || collection ?\r\n                             (collection.node ? collection.node :\r\n                              this.options.model) : this.options.model,\r\n          applicationScope = this.options.context &&\r\n                             this.options.context.getModel(ApplicationScopeModelFactory),\r\n          removeContainer  = false;\r\n      if (applicationScope && applicationScope.get(\"id\") === \"search\") {\r\n        removeContainer = true;\r\n      }\r\n      this.toolbarView = new TableToolbarView({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMasks: this.options.toolbarItemsMasks,\r\n        collection: collection,\r\n        model: this.options.model,\r\n        originatingView: this.options.originatingView,\r\n        context: this.options.context,\r\n        container: container,\r\n        removeContainer: removeContainer\r\n      });\r\n      this.extraToolbarRegion.show(this.toolbarView);\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        // need timeout to overcome FireFox space press\r\n        setTimeout(function () {\r\n          $(target).trigger('click');\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        return $(this.ui.shortcutSwitchLabel);\r\n      } else if (this.options.showCloseIcon) {\r\n        return $(this.ui.closeIcon);\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onClickShortcutSwitch: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger('shortcut:switch');\r\n    },\r\n\r\n    onClickClose: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      this.trigger(\"metadata:close\");\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderRightBarView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderRightBarView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/header/metadata.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"\\r\\n  <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n  <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.program(9, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n    <div class=\\\"metadata-header-left-bar-container\\\"></div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(5, data, 0),\"inverse\":this.program(7, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"5\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button with-right-bar\\\"></div>\\r\\n\";\n},\"7\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-back-button\\\"></div>\\r\\n\";\n},\"9\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.show_only_required_fields_switch : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(10, data, 0),\"inverse\":this.program(12, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\";\n},\"10\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header with-right-bar\\\"></div>\\r\\n\";\n},\"12\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"metadata-header\\\"></div>\\r\\n\";\n},\"14\":function(depth0,helpers,partials,data) {\n    return \"  <div class=\\\"metadata-header-right-bar-container\\\"></div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.is_shortcut : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n\"\n    + ((stack1 = (helpers.xif || (depth0 && depth0.xif) || helpers.helperMissing).call(depth0,\"this.show_close_icon || this.show_only_required_fields_switch || this.is_shortcut\",{\"name\":\"xif\",\"hash\":{},\"fn\":this.program(14, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_header_metadata.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/header/metadata.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/header/metadata.header.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/header/leftbar/header.leftbar.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/header.rightbar.view',\r\n  'hbs!csui/widgets/metadata/impl/header/metadata.header',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/utils/log',\r\n  'csui/controls/form/fields/booleanfield.view',\r\n  'css!csui/widgets/metadata/impl/header/metadata.header',\r\n  'csui/lib/handlebars.helpers.xif'\r\n], function (_, $, Backbone, Marionette, MetadataItemNameView, ViewEventsPropagationMixin,\r\n    MetadataHeaderLeftBarView, MetadataHeaderRightBarView, template, lang, log,\r\n    BooleanFieldView) {\r\n\r\n  var MetadataHeaderView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-content-header',\r\n    template: template,\r\n    templateHelpers: function () {\r\n      var templateValues = {\r\n        back_button: this.options.showBackIcon,\r\n        show_close_icon: this.options.showCloseIcon,\r\n        close_metadata_button_tooltip: lang.closeMetadataButtonTooltip,\r\n        show_only_required_fields_switch: this.options.showRequiredFieldsSwitch,\r\n        only_required_fields_label: lang.onlyRequiredFieldsLabel\r\n      };\r\n      // showing properties of the original model of a shortcut\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        var right_static_label = lang.viewOriginalMessage;\r\n        if (this.options.shortcutNode.original === this.node) {\r\n          right_static_label = lang.viewShortcutMessage;\r\n        }\r\n        return _.extend(templateValues, {\r\n          is_shortcut: true,\r\n          right_label: right_static_label\r\n        });\r\n      } else {\r\n        return templateValues;\r\n      }\r\n    },\r\n\r\n    ui: {\r\n      leftbar: '.metadata-header-left-bar-container',\r\n      header: '.metadata-header',\r\n      rightbar: '.metadata-header-right-bar-container'\r\n    },\r\n\r\n    events: {\r\n      'click .metadata-header': 'onClickHeader'\r\n    },\r\n\r\n    constructor: function MetadataHeaderView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.node = this.options.model;\r\n      this.originatingView = options.originatingView;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      this._createMetadataHeaderLeftBarView();\r\n      this._createMetadataItemNameView();\r\n      this._createMetadataHeaderRightBarView();\r\n    },\r\n\r\n    _createMetadataHeaderLeftBarView: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n\r\n      var lbv = this.leftbarView = new MetadataHeaderLeftBarView(this.options);\r\n      this.listenTo(lbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.leftbarView);\r\n    },\r\n\r\n    _createMetadataItemNameView: function (viewNode) {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var inv = this.metadataItemNameView = new MetadataItemNameView({\r\n        model: node,\r\n        container: this.options.container,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: this._getNameSchema(),\r\n        commands: this.options.commands,\r\n        originatingView: this.options.originatingView,\r\n        showDropdownMenu: this.options.showDropdownMenu,\r\n        metadataScenario: this.options.metadataScenario,\r\n        showPermissionView: this.options.showPermissionView,\r\n        mode: this.options.action,\r\n        targetView: this.options.targetView\r\n      });\r\n      this.listenTo(inv, 'metadata:item:name:save', function (args) {\r\n        this.trigger('metadata:item:name:save', args);\r\n      });\r\n      this.listenTo(inv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:delete', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.trigger('metadata:item:before:move', args);\r\n      }, this));\r\n      this.listenTo(inv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.trigger('metadata:item:deleted', args);\r\n      }, this));\r\n      this.listenTo(inv, 'update:button', _.bind(function (args) {\r\n        this.trigger('update:button', args);\r\n      }, this));\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    _createMetadataHeaderRightBarView: function (viewNode) {\r\n      if (this.rightbarView) {\r\n        this.cancelEventsToViewsPropagation(this.rightbarView);\r\n        this.rightbarView.destroy();\r\n      }\r\n\r\n      var node = viewNode || this.node;\r\n      var rbv = this.rightbarView = new MetadataHeaderRightBarView(\r\n          _.extend({}, this.options,\r\n              {model: node, parent: this, showExtraRightActionBar: this.options.showExtraRightActionBar})\r\n      );\r\n      this.listenTo(rbv, 'shortcut:switch', this.onClickShortcutSwitch);\r\n      this.listenTo(rbv, 'metadata:close', function (args) {\r\n        this.trigger('metadata:close', args);\r\n      });\r\n\r\n      this.propagateEventsToViews(this.rightbarView);\r\n    },\r\n\r\n    onRender: function () {\r\n      var lbv = this.leftbarView.render();\r\n      Marionette.triggerMethodOn(lbv, 'before:show', lbv, this);\r\n      this.ui.leftbar.append(lbv.el);\r\n\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n\r\n      if (this.options.showCloseIcon) {\r\n        this.$el.addClass('with-close-icon');\r\n      }\r\n      if (this.options.showShortcutSwitch && this.options.shortcutNode) {\r\n        this.$el.addClass('shortcut-object');\r\n      }\r\n\r\n      Marionette.triggerMethodOn(lbv, 'show', lbv, this);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.leftbarView) {\r\n        this.cancelEventsToViewsPropagation(this.leftbarView);\r\n        this.leftbarView.destroy();\r\n      }\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n      if (this.requiredFieldSwitchView) {\r\n        this.requiredFieldSwitchView.destroy();\r\n      }\r\n    },\r\n\r\n    onClickHeader: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n\r\n      // UX changed their mind\r\n      //this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onClickShortcutSwitch: function () {\r\n      var viewNode = this.model;\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === this.node) {\r\n        // content shall show now shortcut\r\n        // label shall be 'show original'\r\n        viewNode = this.node = this.options.shortcutNode;\r\n      } else {\r\n        // content shall show now original\r\n        // label shall be 'show shortcut'\r\n        viewNode = this.node = this.node.original;\r\n      }\r\n\r\n      this._createMetadataItemNameView(viewNode);\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      this.ui.header.append(inv.el);\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n\r\n      this._createMetadataHeaderRightBarView(viewNode);\r\n      var rbv = this.rightbarView.render();\r\n      Marionette.triggerMethodOn(rbv, 'before:show', rbv, this);\r\n      this.ui.rightbar.append(rbv.el);\r\n      Marionette.triggerMethodOn(rbv, 'show', rbv, this);\r\n      // set focus back on the new view for keyboard navigation\r\n      var $elem = rbv.currentlyFocusedElement();\r\n      $elem && $elem.trigger('focus');\r\n\r\n      this.trigger('shortcut:switch', {node: viewNode});\r\n    },\r\n\r\n    getNameInputBoxValue: function () {\r\n      return this.metadataItemNameView.getInputBoxValue();\r\n    },\r\n\r\n    validateName: function () {\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      return this.metadataItemNameView.validate(inputValue);\r\n    },\r\n\r\n    getNameValue: function () {\r\n      return this.metadataItemNameView.getValue();\r\n    },\r\n\r\n    setNameEditModeFocus: function () {\r\n      this.metadataItemNameView.setEditModeFocus();\r\n    },\r\n\r\n    _getNameSchema: function () {\r\n      var generalForm = this.options.collection && this.options.collection.first(),\r\n          formSchema  = generalForm && generalForm.get('schema'),\r\n          nameSchema  = formSchema && formSchema.properties && formSchema.properties.name;\r\n      // Warn only if the form collection was used to populate the view;\r\n      // it is the case only for the creation mode, where the name should\r\n      // be always present and flagged by required/readonly correctly\r\n      if (this.options.collection && formSchema && !nameSchema) {\r\n        log.warn('Form collection lacks name field in the first form.');\r\n      }\r\n      return nameSchema || {};\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataHeaderView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/categories/impl/category.form.view',[\r\n  'module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/utils/log', 'csui/controls/form/form.view',\r\n  'csui/controls/globalmessage/globalmessage'\r\n], function (module, _, $, base, Url, log, FormView, GlobalMessage) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  var CategoryFormView = FormView.extend({\r\n    constructor: function CategoryFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n\r\n      this.node = this.options.node;\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this, 'disable:active:item', this._disableItem);\r\n    },\r\n\r\n    onRequestProcessing: function (view) {\r\n      this.propagatedView = view;\r\n    },\r\n\r\n    _disableItem: function (args) {\r\n      this.options.metadataView && this.options.metadataView.trigger('disable:active:item');\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      // Optimizing the payload to send a part of the category, which has to\r\n      // be complete, is complicated.  The classic UI sends all data anyway.\r\n      // Until we have PATCH behaviour in the REST API, it doesn't pay off.\r\n      var values = this.getValues();\r\n      this._saveChanges(values);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      if (!this.node) {\r\n        throw new Error('Missing node to save the categories to.');\r\n      }\r\n      this.isDataUpdating = true;\r\n      if (_.keys(changes).length) {\r\n        if (this._validate(changes)) {\r\n          this._removeInternalProperties(changes);\r\n          this._blockActions();\r\n          return this.node.connector\r\n              .makeAjaxCall({\r\n                type: 'PUT',\r\n                url: Url.combine(this.node.urlBase(), 'categories', this.model.get('id')),\r\n                data: changes\r\n              })\r\n              .done(_.bind(function (response) {\r\n                this._updateMetadataToken(response);\r\n                this.trigger('forms:sync');\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:field:changed');\r\n                this.options.metadataView &&\r\n                this.options.metadataView.trigger('enable:active:item');\r\n                this.$el.trigger(event);\r\n              }, this))\r\n              .fail(_.bind(function (jqxhr) {\r\n                var preValues = this.model.get('data');\r\n                this.form.children.forEach(function (formField) {\r\n                  formField.setValue(preValues[formField.propertyId]);\r\n                  formField.refresh();\r\n                });\r\n                var error = new base.Error(jqxhr);\r\n                GlobalMessage.showMessage('error', error.message);\r\n                this.trigger('forms:error');\r\n              }, this))\r\n              .always(_.bind(function () {\r\n                this.isDataUpdating = false;\r\n                //Unblocking the metadataView\r\n                this.options.metadataView && this.options.metadataView.unblockActions();\r\n                //Trigerring the event to proceed further actions if there is any\r\n                this.trigger(\"request:completed\", this.propagatedView);\r\n                this._unblockActions();\r\n              }, this));\r\n        }\r\n        return $.Deferred().reject().promise();\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    // Alpaca returns all field values including read-only ones. The server\r\n    // rejects the request, if the read-only internal fields are posted.\r\n    _removeInternalProperties: function (categoryData) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        var stateData = categoryData[stateId] || {};\r\n        Object\r\n          .keys(stateSchema)\r\n          .forEach(function (propertyName) {\r\n            if (propertyName === 'metadata_token') {\r\n              log.debug('Metadata token \"{1}\" detected in the category \"{0}\".',\r\n                  categoryId, stateData[propertyName]) && console.log(log.last);\r\n            }\r\n            // Let only writable properties sent back to the server.\r\n            if (stateSchema[propertyName].readonly) {\r\n              delete stateData[propertyName];\r\n            }\r\n          });\r\n      }\r\n    },\r\n\r\n    // Set the metadata token using Alpaca API, because setting values in\r\n    // the model does not work and values are retrieved by Alpaca API.\r\n    _updateMetadataToken: function (response) {\r\n      var categoryId = this.model.get('id');\r\n      var stateId = categoryId + '_1';\r\n      var categorySchema = this.model.get('schema') || {};\r\n      var stateSchema = categorySchema.properties && categorySchema.properties[stateId];\r\n      if (stateSchema) {\r\n        stateSchema = stateSchema.properties || (stateSchema.properties = {});\r\n        if (stateSchema.metadata_token) {\r\n          try {\r\n            var metadataTokenValue = response.state.categories[0][categoryId].metadata_token;\r\n            var metadataTokenField = this.form.childrenByPropertyId[stateId].childrenByPropertyId.metadata_token;\r\n            metadataTokenField.setValue(metadataTokenValue);\r\n            log.debug('Metadata token in the category \"{0}\" updated to \"{1}\".',\r\n                categoryId, metadataTokenValue) && console.log(log.last);\r\n          } catch (error) {\r\n            log.warn('Updating metadata token the category \"{0}\" failed.',\r\n                categoryId) && console.log(log.last);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  return CategoryFormView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.form.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.form.fields'\r\n], function (_, Backbone, extraGeneralFormFields) {\r\n\r\n  var MetadataGeneralFormFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralFormFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralFormFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralFormFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralFormFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralFormFields = new MetadataGeneralFormFieldCollection();\r\n\r\n  if (extraGeneralFormFields) {\r\n    extraGeneralFormFields = _.flatten(extraGeneralFormFields, true);\r\n    _.each(extraGeneralFormFields, function () {\r\n      var sequence = extraGeneralFormFields.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataGeneralFormFields.add(extraGeneralFormFields);\r\n  }\r\n\r\n  return metadataGeneralFormFields;\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',[],function(){});\n","csui.define('csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n  'csui/controls/form/form.view',\r\n  'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n    className: 'csui-general-form-fields',\r\n\r\n    getChildView: function (model) {\r\n      var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n          {formModel: model});\r\n      return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n    },\r\n\r\n    childViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.options.fetchedModels,\r\n            displayedModels: this.options.displayedModels,\r\n            originatingView: this.options.originatingView,\r\n            metadataView: this.options.metadataView,\r\n            layoutMode: 'singleCol'\r\n          },\r\n          fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n              {formModel: model});\r\n      if (fieldDescriptor) {\r\n        _.extend(options, fieldDescriptor.formViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    constructor: function GeneralFormFieldCollectionView(options) {\r\n      Marionette.CollectionView.prototype.constructor.call(this, options);\r\n      this.listenTo(this, 'render', this._triggerRenderForms);\r\n    },\r\n\r\n    // Trigger render:forms once every form has triggered render:form\r\n    _triggerRenderForms: function () {\r\n      var children = this.children.map(function (formView) {\r\n        var formViewId = formView.cid;\r\n        formView.once('render:form', function () {\r\n          children = _.without(children, formViewId);\r\n          if (!children.length) {\r\n            this.triggerMethod('render:forms', this);\r\n          }\r\n        }, this);\r\n        return formView.cid;\r\n      }, this);\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.form.fields/general.form.field.behavior',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.form.fields',\r\n  'csui/widgets/metadata/general.form.fields/impl/general.form.fields.view',\r\n  'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralFormFields,\r\n    GeneralFormFieldCollectionView, ModalAlert) {\r\n  'use strict';\r\n\r\n  var GeneralFormFieldBehavior = Marionette.Behavior.extend({\r\n    constructor: function GeneralFormFieldBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n      this.view = view;\r\n      this\r\n          .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n          .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n      var self = this;\r\n      view.getGeneralFormFieldValues = function () {\r\n        var formValues = {};\r\n        // Forms with extra fields are rendered only if there\r\n        // were any field descriptors specified; there are no\r\n        // data without forms\r\n        if (self.fieldRegion) {\r\n          self.fieldRegion.currentView.children.each(function (formView) {\r\n            var values = formView.getValues(),\r\n                roleName = formView.model.get(\"role_name\"),\r\n                roles, role;\r\n            if (values) {\r\n              if (roleName) {\r\n                roles = formValues.roles || (formValues.roles = {});\r\n                role = roles[roleName] || (roles[roleName] = {});\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                _.extend(role, values);\r\n              } else {\r\n                // With no role defined, merge the properties to the root\r\n                // object literal with the general properties\r\n                _.extend(formValues, values);\r\n              }\r\n            }\r\n          });\r\n        }\r\n        return formValues;\r\n      };\r\n    },\r\n\r\n    _insertFieldExtensions: function () {\r\n      var fieldParent = this.getOption('fieldParent');\r\n      if (_.isFunction(fieldParent)) {\r\n        fieldParent = fieldParent.call(this.view);\r\n      }\r\n      if (fieldParent) {\r\n        fieldParent = this.view.$(fieldParent)[0];\r\n      }\r\n      if (!fieldParent) {\r\n        return;\r\n      }\r\n\r\n      var fieldDescriptors = this.getOption('fieldDescriptors');\r\n      if (_.isFunction(fieldDescriptors)) {\r\n        fieldDescriptors = fieldDescriptors.call(this.view);\r\n      }\r\n      if (!fieldDescriptors || !fieldDescriptors.length) {\r\n        return;\r\n      }\r\n\r\n      this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n      var fieldViewOptions = this.getOption('fieldViewOptions');\r\n      if (_.isFunction(fieldViewOptions)) {\r\n        fieldViewOptions = fieldViewOptions.call(this.view);\r\n      }\r\n      var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n          fieldViews = new GeneralFormFieldCollectionView(_.extend({\r\n            context: this.view.options.context,\r\n            fieldDescriptors: fieldDescriptors,\r\n            collection: fieldModels,\r\n            node: this.view.options.node,\r\n            mode: this.view.options.mode,\r\n            generalFormView: this.view,\r\n            fetchedModels: this.view.options.fetchedModels,\r\n            displayedModels: this.view.options.displayedModels,\r\n            originatingView: this.view.options.originatingView,\r\n            metadataView: this.view.options.metadataView\r\n          }, fieldViewOptions));\r\n      this.listenTo(fieldViews, 'render:forms', function () {\r\n        this.view.triggerMethod('render:general:form:fields', fieldViews);\r\n      });\r\n      this.fieldRegion.show(fieldViews);\r\n    },\r\n\r\n    _emptyExtensionRegion: function () {\r\n      if (this.fieldRegion) {\r\n        this.fieldRegion.empty();\r\n      }\r\n    }\r\n\r\n  }, {\r\n\r\n    getFieldDescriptors: function (options) {\r\n      var methodName, parameters;\r\n      if (options.action === 'create') {\r\n        methodName = 'getGeneralFormFieldsForCreate';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'copy') {\r\n        methodName = 'getGeneralFormFieldsForCopy';\r\n        parameters = [{forms: options.forms}];\r\n      } else if (options.action === 'move') {\r\n        methodName = 'getGeneralFormFieldsForMove';\r\n        parameters = [{forms: options.forms}];\r\n      } else {\r\n        methodName = 'getGeneralFormFields';\r\n      }\r\n      var promises = metadataGeneralFormFields.chain()\r\n          .map(function (fieldControllerDescriptor) {\r\n            var Controller = fieldControllerDescriptor.get('controller'),\r\n                controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                controller = new Controller(_.extend({\r\n                  context: options.context,\r\n                  model: options.node,\r\n                  fetchedModels: options.forms\r\n                }, controllerOptions)),\r\n                method = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            return _.flatten(arguments);\r\n          });\r\n    }\r\n\r\n  });\r\n\r\n  return GeneralFormFieldBehavior;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.action.fields',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.general.action.fields'\r\n], function (_, Backbone, generalActionFields) {\r\n\r\n  var MetadataGeneralActionFieldModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralActionFieldModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataGeneralActionFieldCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralActionFieldModel,\r\n    comparator: 'sequence',\r\n\r\n    constructor: function MetadataGeneralActionFieldCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataGeneralActionFields = new MetadataGeneralActionFieldCollection();\r\n\r\n  // Adding Action Fields to General Panels\r\n\r\n    if (generalActionFields) {\r\n        generalActionFields = _.flatten(generalActionFields, true);\r\n        _.each(generalActionFields, function () {\r\n            var sequence = generalActionFields.sequence;\r\n            if (sequence < 10 || sequence > 100) {\r\n                throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n            }\r\n        });\r\n        metadataGeneralActionFields.add(generalActionFields);\r\n    }\r\n\r\n\r\n  return metadataGeneralActionFields;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',['csui/lib/underscore', 'csui/lib/marionette',\r\n    'csui/controls/form/form.view',\r\n    'css!csui/widgets/metadata/general.form.fields/impl/general.form.fields.view'\r\n], function (_, Marionette, FormView) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldCollectionView = Marionette.CollectionView.extend({\r\n\r\n        className: 'csui-general-action-fields',\r\n\r\n        getChildView: function (model) {\r\n            var fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                {formModel: model});\r\n            return fieldDescriptor && fieldDescriptor.formView || FormView;\r\n        },\r\n\r\n        childViewOptions: function (model) {\r\n            var options = {\r\n                    context: this.options.context,\r\n                    node: this.options.node,\r\n                    mode: this.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.options.fetchedModels,\r\n                    displayedModels: this.options.displayedModels,\r\n                    originatingView: this.options.originatingView,\r\n                    metadataView: this.options.metadataView,\r\n                    layoutMode: 'singleCol'\r\n                },\r\n                fieldDescriptor = _.findWhere(this.options.fieldDescriptors,\r\n                    {formModel: model});\r\n            if (fieldDescriptor) {\r\n                _.extend(options, fieldDescriptor.formViewOptions);\r\n            }\r\n            return options;\r\n        },\r\n\r\n        constructor: function GeneralActionFieldCollectionView(options) {\r\n            Marionette.CollectionView.prototype.constructor.call(this, options);\r\n            this.listenTo(this, 'render', this._triggerRenderForms);\r\n        },\r\n\r\n        // Trigger render:forms once every form has triggered render:form\r\n        _triggerRenderForms: function () {\r\n            var children = this.children.map(function (formView) {\r\n                var formViewId = formView.cid;\r\n                formView.once('render:form', function () {\r\n                    children = _.without(children, formViewId);\r\n                    if (!children.length) {\r\n                        this.triggerMethod('render:forms', this);\r\n                    }\r\n                }, this);\r\n                return formView.cid;\r\n            }, this);\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.action.fields/general.action.field.behavior',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n    'csui/lib/marionette', 'csui/widgets/metadata/metadata.general.action.fields',\r\n    'csui/widgets/metadata/general.action.fields/impl/general.action.fields.view',\r\n    'csui/dialogs/modal.alert/modal.alert'\r\n], function (_, $, Backbone, Marionette, metadataGeneralActionFields,\r\n        GeneralActionFieldCollectionView, ModalAlert) {\r\n    'use strict';\r\n\r\n    var GeneralActionFieldBehavior = Marionette.Behavior.extend({\r\n        constructor: function GeneralActionFieldBehavior(options, view) {\r\n            Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n            this.view = view;\r\n            this\r\n                .listenTo(this.view, 'render', this._insertFieldExtensions)\r\n                .listenTo(this.view, 'destroy', this._emptyExtensionRegion);\r\n\r\n            var self = this;\r\n            view.getGeneralActionFieldValues = function () {\r\n                var formValues = {};\r\n                // Forms with extra fields are rendered only if there\r\n                // were any field descriptors specified; there are no\r\n                // data without forms\r\n                if (self.fieldRegion) {\r\n                    self.fieldRegion.currentView.children.each(function (formView) {\r\n                        var values = formView.getValues(),\r\n                            roleName = formView.model.get(\"role_name\"),\r\n                            roles, role;\r\n                        if (values) {\r\n                            if (roleName) {\r\n                                roles = formValues.roles || (formValues.roles = {});\r\n                                role = roles[roleName] || (roles[roleName] = {});\r\n                                // With a role defined, merge the properties to the\r\n                                // roles.<role_name> object\r\n                                _.extend(role, values);\r\n                            } else {\r\n                                // With no role defined, merge the properties to the root\r\n                                // object literal with the general properties\r\n                                _.extend(formValues, values);\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                return formValues;\r\n            };\r\n        },\r\n\r\n        _insertFieldExtensions: function () {\r\n            var fieldParent = this.getOption('fieldParent');\r\n            if (_.isFunction(fieldParent)) {\r\n                fieldParent = fieldParent.call(this.view);\r\n            }\r\n            if (fieldParent) {\r\n                fieldParent = this.view.$(fieldParent)[0];\r\n            }\r\n            if (!fieldParent) {\r\n                return;\r\n            }\r\n\r\n            var fieldDescriptors = this.getOption('fieldDescriptors');\r\n            if (_.isFunction(fieldDescriptors)) {\r\n                fieldDescriptors = fieldDescriptors.call(this.view);\r\n            }\r\n            if (!fieldDescriptors || !fieldDescriptors.length) {\r\n                return;\r\n            }\r\n\r\n            this.fieldRegion = new Marionette.Region({el: fieldParent});\r\n\r\n            var fieldViewOptions = this.getOption('fieldViewOptions');\r\n            if (_.isFunction(fieldViewOptions)) {\r\n                fieldViewOptions = fieldViewOptions.call(this.view);\r\n            }\r\n            var fieldModels = new Backbone.Collection(_.pluck(fieldDescriptors, 'formModel')),\r\n                fieldViews = new GeneralActionFieldCollectionView(_.extend({\r\n                    context: this.view.options.context,\r\n                    fieldDescriptors: fieldDescriptors,\r\n                    collection: fieldModels,\r\n                    node: this.view.options.node,\r\n                    mode: this.view.options.mode,\r\n                    generalFormView: this.view,\r\n                    fetchedModels: this.view.options.fetchedModels,\r\n                    displayedModels: this.view.options.displayedModels,\r\n                    originatingView: this.view.options.originatingView,\r\n                    metadataView: this.view.options.metadataView\r\n                }, fieldViewOptions));\r\n            this.listenTo(fieldViews, 'render:actions', function () {\r\n                this.view.triggerMethod('render:general:action:fields', fieldViews);\r\n            });\r\n            this.fieldRegion.show(fieldViews);\r\n        },\r\n\r\n        _emptyExtensionRegion: function () {\r\n            if (this.fieldRegion) {\r\n                this.fieldRegion.empty();\r\n            }\r\n        }\r\n\r\n    }, {\r\n\r\n        getFieldDescriptors: function (options) {\r\n            var methodName, parameters;\r\n            if (options.action === 'create') {\r\n                methodName = 'getGeneralActionFieldsForCreate';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'copy') {\r\n                methodName = 'getGeneralActionFieldsForCopy';\r\n                parameters = [{forms: options.forms}];\r\n            } else if (options.action === 'move') {\r\n                methodName = 'getGeneralActionFieldsForMove';\r\n                parameters = [{forms: options.forms}];\r\n            } else {\r\n                methodName = 'getGeneralActionFields';\r\n            }\r\n            var promises = metadataGeneralActionFields.chain()\r\n                .map(function (fieldControllerDescriptor) {\r\n                    var Controller = fieldControllerDescriptor.get('controller'),\r\n                        controllerOptions = fieldControllerDescriptor.get('controllerOptions'),\r\n                        controller = new Controller(_.extend({\r\n                            context: options.context,\r\n                            model: options.node,\r\n                            fetchedModels: options.forms\r\n                        }, controllerOptions)),\r\n                        method = controller[methodName];\r\n                    return method && method.apply(controller, parameters);\r\n                })\r\n                .compact()\r\n                .value();\r\n            return $.when\r\n                .apply($, promises)\r\n                .then(function () {\r\n                    return _.flatten(arguments);\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n    return GeneralActionFieldBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/utils/nodesprites',\r\n  'csui/controls/table/cells/size/size.view', 'csui/utils/base',\r\n  'csui/utils/url', 'csui/models/form', 'csui/models/version',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, Backbone, NodeSpriteCollection, SizeView, base, Url,\r\n    FormModel, VersionModel, NodeResourceMixin, lang) {\r\n  'use strict';\r\n\r\n  var prototypeExt = {\r\n    makeServerAdaptor: function (options) {\r\n      return this;\r\n    },\r\n\r\n    url: function () {\r\n      var node   = this.options.node,\r\n          nodeId = node.get('id'),\r\n          url;\r\n      if (nodeId === undefined) {\r\n        // creation form\r\n        url = _.str.sformat('forms/nodes/create?type={0}&parent_id={1}',\r\n            node.get('type'), node.get('parent_id'));\r\n      } else {\r\n        if (node instanceof VersionModel) {\r\n          url = _.str.sformat('forms/nodes/versions/properties/general?id={0}&version_number={1}',\r\n              nodeId, node.get('version_number'));\r\n        } else {\r\n          // update form\r\n          url = _.str.sformat('forms/nodes/properties/general?id={0}', nodeId);\r\n        }\r\n      }\r\n      return Url.combine(this.connector.connection.url, url);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      // Some views may fail if one of the three properties was missing\r\n      var form  = _.extend({\r\n            data: {},\r\n            schema: {},\r\n            options: {}\r\n            // The server returns an array pf forms, although only one category\r\n            // was requested.  Normalize the response to be just a single form.\r\n          }, response.form || response.forms && response.forms[0] || response),\r\n          // Title usually does not come from the server\r\n          title = form.title || this.get('title') || lang.general;\r\n\r\n      form.options = _.omit(form.options, 'form');\r\n      if (!form.schema.title) {\r\n        form.schema.title = title;\r\n      }\r\n      if (!form.title) {\r\n        form.title = title;\r\n      }\r\n\r\n      this._addCreatorInfo(form, options);\r\n      this._addOwnerInfo(form, options);\r\n      this._addCreateDateInfo(form, options);\r\n      this._addModifyDateInfo(form, options);\r\n      this._addMimeTypeInfo(form, options);\r\n      this._addSizeInfo(form, options);\r\n      this._addItemidInfo(form, options);\r\n      this._ensurePlaceholder(form, options);\r\n      this._addReserveInfo(form, options);\r\n      this._addMimeTypeClassNameInfo(form, options);\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: this.options.node.has('size') ? \"size\" : \"file_size\"}\r\n      });\r\n\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                // TODO: Create a custom field showing the friendly size\r\n                // in the visible HTML element and the full size in bytes\r\n                // in a tooltip\r\n                size: this.sizeView.getValueData().formattedValue || this.options.node.get('size_formatted')\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    _addItemidInfo: function (ret, options) {\r\n      if (!!this.node) {\r\n        var type = this.options.node.get('type');\r\n        var refNode =\r\n                _.extend(ret.data, {\r\n                  itemId: this.node.get('id')\r\n                });\r\n\r\n        _.extend(ret.options.fields, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\"\r\n          }\r\n        });\r\n        _.extend(ret.schema.properties, {\r\n          itemId: {\r\n            hidden: false,\r\n            readonly: true,\r\n            label: lang.formFieldItemIdLabel,\r\n            placeholder: lang.alpacaPlaceholderNotAvailable,\r\n            type: \"text\",\r\n            tooltip: this.node.get('id')\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    _addCreateDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.create_date.type = 'datetime';\r\n      ret.options.fields.create_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.create_date.format = 'datetime';\r\n    },\r\n\r\n    _addModifyDateInfo: function (ret, options) {\r\n      if (!ret.options.fields.modify_date) {\r\n        return;\r\n      }\r\n      ret.options.fields.modify_date.type = 'datetime';\r\n      ret.options.fields.modify_date.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      ret.schema.properties.modify_date.format = 'datetime';\r\n    },\r\n\r\n    _addOwnerInfo: function (ret, options) {\r\n      var ownerField = 'owner_user_id';\r\n      // for version, we are still using v1 call for now until switch to v2\r\n      if (this.node instanceof VersionModel) {\r\n        ownerField = 'owner_id';  // v1 has a slightly different field name\r\n      }\r\n      if (!ret.options.fields[ownerField]) {\r\n        return;\r\n      }\r\n      var isOwnerExists = this.node.get('owner_user_id') === -3,\r\n          owner         = isOwnerExists ? {\r\n            'id': -3\r\n          } : (this.node.get('owner_user_id_expand') ||\r\n               this.node.get('owner_user_id') ||\r\n               this.node.get('owner_id'));\r\n\r\n      if (owner && owner instanceof Object) {\r\n        ret.data[ownerField] = owner.id;\r\n        ret.options.fields[ownerField].type = 'otcs_user';\r\n        ret.options.fields[ownerField].type_control = {\r\n          name: isOwnerExists ? lang.NoOwner : base.formatMemberName(owner)\r\n        };\r\n        ret.options.fields[ownerField].placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addCreatorInfo: function (ret, options) {\r\n      if (!ret.options.fields.create_user_id) {\r\n        return;\r\n      }\r\n      var creator = this.node.get('create_user_id_expand') ||\r\n                    this.node.get('create_user_id');\r\n      if (creator && creator instanceof Object) {\r\n        ret.data.create_user_id = creator.id;\r\n        ret.options.fields.create_user_id.type = 'otcs_user';\r\n        ret.options.fields.create_user_id.type_control = {\r\n          name: base.formatMemberName(creator)\r\n        };\r\n        ret.options.fields.create_user_id.placeholder = lang.alpacaPlaceholderNotAvailable;\r\n      }\r\n    },\r\n\r\n    _addMimeTypeInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n\r\n      _.extend(ret.data, {\r\n        mime_type: NodeSpriteCollection.findTypeByNode(node)\r\n      });\r\n\r\n      _.extend(ret.options.fields, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldTypeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        mime_type: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldTypeLabel,\r\n          type: \"string\"\r\n        }\r\n      });\r\n    },\r\n\r\n    // will retrieve corr. className of MimeType\r\n    _addMimeTypeClassNameInfo: function (ret, options) {\r\n      var type = this.options.node.get('type');\r\n      var node = this.options.node;\r\n      _.extend(ret.data, {\r\n        mimeTypeClassName: NodeSpriteCollection.findClassByNode(node)\r\n      });\r\n    },\r\n\r\n    _ensurePlaceholder: function (ret, options) {\r\n      // ensure Description placeholder\r\n      if (ret.options.fields.description) {\r\n        var desc = ret.options.fields.description;\r\n        if (desc.placeholder === undefined || desc.placeholder.length === 0) {\r\n          desc.placeholder = lang.alpacaPlaceholderDescription;\r\n        }\r\n      }\r\n    },\r\n\r\n    _addReserveInfo: function (ret, options) {\r\n      var refNode =\r\n              _.extend(ret.data, {\r\n                reserve_info: ((!!this.options.node.get('reserved')) ? this : undefined)\r\n              });\r\n\r\n      _.extend(ret.options.fields, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldReservedByLabel,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        reserve_info: {\r\n          hidden: false,\r\n          readonly: true,\r\n          type: \"otcs_reserve_button\"\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, prototypeExt);\r\n    }\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.model',[\r\n  'csui/lib/jquery', 'csui/lib/underscore', 'csui/models/form',\r\n  'csui/models/mixins/node.resource/node.resource.mixin',\r\n  'csui/widgets/metadata/general.panels/node/server.adaptor.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, FormModel, NodeResourceMixin, ServerAdaptorMixin,\r\n    lang) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormModel = FormModel.extend({\r\n    defaults: {\r\n      id: 'general'\r\n    },\r\n\r\n    constructor: function NodeGeneralFormModel(attributes, options) {\r\n      FormModel.prototype.constructor.apply(this, arguments);\r\n\r\n      this.makeNodeResource(options)\r\n          .makeServerAdaptor(options);\r\n    }\r\n  });\r\n\r\n  NodeResourceMixin.mixin(NodeGeneralFormModel.prototype);\r\n  ServerAdaptorMixin.mixin(NodeGeneralFormModel.prototype);\r\n\r\n  return NodeGeneralFormModel;\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.model',['csui/lib/underscore', 'csui/utils/base',\r\n  'csui/controls/table/cells/size/size.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, base, SizeView, NodeGeneralFormModel, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function DocumentGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    parse: function (response, options) {\r\n      var form = NodeGeneralFormModel.prototype.parse.apply(this, arguments);\r\n\r\n      this._addSizeInfo(form, options);\r\n\r\n      return form;\r\n    },\r\n\r\n    _addSizeInfo: function (ret, options) {\r\n      var type        = this.options.node.get('type'),\r\n          val         = this.options.node.has('size'),\r\n          column_name = (val ? '' : 'file_') + 'size';\r\n      this.sizeView = new SizeView({\r\n        model: this.options.node,\r\n        column: {name: column_name}\r\n      });\r\n\r\n      var sizeVal = this.sizeView.getValueData().formattedValue,\r\n          refNode =\r\n              _.extend(ret.data, {\r\n                size: !!sizeVal ? sizeVal :\r\n                      base.getReadableFileSizeString(this.options.node.get('size'))\r\n\r\n              });\r\n\r\n\r\n      _.extend(ret.options.fields, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          label: lang.formFieldSizeLabel,\r\n          placeholder: lang.alpacaPlaceholderNotAvailable,\r\n          type: \"text\"\r\n        }\r\n      });\r\n\r\n      _.extend(ret.schema.properties, {\r\n        size: {\r\n          hidden: false,\r\n          readonly: true,\r\n          title: lang.formFieldSizeLabel,\r\n          type: \"string\",\r\n          tooltip: this.sizeView.getValueData().value\r\n        }\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return DocumentGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      {{#if options.showSize}}\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      {{/if}}\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n      <div class=\\\"csui-action-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_node_impl_node.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/node/impl/node.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/node/node.general.form.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/controls/form/form.view',\r\n  'csui/behaviors/default.action/default.action.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'csui/models/version',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'hbs!csui/widgets/metadata/general.panels/node/impl/node.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/utils/base',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'csui/utils/commands', 'csui/utils/commands/versions',\r\n  'css!csui/widgets/metadata/general.panels/node/impl/node.general.form'\r\n], function (_, $, Backbone, FormView, DefaultActionBehavior,\r\n    GeneralFormFieldBehavior, GeneralActionFieldBehavior, VersionModel,\r\n    GlobalMessage, formTemplate, lang, base, NextNodeModelFactory, commands,\r\n    versionCommands) {\r\n  'use strict';\r\n\r\n  var NodeGeneralFormView = FormView.extend({\r\n    behaviors: {\r\n      defaultAction: {\r\n        behaviorClass: DefaultActionBehavior\r\n      },\r\n      generalFormFields: {\r\n        behaviorClass: GeneralFormFieldBehavior,\r\n        fieldParent: '.csui-extra-general-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalFormFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      },\r\n      generalActionFields: {\r\n        behaviorClass: GeneralActionFieldBehavior,\r\n        fieldParent: '.csui-action-fields',\r\n        fieldDescriptors: function () {\r\n          return this.options.generalActionFieldDescriptors;\r\n        },\r\n        fieldViewOptions: function () {\r\n          return {\r\n            context: this.options.context,\r\n            node: this.node,\r\n            mode: this.options.mode,\r\n            originatingView: this,\r\n            metadataView: this.options.metadataView\r\n          };\r\n        }\r\n      }\r\n    },\r\n\r\n    className: 'cs-form csui-general-form',\r\n\r\n    // Default field set that needs to be refreshed while modifying any field in general form.\r\n    // it can be extended if a particular module need to update more field.\r\n    fieldToRefresh: ['modify_date', 'reserve_info'],\r\n\r\n    constructor: function NodeGeneralFormView(options) {\r\n      FormView.prototype.constructor.call(this, options);\r\n      this.node = this.options.node;\r\n      // extend fieldToRefresh from options.\r\n      this.fieldToRefresh = _.union(this.fieldToRefresh, (options.fieldToRefresh || []));\r\n      this.listenTo(this, 'change:field', this._saveField);\r\n      this.listenTo(this.node, 'change', _.bind(function () {\r\n        if (this.mode !== \"create\") {\r\n          this.model.fetch();\r\n        }\r\n\r\n        // The model event is no longer triggered. If a single form field\r\n        // is re-rendered, needs to let metadata keyboard navigation know\r\n        // to refresh the list of tabable elements.\r\n        var event = $.Event('tab:content:field:changed');\r\n        this.$el.trigger(event);\r\n      }, this));\r\n      this.listenTo(this, 'before:destroy', this._stopListeningToThumbnailClick);\r\n\r\n      var action = this.defaultActionController.getAction(this.options.node);\r\n      if (!action) {\r\n        this.noDefaultActionExist = true;\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    onRequestProcessing: function (view) {\r\n      this.propagatedView = view;\r\n    },\r\n\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          node_name = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode !== 'create',\r\n        showSize: (this.model.get('data').size !== \"\") || (this.model.get('data').size_formatted !== \"\"),\r\n        reserved: this.node.get('reserved'),\r\n        title: this.noDefaultActionExist ? \"\" : _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: this.noDefaultActionExist ? \"\" :\r\n                    _.str.sformat(lang.openDocAria, type_name, node_name)\r\n      };\r\n    },\r\n\r\n    _getLayout: function () {\r\n      var template = this.getOption('formTemplate'),\r\n          html     = template.call(this, {\r\n            data: this.alpaca.data,\r\n            mode: this.mode\r\n          }),\r\n          bindings = this._getBindings(),\r\n          view     = {\r\n            parent: 'bootstrap-csui',\r\n            layout: {\r\n              template: html,\r\n              bindings: bindings\r\n            }\r\n          };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = {\r\n        name: 'name_section',\r\n        create_date: '.owner_section',\r\n        create_user_id: '.owner_section',\r\n        modify_date: '.owner_section',\r\n        owner_user_id: '.owner_section',\r\n        mime_type: '.typename_section',\r\n        description: '.description_section',\r\n        itemId: '.owner_section',\r\n        size: '.size_section'\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n      // for version, extend the bindings because the v1 and v2 keys are slightly different\r\n      // To support wiki and document Versions\r\n      if (this.node instanceof VersionModel) {\r\n        bindings = _.extend(bindings, {\r\n          version_number_name: \".owner_section\",\r\n          owner_id: \".owner_section\"\r\n        });\r\n      }\r\n      return bindings;\r\n    },\r\n\r\n    _saveField: function (args) {\r\n      // This view is shared for both creation and editing scenarios.\r\n      // Do not save immediately in the creation mode.  The creation dialog\r\n      // has a button to get all field values and perform the action.\r\n      if (this.mode === 'create') {\r\n        return;\r\n      }\r\n\r\n      var field   = args.targetField,\r\n          changes = {};\r\n\r\n      changes[field.name] = field.value;\r\n      this._saveChanges(changes);\r\n    },\r\n\r\n    _saveChanges: function (changes) {\r\n      var MN = '{0}:_saveGeneralChanges {1} {2}';\r\n      var node            = this.model.options.node,\r\n          self            = this,\r\n          isThumbnailView = self.options.metadataView &&\r\n                            self.options.metadataView.thumbnailViewState;\r\n      this.isDataUpdating = true;\r\n      node.save(changes, {\r\n        wait: true,\r\n        silent: isThumbnailView,\r\n        patch: true\r\n      }).then(function () {\r\n        return node.fetch();\r\n      }).fail(function (jqxhr) {\r\n        var preValues = self.model.get('data');\r\n        // Reset form data and refresh fields\r\n        self.form.children.forEach(function (formField) {\r\n          formField.setValue(preValues[formField.propertyId]);\r\n          formField.refresh();\r\n        });\r\n        var error = new base.Error(jqxhr);\r\n        GlobalMessage.showMessage('error', error.message);\r\n        self.trigger('forms:error');\r\n      })\r\n      .always(_.bind(function () {\r\n        this.isDataUpdating = false;\r\n        //Unblocking the metadataView\r\n        this.options.metadataView && this.options.metadataView.unblockActions();\r\n        //Trigerring the event to proceed further actions if there is any\r\n        this.trigger(\"request:completed\", this.propagatedView);\r\n        this._unblockActions();\r\n      }, this));\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      this.updateReserveFieldDisplay();\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showDefaultImage();\r\n      this._listenToThumbnailClick();\r\n      // default action\r\n      this.$('.thumbnail_section')\r\n          .on(\"focusin\", function (event) {\r\n            base.checkAndScrollElemToViewport(event.currentTarget);\r\n          });\r\n\r\n      // Let render:form triggered once all extra fields were rendered\r\n      var generalFormFieldDescriptors = this.options.generalFormFieldDescriptors;\r\n      if (generalFormFieldDescriptors && generalFormFieldDescriptors.length) {\r\n        this.listenToOnce(this, 'render:general:form:fields', options.async());\r\n      }\r\n    },\r\n\r\n    setFocus: function () {\r\n      //this.form.trigger('focus');\r\n      var nonReadOnlyFields = this.$form.find('.alpaca-field:not(.alpaca-readonly) button');\r\n      if (nonReadOnlyFields.length > 0) {\r\n        nonReadOnlyFields.first().trigger('focus');\r\n      }\r\n    },\r\n\r\n    updateForm: function () {\r\n      if (!!this.node.isReservedClicked || !!this.node.isUnreservedClicked) {\r\n        // only render when reserve or unreserve action is preformed.\r\n        this.render();\r\n        this.node.isReservedClicked = false;\r\n        this.node.isUnreservedClicked = false;\r\n      }\r\n      var alpacaForm     = this.$el.alpaca('get'),\r\n          requiredSwitch = !!this.node.collection && !!this.node.collection.requireSwitched;\r\n      if (!!alpacaForm) {\r\n        var data = this.model.get('data');\r\n        for (var i = 0; i < this.fieldToRefresh.length; i++) {\r\n          var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh[i]],\r\n              value = data[this.fieldToRefresh[i]];\r\n          if (!!field && field.getValue() !== value && !requiredSwitch) {\r\n            field.setValue(value);\r\n            field.refresh();\r\n          }\r\n        }\r\n      }\r\n      if (!this.thumbnail || !this.thumbnail.imgUrl) {\r\n        this._showDefaultImage();\r\n      }\r\n      this.updateReserveFieldDisplay();\r\n      return this;\r\n    },\r\n\r\n    updateReserveFieldDisplay: function () {\r\n      var reserveInfoElem = this.$el.find(\".reserve_info\");\r\n      if (!!this.node.get('reserved')) {\r\n        if (reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.removeClass(\"binf-hidden\");\r\n        }\r\n      } else {\r\n        if (!reserveInfoElem.hasClass(\"binf-hidden\")) {\r\n          reserveInfoElem.addClass(\"binf-hidden\");\r\n        }\r\n      }\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var defaultThumbnailEl = this.$el.find('.default_thumbnail'),\r\n          className          = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      defaultThumbnailEl.addClass(className);\r\n      defaultThumbnailEl.removeClass('thumbnail_empty');\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n      if (!!this.noDefaultActionExist) {\r\n        this.$el.find('.default_thumbnail').addClass('thumbnail_disabled');\r\n      }\r\n    },\r\n\r\n    _listenToThumbnailClick: function () {\r\n      this._stopListeningToThumbnailClick();\r\n      this._thumbnailClickHandler = _.bind(this._handleThumbnailClick, this);\r\n      this.$('.thumbnail_section')\r\n          .on('click', this._thumbnailClickHandler);\r\n    },\r\n\r\n    _stopListeningToThumbnailClick: function () {\r\n      if (this._thumbnailClickHandler) {\r\n        this.$('.thumbnail_section')\r\n            .off('click', this._thumbnailClickHandler);\r\n        this._thumbnailClickHandler = undefined;\r\n      }\r\n    },\r\n\r\n    _handleThumbnailClick: function () {\r\n      var context = this.options.context;\r\n      var node = this.options.node;\r\n      var status = { nodes: new Backbone.Collection([node]) };\r\n      var options = {\r\n        context: context,\r\n        originatingView: this\r\n      };\r\n      var command;\r\n\r\n      // TODO: Move this to the version-specific view.\r\n      if (node instanceof VersionModel) {\r\n        command = versionCommands.get('VersionOpen');\r\n        return command.execute(status, options);\r\n      }\r\n\r\n      // TODO: Move this to the document-specific view.\r\n      command = commands.get('Open');\r\n      if (command.enabled(status, options)) {\r\n        return command.execute(status, options);\r\n      }\r\n\r\n      // TODO: Remove this code. It breaks encapsulation of this component. It\r\n      // accesses a private method. Metadata should listen to events instead.\r\n      var nextNode = this.options.context.getModel(NextNodeModelFactory);\r\n      if (node.get(\"container\") && node.get('id') ===\r\n          nextNode.get(\"id\")) {\r\n        if (this.options.metadataView) {\r\n          this.options.metadataView._closeMetadata();\r\n        }\r\n        return;\r\n      }\r\n\r\n      this.triggerMethod('execute:DefaultAction', node);\r\n    }\r\n  });\r\n\r\n  return NodeGeneralFormView;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"thumbnail_not_loaded thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.aria_label}}\\\"></span>\\r\\n          <img src=\\\"{{options.imgSrc}}\\\" class=\\\"img-doc-preview binf-hidden\\\"\\r\\n               alt=\\\"{{options.imgAlt}}\\\">\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_document_impl_document.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/document/impl/document.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/document/document.general.form.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/utils/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/document/impl/document.general.form',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/general.panels/document/impl/document.general.form'\r\n], function (_, $, Thumbnail, NodeGeneralFormView, formTemplate, lang) {\r\n  'use strict';\r\n\r\n  var DocumentGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function DocumentGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      this.thumbnail = this.options.thumbnail || new Thumbnail({\r\n            node: this.options.node\r\n          });\r\n      this.listenTo(this.thumbnail, 'loadUrl', this._showImage)\r\n          .listenTo(this.thumbnail, 'error', this._showDefaultImage)\r\n          .listenTo(this, 'destroy', function () {\r\n            this.thumbnail.destroy();\r\n          });\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n    fieldToRefresh: ['modify_date', 'reserve_info', 'mime_type', 'size'],\r\n    formTemplateHelpers: function () {\r\n      var type_name = this.node.get('type_name'),\r\n          doc_name  = this.node.get('name');\r\n      return {\r\n        showThumbnail: this.mode !== 'create',\r\n        title: _.str.sformat(lang.openDoc, type_name),\r\n        aria_label: _.str.sformat(lang.openDocAria, type_name, doc_name),\r\n        reserved: this.node.get('reserved'),\r\n        // a 1x1 transparent gif, to avoid an empty src tag\r\n        imgSrc: \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n        imgAlt: lang.docPreviewAlt\r\n      };\r\n    },\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        size: \".size_section\"\r\n      });\r\n    },\r\n\r\n    updateRenderedForm: function (options) {\r\n      NodeGeneralFormView.prototype.updateRenderedForm.apply(this, arguments);\r\n      if (this.mode !== 'create') {\r\n        var self = this;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (this.thumbnail.imgUrl) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.loadUrl();\r\n        }\r\n      }\r\n    },\r\n\r\n    _showImage: function () {\r\n      var self                 = this,\r\n          img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded');\r\n      img.attr(\"src\", this.thumbnail.imgUrl);\r\n      img.prop('tabindex', '0');\r\n      img.one('load', function (evt) {\r\n\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass('cs-form-img-vertical');\r\n        } else {\r\n          img.addClass('cs-form-img-horizontal');\r\n        }\r\n        img.addClass('cs-form-img-border');\r\n        //hide the thumbnail background span and show the real img\r\n        thumbnailNotLoadedEl.addClass('binf-hidden');\r\n        img.removeClass('binf-hidden');\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function () {\r\n      // show thumbnail missing svg and hide img tag\r\n      var img                  = this.$el.find('.img-doc-preview'),\r\n          thumbnailNotLoadedEl = this.$el.find('.thumbnail_not_loaded'),\r\n          className            = 'thumbnail_missing';\r\n      //checking model is available or not\r\n      if (!!this.options && !!(this.options.model.get('data'))) {\r\n        className = this.options.model.get('data').mimeTypeClassName;\r\n      }\r\n      // remove the old mime-type class , then update with new one.\r\n      !!thumbnailNotLoadedEl.prop(\"className\") &&\r\n      thumbnailNotLoadedEl.prop(\"className\").split(' ').forEach(_.bind(function (str) {\r\n        if (str.indexOf('mime') === 0) {\r\n          thumbnailNotLoadedEl.removeClass(str);\r\n        }\r\n      }, thumbnailNotLoadedEl));\r\n\r\n      thumbnailNotLoadedEl.addClass(className);\r\n      thumbnailNotLoadedEl.removeClass('thumbnail_empty');\r\n      thumbnailNotLoadedEl.removeClass('csui-icon-notification-error');\r\n      thumbnailNotLoadedEl.removeClass('binf-hidden');\r\n      img.addClass('binf-hidden');\r\n\r\n      // event for keyboard navigation\r\n      var event = $.Event('tab:content:render');\r\n      this.$el.trigger(event);\r\n    }\r\n  });\r\n\r\n  return DocumentGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',[\r\n  'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin'\r\n], function (_, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function ShortcutGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n  SyncableMixin.mixin(ShortcutGeneralFormModel.prototype);\r\n  return ShortcutGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"shortcut_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_shortcut_impl_shortcut.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'hbs!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form',\r\n  'css!csui/widgets/metadata/general.panels/shortcut/impl/shortcut.general.form'\r\n], function (_, NodeGeneralFormView, NodeModelFactory, formTemplate) {\r\n  'use strict';\r\n\r\n  var ShortcutGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function ShortcutGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n\r\n      // share the original node for deeper form fields code\r\n      if (options.context && options.node && options.node.original &&\r\n          options.node.original.get('id') > 0) {\r\n        // Create the node model or do nothing if it exists\r\n        options.context.getModel(NodeModelFactory, {\r\n          // Add unique id to the propertyPrefix for this object\r\n          attributes: {id: options.node.original.get('id')},\r\n          // Pass the property value using the propertyPrefix of the factory\r\n          node: options.node.original,\r\n          // Discard the model during context change to prevent its re-fetch \r\n          temporary: true\r\n        });\r\n      }\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        original_id: '.shortcut_section'\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return ShortcutGeneralFormView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.model',['csui/lib/jquery', 'csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/models/specificnodemodel',\r\n  'csui/models/mixins/syncable.from.multiple.sources/syncable.from.multiple.sources.mixin',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function ($, _, NodeGeneralFormModel, SpecificNodeModel, SyncableMixin, lang) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormModel = NodeGeneralFormModel.extend({\r\n\r\n    constructor: function UrlGeneralFormModel(attributes, options) {\r\n      NodeGeneralFormModel.prototype.constructor.apply(this, arguments);\r\n      this.makeSyncableFromMultipleSources(options);\r\n    },\r\n\r\n    _mergeSources: function (specificNodeModel, nodeGeneralFormModel) {\r\n      var specProperties    = specificNodeModel[0].forms[0], // for specific node propertie\r\n          generalProperties = nodeGeneralFormModel[0].forms[0]; // for general node properties\r\n\r\n      _.extend(generalProperties.data, specProperties.data);\r\n      _.extend(generalProperties.options.fields, specProperties.options.fields);\r\n      _.extend(generalProperties.schema.properties, specProperties.schema.properties);\r\n\r\n      generalProperties.options = _.omit(generalProperties.options, 'form');\r\n\r\n      this.set(generalProperties);  // fused properties\r\n    },\r\n\r\n    sync: function () {\r\n      var specNodeModel        = new SpecificNodeModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.node,\r\n            context: this.options.context\r\n          }),\r\n          nodeGeneralModel     = new NodeGeneralFormModel(this.node.attributes, {\r\n            connector: this.connector,\r\n            node: this.options.node,\r\n            context: this.options.context\r\n          }),\r\n          specificModelPromise = specNodeModel.fetch(),\r\n          generalModelPromise  = nodeGeneralModel.fetch(),\r\n          options              = {parse: false};\r\n      return this.syncFromMultipleSources(\r\n          [specificModelPromise, generalModelPromise], this._mergeSources, options);\r\n    }\r\n  });\r\n\r\n  SyncableMixin.mixin(UrlGeneralFormModel.prototype);\r\n  return UrlGeneralFormModel;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"binf-row\\\">\\r\\n  {{#if options.label}}\\r\\n  <div class=\\\"binf-col-md-12 alpaca-container-label\\\">\\r\\n    <h4>{{options.label}}</h4>\\r\\n  </div>\\r\\n  {{/if}}\\r\\n  <div class=\\\"metadata-pane-container\\\">\\r\\n    <div class=\\\"metadata-pane-left binf-col-md-6  cs-form-doublecolumn\\r\\n    cs-form-leftcolumn\\\">\\r\\n      <div class=\\\"owner_section general-information\\\"></div>\\r\\n      <div class=\\\"typename_section general-information\\\"></div>\\r\\n      <div class=\\\"csui-extra-general-fields\\\"></div>\\r\\n    </div>\\r\\n    <div class=\\\"metadata-pane-right binf-col-md-6 cs-form-doublecolumn cs-form-rightcolumn\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        {{#if options.showThumbnail}}\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"{{options.title}}\\\">\\r\\n          <span class=\\\"default_thumbnail thumbnail_empty\\\" data-cstabindex=\\\"0\\\" role=\\\"button\\\"\\r\\n                aria-label=\\\"{{options.title}}\\\"></span>\\r\\n        </div>\\r\\n        {{/if}}\\r\\n        <div class=\\\"url_section general-information\\\"></div>\\r\\n        <div class=\\\"description_section general-information\\\"></div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_general.panels_url_impl_url.general.form', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/general.panels/url/impl/url.general.form',[],function(){});\n","csui.define('csui/widgets/metadata/general.panels/url/url.general.form.view',['csui/lib/underscore',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'hbs!csui/widgets/metadata/general.panels/url/impl/url.general.form',\r\n  'css!csui/widgets/metadata/general.panels/url/impl/url.general.form'\r\n], function (_, NodeGeneralFormView, formTemplate) {\r\n  'use strict';\r\n\r\n  var UrlGeneralFormView = NodeGeneralFormView.extend({\r\n\r\n    constructor: function UrlGeneralFormView(options) {\r\n      NodeGeneralFormView.prototype.constructor.call(this, options);\r\n    },\r\n\r\n    formTemplate: formTemplate,\r\n\r\n    _getBindings: function () {\r\n      var bindings = NodeGeneralFormView.prototype._getBindings.apply(this, arguments);\r\n      return _.extend(bindings, {\r\n        url: \".url_section\"\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  return UrlGeneralFormView;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.general.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.view',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.model',\r\n  'csui/widgets/metadata/general.panels/node/node.general.form.view',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.model',\r\n  'csui/widgets/metadata/general.panels/shortcut/shortcut.general.form.view',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.model',\r\n  'csui/widgets/metadata/general.panels/url/url.general.form.view',\r\n  'csui/models/mixins/rules.matching/rules.matching.mixin',\r\n  // Load extra general property panel rules to be added to the built-in ones\r\n  'csui-ext!csui/widgets/metadata/metadata.general.panels'\r\n], function (_, Backbone,\r\n    DocumentGeneralFormModel, DocumentGeneralFormView,\r\n    NodeGeneralFormModel, NodeGeneralFormView,\r\n    ShortcutGeneralFormModel, ShortcutGeneralFormView,\r\n    UrlGeneralFormModel, UrlGeneralFormView,\r\n    RulesMatchingMixin, extraGeneralPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      contentModel: null,\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataGeneralPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n      this.makeRulesMatching(options);\r\n    }\r\n\r\n  });\r\n\r\n  RulesMatchingMixin.mixin(MetadataGeneralPanelModel.prototype);\r\n\r\n  var MetadataGeneralPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataGeneralPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataGeneralPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    findByNode: function (node) {\r\n      return this.find(function (item) {\r\n        return item.matchRules(node, item.attributes);\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  var generalPanels = new MetadataGeneralPanelCollection([\r\n    {\r\n      // document and Email\r\n      equals: {type: [144, 749]},\r\n      contentModel: DocumentGeneralFormModel,\r\n      contentView: DocumentGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // shortcut and generation\r\n      equals: {type: [1, 2]},\r\n      contentModel: ShortcutGeneralFormModel,\r\n      contentView: ShortcutGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // url\r\n      equals: {type: 140},\r\n      contentModel: UrlGeneralFormModel,\r\n      contentView: UrlGeneralFormView,\r\n      sequence: 100\r\n    },\r\n    {\r\n      // default node\r\n      contentModel: NodeGeneralFormModel,\r\n      contentView: NodeGeneralFormView,\r\n      sequence: 10000\r\n    }\r\n  ]);\r\n\r\n  if (extraGeneralPanels) {\r\n    generalPanels.add(_.flatten(extraGeneralPanels, true));\r\n  }\r\n\r\n  return generalPanels;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/property.panels/general/metadata.general.property.controller',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/metadata.general.panels'\r\n], function (_, $, Marionette, FormModel, FormView, generalPanels) {\r\n  'use strict';\r\n\r\n  var MetadataGeneralPropertyController = Marionette.Controller.extend({\r\n\r\n    constructor: function MetadataExternalPropertyController(options) {\r\n      Marionette.Controller.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    getPropertyPanels: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model,\r\n            context: this.options.context\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    getPropertyPanelsForCreate: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          deferred = $.Deferred(),\r\n          formModel = options.forms.findWhere({id: 'general'});\r\n      // The 'v1/forms/nodes/create' always returns the general form.\r\n      // If other collection is used to fetch the pre-filled forms, it\r\n      // has to include some form with the 'general' id too\r\n      if (!formModel) {\r\n        throw new Error('General form missing.');\r\n      }\r\n      formModel = new generalPanel.model(formModel.attributes, {\r\n        connector: this.connector,\r\n        node: this.options.model,\r\n        parse: true\r\n      });\r\n      return deferred\r\n          .resolve([{\r\n            model: formModel,\r\n            contentView: generalPanel.contentView,\r\n            contentViewOptions: generalPanel.contentViewOptions\r\n          }])\r\n          .promise();\r\n    },\r\n\r\n    getPropertyPanelsForMove: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    getPropertyPanelsForCopy: function (options) {\r\n      return this._getPropertyPanelsForMoveAndCopy(options);\r\n    },\r\n\r\n    // Add read-only general tab fro move and copy scenarios;\r\n    // useless for the operation, but the user may like to see\r\n    // more information about the copied items and is ready to\r\n    // pay the price for the fetching server call.\r\n    _getPropertyPanelsForMoveAndCopy: function (options) {\r\n      var generalPanel = this._getGeneralPanel(),\r\n          formModel = new generalPanel.model(undefined, {\r\n            connector: this.connector,\r\n            node: this.options.model\r\n          }),\r\n          self = this;\r\n      return formModel\r\n          .fetch()\r\n          .then(function () {\r\n            formModel.get('schema').readonly = true;\r\n            return [{\r\n              model: formModel,\r\n              contentView: generalPanel.contentView,\r\n              contentViewOptions: generalPanel.contentViewOptions\r\n            }];\r\n          });\r\n    },\r\n\r\n    _getGeneralPanel: function () {\r\n      var panel = generalPanels.findByNode(this.options.model);\r\n      return {\r\n        model: panel.get('contentModel') || FormModel,\r\n        contentView: panel.get('contentView') || FormView,\r\n        contentViewOptions: panel.get('contentViewOptions')\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataGeneralPropertyController;\r\n\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.property.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/property.panels/general/metadata.general.property.controller',\r\n  // Load extra property panels to be added to the built-in tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.property.panels'\r\n], function (_, Backbone, MetadataGeneralPropertyController, extraPropertyPanels) {\r\n\r\n  var MetadataPropertyPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      controller: null,\r\n      controllerOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPropertyPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPropertyPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPropertyPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPropertyPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPropertyPanels = new MetadataPropertyPanelCollection([\r\n    {\r\n      sequence: 10,\r\n      controller: MetadataGeneralPropertyController\r\n    }\r\n  ]);\r\n\r\n  if (extraPropertyPanels) {\r\n    extraPropertyPanels = _.flatten(extraPropertyPanels, true);\r\n    _.each(extraPropertyPanels, function () {\r\n      var sequence = extraPropertyPanels.sequence;\r\n      if (sequence < 10 || sequence > 100) {\r\n        throw new Error('Sequence must be greater or equal to 10 and less or equal to 100.');\r\n      }\r\n    });\r\n    metadataPropertyPanels.add(extraPropertyPanels);\r\n  }\r\n\r\n  return metadataPropertyPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"binf-dropdown\\\">\\r\\n  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"csui-button-icon icon-toolbarAdd\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addTitleTooltip || (depth0 != null ? depth0.addTitleTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addTitleTooltip\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n  <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\"></ul>\\r\\n</div>\\r\\n<div class=\\\"csui-loading-parent-wrapper binf-disabled binf-hidden\\\">\\r\\n  <span class=\\\"csui-loading-dots-wrapper\\\">\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n    <span class=\\\"csui-loading-dot\\\"></span>\\r\\n  </span>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_add.properties_add.properties.dropdown.menu', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',[],function(){});\n","csui.define('csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',[\r\n  'module', \"csui/lib/jquery\", \"csui/lib/underscore\", \"csui/lib/backbone\", \"csui/lib/marionette\",\r\n  'csui/utils/log', 'csui/controls/toolbar/toolitem.view', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/nodes', 'csui/controls/toolbar/toolitems.filtered.model', 'csui/utils/commands',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'hbs!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu',\r\n  'csui/lib/binf/js/binf'\r\n], function (module, $, _, Backbone, Marionette, log, ToolItemView, BlockingView,\r\n    NodeCollection, FilteredToolItemsCollection, commands, DropdownMenuBehavior,\r\n    template, lang) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  //\r\n  // This view shows the '+' icon for add properties commands such as 'add categories',\r\n  // 'add classifications', etc.\r\n  // - When there is only one command (for example: just 'add categories'), the '+' is just a\r\n  // command icon that would launch the only only command when the user clicks on it.\r\n  // - When there are two or more commands, the '+' icon is a dropdown menu that shows all the\r\n  // available commands.\r\n  //\r\n  // Params:\r\n  // - suppressAddProperties <boolean> : true to suppress the '+' icon\r\n  //\r\n  var AddPropertiesDropdownMenuView = Marionette.CompositeView.extend({\r\n\r\n    className: \"metadata-add-properties\",\r\n\r\n    template: template,\r\n    templateHelpers: function () {\r\n      return {\r\n        btnId: _.uniqueId('addPropertiesButton'),\r\n        addTitleTooltip: (this.collection.length === 1 ?\r\n                          this.collection.at(0).get('name') : lang.addNewProperties)\r\n      };\r\n    },\r\n\r\n    childView: ToolItemView,\r\n    childViewContainer: \"ul.binf-dropdown-menu\",\r\n    childViewOptions: function (model) {\r\n      return {\r\n        role: 'menuitem'\r\n      };\r\n    },\r\n\r\n    behaviors: {\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function AddPropertiesDropdownMenuView(options) {\r\n      options || (options = {});\r\n      this.context = options.context;\r\n      this.commands = options.commands || commands;\r\n      this.node = options.node;\r\n      this.container = options.container;\r\n      this.formCollection = options.collection;\r\n      this.originalFormCollection = options.formCollection;\r\n      this.listenTo(this.formCollection, \"reset\", this._updateMenuItems);\r\n\r\n      this.originatingView = options.originatingView;\r\n      if (options.blockingParentView) {\r\n        BlockingView.delegate(this, options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([options.node]),\r\n        container: options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        context: options.context\r\n      };\r\n\r\n      var toolbarName = 'addPropertiesToolbar';\r\n      var toolItemFactory = options.toolbarItems[toolbarName];\r\n      options.collection = new FilteredToolItemsCollection(\r\n          toolItemFactory, {\r\n            status: status,\r\n            commands: this.commands,\r\n            delayedActions: options.containerCollection &&\r\n                            options.containerCollection.delayedActions,\r\n            mask: options.toolbarItemsMask\r\n          });\r\n\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n\r\n      // Passing the el to the ctor prevents creating an own el, including\r\n      // setting its attributes.  The caller must ensure the right tag.\r\n      if (options.el) {\r\n        $(options.el).addClass(_.result(this, \"className\"));\r\n      }\r\n\r\n      this.listenTo(this, \"childview:toolitem:action\", this._triggerMenuItemAction)\r\n          .listenTo(this.node.actions, 'sync update', this._reRender)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n\r\n      if (options.containerCollection && options.containerCollection.delayedActions) {\r\n        this.listenTo(options.containerCollection.delayedActions, 'sync', this._reRender);\r\n      }\r\n\r\n      this.listenTo(this.node, 'sync change', function () {\r\n        this.node.set('csuiAddPropertiesActionsRetrieved', false, {silent: true});\r\n      });\r\n    },\r\n\r\n    _updateMenuItems: function () {\r\n      this.collection.refilter();\r\n    },\r\n\r\n    _reRender: function () {\r\n      // Properties is being destroyed on changing the context node. Both destroyer\r\n      // and a sub-view refreshed are listening on node changes. Although listening\r\n      // is stopped during the destruction, already registered handlers will be\r\n      // triggered nevertheless.\r\n      if (this._isRendered && !this._isRendering && !this.isDestroyed) {\r\n        this._updateMenuItems();\r\n        this.render();\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this._isRendering) {\r\n        return;\r\n      }\r\n      this._isRendering = true;\r\n      this._ensureLazyActionsRetrieved().always(_.bind(function () {\r\n        this._isRendering = false;\r\n      }, this)).done(_.bind(function () {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (this.collection.length < 1 || this.options.suppressAddProperties === true) {\r\n          // hide the + button if there is no action\r\n          this.$el.addClass('binf-hidden');\r\n          dropdownToggleEl.attr('data-cstabindex', '-1');\r\n        } else {\r\n          // show the view because with the latest code the view now can be hidden by the PUT call\r\n          // event that the node does not have any actions yet until it is re-fetched\r\n          this.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n          this.$el.removeClass('binf-hidden');\r\n          dropdownToggleEl.attr('data-cstabindex', '0');\r\n          // when there is only one command, set aria-haspopup=false\r\n          if (this.collection.length === 1) {\r\n            var addNewCat = this.collection.at(0).get('name');\r\n            dropdownToggleEl.attr({\r\n              'aria-haspopup': false,\r\n              'aria-label': addNewCat,\r\n              'title': addNewCat\r\n            });\r\n            dropdownToggleEl.find('.icon-toolbarAdd').attr('title', addNewCat);\r\n          }\r\n        }\r\n\r\n        if (this.collection.length > 1) {\r\n          // make the dropdown menu when there are more than 1 menu item\r\n          dropdownToggleEl.binf_dropdown();\r\n        }\r\n\r\n        this.$el.find('.binf-dropdown').off('click.' + this.cid).on('click.' + this.cid,\r\n            _.bind(this._onClickAddButton, this));\r\n        dropdownToggleEl.off('click.' + this.cid).on('click.' + this.cid,\r\n            _.bind(this._onClickAddButton, this));\r\n\r\n        var self = this;\r\n        setTimeout(function () {\r\n          // event for keyboard navigation\r\n          var event = $.Event('tab:content:render');\r\n          self.$el.trigger(event);\r\n        }, 200);\r\n\r\n      }, this)).fail(_.bind(function () {\r\n        this.$el.addClass('binf-hidden');\r\n        this.$el.find('.binf-dropdown-toggle').attr('data-cstabindex', '-1');\r\n      }, this));\r\n\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      if (this.options.suppressAddProperties !== true) {\r\n        var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n        if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n          dropdownToggleEl.binf_dropdown('toggle', false);\r\n        }\r\n      }\r\n    },\r\n\r\n    _onClickAddButton: function (event) {\r\n      if (this.collection.length === 1) {\r\n        Backbone.trigger('closeToggleAction');\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n\r\n        // when there is just one command\r\n        this._executeAction(this.collection.at(0));\r\n      }\r\n    },\r\n\r\n    _triggerMenuItemAction: function (toolItemView, args) {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      dropdownToggleEl.binf_dropdown('toggle');  // close the dropdown menu before triggering the event\r\n\r\n      this._executeAction(args.toolItem);\r\n    },\r\n\r\n    _executeAction: function (toolItem) {\r\n      var signature = toolItem.get('signature');\r\n      var command = this.commands.get(signature);\r\n\r\n      var executeOptions = {\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        collection: this.formCollection,\r\n        container: this.options.container,\r\n        inheritance: this.options.inheritance,\r\n        context: this.options.context,\r\n        parentView: this.options.parentView,  // use for blocking view and callback\r\n        addPropertiesCallback: this.options.addPropertiesCallback\r\n      };\r\n\r\n      var status = {\r\n        context: this.options.context,\r\n        nodes: new NodeCollection([this.node]),\r\n        container: this.options.container,\r\n        formCollection: this.formCollection,\r\n        originalFormCollection: this.originalFormCollection,\r\n        originatingView: this.originatingView\r\n      };\r\n\r\n      try {\r\n        // If the command was not found and the toolitem is executable, it is\r\n        // a developer's mistake.\r\n        if (!command) {\r\n          throw new Error('Command \"' + signature + '\" not found.');\r\n        }\r\n\r\n        var el = this.$el.find('.binf-dropdown');\r\n        el.addClass(\"binf-disabled\");\r\n        command.execute(status, executeOptions)\r\n            .done(_.bind(function (resp) {\r\n              el.removeClass(\"binf-disabled\");\r\n              //focus on tab link for added property\r\n              el.closest('.tab-links').find('.tab-links-bar ul li.binf-active a').trigger('focus');\r\n            }, this))\r\n            .fail(function (error) {\r\n              el.removeClass(\"binf-disabled\");\r\n              if (error && error.cancelled) {\r\n                //focus on dropdown toggle icon\r\n                el.find(\".binf-btn.binf-dropdown-toggle\").trigger('focus');\r\n              }\r\n            });\r\n      } catch (error) {\r\n        log.warn('Executing the command \"{0}\" failed.\\n{1}',\r\n            command.get('signature'), error.message) && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    _ensureLazyActionsRetrieved: function () {\r\n      var deferred                         = $.Deferred(),\r\n          node                             = this.options.node,\r\n          lazyActionsAreRetrieved          = !!node.get('csuiLazyActionsRetrieved'),\r\n          addPropertiesActionsAreRetrieved = !!node.get('csuiAddPropertiesActionsRetrieved'),\r\n          isNodeLocallyCreated             = !node.get('id'),\r\n          nonPromotedCommands              = node.nonPromotedActionCommands;\r\n      var actionsCommands,\r\n          actionsAreRetrieved = lazyActionsAreRetrieved && addPropertiesActionsAreRetrieved;\r\n\r\n      // Add Properties toolbarItems\r\n      // Optimization: AddProperties commands are no longer fetched upfront in NodesTable.\r\n      if (this.options.toolbarItems && nonPromotedCommands) {\r\n        // if lazyActionsAreRetrieved = false, merge Add Properties toolbarItems to it for retrieval\r\n        if (!lazyActionsAreRetrieved) {\r\n          // Fetch the AddProperties commands as part of nonPromotedCommands in Properties page.\r\n          var additionalPropertiesCommands = commands.getSignatures(this.options.toolbarItems);\r\n          if (additionalPropertiesCommands.length) {\r\n            actionsCommands = nonPromotedCommands = node.nonPromotedActionCommands =\r\n                _.union(additionalPropertiesCommands, node.nonPromotedActionCommands);\r\n          }\r\n        } else if (!addPropertiesActionsAreRetrieved) {\r\n          // if not yet retrieved, retrieve the additional Add Properties toolbarItems only\r\n          actionsCommands = commands.getSignatures(this.options.toolbarItems);\r\n        }\r\n      }\r\n\r\n      function fetchActionsCommands() {\r\n        if (!lazyActionsAreRetrieved) {\r\n          return node.setEnabledLazyActionCommands(true);\r\n        } else if (!addPropertiesActionsAreRetrieved) {\r\n          return node.getAdditionalActionCommands(\r\n              actionsCommands, 'csuiAddPropertiesActionsRetrieved');\r\n        } else {\r\n          return $.Deferred().reject().promise();\r\n        }\r\n      }\r\n\r\n      if (!!node && !isNodeLocallyCreated && !actionsAreRetrieved && actionsCommands &&\r\n          actionsCommands.length) {\r\n        var self = this;\r\n        this.$el.find('.binf-dropdown').addClass('binf-hidden');\r\n        this.$el.find('.csui-loading-parent-wrapper').removeClass('binf-hidden');\r\n        fetchActionsCommands()\r\n            .done(function () {\r\n              // As per UX req: need to show loading dots at least for 300ms after fetch as like in\r\n              // inline actionbar\r\n              setTimeout(function () {\r\n                self.$el.find('.csui-loading-parent-wrapper').addClass('binf-hidden');\r\n                self._updateMenuItems();\r\n                deferred.resolve();\r\n              }, 300);\r\n            })\r\n            .fail(function () {\r\n              self.$el.find('.binf-dropdown').removeClass('binf-hidden');\r\n              deferred.reject();\r\n            });\r\n      } else {\r\n        deferred.resolve();\r\n      }\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesDropdownMenuView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/add.properties.menuitems',['csui/lib/underscore', 'csui/utils/base',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/controls/toolbar/toolitems.factory',\r\n  'csui/controls/toolbar/toolitem.model',\r\n  // Load extra tool items to be added to this collection\r\n  'csui-ext!csui/widgets/metadata/add.properties.menuitems',\r\n  // Load extra tool items from the previous module location\r\n  'csui-ext!csui/widgets/metadata/add.properties/toolbaritems'\r\n], function (_, base, lang, ToolItemsFactory, TooItemModel,\r\n    extraToolItems, oldExtraToolItems) {\r\n  'use strict';\r\n\r\n  var toolbarItems = {\r\n\r\n    addPropertiesToolbar: new ToolItemsFactory(\r\n        {\r\n          add: [\r\n            {\r\n              signature: \"AddCategory\",\r\n              name: lang.addNewCategory\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          maxItemsShown: 0 // force toolbar to immediately start with a drop-down list\r\n        }\r\n    )\r\n\r\n  };\r\n\r\n  if (oldExtraToolItems) {\r\n    // TODO: Issue deprecation warning\r\n    addExtraToolItems(oldExtraToolItems);\r\n  }\r\n\r\n  if (extraToolItems) {\r\n    addExtraToolItems(extraToolItems);\r\n  }\r\n\r\n  function addExtraToolItems(extraToolItems) {\r\n    _.each(extraToolItems, function (moduleToolItems) {\r\n      _.each(moduleToolItems, function (toolItems, key) {\r\n        var targetToolbar = toolbarItems[key];\r\n        if (!targetToolbar) {\r\n          throw new Error('Invalid target toolbar: ' + key);\r\n        }\r\n        _.each(toolItems, function (toolItem) {\r\n          toolItem = new TooItemModel(toolItem);\r\n          targetToolbar.addItem(toolItem);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  return toolbarItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/add.properties.menuitems.mask',['module', 'csui/lib/underscore',\r\n  'csui/controls/toolbar/toolitems.mask',\r\n  'csui/utils/toolitem.masks/global.toolitems.mask'\r\n], function (module, _, ToolItemMask, GlobalMenuItemsMask) {\r\n  'use strict';\r\n\r\n  var AddPropertiesMenuItemsMask = ToolItemMask.extend({\r\n\r\n    constructor: function AddPropertiesMenuItemsMask() {\r\n      var config = module.config(),\r\n          globalMask = new GlobalMenuItemsMask();\r\n      ToolItemMask.prototype.constructor.call(this, globalMask, {normalize: false});\r\n      // Masks passed in by separate require.config calls are sub-objects\r\n      // stored in the outer object be different keys\r\n      _.each(config, function (source, key) {\r\n        this.extendMask(source);\r\n      }, this);\r\n      // Enable restoring the mask to its initial state\r\n      this.storeMask();\r\n    }\r\n\r\n  });\r\n\r\n  return AddPropertiesMenuItemsMask;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"csui-tab-contents-header-content\\\">\\r\\n  <div class=\\\"csui-tab-contents-header-right\\\">\\r\\n    <div class=\\\"required-field-switch binf-hidden\\\">\\r\\n        <span id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.requiredFieldsLabelId || (depth0 != null ? depth0.requiredFieldsLabelId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"requiredFieldsLabelId\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"only-required-fields-label\\\"\\r\\n              title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.onlyRequiredFieldsLabel || (depth0 != null ? depth0.onlyRequiredFieldsLabel : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"onlyRequiredFieldsLabel\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n      <div class=\\\"required-fields-switch\\\"></div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <h4>General</h4>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_tab.contents.header_tab.contents.header', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',[],function(){});\n","csui.define('csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',['require', 'csui/lib/jquery', 'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/lib/marionette', 'csui/controls/form/pub.sub',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'hbs!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header',\r\n  'css!csui/widgets/metadata/impl/tab.contents.header/tab.contents.header', 'csui/lib/binf/js/binf'\r\n], function (require, $, _, Backbone, Marionette, PubSub, VersionModel, lang,\r\n    tabContentsHeaderTemplate) {\r\n  'use strict';\r\n\r\n  var TabContentsHeaderView = Marionette.ItemView.extend({\r\n\r\n    tagName: 'div',\r\n\r\n    className: 'csui-tab-contents-header',\r\n\r\n    template: tabContentsHeaderTemplate,\r\n\r\n    ui: {\r\n      leftTabContentsHeader: '.csui-tab-contents-header-content',\r\n      rightTabContentsHeader: '.csui-tab-contents-header-right',\r\n      tabContentsHeaderTitle: '.csui-tab-contents-header-content h4',\r\n      requiredSwitchEle: '.required-field-switch', //container of required field switch\r\n      requiredSwitchIcon: '.required-field-switch > div.required-fields-switch'\r\n    },\r\n\r\n    events: {\r\n      'click @ui.requiredSwitchIcon': 'onClickRequiredIconDiv',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    constructor: function TabContentsHeaderView() {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.pubsubPostFix = (this.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                           this.options.node.get('id');\r\n\r\n      this.requiredFieldsLabelId = _.uniqueId(\"requiredFields\");\r\n\r\n      var objPubSubId = 'pubsub:tab:contents:header:view:change:tab:title:' + this.pubsubPostFix;\r\n      PubSub.off(objPubSubId);\r\n\r\n      this.listenTo(PubSub, objPubSubId, this._changeTabTitle);\r\n\r\n      this.listenTo(this.collection, 'add', function (model) {\r\n        !!model.get('required') && this._showRequiredSwitch();\r\n      });\r\n      this.listenTo(this.collection, 'remove', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        }\r\n      });\r\n\r\n      this.listenTo(this, 'metadata:schema:updated', function (model) {\r\n        if (!this.isRequiredCatPresent()) {\r\n          this._hideRequiredSwitch();\r\n        } else {\r\n          this._showRequiredSwitch();\r\n        }\r\n      }, this);\r\n    },\r\n\r\n    templateHelpers: function () {\r\n      return {\r\n        onlyRequiredFieldsLabel: lang.onlyRequiredFieldsLabel,\r\n        requiredFieldsLabelId: this.requiredFieldsLabelId\r\n      };\r\n    },\r\n\r\n    _changeTabTitle: function (args) {\r\n      this.$(this.ui.tabContentsHeaderTitle).html(args);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.requiredFieldSwitchModel = new Backbone.Model(\r\n          {data: !!this.options.node.collection.requireSwitched});\r\n      var self = this;\r\n\r\n      //fix for grunt out-release\r\n      require(['csui/controls/form/fields/booleanfield.view'], function (BooleanFieldView) {\r\n        self.requiredFieldSwitchView = new BooleanFieldView({\r\n          mode: 'writeonly',\r\n          model: self.requiredFieldSwitchModel,\r\n          labelId: self.requiredFieldsLabelId\r\n        });\r\n        self.requiredFieldSwitchView.render();\r\n        self.listenTo(self.requiredFieldSwitchView, 'field:changed', function (event) {  //toggle\r\n          // required fields\r\n          var objPubSubId = 'pubsub:tab:contents:header:view:switch:' + self.pubsubPostFix;\r\n\r\n          PubSub.trigger(objPubSubId, {on: event.fieldvalue});\r\n          if (!!self.options.node.collection) {\r\n            self.options.node.collection.requireSwitched = event.fieldvalue;\r\n          }\r\n        });\r\n        self.$('.required-fields-switch').append(self.requiredFieldSwitchView.$el);\r\n        if (self.isRequiredCatPresent()) {\r\n          self._showRequiredSwitch();\r\n        }\r\n\r\n        PubSub.off('pubsub:header:rightbar:view:change:switch:status');\r\n        self.listenTo(PubSub, 'pubsub:header:rightbar:view:change:switch:status', function (reset) {\r\n          if (!!reset) {\r\n            if (!!self.requiredFieldSwitchView.curVal) {\r\n              self.requiredFieldSwitchView.$el.trigger('click');\r\n            }\r\n          } else if (!!self.requiredFieldSwitchModel &&\r\n                     (self.requiredFieldSwitchModel.get('data') !== undefined &&\r\n                     !self.requiredFieldSwitchModel.get('data')) && !!self.options.node &&\r\n                     !!self.options.node.collection &&\r\n                     !!self.options.node.collection.requireSwitched) {\r\n            self.requiredFieldSwitchView.$el.trigger('click');\r\n          }\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    currentlyFocusedElement: function (event) {\r\n      if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n        return $(this.ui.requiredSwitchIcon.find(\":input\"));\r\n      } else {\r\n        return undefined;\r\n      }\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 32 || event.keyCode === 13) {\r\n        // space key(32) or enter key(13)\r\n        if (!this.ui.requiredSwitchEle.hasClass('binf-hidden') && this.requiredFieldSwitchView) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // need timeout to overcome FireFox space press\r\n          setTimeout(_.bind(function () {\r\n            $(target).trigger('click');\r\n          }, this), 200);\r\n        }\r\n      }\r\n      return undefined;\r\n    },\r\n\r\n    // this method is triggered by keyboard\r\n    onClickRequiredIconDiv: function (event) {\r\n      this.requiredFieldSwitchView.onClickWriteField(event);\r\n    },\r\n\r\n    _hideRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.addClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.addClass('binf-hidden');\r\n      //turn off if no required cat is present\r\n      !!this.requiredFieldSwitchView && !!this.requiredFieldSwitchView.getValue() &&\r\n      this.requiredFieldSwitchView.ui.flagWriteField.trigger('click');\r\n    },\r\n\r\n    _showRequiredSwitch: function () {\r\n      this.ui.tabContentsHeaderTitle.removeClass('csui-tab-contents-header-title-full-width');\r\n      this.ui.requiredSwitchEle.removeClass('binf-hidden');\r\n    },\r\n\r\n    isRequiredCatPresent: function () {\r\n      if (!!this.options.hideRequiredFieldsSwitch) {\r\n        // Permanently hide \"required\" switch\r\n        return false;\r\n      }\r\n      var isRequiredCatPresent = false,\r\n          i                    = 0;\r\n      for (; !isRequiredCatPresent && i < this.collection.models.length; i++) {\r\n        isRequiredCatPresent = this.collection.models[i].get('required') === true;\r\n      }\r\n      return isRequiredCatPresent;\r\n    }\r\n  });\r\n\r\n  return TabContentsHeaderView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/url', 'csui/utils/base', 'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/controls/tab.panel/tab.links.ext.view',\r\n  'csui/controls/tab.panel/tab.links.ext.scroll.mixin',\r\n  'csui/models/form', 'csui/controls/form/form.view',\r\n  'csui/widgets/metadata/property.panels/categories/impl/category.form.view',\r\n  'csui/models/appliedcategories', 'csui/widgets/metadata/impl/metadata.forms',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/controls/progressblocker/blocker',\r\n  'csui/models/version', 'csui/widgets/metadata/impl/metadata.utils', 'i18n',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/widgets/metadata/general.form.fields/general.form.field.behavior',\r\n  'csui/widgets/metadata/general.action.fields/general.action.field.behavior',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang', 'csui/widgets/metadata/metadata.property.panels',\r\n  'csui/widgets/metadata/impl/add.properties/add.properties.dropdown.menu.view',\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/impl/tab.contents.header/tab.contents.header.view',\r\n  'csui/controls/form/pub.sub',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/utils/deepClone/deepClone'\r\n\r\n], function (_, $, Backbone, Marionette, Url, base, TabPanelView, TabLinkCollectionViewExt,\r\n    TabLinksScrollMixin, FormModel, FormView, CategoryFormView, AppliedCategoryCollection,\r\n    MetadataFormCollection, ModalAlert, BlockingView, VersionModel, MetadataUtils, i18n,\r\n    PerfectScrollingBehavior, GeneralFormFieldBehavior, GeneralActionFieldBehavior, lang,\r\n    metadataPropertyPanels,\r\n    AddPropertiesDropdownMenuView, toolbarItems, AddPropertiesMenuItemsMask,\r\n    TabContentHeaderView, PubSub, MetadataTabContentCollectionView) {\r\n\r\n  // Private and local collection defined and used by Metadata Properties View Class\r\n  var AppliedCategoryActionsCollection = AppliedCategoryCollection.extend({\r\n\r\n    constructor: function AppliedCategoryActionsCollection(attributes, options) {\r\n      AppliedCategoryCollection.prototype.constructor.apply(this, arguments);\r\n      this.options = options || {};\r\n      _.defaults(this.options, {urlResource: ''});\r\n    },\r\n\r\n    url: function () {\r\n      return Url.combine(this.node.urlBase(), this.options.urlResource);\r\n    },\r\n\r\n    fetch: function () {\r\n      //\r\n      // 1. with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      //\r\n      // 2. with add item, the object has not been created yet on the server\r\n      //\r\n      if (this.node instanceof VersionModel ||\r\n          this.node.get(\"id\") === undefined || this.options.action) {\r\n        this.fetching = false;\r\n        this.fetched = true;\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      return AppliedCategoryCollection.prototype.fetch.apply(this, arguments);\r\n    },\r\n\r\n    parse: function () {\r\n      // with document version, the is no categories/actions call but luckily everything is\r\n      // read-ony in UX specs for this release of the UI\r\n      if (this.node instanceof VersionModel) {\r\n        return {};\r\n      }\r\n      // with add item, the object has not been created yet on the server\r\n      if (this.node.get(\"id\") === undefined || this.options.action) {\r\n        return {categories_add: \"dummy value\"};\r\n      }\r\n      return AppliedCategoryCollection.prototype.parse.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  var MetadataPropertiesViewImpl = TabPanelView.extend({\r\n\r\n    className: function() {\r\n      var classNames = (base.isTouchBrowser() ? 'cs-touch-browser ' : '') + 'cs-metadata-properties' +\r\n                       ' binf-panel binf-panel-default';\r\n      classNames += !!this.options && !!this.options.topAlignLabel ? ' csui-top-align-label' : '';\r\n      return classNames;\r\n    },\r\n\r\n    rtlEnabled: i18n.settings.rtl,\r\n\r\n    contentView: function (model) {\r\n      var panel = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        return panel.contentView || FormView;\r\n      }\r\n      if (model.get('role_name') === 'categories') {\r\n        return CategoryFormView;\r\n      }\r\n      return FormView;\r\n    },\r\n\r\n    contentViewOptions: function (model) {\r\n      var options = {\r\n            context: this.options.context,\r\n            node: this.options.node,\r\n            mode: this.options.formMode,\r\n            fetchedModels: this.allForms,\r\n            displayedModels: this.collection,\r\n            originatingView: this,\r\n            layoutMode: 'doubleCol',\r\n            metadataView: this.options.metadataView,\r\n            generalFormFieldDescriptors: this._generalFormFieldDescriptors,\r\n            generalActionFieldDescriptors: this._generalActionFieldDescriptors\r\n          },\r\n          panel   = _.findWhere(this._propertyPanels, {model: model});\r\n      if (panel) {\r\n        _.extend(options, panel.contentViewOptions);\r\n      }\r\n      return options;\r\n    },\r\n\r\n    // specific implementation for TabableRegionBehavior\r\n    isTabable: function () {\r\n      if (this.options.notTabableRegion === true) {\r\n        return false;\r\n      }\r\n      return true;  // this view can be reached by tab\r\n    },\r\n\r\n    constructor: function MetadataPropertiesViewImpl(options) {\r\n      //debugger;\r\n      options || (options = {});\r\n      var delete_icon;\r\n\r\n      if (base.isTouchBrowser()) {\r\n        delete_icon = 'category_delete-touch-browser';\r\n      } else {\r\n        delete_icon = 'category_delete';\r\n      }\r\n\r\n      _.defaults(options, {\r\n        tabType: 'binf-nav-pills',\r\n        mode: 'spy',\r\n        extraScrollTopOffset: 3,\r\n        formMode: 'update',\r\n        toolbar: true,\r\n        toolbarItems: toolbarItems,\r\n        delete_icon: delete_icon,\r\n        delete_tooltip: lang.removeCategoryTooltip,\r\n        contentView: this.getContentView,\r\n        TabLinkCollectionViewClass: TabLinkCollectionViewExt,\r\n        TabContentCollectionViewClass: MetadataTabContentCollectionView,\r\n        searchTabContentForTabableElements: true,\r\n        tabContentAccSelectors: 'a[href], area[href], input:not([disabled]),' +\r\n                                ' select:not([disabled]), textarea:not([disabled]),' +\r\n                                ' button:not([disabled]), iframe, object, embed,' +\r\n                                ' *[tabindex], *[data-cstabindex], *[contenteditable]'\r\n      });\r\n\r\n      this.context = options.context;\r\n\r\n      if (!options.toolbarItemsMask) {\r\n        options.toolbarItemsMask = new AddPropertiesMenuItemsMask();\r\n      }\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '> .binf-tab-content',\r\n          scrollXMarginOffset: 30,\r\n          // like bottom padding of container, otherwise scrollbar is shown always\r\n          scrollYMarginOffset: 15\r\n        }\r\n      }, this.behaviors);\r\n\r\n      if (options.collection) {\r\n        this.allForms = options.collection;\r\n      } else {\r\n         // in case of folder tweak the type while drag and drop folders, else sublevel files failed to upload\r\n         var node = options.node,\r\n         enforcedRequiredAttrsForFolders = node.get('enforcedRequiredAttrsForFolders'),\r\n        tempNode = node;\r\n        if(enforcedRequiredAttrsForFolders) {\r\n          tempNode = node.clone();\r\n          tempNode.set('type',144);\r\n        }\r\n        this.allForms = new MetadataFormCollection(undefined, {\r\n          node: tempNode,\r\n          connector: options.node.connector,\r\n          container: options.container,\r\n          action: options.action,\r\n          inheritance: options.inheritance,\r\n          autoreset: true,\r\n          formCollection: options.formCollection\r\n        });\r\n        // Prepare an empty collection to be populated by tabs/forms later\r\n        options.collection = new Backbone.Collection();\r\n      }\r\n\r\n      // have collection to keep track of newly added categories\r\n      if (options.node.newCategories === undefined) {\r\n        options.node.newCategories = new Backbone.Collection();\r\n      }\r\n      if (options.node.removedCategories === undefined) {\r\n        options.node.removedCategories = [];\r\n      }\r\n\r\n      TabPanelView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.widths = [];\r\n\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue(this);\r\n      }\r\n\r\n      PubSub.off('pubsub:tab:contents:panel:textarea:scrollupdate');\r\n      this.listenTo(PubSub, 'pubsub:tab:contents:panel:textarea:scrollupdate',\r\n          this._updateToTextAreaScrollbar);\r\n\r\n      this.listenTo(this.allForms, \"request\", this.blockActions)\r\n          .listenTo(this.allForms, \"request\", this._checkFormFetching)\r\n          .listenTo(this.allForms, \"sync\", this._syncForms)\r\n          .listenTo(this.allForms, \"sync\", this.unblockActions)\r\n          .listenTo(this.allForms, \"destroy\", this.unblockActions)\r\n          .listenTo(this.allForms, \"error\", this.unblockActions)\r\n          // If tab panel re-renders itself whe the tab collection changes, it\r\n          // has to prevent tab links and tab content from doing the same,\r\n          // because these two views are destroyed during tab panel re-rendering\r\n          .listenTo(this.collection, \"reset\", this.render)\r\n          .listenTo(options.node, 'change:id', function () {\r\n            if (this.options.formMode !== 'create' && !this._fetchingForms && !this.isDestroyed) {\r\n              this._fetchForms();\r\n            }\r\n          }).listenTo(this, 'reset:switch', this._resetRequiredSwitchView)\r\n          .listenTo(this, \"update:button\", _.bind(function (flag) {\r\n            this.options.metadataView && this.options.metadataView.trigger(\"update:button\", {overlay: flag});\r\n          }, this));\r\n\r\n      // If the collection has been fetched before passing it to the view\r\n      // and the operation is still ongoing, turn on the blocking view right\r\n      // away and wait for the finishing event to turn it off\r\n      if (this.allForms.fetching) {\r\n        this.blockActions();\r\n      }\r\n\r\n      $(window).on('resize', {view: this}, this._onWindowResize);\r\n      $(window).on('resize.tableview', {view: this}, this._onWindowResize);\r\n\r\n      // Perform after-rendering steps after blocking view renders inside\r\n      // into this view; it registers for the render event earlier\r\n      this.listenTo(this, 'render', this.onRendered);\r\n      this.listenTo(Backbone, 'metadata:schema:updated', function (model) {\r\n        this.resolveHasRequiredFields(model);\r\n        this.has_required_fields = this.collection\r\n            .filter(\r\n                function (model) {\r\n                  return model.get('required') === true;\r\n                });\r\n        this.tabLinks.trigger('metadata:schema:updated', model);\r\n        this.tabContentHeader.trigger('metadata:schema:updated', model);\r\n      }, this);\r\n\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      $(window).off('resize', this._onWindowResize);\r\n      $(window).off('resize.tableview', this._onWindowResize);\r\n\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      if (this.contentHeaderRegion) {\r\n        this.contentHeaderRegion.empty();\r\n      }\r\n    },\r\n\r\n    _updateScrollbar: function () {\r\n      this.trigger('update:scrollbar');\r\n      this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: 0}, \"fast\");\r\n    },\r\n\r\n    _updateToTextAreaScrollbar: function (data) {\r\n      this.trigger('update:scrollbar');\r\n      var scrollTop = data.$el.offset().top -\r\n                      this.$(this.behaviors.PerfectScrolling.contentParent).offset().top;\r\n      if (this.$(this.behaviors.PerfectScrolling.contentParent).scrollTop() > 0) {\r\n        this.$(this.behaviors.PerfectScrolling.contentParent).animate({scrollTop: scrollTop},\r\n            \"fast\");\r\n      }\r\n    },\r\n\r\n    _getModelFromCollectionByTitle: function (title) {\r\n      if (title && _.isString(title) && this.collection) {\r\n        return this.collection.find({title: title});\r\n      }\r\n    },\r\n\r\n    _getModelIndex: function (id, title) {\r\n      var index = -1;\r\n      if (this.collection && this.collection.length > 0) {\r\n        var i, model, matchIndex = -1;\r\n        for (i = 0; i < this.collection.length; i++) {\r\n          model = this.collection.at(i);\r\n          if (id === model.get('id') || title === model.get('title')) {\r\n            index = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      return index;\r\n    },\r\n\r\n    _activateTab: function (modelOrTitle) {\r\n      var model = this._getModelFromCollectionByTitle(modelOrTitle) || modelOrTitle;\r\n      if (model && model instanceof Backbone.Model) {\r\n        var matchIndex = this._getModelIndex(model.get('id'), model.get('title'));\r\n        if (matchIndex !== -1) {\r\n          this._activateTabByIndex(matchIndex);\r\n        }\r\n      }\r\n    },\r\n\r\n    _activateTabByIndex: function (index) {\r\n      this.options.activeTab.set(\"tabIndex\", index);\r\n      var tabLink = this.tabLinks.children.findByIndex(index);\r\n      tabLink.activate(true);\r\n    },\r\n\r\n    _activateSelectedPropertyTab: function () {\r\n      var selectedProperty = this._getModelFromCollectionByTitle(this.options.selectedProperty) ||\r\n                             this.options.selectedProperty;\r\n      if (selectedProperty && selectedProperty instanceof Backbone.Model) {\r\n        var matchIndex = this._getModelIndex(selectedProperty.get('id'), selectedProperty.get('title'));\r\n        if (matchIndex !== -1) {\r\n          this.options.activeTab.set(\"tabIndex\", matchIndex);\r\n          this.tabLinks.children.findByIndex(matchIndex).activate();\r\n        }\r\n      }\r\n\r\n    },\r\n\r\n    // public\r\n    render: function () {\r\n      // fetch forms if not done or not failed already\r\n      var dataFetched = true;\r\n      if (!this.allForms.fetched && !this.allForms.error) {\r\n        dataFetched = false;\r\n        if (!this._fetchingForms) {\r\n          this._fetchForms();\r\n        }\r\n      }\r\n      if (dataFetched === false || this._fetchingForms) {\r\n        // wait until data is there\r\n        return this;\r\n      }\r\n\r\n      if (this.collection.length === 1) {\r\n        // only one form given -> remove title\r\n        var singleFormModel = this.collection.first(),\r\n            schema          = _.clone(singleFormModel.get('schema'));\r\n        schema.title = '';\r\n        singleFormModel.set('schema', schema);\r\n      }\r\n\r\n      var self = this;\r\n      this.collection.each(function (model, index) {\r\n        var has_required_fields = self.resolveHasRequiredFields.call(self, model);\r\n        if (has_required_fields) {\r\n          self.hasRequiredField = true;\r\n        }\r\n      });\r\n      _.extend(this, {\r\n        _: _\r\n      });\r\n      // data available -> render\r\n      TabPanelView.prototype.render.apply(this);\r\n      // create add properties + dropdown toolbar\r\n      this._createAddPropertiesView();\r\n      this._initializeOthers();\r\n      return this;\r\n    },\r\n\r\n    resolveHasRequiredFields: function (model) {\r\n      var metadataUtils = new MetadataUtils();\r\n      var has_required_fields = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(\r\n          model.get('options'), model.get('schema'), model.get('id')\r\n      );\r\n      model.set('required', has_required_fields);\r\n      return has_required_fields;\r\n    },\r\n\r\n    onDestroy: function () {\r\n      if (this._fetchingForms) {\r\n        this.unblockActions();\r\n      }\r\n    },\r\n\r\n    onRendered: function () {\r\n      this._setTablinksAttributes();\r\n      // work around for the dialog fade-in delay\r\n      // delay this call a bit since the initial dialog fade in makes the tab to be hidden\r\n      // calling _setTabLinksAttributes() the second time here fixes the dialog fade-in delay\r\n      // but does not have any effect if the first call already works\r\n      setTimeout(_.bind(this._setTablinksAttributes, this), 300);\r\n\r\n      // If tab panel re-renders itself whe the tab collection changes, it\r\n      // has to prevent tab links and tab content from doing the same,\r\n      // because these two views are destroyed during tab panel re-rendering\r\n      this.tabLinks.stopListening(this.collection, 'reset');\r\n      this.tabContent.stopListening(this.collection, 'reset');\r\n      if (this.tabContentHeader) { // clean-up completely tab content's header if it not yet.\r\n        this.tabContentHeader.destroy();\r\n        this.$el.find(\".csui-tab-contents-header-wrapper\").remove();\r\n      }\r\n\r\n      this.listenTo(this.tabLinks, 'childview:delete:tab', _.bind(this._onDeleteCategory, this));\r\n\r\n      // Alpaca slow rendering work-around: hide all views then block and\r\n      // wait until all forms are rendered then show view and unblock\r\n      this.tabLinks.$el.addClass('binf-hidden');\r\n      this.tabContent.$el.addClass('binf-hidden');\r\n      this.blockActions();\r\n      this.updateTitle = true;\r\n      var allFormsRendered = [],\r\n          self             = this;\r\n      this.tabContent.children.each(_.bind(function (childView) {\r\n        var formRendered = $.Deferred();\r\n        allFormsRendered.push(formRendered.promise());\r\n        var childViewContent = childView.content;\r\n        if (childViewContent instanceof FormView && !childViewContent.isRenderFinished()) {\r\n          this.listenTo(childViewContent, 'render:form', function (childViewContent) {\r\n            var formHtmlRegion = !!childViewContent.$el.find(\".cs-form-singlecolumn\") ?\r\n                                 childViewContent.$el.find(\".cs-form-singlecolumn\") :\r\n                                 childViewContent.$el.find(\".cs-form-doublecolumn\");\r\n            if (!!formHtmlRegion && formHtmlRegion.length > 0) {\r\n              if (!!formHtmlRegion.html()) {\r\n                formRendered.resolve();\r\n              }\r\n            } else {\r\n              formRendered.resolve();\r\n            }\r\n          });\r\n        } else {\r\n          formRendered.resolve();\r\n        }\r\n      }, this));\r\n      $.when.apply($, allFormsRendered).done(function () {\r\n        //debugger;\r\n        self.unblockActions();\r\n        self.tabLinks.$el.removeClass('binf-hidden');\r\n\r\n        // Begin: tab contents header which contains tab title and required field view.\r\n        var showStickyHeader = !(!!self.options.hideStickyHeader);\r\n        if (showStickyHeader) {\r\n          var objPubSubId = (self.options.node instanceof VersionModel ? 'v' : 'p');\r\n          objPubSubId = 'pubsub:tab:contents:header:view:switch:' + objPubSubId +\r\n                        self.options.node.get('id');\r\n          PubSub.off(objPubSubId);\r\n          self.listenTo(PubSub, objPubSubId, self._onRequiredSwitch);\r\n\r\n          self.tabContent.$el.before(\"<div class='csui-tab-contents-header-wrapper'></div>\");\r\n          self.contentHeaderRegion = new Marionette.Region({\r\n            el: self.$el.find('.csui-tab-contents-header-wrapper')\r\n          });\r\n          self.tabContentHeader = new TabContentHeaderView(self.options);\r\n          self.contentHeaderRegion.show(self.tabContentHeader);\r\n        }\r\n        // End: tab contents header which contains tab title and required field view.\r\n\r\n        if (!!self.tabContentHeader && !!self.options.node.collection.requireSwitched &&\r\n            !!self.hasRequiredField) {\r\n          self._hideNotRequiredFormFields(true);\r\n        }\r\n        self.tabContent.$el.removeClass('binf-hidden');\r\n\r\n        // TODO: Find out, how the rightToolbar is added from outside;\r\n        // it does not happen if the form collection is empty\r\n        if (self.addPropertiesView && self.rightToolbar) {\r\n          var apv = self.addPropertiesView.render();\r\n          Marionette.triggerMethodOn(apv, 'before:show', apv, self);\r\n          self.rightToolbar.append(apv.el);\r\n          Marionette.triggerMethodOn(apv, 'show', apv, self);\r\n          self.allFormsRendered = true;\r\n        }\r\n\r\n        // find out the first visible tab and make it active.\r\n        // Iterate over tab colleciton instead of childer where order is not guaranteed.\r\n        var firstVisibleTabLink,\r\n            firstVisibleTab = self.tabLinks.collection.find(function (tabModel) {\r\n              var tabLink = self.tabLinks.children.findByModel(tabModel);\r\n              return !tabLink.$el.hasClass('binf-hidden');\r\n            });\r\n        if (firstVisibleTab &&\r\n            !(firstVisibleTabLink = self.tabLinks.children.findByModel(\r\n                firstVisibleTab)).isActive()) {\r\n          firstVisibleTabLink.activate();\r\n        }\r\n\r\n        self._initializeOthers();\r\n        self.triggerMethod('render:forms', this);\r\n\r\n        // iPad needs a little timeOut\r\n        setTimeout(function () {\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n        }, 300);\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n\r\n        if (self.options.formMode !== \"create\") {\r\n          self.setFocus();\r\n        }\r\n        self.trigger('update:scrollbar');\r\n        if (self.updateTitle) {\r\n          var objPubSubTabId = (self.options.node instanceof VersionModel ? 'v' : 'p') +\r\n                               self.options.node.get('id');\r\n          objPubSubTabId = 'pubsub:tab:contents:header:view:change:tab:title:' +\r\n                           objPubSubTabId;\r\n          PubSub.trigger(objPubSubTabId, firstVisibleTabLink.el.innerText);\r\n        }\r\n\r\n      }).then(function () {\r\n        // after rendered the metadata view,check options.selectedProperty and activate the tab if needed\r\n        self._activateSelectedPropertyTab();\r\n      });\r\n\r\n      if (this.$el && !this.$el.is(\":visible\")) {\r\n        this.updateTitle = false;\r\n      }\r\n      //Getting metadataItemNameView from metadataHeaderView presented in options.metadataView\r\n      //to set tabindex for Toggle Icon\r\n      this.options.metadataView && this.options.metadataView.metadataHeaderView &&\r\n      this.options.metadataView.metadataHeaderView.metadataItemNameView.setToggleIconTabIndex();\r\n    },\r\n\r\n    onShow: function () {\r\n    },\r\n\r\n    setFocus: function () {\r\n      // TODO: check if we want to have this\r\n      // set focus to first form\r\n      //var firstTabContentView = this.tabContent.children[0];\r\n      //if( firstFormView) {\r\n      //  firstTabContentView.content.setFocus();\r\n      //}\r\n    },\r\n\r\n    _computeTablinkWidth: function () {\r\n      var tabLinksBar = this.$el.find('.tab-links-bar');\r\n      var tabLinks = tabLinksBar && tabLinksBar.find('ul > li');\r\n      tabLinksBar && tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n\r\n      // compute only when there is more than one tab (e.g. General + cats/rms/etc.)\r\n      if (tabLinksBar && tabLinksBar.length > 0 && tabLinks && tabLinks.length > 1) {\r\n        var tabLinksBarWidth = $(tabLinksBar[0]).width();\r\n        var totalTablinksWidth = 0;\r\n        var i, numTabs = 0;\r\n        for (i = 0; i < tabLinks.length; i++) {\r\n          var $tabLink = $(tabLinks[i]);\r\n          if (!($tabLink.hasClass('hidden-by-switch'))) {\r\n            totalTablinksWidth += $tabLink.width();\r\n            numTabs++;\r\n          }\r\n        }\r\n        var oneTablinkWidth = numTabs > 0 ? (totalTablinksWidth / numTabs) : $(tabLinks[0]).width();\r\n\r\n        // if this total width check values are still smaller than the tabLinks bar width,\r\n        // then increase the tabLink width\r\n        var totalWidthCheck1 = totalTablinksWidth * 2;  // twice smaller\r\n        var totalWidthCheck2 = totalTablinksWidth + (1.3 * oneTablinkWidth);  // a little smaller\r\n        if (tabLinksBarWidth > totalWidthCheck1) {\r\n          tabLinksBar.addClass('very-wide-tablink');\r\n        } else if (tabLinksBarWidth > totalWidthCheck2) {\r\n          tabLinksBar.addClass('wide-tablink');\r\n        } else {\r\n          tabLinksBar.removeClass('wide-tablink very-wide-tablink');\r\n        }\r\n      }\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      // delay this a bit since the fade-in may make the tabs to be hidden\r\n      setTimeout(_.bind(function () {\r\n        this._setTablinksAttributes();\r\n        this._enableToolbarState();\r\n      }, this), 300);\r\n    },\r\n\r\n    // public: validate all Alpaca forms\r\n    validateForms: function () {\r\n      var allFormsValid = true;\r\n      if (!!this.allFormsRendered) {\r\n        this.tabContent.children.each(function (tab) {\r\n          var isCurrentFormValid = tab.content.validate();\r\n          allFormsValid = allFormsValid && isCurrentFormValid;\r\n        });\r\n        allFormsValid ? this._hideValidationError() : this._showValidationError();\r\n        return allFormsValid;\r\n      } else {\r\n        return false;\r\n      }\r\n    },\r\n\r\n    // public: get values from all Alpaca forms\r\n    getFormsValues: function () {\r\n      var formValues = {},\r\n          formFieldValues, formFieldRoles, roles, role;\r\n\r\n      this.tabContent.children.each(function (tab) {\r\n        var values   = tab.content.getValues(),\r\n            roleName = tab.content.model.get(\"role_name\"),\r\n            category, catId;\r\n\r\n        if (values) {\r\n          if (roleName) {\r\n            roles = formValues.roles || (formValues.roles = {});\r\n            role = roles[roleName] || (roles[roleName] = {});\r\n            if (roleName === 'categories') {\r\n              // For categories, merge the properties to the\r\n              // roles.categories.<category_id> object\r\n              catId = tab.model.get(\"id\").toString();\r\n              category = role[catId] || (role[catId] = {});\r\n              // when attributes are not set, the server deletes\r\n              // the category unless it is set to null\r\n              if (_.isEmpty(values)) {\r\n                category = null;\r\n              } else {\r\n                _.extend(category, values);\r\n              }\r\n            } else {\r\n              // With a role defined, merge the properties to the\r\n              // roles.<role_name> object\r\n              _.extend(role, values);\r\n            }\r\n          } else {\r\n            // With no role defined, merge the properties to the root\r\n            // object literal with the general properties\r\n            _.extend(formValues, values);\r\n          }\r\n        }\r\n      });\r\n\r\n      // add the deleted categories\r\n      if (this.options.node.removedCategories.length > 0) {\r\n        roles = formValues.roles || (formValues.roles = {});\r\n        role = roles['categories'] || (roles['categories'] = {});\r\n        _.each(this.options.node.removedCategories, function (removedCatId) {\r\n          role[removedCatId] || (role[removedCatId] = {});\r\n        });\r\n      }\r\n\r\n      var generalTab = this.tabContent.children.find(function (tab) {\r\n        return !!tab.content.getGeneralFormFieldValues;\r\n      });\r\n      if (generalTab) {\r\n        formFieldValues = generalTab.content.getGeneralFormFieldValues();\r\n        // Do not make a full deep merge, but ensure, that we merge not\r\n        // only properties on the root (general) level, but if there are\r\n        // roles available, also on every role level\r\n        formFieldRoles = formFieldValues.roles || {};\r\n        delete formFieldValues.roles;\r\n        _.extend(formValues, formFieldValues);\r\n        _.each(_.keys(formFieldRoles), function (roleName) {\r\n          roles = formValues.roles || (formValues.roles = {});\r\n          role = roles[roleName] || (roles[roleName] = {});\r\n          _.extend(role, formFieldRoles[roleName]);\r\n        });\r\n      }\r\n\r\n      return formValues;\r\n    },\r\n\r\n    _addValidationErrorElement: function () {\r\n      if (this.$el.find('.metadata-validation-error').length === 0) {\r\n        this.tabLinks.$el.after('<div class=\"metadata-validation-error\"></div>');\r\n        this.validationErrorElem = $(this.$el.find('.metadata-validation-error')[0]);\r\n        this.validationErrorElem.append(\r\n            '<span class=\"icon notification_error cs-close-error-icon\" alt=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\" title=\"' +\r\n            lang.hideValidationErrorMessageIconTooltip + '\"></span>');\r\n        this.validationErrorElem.append('<span class=\"validation-error-message\">' +\r\n                                        lang.formValidationErrorMessage + '</span>');\r\n        this.validationErrorElem.hide();\r\n\r\n        var closeIcon = $(this.$el.find('.metadata-validation-error .cs-close-error-icon')[0]);\r\n        closeIcon && closeIcon.on('click', _.bind(function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          this._hideValidationError();\r\n        }, this));\r\n      }\r\n    },\r\n\r\n    _showValidationError: function () {\r\n      if (this.validationErrorElem === undefined) {\r\n        this._addValidationErrorElement();\r\n      }\r\n      if (this.tabContent.$el.find('.alpaca-message-notOptional').length > 0) {\r\n        this.tabContent && this.tabContent.$el.addClass('show-validation-error');\r\n        this.contentHeaderRegion && this.contentHeaderRegion.$el.addClass('show-validation-error');\r\n        this.validationErrorElem && this.validationErrorElem.show();\r\n      } else {\r\n        this._hideValidationError();\r\n      }\r\n    },\r\n\r\n    _hideValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      this.validationErrorElem && this.validationErrorElem.hide();\r\n    },\r\n\r\n    _clearValidationError: function () {\r\n      this.tabContent && this.tabContent.$el.removeClass('show-validation-error');\r\n      this.contentHeaderRegion && this.contentHeaderRegion.$el.removeClass('show-validation-error');\r\n      if (this.validationErrorElem) {\r\n        this.validationErrorElem.remove();\r\n        delete this.validationErrorElem;\r\n      }\r\n    },\r\n\r\n    _checkFormFetching: function () {\r\n      this._fetchingForms = true;\r\n    },\r\n\r\n    _fetchForms: function () {\r\n      return this.allForms.fetch();\r\n    },\r\n\r\n    _syncForms: function () {\r\n      var self = this;\r\n      this.blockActions();\r\n      this._clearValidationError();\r\n      return this._loadPanels()\r\n          .then(_.bind(this._loadGeneralFormFields, this)).then(\r\n              _.bind(this._loadGeneralActionFields, this))\r\n          .always(function () {\r\n            self.unblockActions();\r\n            self._fetchingForms = false;\r\n          })\r\n          .then(function () {\r\n            var panelModels = _.pluck(self._propertyPanels, 'model'),\r\n                models      = self.allForms.where({role_name: 'categories'});\r\n            self.panelModelsLength = panelModels.length;\r\n            // add back the newly added categories  that have not been saved to server\r\n            if (self.options.node.newCategories.models.length > 0) {\r\n              models = _.union(models, self.options.node.newCategories.models);\r\n            }\r\n            var categoryModels = _.sortBy(models,\r\n                function (model) {return model.attributes.title.toLowerCase()});\r\n            models = panelModels.concat(categoryModels);\r\n            self._normalizeModels(models);\r\n            self.collection.reset(models);\r\n            // check categories actions\r\n            self._checkCategoriesActions();\r\n          })\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message, lang.getPropertyPanelsFailTitle);\r\n          });\r\n    },\r\n\r\n    _loadPanels: function () {\r\n      var self = this,\r\n          methodName, parameters;\r\n      if (this.options.action === 'create') {\r\n        methodName = 'getPropertyPanelsForCreate';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'copy') {\r\n        methodName = 'getPropertyPanelsForCopy';\r\n        parameters = [{forms: this.allForms}];\r\n      } else if (this.options.action === 'move') {\r\n        methodName = 'getPropertyPanelsForMove';\r\n        parameters = [{forms: this.allForms}];\r\n      } else { // update\r\n        methodName = 'getPropertyPanels';\r\n        //while updating process when generating panels.\r\n        parameters = [{forms: this.allForms}];\r\n        // There are no pre-fetched forms for the update action;\r\n        // the 'v1/forms/info' has been abandoned, unfortunately,\r\n        // thus every panel has to fetch its own model\r\n      }\r\n      var promises = metadataPropertyPanels.chain()\r\n          .map(function (panel) {\r\n            var Controller        = panel.get('controller'),\r\n                controllerOptions = panel.get('controllerOptions'),\r\n                controller        = new Controller(_.extend({\r\n                  context: self.options.context,\r\n                  model: self.options.node\r\n                }, controllerOptions)),\r\n                method            = controller[methodName];\r\n            return method && method.apply(controller, parameters);\r\n          })\r\n          .compact()\r\n          .value();\r\n      return $.when\r\n          .apply($, promises)\r\n          .then(function () {\r\n            self._propertyPanels = _.flatten(arguments);\r\n          });\r\n    },\r\n\r\n    _loadGeneralFormFields: function () {\r\n      var self = this;\r\n      return GeneralFormFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalFormFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _loadGeneralActionFields: function () {\r\n      var self = this;\r\n      return GeneralActionFieldBehavior.getFieldDescriptors({\r\n        context: this.options.context,\r\n        action: this.options.action,\r\n        node: this.options.node,\r\n        forms: this.allForms\r\n      }).then(function (fieldDescriptors) {\r\n        self._generalActionFieldDescriptors = fieldDescriptors;\r\n      });\r\n    },\r\n\r\n    _normalizeModels: function (models) {\r\n      _.each(models, function (model) {\r\n        // If the view shows a form and the form has a title, which is\r\n        // not empty, this title should be used for the tab too\r\n        if (model instanceof FormModel) {\r\n          var schema = model.get('schema');\r\n          if (schema && schema.title) {\r\n            model.set('title', schema.title);\r\n          }\r\n        }\r\n        // Make sure, that the model has always an ID.  The scroll-spy\r\n        // used within the tab control puts these IDs to the a@href on\r\n        // the  tab links.  It could not recognize the particular link\r\n        // to navigate to otherwise.\r\n        if (model.get('id') == null) {\r\n          model.set('id', model.cid);\r\n        }\r\n        // When models are added to a collection, their model.collection\r\n        // property will not be updated, if it was already set - if they\r\n        // were already added to some other collection earlier.  Here,\r\n        // we're creating a new collection of property panel models, which\r\n        // should own them - they have to be removed from their previous\r\n        // collections, which fetched them.\r\n        if (model.collection) {\r\n          model.collection.remove(model);\r\n        }\r\n      });\r\n    },\r\n\r\n    // private\r\n    _checkCategoriesActions: function () {\r\n      // get category actions\r\n      // talking to the server developer, only need to check available actions of one category\r\n      var categoryModels = this.options.collection.where({role_name: 'categories'});\r\n      if (categoryModels.length > 0) {\r\n        var catId           = categoryModels[0].get('categoryId'),\r\n            categoryActions = new AppliedCategoryActionsCollection(undefined, {\r\n              node: this.options.node,\r\n              action: this.options.action,\r\n              urlResource: 'categories/' + catId + '/actions',\r\n              autofetch: true,\r\n              autoreset: true\r\n            });\r\n        this.blockActions();\r\n        categoryActions.fetch()\r\n            .done(_.bind(function () {\r\n              if (categoryActions.length > 0 &&\r\n                  categoryActions.at(0).get(\"categories_remove\") &&\r\n                  categoryActions.at(0).get(\"categories_remove\").length > 0) {\r\n                _.each(categoryModels, function (cat) {\r\n                  cat.attributes['removeable'] = true;\r\n                  cat.trigger('action:updated');\r\n                });\r\n              }\r\n              this.unblockActions();\r\n              setTimeout(_.bind(function () {\r\n                // event for keyboard navigation\r\n                var event = $.Event('tab:content:render');\r\n                this.$el.trigger(event);\r\n              }, this), 300);\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              var serverError = this._getRespError(resp);\r\n              var title = lang.getCategoryActionsFailTitle;\r\n              var message = _.str.sformat(lang.getActionsForACategoryFailMessage,\r\n                  catId, this.options.node.get(\"id\"), serverError);\r\n              ModalAlert.showError(message, title);\r\n              this.unblockActions();\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _initializeOthers: function () {\r\n      var options = {\r\n        gotoPreviousTooltip: lang.gotoPreviousCategoryTooltip,\r\n        gotoNextTooltip: lang.gotoNextCategoryTooltip\r\n      };\r\n      this._initializeToolbars(options);\r\n      this._listenToTabEvent();\r\n\r\n      // delay this a bit since the initial dialog fade in makes the tab to be hidden\r\n      setTimeout(_.bind(this._enableToolbarState, this), 300);\r\n    },\r\n\r\n    _onWindowResize: function (event) {\r\n      if (event && event.data && event.data.view) {\r\n        var self = event.data.view;\r\n        // optimization for rapid mouse movement and redraw when mouse movement slows down or stop\r\n        if (self.resizeTimer) {\r\n          clearTimeout(self.resizeTimer);\r\n        }\r\n        self.resizeTimer = setTimeout(function () {\r\n          self._setTablinksAttributes();\r\n          self._computeTablinkWidth();\r\n          self._enableToolbarState();\r\n          self._updateScrollbar();\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    _setTablinksAttributes: function () {\r\n      var i, limit = 5;\r\n      var siblings, parent = this.$el.parent();\r\n      for (i = 0; i < limit; i++) {\r\n        siblings = parent.siblings('.cs-tab-links.binf-dropdown');\r\n        if (siblings.length > 0) {\r\n          var width = $(siblings[0]).width();\r\n          if (width > 15) {\r\n            var newWidth    = width - 12,\r\n                widForEle   = newWidth + \"px\",\r\n                dirForEle   = this.rtlEnabled ? \"margin-right\" : \"margin-left\",\r\n                tabLinksEle = this.$el.find('.tab-links');\r\n\r\n            tabLinksEle.css({\r\n              \"width\": function () {\r\n                return \"calc(100% - \" + widForEle + \")\";\r\n              }\r\n            });\r\n\r\n            if (tabLinksEle.length) {\r\n              tabLinksEle.css(dirForEle, widForEle);\r\n              var tabLinksEleWidth = parseInt(tabLinksEle.css('width').replace('px', ''), 10);\r\n              if (tabLinksEleWidth > 20 && tabLinksEleWidth < 250) {\r\n                tabLinksEle.addClass('csui-mini-tablinks');\r\n              } else {\r\n                tabLinksEle.removeClass('csui-mini-tablinks');\r\n              }\r\n            }\r\n          }\r\n          break;\r\n        }\r\n        parent = parent.parent();\r\n      }\r\n    },\r\n\r\n    _createAddPropertiesView: function () {\r\n      if (this.addPropertiesView) {\r\n        this.cancelEventsToViewsPropagation(this.addPropertiesView);\r\n        this.addPropertiesView.destroy();\r\n      }\r\n\r\n      var options = _.extend({\r\n        toolbarItems: this.options.toolbarItems,\r\n        toolbarItemsMask: this.options.toolbarItemsMask,\r\n        parentView: this,\r\n        blockingParentView: this.options.blockingParentView,\r\n        addPropertiesCallback: this.addPropertiesCallback,\r\n        suppressAddProperties: this.options.suppressAddProperties\r\n      }, this.options);\r\n      this.addPropertiesView = new AddPropertiesDropdownMenuView(options);\r\n      this.propagateEventsToViews(this.addPropertiesView);\r\n    },\r\n\r\n    addCatAt: function (models, respModel) {\r\n      var index = this.panelModelsLength;\r\n      for (var i = index; i < models.length; i++) {\r\n        if (models[i].get('title').toLowerCase() > respModel.get('title').toLowerCase()) {\r\n          index = i;\r\n          break;\r\n        }\r\n        index += 1;\r\n      }\r\n      return index;\r\n    },\r\n\r\n    addPropertiesCallback: function (catModel) {\r\n      // keep a list of newly added categories\r\n      if (this.options.action) {\r\n        this.options.node.newCategories.add(catModel);\r\n      }\r\n      var index = this.options.collection.models.length === 1 ? 1 :\r\n                  this.addCatAt(this.options.collection.models, catModel);\r\n\r\n      this.doAddModelProperties(catModel, index);\r\n      return false;\r\n    },\r\n\r\n    /**\r\n     * Adds provided model's form and handles and fires respective adjustments and events.\r\n     */\r\n    doAddModelProperties: function doAddModelProperties(model, index, additionalAddOpts) {\r\n      var self = this;\r\n      this.tabLinks.$el.find(\".binf-active\").removeClass(\"binf-active\")\r\n          .removeAttr('aria-selected');\r\n\r\n      function tabContentRendered() {\r\n        // Refresh tab indexes\r\n        var event = $.Event('tab:content:render');\r\n        self.$el.trigger(event);\r\n        // Scroll and activate Tab\r\n        self._autoScrollTabTo(index, {animationOff: true})\r\n            .done(function () {\r\n              var newTab = self.tabLinks.children.findByModel(\r\n                  self.options.collection.findWhere({id: model.get('id')}));\r\n              newTab.activate();\r\n              newTab.$el.find(\"a.cs-tablink\").trigger('focus');\r\n            });\r\n      }\r\n\r\n      // Add model to collection to render form\r\n      this.options.collection.add(model, _.extend(additionalAddOpts || {}, {at: index}));\r\n      model.collection = this.options.collection;\r\n\r\n      this._listenToTabIdEvent(index);\r\n\r\n      var formContent = this.tabContent.children.findByModel(\r\n          this.options.collection.findWhere({id: model.get('id')})),\r\n          newFormView = formContent && formContent.content;\r\n      if (newFormView !== undefined) {\r\n        var isRendered = (newFormView instanceof FormView) ? newFormView.isRenderFinished() :\r\n                         newFormView._isRendered;\r\n        if (isRendered) {\r\n          // Content rendred by now.\r\n          tabContentRendered();\r\n        } else {\r\n          var renderEvent = (newFormView instanceof FormView) ? 'render:form' : 'dom:refresh';\r\n          this.listenToOnce(newFormView, renderEvent, _.bind(function () {\r\n            this.trigger(\"update:button\", false);\r\n            tabContentRendered();\r\n          }, this));\r\n        }\r\n        // Scroll to current rendered Tab.\r\n        // This is to make necessary adjustment to TabLinks scroll (Previous, Next)\r\n        this._autoScrollTabTo(index, {animationOff: true});\r\n      } else {\r\n        tabContentRendered();\r\n      }\r\n\r\n      this._computeTablinkWidth();\r\n      this._enableToolbarState();\r\n      this.trigger('reset:switch');\r\n    },\r\n\r\n    _resetRequiredSwitchView: function () {\r\n      PubSub.trigger('pubsub:header:rightbar:view:change:switch:status', 'reset');\r\n    },\r\n\r\n    // private\r\n    _onDeleteCategory: function (tabLink) {\r\n      this.tabToDelete = tabLink;\r\n      var categoryName = tabLink.model.get(\"title\");\r\n      var title = lang.removeCategoryWarningTitle;\r\n      var message = categoryName ? _.str.sformat(lang.removeCategoryWarningMessage, categoryName) :\r\n                    lang.removeCategoryWarningMessage;\r\n      ModalAlert\r\n          .confirmWarning(message, title)\r\n          .done(_.bind(this._removeCategory, this))\r\n          .fail(_.bind(function (err) {\r\n            if (!err) {\r\n              this.tabToDelete.$el.find('a').trigger('focus');\r\n            }\r\n          }, this));\r\n    },\r\n\r\n    // private\r\n    _removeCategory: function () {\r\n      if (this.tabToDelete) {\r\n        var id = this.tabToDelete.model.get('id');\r\n        id = _.isNumber(id) ? id.toString() : id;\r\n\r\n        // with add item metadata, the new node has not been created on the server yet\r\n        if (this.options.node.get(\"id\") === undefined || this.options.action) {\r\n          this._removeTab();\r\n          if (this.options.node.newCategories.remove(id) === undefined) {\r\n            this.options.node.removedCategories.push(id);\r\n          }\r\n          return;\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.options.node.urlBase(), 'categories/' + id);\r\n        var options = {\r\n          type: 'DELETE',\r\n          url: fullUrl\r\n        };\r\n\r\n        this.blockActions();\r\n        this.options.node.connector.makeAjaxCall(options)\r\n            .done(_.bind(function () {\r\n              this.unblockActions();\r\n              this._removeTab();\r\n            }, this))\r\n            .fail(_.bind(function (resp) {\r\n              this.unblockActions();\r\n              var serverError = this._getRespError(resp);\r\n              var categoryName = this.tabToDelete.model.get(\"title\");\r\n              var title = lang.removeCategoryFailMessageTitle;\r\n              var message = _.str.sformat(lang.removeCategoryFailMessage, categoryName,\r\n                  serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n      }\r\n    },\r\n\r\n    // private\r\n    _removeTab: function () {\r\n      if (this.tabToDelete.$el.hasClass('binf-active')) {\r\n        var previousIndex = this.tabToDelete._index - 1;\r\n        var previousTab = this.tabLinks.children.findByIndex(previousIndex);\r\n        this._autoScrollTabTo(previousIndex, {animationOff: true})\r\n            .done(function () {\r\n              previousTab && previousTab.activate();\r\n            });\r\n      }\r\n      this.options.collection.remove(this.tabToDelete.model);\r\n      this.trigger('reset:switch');\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _onRequiredSwitch: function (args) {\r\n      Backbone.trigger('closeToggleAction');\r\n      this._updateScrollbar();\r\n      this._hideNotRequiredFormFields(args.on, args);\r\n      return false;\r\n    },\r\n\r\n    _hideNotRequiredFormFields: function (hide, args) {\r\n      this.tabContent.children.each(function (tabContent) {\r\n        // Not every tab panel has to be a form, or implemented by FormView\r\n        if (tabContent.content.hideNotRequired) {\r\n          var appliedToWholeForm = tabContent.content.hideNotRequired(hide);\r\n          var tabLink = this.tabLinks.children.findByModel(tabContent.model);\r\n          // If the whole form has been hidden, hide the tab content with\r\n          // optional border lines and the tab link at the top too\r\n          if (appliedToWholeForm) {\r\n            var method = hide ? 'addClass' : 'removeClass';\r\n            tabContent.$el[method]('binf-hidden hidden-by-switch');\r\n            if (hide) {\r\n              this._hideTabLinkByRequiredSwitch(tabLink.$el);\r\n            } else {\r\n              this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n            }\r\n          } else {\r\n            // The form has some required fields, make sure the tabLink is visible\r\n            this._showTabLinkByRequiredSwitch(tabLink.$el, tabContent.model.get('removeable'));\r\n          }\r\n        }\r\n      }, this);\r\n      this.tabLinks.$el.find(\".tab-links-first-visible\").removeClass(\"tab-links-first-visible\");\r\n      this.tabContent.onReorder();\r\n      // Ensure, that another tab gets activated, if the currently active\r\n      // one was hidden, and scroll to the top to see it.\r\n      /* var firstVisibleTabLink = this.tabLinks.children.find(function (tabLink) {\r\n         return !tabLink.$el.hasClass('binf-hidden');\r\n       });*/\r\n      var firstVisibleTabLink,\r\n          tabLinkViews      = this.tabLinks.children._views,\r\n          keysSortedByIndex = Object.keys(tabLinkViews).sort(\r\n              function (view1, view2) {\r\n                return tabLinkViews[view1]._index - tabLinkViews[view2]._index;\r\n              });\r\n      for (var index = 0; index < keysSortedByIndex.length; index++) {\r\n        if (!this.tabLinks.children._views[keysSortedByIndex[index]].$el.hasClass('binf-hidden')) {\r\n          firstVisibleTabLink = this.tabLinks.children._views[keysSortedByIndex[index]];\r\n          break;\r\n        }\r\n      }\r\n      if (!!firstVisibleTabLink) {\r\n        firstVisibleTabLink.$el.addClass(\"tab-links-first-visible\");\r\n      }\r\n      // FIXME: If the very first tab (General) is hidden, this scrolls right\r\n      // to the second one.  The scrollbar thumb stays a little above the top.\r\n      // If it is moved really the the top, no tab link will be emphasized as\r\n      // active one.  Hiding the tab links may need some cooperation from the\r\n      // scroll-spy to skip the hidden tab links.\r\n      if (firstVisibleTabLink && !firstVisibleTabLink.isActive()) {\r\n        firstVisibleTabLink.activate();\r\n      }\r\n\r\n      setTimeout(_.bind(function () {\r\n        this._computeTablinkWidth();\r\n        this._enableToolbarState();\r\n        // event for keyboard navigation\r\n        var event = $.Event('tab:content:render');\r\n        this.$el.trigger(event);\r\n        if (!!args) { // executes only when coming thr' event driven\r\n          this.currentTabPosition = 1;\r\n        }\r\n\r\n      }, this), 300);\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesViewImpl.prototype, TabLinksScrollMixin);\r\n\r\n  return MetadataPropertiesViewImpl;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.properties.view',['module', 'csui/lib/underscore', 'csui/widgets/metadata/impl/metadata.properties.view',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (module, _, MetadataPropertiesViewImpl) {\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    topAlignLabel: false\r\n  });\r\n\r\n  //\r\n  // Public: Metadata Properties View Class\r\n  // Description: provides the view of general and other metadata properties (such as categories,\r\n  // etc.) of a node.  It allows for navigation, editing and getting form values of different types\r\n  // of metadata.\r\n  //\r\n  // This class is a clean and easy-to-read wrapper to expose as a public interface.\r\n  // See the implementation impl/metadata.properties.view.js for more available public methods.\r\n  //\r\n  var MetadataPropertiesView = MetadataPropertiesViewImpl.extend({\r\n\r\n    constructor: function MetadataPropertiesView(options) {\r\n      options.topAlignLabel = config.topAlignLabel;\r\n      MetadataPropertiesViewImpl.prototype.constructor.apply(this, arguments);\r\n    },\r\n\r\n    validateForms: function () {\r\n      return MetadataPropertiesViewImpl.prototype.validateForms.apply(this, arguments);\r\n    },\r\n\r\n    getFormsValues: function () {\r\n      return MetadataPropertiesViewImpl.prototype.getFormsValues.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.properties.content.view',['csui/lib/underscore', 'csui/lib/marionette', 'csui/utils/nodesprites',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin'\r\n], function (_, Marionette, NodeSpriteCollection, MetadataPropertiesView,\r\n    ViewEventsPropagationMixin) {\r\n\r\n  var MetadataPropertiesContentView = Marionette.ItemView.extend({\r\n\r\n    className: 'metadata-inner-wrapper',\r\n\r\n    constructor: function MetadataPropertiesContentView(options) {\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty,\r\n        notTabableRegion: true\r\n      };\r\n      this.childTabPanelView = new MetadataPropertiesView(tabOptions);\r\n\r\n      this.propagateEventsToViews(this.childTabPanelView);\r\n    },\r\n\r\n    render: function () {\r\n      this._ensureViewIsIntact();\r\n      this.triggerMethod('before:render', this);\r\n\r\n      var mdv = this.childTabPanelView.render();\r\n\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n      this.$el.append(mdv.el);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      this.triggerMethod('render', this);\r\n      return this;\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.childTabPanelView.destroy();\r\n    },\r\n\r\n    onPanelActivated: function () {\r\n      this.childTabPanelView && this.childTabPanelView.triggerMethod('panel:activated');\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataPropertiesContentView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataPropertiesContentView;\r\n\r\n});\r\n\n","\n","csui.define('csui/utils/versions.default.action.items',[\r\n  'csui/lib/underscore', 'csui/models/actionitems',\r\n  // Load and register external default action rules\r\n  'csui-ext!csui/utils/versions.default.action.items'\r\n], function (_, ActionItemCollection, extraActions) {\r\n  'use strict';\r\n\r\n  var defaultActionItems = new ActionItemCollection([\r\n    // Default for versions is always version open command\r\n    {\r\n      type: 144,\r\n      signature: 'VersionOpen',\r\n      sequence: 10\r\n    }\r\n  ]);\r\n\r\n  if (extraActions) {\r\n    defaultActionItems.add(_.flatten(extraActions, true));\r\n  }\r\n\r\n  return defaultActionItems;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.columns',[\"csui/lib/backbone\", 'i18n!csui/widgets/metadata/impl/nls/lang'],\r\n    function (Backbone, lang) {\r\n\r\n      var TableColumnModel = Backbone.Model.extend({\r\n\r\n        idAttribute: \"key\",\r\n\r\n        defaults: {\r\n          key: null,  // key from the resource definitions\r\n          sequence: 0 // smaller number moves the column to the front\r\n        }\r\n\r\n      });\r\n\r\n      var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n        model: TableColumnModel,\r\n        comparator: \"sequence\",\r\n\r\n        getColumnKeys: function () {\r\n          return this.pluck('key');\r\n        },\r\n\r\n        deepClone: function () {\r\n          return new TableColumnCollection(\r\n              this.map(function (column) {\r\n                return column.attributes;\r\n              }));\r\n        }\r\n      });\r\n\r\n      // Fixed (system) columns have sequence number < 100, dynamic columns\r\n      // have sequence number > 1000\r\n\r\n      var tableColumns = new TableColumnCollection([\r\n        {\r\n          key: 'version_number_name',\r\n          align: 'center',\r\n          title: lang.versionColumnVersionNumberTitle,\r\n          sequence: 10\r\n        },\r\n        {\r\n          key: 'name',\r\n          sequence: 20\r\n        },\r\n        {\r\n          key: 'create_date',\r\n          sequence: 30\r\n        },\r\n        {\r\n          key: 'owner_id',\r\n          sequence: 40\r\n        },\r\n        {\r\n          key: 'file_size',\r\n          align: 'right',\r\n          title: lang.versionColumnSizeTitle,\r\n          sequence: 50\r\n        }\r\n      ]);\r\n\r\n      return tableColumns;\r\n\r\n    });\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/versions/metadata.versions',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-metadata-versions\\\">\\r\\n  <div class=\\\"csui-metadata-versions-rowselection-toolbar-view\\\"></div>\\r\\n  <div class=\\\"csui-table-view\\\"></div>\\r\\n  <div class=\\\"csui-pagination-view\\\"></div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_versions_metadata.versions', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/versions/metadata.versions',[],function(){});\n","csui.define('csui/widgets/metadata/impl/versions/metadata.versions.view',[\"module\", \"csui/lib/jquery\", \"csui/lib/underscore\",\r\n  'csui/lib/backbone',\r\n  'csui/lib/marionette',\r\n  'csui/utils/base',\r\n  'csui/controls/globalmessage/globalmessage',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/toolbar/toolitems.filtered.model',\r\n  'csui/controls/toolbar/toolbar.view',\r\n  'csui/controls/toolbar/delayed.toolbar.view',\r\n  'csui/controls/table/table.view',\r\n  'csui/controls/pagination/nodespagination.view',\r\n  'csui/utils/versions.default.action.items',\r\n  'csui/utils/commands/versions',\r\n  'csui/utils/accessibility',\r\n  'csui/controls/table.rowselection.toolbar/table.rowselection.toolbar.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/models/columns',\r\n  'csui/models/nodeversions',\r\n  'csui/models/version',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.columns',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n  'hbs!csui/widgets/metadata/impl/versions/metadata.versions',\r\n  'css!csui/widgets/metadata/impl/versions/metadata.versions'\r\n], function (module, $, _, Backbone, Marionette, base,\r\n GlobalMessage,\r\n LayoutViewEventsPropagationMixin,\r\n FilteredToolItemsCollection,\r\n ToolbarView,\r\n DelayedToolbarView,\r\n TableView,\r\n PaginationView,\r\n defaultActionItems,\r\n commands,\r\n Accessibility,\r\n TableRowSelectionToolbarView,\r\n ToolbarCommandController,\r\n NodeCollection,\r\n NodeColumnCollection,\r\n NodeVersionCollection,\r\n VersionModel,\r\n metadataVersionsColumns,\r\n toolbarItems,\r\n VersionsToolbarItemsMask,\r\n template) {\r\n  'use strict';\r\n\r\n  var accessibleTable = Accessibility.isAccessibleTable();\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100],\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataVersionsTableView = Marionette.LayoutView.extend({\r\n    className: function () {\r\n      var className = 'metadata-inner-wrapper';\r\n      if (accessibleTable) {\r\n        className += ' csui-no-animation';\r\n      }\r\n      return className;\r\n    },\r\n    template: template,\r\n\r\n    ui: {\r\n      tableRowSelectionToolbarView: '.csui-metadata-versions-rowselection-toolbar-view',\r\n      tableView: '.csui-table-view',\r\n      childContainer: '.csui-table-view',\r\n      paginationView: '.csui-pagination-view'\r\n    },\r\n\r\n    regions: {\r\n      tableRowSelectionToolbarRegion: '@ui.tableRowSelectionToolbarView',\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataVersionsTableView(options) {\r\n      this.commands = options.commands || commands;\r\n      _.defaults(options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes,\r\n        toolbarItems: toolbarItems,\r\n        originatingView: options.originatingView || options.metadataView\r\n      });\r\n\r\n      MetadataVersionsTableView.__super__.constructor.call(this, options);\r\n\r\n      this.selectedNodes = new NodeCollection();\r\n\r\n      this.collection = new NodeVersionCollection(undefined, {\r\n        node: this.options.model,\r\n        autoreset: true,\r\n        expand: \"user\",\r\n        commands: commands.getAllSignatures(),\r\n        onlyClientSideDefinedColumns: true  // ignore columns sent by server\r\n      });\r\n\r\n      //TODO: we can get rid of this additional call, once advanced info is available in node call.\r\n      this.options.model.fetch({silent: true});\r\n\r\n      this.options.model.versions = this.collection;  // connect version collection with node\r\n\r\n      this.commandController = new ToolbarCommandController({commands: this.commands});\r\n\r\n      if (this.collection.delayedActions) {\r\n        this.listenTo(this.collection.delayedActions, 'error',\r\n         function (collection, request, options) {\r\n           var error = new base.Error(request);\r\n           GlobalMessage.showMessage('error', error.message);\r\n         });\r\n      }\r\n      this.defaultActionItems = defaultActionItems;\r\n\r\n      if (!this.options.toolbarItemsMasks) {\r\n        this.options.toolbarItemsMasks = new VersionsToolbarItemsMask(this.options);\r\n      }\r\n\r\n      this._setTableView();\r\n\r\n      // must be after setTableView\r\n      this._setTableRowSelectionToolbar({\r\n        toolItemFactory: this.options.toolbarItems.tableHeaderToolbar,\r\n        toolbarItemsMask: this.options.toolbarItemsMasks,\r\n        commands: this.options.commands || commands,\r\n      });\r\n\r\n      this._setTableRowSelectionToolbarEventListeners();\r\n\r\n      this._setPagination();\r\n\r\n      this.collection.fetch();\r\n\r\n      // Cause the show events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n      this.listenTo(this.collection, \"add\", this._updateCollection)\r\n       .listenTo(this.collection, \"remove\", this._updateCollection);\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRowSelectionToolbarRegion.show(this._tableRowSelectionToolbarView);\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    _updateCollection: function () {\r\n      this.collection.fetch();\r\n    },\r\n\r\n    _setTableView: function () {\r\n      this.options || (this.options = {});\r\n\r\n      var args = _.extend({\r\n        tableColumns: metadataVersionsColumns,\r\n        connector: this.model.connector,\r\n        collection: this.collection,\r\n        columns: this.collection.columns,\r\n        columnsWithSearch: [],\r\n        orderBy: \"version_number_name desc\",\r\n        actionItems: defaultActionItems,\r\n        commands: commands,\r\n        originatingView: this.options.originatingView\r\n      }, this.options);\r\n\r\n      /*\r\n      LPAD-60042\r\n      deleting blockingParentView option to fix expand/collapse icon.\r\n      table.view.js checks the condition this.$el[0].children.length > 0 in\r\n      function calculateMaxColumnsDisplayed()\r\n      */\r\n      delete args.blockingParentView;\r\n\r\n      if (!_.contains(this.options.ddItemsList, this.options.pageSize)) {\r\n        this.options.ddItemsList.push(this.options.pageSize);\r\n        this.options.ddItemsList.sort();\r\n      }\r\n\r\n      this.tableView = new TableView(args);\r\n\r\n      // Events\r\n      var cmdOption = {context: this.options.context, originatingView: this};\r\n\r\n      this.listenTo(this.tableView, 'execute:defaultAction', function (node) {\r\n        var action = this.defaultActionItems.find(function (actionItem) {\r\n          if (actionItem.get('type') === node.get('type')) {\r\n            return true;\r\n          }\r\n        }, this);\r\n        var cmd = commands.get(action.get('signature'));\r\n        var status = {nodes: new NodeVersionCollection([node])};\r\n        cmd.execute(status, cmdOption);\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbar: function (options) {\r\n      this._tableRowSelectionToolbarView = new TableRowSelectionToolbarView({\r\n        toolItemFactory: options.toolItemFactory,\r\n        toolbarItemsMask: options.toolbarItemsMask,\r\n        toolbarCommandController: this.commandController,\r\n\r\n        // if toolbarCommandController is not defined, a new ToolbarCommandController\r\n        // with the following commands is created\r\n        commands: commands,\r\n        selectedChildren: this.tableView.selectedChildren,\r\n        container: this.collection.node,\r\n        context: this.options.context,\r\n        originatingView: this.options.originatingView,\r\n        collection: this.collection\r\n      });\r\n    },\r\n\r\n    _setTableRowSelectionToolbarEventListeners: function () {\r\n      // listen for change of the selected rows in the table.view and if at least one row is\r\n      // selected, display the table-row-selected-toolbar\r\n      this.listenTo(this.tableView.selectedChildren, 'reset', function () {\r\n        // TODO: Re-use TableRowSelectionToolbarBehavior.\r\n        if (this.tableView.selectedChildren.length > 0) {\r\n          this.tableRowSelectionToolbarRegion.$el.addClass(\r\n           'csui-metadata-versions-rowselection-toolbar-visible');\r\n        } else {\r\n          this.tableRowSelectionToolbarRegion.$el.removeClass(\r\n           'csui-metadata-versions-rowselection-toolbar-visible');\r\n        }\r\n      });\r\n    },\r\n\r\n    _setPagination: function () {\r\n      this.paginationView = new PaginationView({\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList,\r\n        skipPaginationUpdateRequest: true\r\n      });\r\n    }\r\n\r\n  }, {\r\n\r\n    enabled: function (options) {\r\n      if (config.enabled === false) {\r\n        return false;\r\n      }\r\n      // don't enable if we are viewing properties of a VersionModel\r\n      if (options.node instanceof VersionModel) {\r\n        return false;\r\n      }\r\n      // TODO: Recognize versionable objects in a common way. For example,\r\n      // available_roles in v1 REST API was a viable way. It could be also\r\n      // done by extensibility on the client side.\r\n      return _.contains([144, 736, 5574], options.node.get('type'));\r\n    }\r\n\r\n  });\r\n\r\n  // Add the mixin functionality to the target view\r\n  _.extend(MetadataVersionsTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataVersionsTableView;\r\n\r\n});\r\n\n","csui.define('csui/models/audit/server.adaptor.mixin',[\r\n  'csui/lib/underscore', 'csui/utils/url'\r\n], function (_, Url) {\r\n  'use strict';\r\n\r\n  var ServerAdaptorMixin = {\r\n    mixin: function (prototype) {\r\n      return _.extend(prototype, {\r\n        makeServerAdaptor: function (options) {\r\n          return this;\r\n        },\r\n        url: function () {\r\n          var apiUrl = new Url(this.connector.connection.url).getApiBase(2);\r\n          var query = Url.combineQueryString(\r\n              this.getBrowsableUrlQuery(),\r\n              {\r\n                expand: 'audit{id, user_id, agent_id}'\r\n              }\r\n          );\r\n          return Url.combine(apiUrl, 'nodes', this.options.node.get('id'), 'audit?' + query) ;\r\n        },\r\n\r\n        parse: function (response, options) {\r\n          this.parseBrowsedState(response, options);\r\n          this.columns && this.columns.resetColumnsV2(response, this.options);\r\n          this.auditEvents.add(response.results.data.audit_event_types);\r\n          return response.results.data.audit;\r\n        },\r\n\r\n        isFetchable: function () {\r\n          return !!this.options;\r\n        },\r\n\r\n      });\r\n    }\r\n\r\n  };\r\n\r\n  return ServerAdaptorMixin;\r\n});\n","csui.define('csui/models/audit/audit.collection',['csui/lib/underscore',\r\n  'csui/lib/jquery',\r\n  'csui/lib/backbone',\r\n  'csui/models/mixins/connectable/connectable.mixin',\r\n  'csui/models/mixins/fetchable/fetchable.mixin',\r\n  'csui/models/browsable/browsable.mixin',\r\n  'csui/models/browsable/v2.response.mixin',\r\n  'csui/models/browsable/v1.request.mixin',\r\n  'csui/models/audit/server.adaptor.mixin',\r\n  'csui/models/nodechildrencolumn',\r\n  'csui/models/nodechildrencolumns',\r\n  'csui/models/node/node.model'\r\n], function (_, $, Backbone, ConnectableMixin, FetchableMixin, BrowsableMixin,\r\n    BrowsableV2ResponseMixin, BrowsableV1RequestMixin, ServerAdaptorMixin, NodeChildrenColumnModel,\r\n    NodeChildrenColumnCollection, NodeModel) {\r\n\r\n  var auditObject = {\r\n    auditName: 'audit_name',\r\n    auditDate: 'audit_date',\r\n    userIdKey: 'user_id',\r\n    dateType: '-7'\r\n  };\r\n\r\n  var AuditColumnModel = NodeChildrenColumnModel.extend({\r\n\r\n    constructor: function AuditColumnModel(attributes, options) {\r\n      NodeChildrenColumnModel.prototype.constructor.call(this, attributes, options);\r\n    }\r\n  });\r\n\r\n  var AuditColumnCollection = NodeChildrenColumnCollection.extend({\r\n\r\n    model: AuditColumnModel,\r\n\r\n    resetColumnsV2: function (response, options) {\r\n      if(!this.models.length) {// Stopping reset as event data is static and doesn't change after first fetch\r\n      this.resetCollection(this.getV2Columns(response), options);\r\n    }\r\n    },\r\n\r\n    getColumnModels: function (columnKeys, definitions) {\r\n      var columns = NodeChildrenColumnCollection.prototype.getColumnModels.call(\r\n          this, columnKeys, definitions);\r\n      _.each(columns, function (column) {\r\n        var columnKey = column['column_key'];\r\n        if (columnKey === auditObject.auditDate) {\r\n          column.sort = true;\r\n        }\r\n      });\r\n      return columns;\r\n    },\r\n\r\n    getV2Columns: function (response) {\r\n      var definitions = (response.results &&\r\n                         response.results[0] &&\r\n                         response.results[0].metadata &&\r\n                         response.results[0].metadata.properties) || {};\r\n\r\n        definitions.audit_name = {filter: true};\r\n        definitions.audit_date = {};\r\n        definitions.user_id = {filter: true};\r\n\r\n        definitions.audit_name.key = auditObject.auditName;\r\n        definitions.audit_date.key = auditObject.auditDate;\r\n        definitions.user_id.key = auditObject.userIdKey;\r\n        definitions.audit_date.type = auditObject.dateType;\r\n\r\n      var columnKeys = _.keys(definitions);\r\n      return this.getColumnModels(columnKeys, definitions);\r\n    }\r\n\r\n  });\r\n\r\n  var AuditEventModel = Backbone.Model.extend({});\r\n\r\n  var AuditEventCollection = Backbone.Collection.extend({\r\n\r\n    model: AuditEventModel,\r\n    constructor: function AuditEventCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n    },\r\n  });\r\n\r\n  var AuditModel = NodeModel.extend({});\r\n\r\n  var AuditCollection = Backbone.Collection.extend({\r\n\r\n    model: AuditModel,\r\n\r\n    constructor: function AuditCollection(models, options) {\r\n      this.options = options || {};\r\n      Backbone.Collection.prototype.constructor.call(this, models, options);\r\n\r\n      this.makeConnectable(options)\r\n          .makeFetchable(options)\r\n          .makeBrowsable(options)\r\n          .makeBrowsableV2Response(options)\r\n          .makeBrowsableV1Request(options)\r\n          .makeServerAdaptor(options);\r\n\r\n      this.columns = new AuditColumnCollection();\r\n      this.auditEvents = new AuditEventCollection();\r\n    }\r\n\r\n  });\r\n\r\n  ConnectableMixin.mixin(AuditCollection.prototype);\r\n  FetchableMixin.mixin(AuditCollection.prototype);\r\n  BrowsableMixin.mixin(AuditCollection.prototype);\r\n  BrowsableV2ResponseMixin.mixin(AuditCollection.prototype);\r\n  BrowsableV1RequestMixin.mixin(AuditCollection.prototype);\r\n  ServerAdaptorMixin.mixin(AuditCollection.prototype);\r\n\r\n  return AuditCollection;\r\n\r\n});\n","csui.define('csui/widgets/metadata/impl/audit/metadata.audit.columns',['csui/lib/backbone',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (Backbone, lang) {\r\n\r\n  var TableColumnModel = Backbone.Model.extend({\r\n\r\n    idAttribute: 'key',\r\n\r\n    defaults: {\r\n      key: null,  // key from the resource definitions\r\n      sequence: 0 // smaller number moves the column to the front\r\n    }\r\n\r\n  });\r\n\r\n  var TableColumnCollection = Backbone.Collection.extend({\r\n\r\n    model: TableColumnModel,\r\n    comparator: 'sequence',\r\n\r\n    getColumnKeys: function () {\r\n      return this.pluck('key');\r\n    },\r\n\r\n    deepClone: function () {\r\n      return new TableColumnCollection(\r\n          this.map(function (column) {\r\n            return column.attributes;\r\n          }));\r\n    }\r\n  });\r\n\r\n  var tableColumns = new TableColumnCollection([\r\n    {\r\n      key: 'audit_name',\r\n      align: 'left',\r\n      title: lang.action,\r\n      sequence: 10\r\n    },\r\n    {\r\n      key: 'audit_date',\r\n      align: 'left',\r\n      title: lang.date,\r\n      sequence: 20\r\n    },\r\n    {\r\n      key: 'user_id',\r\n      align: 'left',\r\n      title: lang.user,\r\n      sequence: 30\r\n    }\r\n  ]);\r\n\r\n  return tableColumns;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/audit/metadata.audit',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"csui-audit-table\\\"></div>\\r\\n<div class=\\\"csui-audit-pagination\\\"></div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_audit_metadata.audit', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/metadata/impl/audit/metadata.audit',[],function(){});\n","csui.define('csui/widgets/metadata/impl/audit/metadata.audit.view',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/contexts/factories/connector',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/table/table.view', 'csui/controls/pagination/nodespagination.view',\r\n  'csui/models/audit/audit.collection',\r\n  'csui/widgets/metadata/impl/audit/metadata.audit.columns',\r\n  'csui/models/members',\r\n  'csui/controls/userpicker/impl/user.view',\r\n  'csui/utils/base',\r\n  'hbs!csui/widgets/metadata/impl/audit/metadata.audit',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/audit/metadata.audit'\r\n], function (module, _, $, Marionette, ConnectorFactory, LayoutViewEventsPropagationMixin, TableView,\r\n  PaginationView, AuditCollection, metadataAuditTableColumns, MemberCollection, UserView, base,\r\n  template, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    defaultPageSize: 30,\r\n    defaultPageSizes: [30, 50, 100],\r\n    enabled: true\r\n  });\r\n\r\n  var MetadataAuditTableView = Marionette.LayoutView.extend({\r\n\r\n    className: 'csui-audit',\r\n\r\n    template: template,\r\n\r\n    ui: {\r\n      tableView: '.csui-audit-table',\r\n      paginationView: '.csui-audit-pagination'\r\n    },\r\n\r\n    regions: {\r\n      tableRegion: '@ui.tableView',\r\n      paginationRegion: '@ui.paginationView'\r\n    },\r\n\r\n    constructor: function MetadataAuditTableView (options) {\r\n      options || (options = {});\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n      this.collection.fetch();\r\n      // events triggered on the parent view re-triggered\r\n      // on the views placed in the inner regions\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    initialize: function () {\r\n      _.defaults(this.options, {\r\n        pageSize: config.defaultPageSize,\r\n        ddItemsList: config.defaultPageSizes\r\n      });\r\n      this.collection = new AuditCollection(undefined, {\r\n        connector: this.options.context.getObject(ConnectorFactory),\r\n        node: this.options.model,\r\n        autoreset: true\r\n      });\r\n\r\n      this._setTableView();\r\n      this._setPagination();\r\n\r\n      // to handle the case where focus comes to event search box on dom:refresh event and dropdown is shown after tableview is rendered.\r\n      this.listenTo(this.tableView, 'before:render', function (event) {\r\n        var eventsSearchBoxView = this.tableView.searchBoxes.length && this.tableView.searchBoxes[0];\r\n        if (eventsSearchBoxView && !eventsSearchBoxView.ui.searchBox.hasClass('binf-hidden') &&\r\n            !this.eventDropDownOpts.doNotShowDropDown && this.tableView.tableCaptionView.accFocusedColumn === 0) {\r\n          this.eventDropDownOpts.doNotShowDropDown = true;\r\n        }\r\n      });\r\n\r\n    },\r\n\r\n    onRender: function () {\r\n      this.tableRegion.show(this.tableView);\r\n      this.paginationRegion.show(this.paginationView);\r\n    },\r\n\r\n    getUserSearchboxOptions: function () {\r\n\r\n      var collection = new MemberCollection(undefined, {\r\n          connector: this.options.context.getObject(ConnectorFactory),\r\n          memberFilter: {\r\n            type: [0]\r\n          }, // filters only users\r\n          limit: 10,\r\n          comparator: function (item) {\r\n            return item.get('name_formatted').toLowerCase();\r\n          }\r\n        }),\r\n\r\n        _retrieveMembers = function (query) {\r\n          var self = this;\r\n          this.collection.query = query;\r\n          // fetch and resolve\r\n          return this.collection\r\n            .fetch()\r\n            .then(function () {\r\n              // resolve\r\n              return self.collection.models;\r\n            });\r\n        },\r\n\r\n        _retrieveDisplayText = function (item) {\r\n          return item.get('name');\r\n        },\r\n\r\n        _renderHighlighter = function (item) {\r\n          var model = this.collection.findWhere({\r\n              name: item\r\n            }),\r\n            view = new UserView({\r\n              model: model,\r\n              connector: this.collection.connector,\r\n              lightWeight: false\r\n            });\r\n          // ... and render\r\n          return view.render().el;\r\n        };\r\n\r\n      return {\r\n        collection: collection,\r\n        source: _retrieveMembers,\r\n        displayText: _retrieveDisplayText,\r\n        highlighter: _renderHighlighter,\r\n        filter: \"user_id\"\r\n      };\r\n    },\r\n\r\n    getEventSearchboxOptions: function () {\r\n\r\n      this.eventDropDownOpts = {doNotShowDropDown: false};\r\n\r\n      var collection = this.collection.auditEvents,\r\n        _retrieveDisplayText = function (item) {\r\n          return item.get('name');\r\n        },\r\n\r\n        _retrieveEvents      = function (query) {\r\n          var self = this;\r\n          var filteredModels = _.filter(self.collection.models, function (model) {\r\n            return model.get('name').toLowerCase().indexOf(query.toLowerCase()) !== -1;\r\n          });\r\n          return _.sortBy(filteredModels, function (action) { return action.get('name'); });\r\n        },\r\n\r\n        DDmenu =\r\n        '<ul class=\"typeahead binf-dropdown-menu\" role=\"listbox\" id=\"event-picker-ul\"></ul>',\r\n\r\n        focus = function (e) {\r\n          if (!this.focused) {\r\n            this.focused = true;\r\n            if (this.options.showHintOnFocus && !this.options.dropDownOpts.doNotShowDropDown) {\r\n                this.lookup();\r\n            }\r\n          }\r\n          if (this.options.dropDownOpts.doNotShowDropDown) {\r\n            this.options.dropDownOpts.doNotShowDropDown = false;\r\n          }\r\n        },\r\n\r\n        highlighter = function (item) {\r\n          return $('<div></div>').text(item).html();\r\n        },\r\n\r\n        afterSelect = function (item) {\r\n          // don't show dropdown due to focus after selecting an item.\r\n          if(this.options.dropDownOpts && !this.options.dropDownOpts.doNotShowDropDown) {\r\n            this.options.dropDownOpts.doNotShowDropDown = true;\r\n          }\r\n          var val = this.options.clearOnSelect ? '' : base.formatMemberName(item);\r\n          this.ui.searchBox.val(val);\r\n          this.trigger(this.valueChangedEventName, {\r\n            column: this.options.filter,\r\n            keywords: item.get('id')\r\n          });\r\n        };\r\n\r\n      return {\r\n        collection: collection,\r\n        source: _retrieveEvents,\r\n        displayText: _retrieveDisplayText,\r\n        filter: \"type\",\r\n        showHintOnFocus: true,\r\n        menu: DDmenu,\r\n        dropDownOpts: this.eventDropDownOpts,\r\n        focus: focus,\r\n        afterSelect: afterSelect,\r\n        highlighter: highlighter\r\n      };\r\n    },\r\n\r\n    _setTableView: function () {\r\n\r\n      var userSearchOptions = this.getUserSearchboxOptions(),\r\n        eventSearchOptions = this.getEventSearchboxOptions(),\r\n        options = _.extend({\r\n          connector: this.model.connector,\r\n          collection: this.collection,\r\n          tableColumns: metadataAuditTableColumns,\r\n          orderBy: 'audit_date desc',\r\n          columnsWithTypeaheadSearchbox: {\r\n            \"user_id\": userSearchOptions,\r\n            \"audit_name\": eventSearchOptions\r\n          },\r\n          selectColumn: false,\r\n          haveDetailsRowExpandCollapseColumn: true,\r\n          actionItems: this.defaultActionItems,\r\n          commands: this.commands,\r\n          wfElementID: '',\r\n          customLabels: {\r\n            emptyTableText: lang.auditNoResultsPlaceholder\r\n          }\r\n        }, this.options);\r\n\r\n      this.tableView = new TableView(options);\r\n    },\r\n\r\n    _setPagination: function () {\r\n      var options = {\r\n        collection: this.collection,\r\n        pageSize: this.options.pageSize,\r\n        defaultDDList: this.options.ddItemsList\r\n      };\r\n      this.paginationView = new PaginationView(options);\r\n    }\r\n  }, {\r\n    enabled: function (options) {\r\n      if (config.enabled === false) {\r\n        return false;\r\n      }\r\n      return !!options.node.get('id');\r\n    }\r\n  });\r\n  _.extend(MetadataAuditTableView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataAuditTableView;\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/metadata.panels',[\r\n  'csui/lib/underscore', 'csui/lib/backbone',\r\n  'csui/widgets/metadata/impl/metadata.properties.content.view',\r\n  'csui/widgets/metadata/impl/versions/metadata.versions.view',\r\n  'csui/widgets/metadata/impl/audit/metadata.audit.view',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  // Load extra panels to be added to the built-in dropdown tabs\r\n  'csui-ext!csui/widgets/metadata/metadata.panels'\r\n], function (_, Backbone, MetadataPropertiesContentView,\r\n    MetadataVersionsTableView, MetadataAuditTableView, lang, extraPanels) {\r\n\r\n  var MetadataPanelModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      sequence: 100,\r\n      title: null,\r\n      name: '',\r\n      contentView: null,\r\n      contentViewOptions: null\r\n    },\r\n\r\n    constructor: function MetadataPanelModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var MetadataPanelCollection = Backbone.Collection.extend({\r\n\r\n    model: MetadataPanelModel,\r\n    comparator: \"sequence\",\r\n\r\n    constructor: function MetadataPanelCollection(models, options) {\r\n      Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n    }\r\n\r\n  });\r\n\r\n  var metadataPanels = new MetadataPanelCollection([\r\n    {\r\n      title: lang.properties,\r\n      name: 'properties',\r\n      sequence: 10,\r\n      contentView: MetadataPropertiesContentView\r\n    }, {\r\n      title: lang.versions,\r\n      name: 'versions',\r\n      sequence: 20,\r\n      contentView: MetadataVersionsTableView\r\n    }, {\r\n      title: lang.audit,\r\n      name: 'audit',\r\n      sequence: 20,\r\n      contentView: MetadataAuditTableView\r\n    }\r\n  ]);\r\n\r\n  if (extraPanels) {\r\n    metadataPanels.add(_.flatten(extraPanels, true));\r\n    // assign default name to panels that are not having the 'name' field yet\r\n    var counter = 1;\r\n    metadataPanels.forEach(function (model) {\r\n      // name can't be empty to be able to save the metadata view state in the url.\r\n      if (!model.get('name')) {\r\n        model.set('name', 'unnamed_panel' + counter, {silent: true});\r\n        counter++;\r\n      }\r\n    });\r\n  }\r\n\r\n  return metadataPanels;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.link.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<a href=\\\"#\"\n    + this.escapeExpression(((helper = (helper = helpers.uniqueTabId || (depth0 != null ? depth0.uniqueTabId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"uniqueTabId\",\"hash\":{}}) : helper)))\n    + \"\\\" data-binf-toggle=\\\"tab\\\">\\r\\n  <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n</a>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.link.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/controls/tab.panel/impl/tab.link.dropdown.view',['csui/lib/underscore', 'csui/controls/tab.panel/impl/tab.link.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.link.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, TabLinkView, itemTemplate) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownView = TabLinkView.extend({\r\n\r\n    template: itemTemplate,\r\n\r\n    attributes: function () {\r\n      var title = this.model.get('title');\r\n      return {\r\n        id: 'tablink-' + this.model.get('uniqueTabId'),\r\n        role: 'menuitem',\r\n        'aria-label': title,\r\n        title: title\r\n      };\r\n    },\r\n\r\n    constructor: function TabLinkDropDownView() {\r\n      TabLinkView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.listenTo(this.model, 'change', this.render);\r\n\r\n      this.$el.on('click', '>a', _.bind(this._linkClicked, this));\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.$el.off('click', '>a');\r\n    },\r\n\r\n    activate: function (silent) {\r\n      if (!this.$el.hasClass(\"binf-active\")) {\r\n        this.triggerMethod('clear:active:tab');\r\n        this.ui.link.binf_tab('show');\r\n      }\r\n      var index = this.model.collection.indexOf(this.model);\r\n      this._parent.options.activeTab && this._parent.options.activeTab.set('tabIndex', index);\r\n      this.triggerMethod('activate:tab', this);\r\n      if (!silent) {\r\n        this.triggerMethod('click:link');\r\n      }\r\n    },\r\n\r\n    _linkClicked: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      this.activate();\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/controls/tab.panel/impl/tab.links.dropdown',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n  </button>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"  <button id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\" type=\\\"button\\\" class=\\\"binf-btn binf-btn-default binf-dropdown-toggle\\\"\\r\\n          data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"false\\\"\\r\\n          aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    <span class=\\\"cs-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n    <span class=\\\"cs-icon icon-caret-down\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.addToolTipContent || (depth0 != null ? depth0.addToolTipContent : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"addToolTipContent\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </button>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<span class=\\\"dropdown-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.single_item : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"<ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.btnId || (depth0 != null ? depth0.btnId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"btnId\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n</ul>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_controls_tab.panel_impl_tab.links.dropdown', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/controls/tab.panel/impl/tab.links.dropdown',[],function(){});\n","csui.define('csui/controls/tab.panel/tab.links.dropdown.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/controls/tab.panel/impl/tab.link.dropdown.view',\r\n  'hbs!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/controls/tab.panel/behaviors/tab.links.dropdown.keyboard.behavior',\r\n  'csui/behaviors/dropdown.menu/dropdown.menu.behavior',\r\n  'i18n!csui/controls/tab.panel/impl/nls/lang',\r\n  'css!csui/controls/tab.panel/impl/tab.links.dropdown',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, Backbone, Marionette, TabLinkDropDownView, collectionTemplate,\r\n    TabLinksDropdownKeyboardBehavior, DropdownMenuBehavior, lang) {\r\n  \"use strict\";\r\n\r\n  var TabLinkDropDownCollectionView = Marionette.CompositeView.extend({\r\n\r\n    className: 'cs-tab-links binf-dropdown tile-nav',\r\n\r\n    template: collectionTemplate,\r\n    templateHelpers: function () {\r\n      return {\r\n        single_item: this.collection.length === 1 ? true : false,\r\n        addToolTipContent: lang.showMore,\r\n        btnId: _.uniqueId(\"cstabBtn\")\r\n      };\r\n    },\r\n\r\n    childView: TabLinkDropDownView,\r\n    childViewContainer: '>ul',\r\n\r\n    ui: {\r\n      toggle: '>.binf-dropdown-toggle',\r\n      menuButton: '>.binf-btn',\r\n      selectedLabel: '>.binf-btn >.cs-label'\r\n    },\r\n\r\n    behaviors: {\r\n      TabLinksDropdownKeyboardBehavior: {\r\n        behaviorClass: TabLinksDropdownKeyboardBehavior\r\n      },\r\n      DropdownMenuBehavior: {\r\n        behaviorClass: DropdownMenuBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function TabLinkDropDownCollectionView(options) {\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      this.selected = new Backbone.Model();\r\n      // if selectedTab is passed in, search for it and set activeTab to it\r\n      // also store the data on this.selected model\r\n      var activeTabIndex = options.activeTab && options.activeTab.get(\"tabIndex\");\r\n      if (this.collection && this.collection.length > 0 && activeTabIndex !== undefined &&\r\n          activeTabIndex < this.collection.length) {\r\n        var selectedTabTitle = options.selectedTab &&\r\n                               (options.selectedTab instanceof Backbone.Model && options.selectedTab.get(\"title\") ||\r\n                                  options.selectedTab);\r\n        if (selectedTabTitle !== undefined &&\r\n            selectedTabTitle === this.collection.at(activeTabIndex).get(\"title\")) {\r\n          this._setSelection(this.collection.at(activeTabIndex));\r\n        } else {\r\n          var matchIndex = -1;\r\n          if (selectedTabTitle !== undefined) {\r\n            // The view state model saves the selected tab name in the url and not title. titles can be\r\n            // translated and that would invalidate the url if the language changes. Search in the title first\r\n            // to support old behaviour and if you can't find it look in the name properties.\r\n            // todo: pass in a different property in the options.\r\n            matchIndex = this._getModelIndexByPropertyValue(selectedTabTitle, this.collection, 'title');\r\n            if (matchIndex === -1) {\r\n              matchIndex = this._getModelIndexByPropertyValue(selectedTabTitle, this.collection, 'name');\r\n            }\r\n          }\r\n          if (matchIndex !== -1) {\r\n            this._setSelection(this.collection.at(matchIndex));\r\n            options.activeTab.set(\"tabIndex\", matchIndex);\r\n          } else {\r\n            this._setSelection(this.collection.at(0));\r\n            options.activeTab.set(\"tabIndex\", 0);\r\n          }\r\n        }\r\n      }\r\n      this.listenTo(this.collection, 'change', this._refreshSelection);\r\n      this.listenTo(this.selected, 'change', this._updateSelection);\r\n    },\r\n\r\n    _getModelIndexByPropertyValue: function (value, collection, propertty) {\r\n      var indexToReturn = -1;\r\n      collection.some(function (model, index) {\r\n        if (model.get(propertty) === value) {\r\n          indexToReturn = index;\r\n          return true;\r\n        }\r\n      });\r\n      return indexToReturn;\r\n    },\r\n\r\n    onRender: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n      if (this.collection.length !== 1) {\r\n        this.ui.toggle.binf_dropdown();\r\n      }\r\n      // TODO: comment out this code for now because HTML Validator does not allow it\r\n      // set the selected tab active\r\n      var selectedId = this.selected.get('id');\r\n      for (var i = 0; i < this.collection.length; i++) {\r\n        if (selectedId === this.collection.at(i).get(\"id\")) {\r\n          var menuItems = this.$el.find(\"ul li\");\r\n          menuItems.removeClass('binf-active');\r\n          this.$(menuItems.get(i)).addClass('binf-active');\r\n          break;\r\n        }\r\n      }\r\n    },\r\n\r\n    onChildviewClickLink: function (childView) {\r\n      this._setSelection(childView.model);\r\n      this.ui.toggle.binf_dropdown('toggle');\r\n    },\r\n\r\n    onChildviewClearActiveTab: function (childView) {\r\n      this.children.each(function (view) {\r\n        if (view.$el.hasClass('binf-active')) {\r\n          view.$el.removeClass('binf-active');\r\n        }\r\n      });\r\n    },\r\n\r\n    _setSelection: function (model) {\r\n      this.selected.set(model.pick('id', 'title', 'name'));\r\n    },\r\n\r\n    _updateSelection: function () {\r\n      var title = this.selected.get('title');\r\n      this.ui.selectedLabel.text(title);\r\n      this.ui.menuButton.attr('aria-label', title);\r\n    },\r\n\r\n    _refreshSelection: function (model) {\r\n      if (model.get('id') === this.selected.get('id')) {\r\n        this._setSelection(model);\r\n      }\r\n    },\r\n\r\n    activateDropdownTab: function(name, silent) {\r\n      this.children.some(function(view){\r\n        if (view.model.get('name') === name) {\r\n          view.activate(silent);\r\n          this._setSelection(view.model);\r\n          return true;\r\n        }\r\n      }.bind(this));\r\n    }\r\n\r\n  });\r\n\r\n  return TabLinkDropDownCollectionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.dropdowntab.view',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/controls/tab.panel/tab.panel.view',\r\n  'csui/widgets/metadata/metadata.panels',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/controls/tab.panel/tab.links.dropdown.view',\r\n  'csui/lib/binf/js/binf'\r\n], function (_, $, Backbone, TabPanelView, metadataPanels,\r\n  PerfectScrollingBehavior, TabLinkDropDownCollectionView) {\r\n  'use strict';\r\n\r\n  var MetadataDropdownTabView = TabPanelView.extend({\r\n    // FIXME: This removes the tab classes from the paren object\r\n    className: 'metadata-content-wrapper binf-panel binf-panel-default',\r\n\r\n    ui: {\r\n      dropdownToggle: '.binf-dropdown-toggle'\r\n    },\r\n\r\n    contentView: function () {\r\n      return this.options.contentView;\r\n    },\r\n\r\n    contentViewOptions: function () {\r\n      return {\r\n        context: this.options.context,\r\n        model: this.options.node,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this.options.metadataView,\r\n        blockingParentView: this.options.blockingParentView,\r\n        selectedProperty: this.options.selectedProperty\r\n      };\r\n    },\r\n\r\n    constructor: function MetadataDropdownTabView(options) {\r\n      // Assign the options to this before the parent constructor\r\n      // would do it, so that the _buildTabs below can access it\r\n      this.options = options || (options = {});\r\n      _.defaults(options, {\r\n        TabLinkCollectionViewClass: TabLinkDropDownCollectionView,\r\n        implementTabContentsDefaultKeyboardHandling: false,\r\n        delayTabContent: options.delayTabContent !== false\r\n      });\r\n\r\n      this.behaviors = _.extend({\r\n        PerfectScrolling: {\r\n          behaviorClass: PerfectScrollingBehavior,\r\n          contentParent: '.binf-dropdown-menu',\r\n          suppressScrollX: true,\r\n          includePadding: true\r\n        }\r\n      }, this.behaviors);\r\n\r\n      options.tabs = this._buildTabs();\r\n\r\n      TabPanelView.prototype.constructor.call(this, options);\r\n\r\n      this.listenTo(this.options.node, \"change\", this._nodeChanged)\r\n          .listenTo(Backbone, 'closeToggleAction', this._closeToggle);\r\n    },\r\n\r\n    _buildTabs: function () {\r\n      return metadataPanels\r\n          .chain()\r\n          .filter(function (panel) {\r\n            // If there is a static method enabled, call it, otherwise\r\n            // consider the panel always enabled\r\n            var contentView = panel.get('contentView'),\r\n                enabled     = contentView.enabled;\r\n            // providing way to render custom properties view for node types that has separate\r\n            // view to show in metadata. Based on key 'customproperties' provided in response.\r\n            if (this.options.node.attributes.customProperties) {\r\n              // filter extra commands based on the key 'executeCommand' for respective node.\r\n              if (panel.attributes.executeCommand) {\r\n                return !enabled || enabled({\r\n                      context: this.options.context,\r\n                      node: this.options.node\r\n                    });\r\n              } else {\r\n                return false;\r\n              }\r\n            } else {\r\n              return !enabled || enabled({\r\n                    context: this.options.context,\r\n                    node: this.options.node\r\n                  });\r\n            }\r\n          }, this)\r\n          .map(function (panel) {\r\n            return panel.attributes;\r\n          })\r\n          .value();\r\n    },\r\n\r\n    onRender: function () {\r\n      this.$el.prepend(\"<div class='csui-metadata-tab-bar'></div>\");\r\n      var that = this;\r\n      this.$el.find('.binf-dropdown-toggle').on('binf.dropdown.after.show', function () {\r\n        that.trigger(\"update:scrollbar\");  \r\n      });\r\n    },\r\n\r\n    onActivateTab: function (tabContent, tabPane, tabLink) {\r\n      // Warning: this onActivateTab is currently being triggered twice by the 'activate:tab' event.\r\n      // The code in the base 'controls/tab.panel' needs to be revisited later when time permits.\r\n      // Any code being called from here should handle two calls gracefully by itself !!!\r\n      tabContent && tabContent.triggerMethod('panel:activated');\r\n    },\r\n\r\n    _closeToggle: function () {\r\n      var dropdownToggleEl = this.$el.find('.binf-dropdown-toggle');\r\n      if (dropdownToggleEl.parent().hasClass('binf-open')) {\r\n        if (dropdownToggleEl.length && dropdownToggleEl.length > 1) {\r\n          dropdownToggleEl.each(function (index, dropdownElement) {\r\n            if ($(dropdownElement).parent().hasClass('binf-open')) {\r\n              !$(dropdownElement).is(\":hidden\") && $(dropdownElement).binf_dropdown('toggle');\r\n            }\r\n          });\r\n        } else {\r\n          !dropdownToggleEl.is(\":hidden\") && dropdownToggleEl.binf_dropdown('toggle');\r\n        }\r\n      }\r\n    },\r\n\r\n    _updateTabs: function () {\r\n      var tabs = this._buildTabs();\r\n      // FIXME: _convertCollection should return an array of object\r\n      // literals or models; the models below do not change their\r\n      // parent collection without removing them\r\n      this.collection.reset(this._convertCollection({tabs: tabs}).models);\r\n    },\r\n\r\n    _nodeChanged: function () {\r\n      // We switched to other node or fetched the node info\r\n      if (this.options.node.hasChanged('id') || this.options.node.hasChanged('type')) {\r\n        this._updateTabs();\r\n      }\r\n    }\r\n  });\r\n\r\n  return MetadataDropdownTabView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/utils/url\",\r\n  \"csui/utils/base\"\r\n], function (_, $, Backbone, Url, base) {\r\n\r\n  // handling server calls for metadata\r\n  function MetadataController(status, options, attributes) {\r\n    this.status = status || {};\r\n    this.options = options || {};\r\n    this.attributes = attributes || {};\r\n  }\r\n\r\n  _.extend(MetadataController.prototype, Backbone.Events, {\r\n\r\n    save: function (model, data) {\r\n      // Pass data via the first attrs param to get them set to model\r\n      // attributes\r\n      return model.save(data, {\r\n        wait: true,\r\n        patch: true\r\n      });\r\n    },\r\n\r\n    createItem: function (model, formsValues) {\r\n      return model.save(undefined, {\r\n        // If data does not contain common attributes, which should be just set\r\n        // to model attributes, it should be passed via options.data instead of\r\n        // using the first attrs paremeter\r\n        data: formsValues,\r\n        wait: true\r\n      });\r\n    }\r\n\r\n  });\r\n\r\n  MetadataController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataController, {version: \"1.0\"});\r\n\r\n  return MetadataController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.view',['module',\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/widgets/metadata/impl/header/metadata.header.view',\r\n  'csui/widgets/metadata/impl/metadata.dropdowntab.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/controls/mixins/view.state/metadata.view.state.mixin',\r\n  'csui/widgets/metadata/impl/metadata.controller',\r\n  'csui/controls/progressblocker/blocker', 'csui/utils/commandhelper',\r\n  'csui/widgets/permissions/permissions.view',\r\n  'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/utils/contexts/factories/metadata.factory',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadata'\r\n], function (module, _, $, Marionette, base, MetadataHeaderView, MetadataDropdownTabView,\r\n    NodeModelFactory, ViewEventsPropagationMixin, MetadataViewStateMixin, MetadataController, BlockingView,\r\n    CommandHelper, PermissionsView, ModalAlert, MetadataModelFactory, NextNodeModelFactory, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  _.defaults(config, {\r\n    showExtraRightActionBar: false\r\n  });\r\n\r\n  var MetadataView = Marionette.ItemView.extend({\r\n    className: 'cs-metadata',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataView(options) {\r\n      var self = this;\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      this.options = options;\r\n      this.options.showExtraRightActionBar = this.options.showPermissionView || config.showExtraRightActionBar;\r\n      this.targetView = options.targetView;\r\n      this.context = options.context;\r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n      this.disableViewState = options.disableViewState;\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n      }\r\n\r\n      if (this._isViewStateModelEnabled()) {\r\n        if (!this.isMetadataNavigation()) {\r\n          this.options.showBackIcon = true;\r\n          this.listenTo(this, 'metadata:close', this._backToPreviousPerspective);\r\n        }\r\n      }\r\n\r\n      // setting initialPanel if it was passed in from data or overriden by URL\r\n      options.model.unset('initialPanel', {silent: true});\r\n      if (options.data.initialPanel) {\r\n        options.model.set('initialPanel', options.data.initialPanel, {silent: true});\r\n      }\r\n\r\n      this.options.showShortcutSwitch = true;\r\n      this.options.showRequiredFieldsSwitch = true;\r\n      if (this.options.model.get('type') === 1 || !!this.options.model.get('shortcutNode')) {  // shortcut\r\n        if (!!this.options.model.get('shortcutNode') && this.options.model.get('type') !== 1) {\r\n          this.options.shortcutNode = this.options.model.get('shortcutNode');\r\n        } else {\r\n          this.options.model.connector.assignTo(this.options.model.original); //TODO: have to do this?\r\n          this.options.shortcutNode = this.options.model;\r\n          var shortcutResourceScope = this.options.shortcutNode.getResourceScope();\r\n          this.options.model.original.setResourceScope(shortcutResourceScope);\r\n          this.options.model = this.options.model.original;\r\n          this.options.model.set('shortcutNode', this.options.shortcutNode, {silent: true});\r\n        }\r\n        //Load permissions page after getting actions from REST API\r\n        this.options.actionsPromise = this._ensureCompleteNode();\r\n      } else {\r\n        this.options.actionsPromise = $.Deferred().resolve().promise();\r\n      }\r\n\r\n      // Once PropertiesView is opened , 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n\r\n      this.options.showDropdownMenu = true;\r\n      this.options.originatingView = this.options.originatingView || this;\r\n      this.metadataHeaderView = new MetadataHeaderView(_.extend({\r\n        // Since ItemNameView (which includes DropdownMenuView, etc.) is now being used elsewhere,\r\n        // this boolean flag is to indicate metadata scenario for ItemNameView to know.\r\n        metadataScenario: true,\r\n        // If this widget is placed on a perspective, it becomes the originating view itself\r\n        originatingView: this\r\n      }, this.options));\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName)\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:delete',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:delete', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:before:move',\r\n              function (args) {\r\n                self.trigger('metadata:item:before:move', args);\r\n              })\r\n          .listenTo(this.metadataHeaderView, 'metadata:item:deleted', function (args) {\r\n            self.trigger('metadata:item:deleted', args);\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"shortcut:switch\", function (view) {\r\n            self.options.model = view.node;\r\n            self.options.model.set('shortcutNode', self.model.get('shortcutNode'), {silent: true});\r\n            this._ensureCompleteNode()\r\n                .always(function () {\r\n                  !!self.metadataTabView && self.metadataTabView.destroy();\r\n                  if (!!self.options.showPermissionView) {\r\n                    self.metadataTabView = new PermissionsView({\r\n                      model: self.options.model,\r\n                      originatingView: self.options.originatingView,\r\n                      context: self.options.context,\r\n                      showCloseIcon: self.options.originatingView ? false : true,\r\n                      showBackIcon: self.options.originatingView ? true : false,\r\n                      selectedTab: status.selectedTab,\r\n                      selectedProperty: self.options.selectedProperty\r\n                    });\r\n\r\n                  } else {\r\n                    self.metadataTabView = new MetadataDropdownTabView({\r\n                      context: self.options.context,\r\n                      node: self.options.model,\r\n                      containerCollection: self.options.containerCollection,\r\n                      originatingView: self.options.originatingView,\r\n                      metadataView: self,\r\n                      activeTab: self.options.activeTab,\r\n                      delayTabContent: self.options.delayTabContent\r\n                    });\r\n                  }\r\n\r\n                  self.$el.append(self.metadataTabView.render().$el);\r\n                  self.propagateEventsToViews(self.metadataTabView);\r\n                });\r\n          })\r\n          .listenTo(this.metadataHeaderView, \"metadata:close\", function () {\r\n            self.trigger(\"metadata:close\");\r\n          })\r\n          .listenTo(this.options.context, 'retain:perspective', function () {\r\n            // new data was fetched by context, but perspective stays same (if perspective changes\r\n            // it is not necessary to close the metadata dialog, because it gets destroyed\r\n            // anyways when new perspective slides in)\r\n            self._closeMetadata();\r\n          });\r\n\r\n      var tabOptions = {\r\n        context: this.options.context,\r\n        node: this.options.model,\r\n        containerCollection: this.options.containerCollection,\r\n        originatingView: this.options.originatingView,\r\n        metadataView: this,\r\n        blockingParentView: this,\r\n        activeTab: this.options.activeTab,\r\n        selectedTab: this.options.selectedTab || this.getViewStateDropdown(),\r\n        selectedProperty: this.options.selectedProperty,\r\n        delayTabContent: self.options.delayTabContent\r\n      };\r\n\r\n      if (this.options.showPermissionView) {\r\n        this.options.actionsPromise.always(function () {\r\n          self.metadataTabView = new PermissionsView({\r\n            model: self.options.model,\r\n            originatingView: self.options.originatingView,\r\n            context: self.options.context,\r\n            showCloseIcon: self.options.originatingView ? false : true,\r\n            showBackIcon: self.options.originatingView ? true : false,\r\n            selectedTab: status.selectedTab,\r\n            selectedProperty: self.options.selectedProperty\r\n          });\r\n          self.propagateEventsToViews(self.metadataTabView, self.metadataHeaderView);\r\n        });\r\n      } else {\r\n        this.metadataTabView = new MetadataDropdownTabView(tabOptions);\r\n        this.propagateEventsToViews(this.metadataTabView, this.metadataHeaderView);\r\n      }\r\n\r\n      if (this._isViewStateModelEnabled()) {\r\n        this.listenTo(this.context.viewStateModel, 'change:state', this.onViewStateChanged);\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the shortcut's original node has been fetched\r\n      var fetching = this.options.model.fetching;\r\n      if (fetching) {\r\n        // Note: render always so that the link to Shortcut Properties is available for the\r\n        // user to click on to go into the Properties page and update the Original Location field.\r\n        // This is due to the backward UX design that Original Properties is rendered first.\r\n        // TODO: Find out, why the link \"View shortcut\" is dead after re-rendering\r\n        return fetching.always(_.bind(this.render, this));\r\n      }\r\n\r\n      var mhv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataTabView.render();\r\n\r\n      Marionette.triggerMethodOn(mhv, 'before:show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      this.$el.append(mhv.el);\r\n      this.$el.append(mdv.el);\r\n\r\n      Marionette.triggerMethodOn(mhv, 'show', mhv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n\r\n      if (this._isViewStateModelEnabled() && !this.showPermissionView) {\r\n        this._listenToDropdownSelection();\r\n      }\r\n    },\r\n\r\n    _isViewStateModelEnabled: function () {\r\n      var viewStateModel = this.context && this.context.viewStateModel;\r\n      return !this.disableViewState && viewStateModel && viewStateModel.get('enabled');\r\n    },\r\n\r\n    onViewStateChanged: function() {\r\n      var selection = this.getViewStateDropdown() || this.getDefaultViewStateDropdown(),\r\n          tabLinks = this.metadataTabView.tabLinks;\r\n      if (tabLinks && tabLinks.selected) {\r\n        if (selection && tabLinks.selected.get('name') !== selection) {\r\n          tabLinks.activateDropdownTab(selection, true);\r\n        }\r\n      }\r\n    },\r\n\r\n    _listenToDropdownSelection: function() {\r\n      var tabLinks = this.metadataTabView.tabLinks;\r\n      if (tabLinks && tabLinks.selected) {\r\n        var dropDownName = this.getViewStateDropdown();\r\n        if (dropDownName !== tabLinks.selected.get('name')) {\r\n          this.setViewStateDropdown(tabLinks.selected.get('name'), {default: !dropDownName, title: tabLinks.selected.get('title')});\r\n        }\r\n        this.listenTo(tabLinks.selected, 'change', this._onDropDownSelectionChanged);\r\n      }\r\n    },\r\n\r\n    _onDropDownSelectionChanged: function (model) {\r\n      this.setViewStateDropdown(model.get('name'), {title: model.get('title')});\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataTabView, this.metadataHeaderView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataTabView.destroy();\r\n      if (this.targetView && this.thumbnailViewState) {\r\n          this.targetView.thumbnail.resultsView.triggerMethod(\"metadata:close\");\r\n      }\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var data = {'name': itemName};\r\n      var metadataController = new MetadataController();\r\n      var node = this.options.model;\r\n      var collection = this.options.collection;\r\n      var shortcutOriginal;\r\n      // workarounds to handle the refresh of the shortcut node or original node\r\n      if (this.options.shortcutNode && this.options.shortcutNode.original === node) {\r\n        var originalNodeInCollection = this.options.collection.findWhere(\r\n            {id: node.get('id')});\r\n        if (originalNodeInCollection) {\r\n          shortcutOriginal = node;\r\n          node = originalNodeInCollection;\r\n        } else {\r\n          collection = undefined;\r\n        }\r\n      }\r\n\r\n      var contextualNode = self.context.getModel(NodeModelFactory);\r\n      if( contextualNode) {\r\n        contextualNode.set('name', itemName);\r\n      }\r\n\r\n\r\n      self._blockActions();\r\n      metadataController.save(node, data)\r\n          .done(function () {\r\n            return node.fetch()\r\n                .then(function () {\r\n                  if (shortcutOriginal) {\r\n                    shortcutOriginal.set(node.attributes);\r\n                  }\r\n                  // Following command causing failure in breadcrumb collection update,\r\n                  // While renaming the item in metadata view, and clicking directly on breadcrumb\r\n                  // ancestor. After commenting out nodes table parent item renaming functionality\r\n                  // is working fine.\r\n                  //self.options.context && self.options.context.trigger('current:folder:changed');\r\n                  args.success && args.success();\r\n                  self._unblockActions();\r\n                  if (self.options.originatingView &&\r\n                      _.isFunction(self.options.originatingView.unblockActions)) {\r\n                    self.options.originatingView.unblockActions();\r\n                  }\r\n                 });\r\n          })\r\n          .fail(function (error) {\r\n            self._unblockActions();\r\n            var errorMsg = CommandHelper._getErrorMessageFromResponse(error);\r\n            errorMsg === undefined && (errorMsg = lang.failedToSaveName);\r\n            args.error && args.error(errorMsg);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteVersionNode: function () {\r\n      this._blockActions();\r\n      return this.options.model.fetch()\r\n          .always(_.bind(this._unblockActions, this))\r\n          .fail(function (request) {\r\n            var error = new base.Error(request);\r\n            ModalAlert.showError(error.message);\r\n          });\r\n    },\r\n\r\n    _ensureCompleteNode: function () {\r\n      var node = this.options.model;\r\n\r\n      function checkExpansion(property) {\r\n        var value = node.get(property + '_id');\r\n        if (value && !_.isObject(value) && !_.isObject(node.get(property + '_id_expand'))) {\r\n          node.setExpand('properties', property);\r\n          return true;\r\n        }\r\n      }\r\n\r\n      var expandable = _.invoke(['original', 'parent', 'create_user',\r\n        'modify_user', 'owner_user', 'reserved_user'], checkExpansion);\r\n      expandable = _.contains(expandable, true);\r\n\r\n      var actionsNeeded = node.actions.length <= 1;\r\n\r\n      if (expandable || actionsNeeded) {\r\n        this._blockActions();\r\n        return node.fetch()\r\n            .always(_.bind(this._unblockActions, this))\r\n            .fail(_.bind(function (request) {\r\n              var error = new base.Error(request);\r\n              ModalAlert.showError(error.message);\r\n            }, this));\r\n      }\r\n      return $.Deferred().resolve().promise();\r\n    },\r\n\r\n    _backToPreviousPerspective: function () {\r\n      if (this.metadataTabView instanceof MetadataDropdownTabView) {\r\n        if (this._isViewStateModelEnabled()) {\r\n          this.context.viewStateModel.restoreLastRouter();\r\n        } else {\r\n          this._setNextNodeModelFactory(this.options.model.get('id'));\r\n        }\r\n      }\r\n    },\r\n\r\n    _setNextNodeModelFactory: function(id) {\r\n      if (this.context && id !== undefined) {\r\n        var nextNode = this.context.getModel(NextNodeModelFactory);\r\n        if (nextNode) {\r\n          if (nextNode.get('id') === id) {\r\n            // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n            nextNode.unset('id', {silent: true});\r\n          }\r\n          nextNode.set('id', id);\r\n        }\r\n      }\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      var node = this.options.model;\r\n      if (node.get('type') === 1 && node.original && node.original.get('type') === 0) {\r\n        this.trigger(\"metadata:close\");\r\n      } else {\r\n        this.trigger('metadata:close:without:animation');\r\n      }\r\n    },\r\n\r\n    _blockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.blockActions && origView.blockActions();\r\n    },\r\n\r\n    _unblockActions: function () {\r\n      var origView = this.options.originatingView;\r\n      origView && origView.unblockActions && origView.unblockActions();\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataView.prototype, ViewEventsPropagationMixin);\r\n  _.extend(MetadataView.prototype, MetadataViewStateMixin);\r\n\r\n  return MetadataView;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.action.one.item.properties.view',[\"module\", \"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/marionette\",\r\n  \"csui/widgets/metadata/impl/header/metadata.header.view\",\r\n  \"csui/widgets/metadata/metadata.properties.view\", 'csui/utils/log',\r\n  \"csui/controls/mixins/view.events.propagation/view.events.propagation.mixin\",\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (module, _, $, Marionette, MetadataHeaderView, MetadataPropertiesView,\r\n    log, ViewEventsPropagationMixin) {\r\n\r\n  var MetadataActionOneItemPropertiesView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-add-item-metadata-form',\r\n    template: false,\r\n\r\n    // public\r\n    constructor: function MetadataActionOneItemPropertiesView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n      options.showRequiredFieldsSwitch = true;\r\n      this.metadataHeaderView = new MetadataHeaderView(options);\r\n      this.listenTo(this.metadataHeaderView, \"metadata:item:name:save\", this._saveItemName);\r\n      this.listenTo(this.metadataHeaderView, \"update:button\", _.bind(function (args) {\r\n        this.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      this.metadataPropertiesView = new MetadataPropertiesView({\r\n        node: options.model,\r\n        collection: options.collection,\r\n        container: options.container,\r\n        context: options.context,\r\n        hideStickyHeader: !!options.hideStickyHeader,\r\n        formMode: 'create',\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        metadataView: this,\r\n        formCollection: options.formCollection,\r\n        suppressAddProperties: options.suppressAddProperties\r\n      });\r\n      if (!options.collection) {\r\n        this.listenTo(this.metadataPropertiesView.allForms, 'sync', this._updateSchema);\r\n      }\r\n      this.listenTo(this.metadataPropertiesView, 'render:forms', this.setNameFieldFocus);\r\n      this.propagateEventsToViews(this.metadataHeaderView, this.metadataPropertiesView);\r\n    },\r\n\r\n    // private\r\n    _updateSchema: function() {\r\n      // just update name schema in name field of header\r\n      var generalForm = this.metadataPropertiesView.allForms.first(),\r\n          formSchema = generalForm && generalForm.get('schema'),\r\n          nameSchema = formSchema && formSchema.properties && formSchema.properties.name;\r\n      if (nameSchema) {\r\n        this.metadataHeaderView.metadataItemNameView.updateNameSchema(nameSchema);\r\n      } else {\r\n        log.warn('Form collection lacks name field in the first form.') && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    // private\r\n    onRender: function () {\r\n      var inv = this.metadataHeaderView.render();\r\n      var mdv = this.metadataPropertiesView.render();\r\n\r\n      Marionette.triggerMethodOn(inv, 'before:show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'before:show', mdv, this);\r\n\r\n      if (this.options.suppressHeaderView !== true) {\r\n        this.$el.append(inv.el);\r\n      }\r\n      this.$el.append(mdv.el);\r\n\r\n      if (this.options.suppressHeaderView) {\r\n        this.$el.addClass('without-header-bar');\r\n      }\r\n\r\n      if (this.options.extraViewClass) {\r\n        this.$el.addClass(this.options.extraViewClass);\r\n      }\r\n\r\n      Marionette.triggerMethodOn(inv, 'show', inv, this);\r\n      Marionette.triggerMethodOn(mdv, 'show', mdv, this);\r\n    },\r\n\r\n    // private\r\n    onBeforeDestroy: function () {\r\n      this.cancelEventsToViewsPropagation(this.metadataHeaderView, this.metadataPropertiesView);\r\n      this.metadataHeaderView.destroy();\r\n      this.metadataPropertiesView.destroy();\r\n    },\r\n\r\n    // public\r\n    validate: function () {\r\n      var bNameIsValid = this.metadataHeaderView.validateName();\r\n      var bFormsAreValid = this.metadataPropertiesView.validateForms();\r\n\r\n      return bNameIsValid && bFormsAreValid;\r\n    },\r\n\r\n    // public\r\n    getValues: function () {\r\n      var data = {};\r\n      var validation = this.validate();\r\n      if (validation) {\r\n        var itemName = this.metadataHeaderView.getNameValue();\r\n        data = {\r\n          \"name\": itemName,\r\n          \"type\": this.options.model.get('type'),\r\n          \"parent_id\": this.options.model.get('parent_id')\r\n        };\r\n        var formsValues = this.metadataPropertiesView.getFormsValues();\r\n        _.extend(data, formsValues);\r\n      }\r\n\r\n      return data;\r\n    },\r\n\r\n    // public\r\n    setNameFieldFocus: function () {\r\n      if (this.firstFocusCalled !== true && this.options.suppressHeaderView !== true) {\r\n        this.metadataHeaderView.setNameEditModeFocus();\r\n      }\r\n      this.firstFocusCalled = true;\r\n    },\r\n\r\n    _saveItemName: function (args) {\r\n      var itemName = args.sender.getValue();\r\n      this.model.set('name', itemName, {silent: true});\r\n      args.success && args.success();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataActionOneItemPropertiesView.version = \"1.0\";\r\n\r\n  _.extend(MetadataActionOneItemPropertiesView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataActionOneItemPropertiesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/common/base.metadata.action.view',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/controls/dialog/dialog.view\", \"csui/controls/progressblocker/blocker\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, $, Backbone, DialogView, BlockingView, lang) {\r\n\r\n  function BaseMetadataActionView() {\r\n  }\r\n\r\n  _.extend(BaseMetadataActionView.prototype, Backbone.Events, {\r\n\r\n    // public: display metadata view in either originatingView with animation or modal dialog\r\n    // @parameter:\r\n    // - options: {\r\n    //    - originatingView: animate and show the form in the originating view\r\n    //    - view: the view to show\r\n    //    - dialogOptions: {\r\n    //      - dialogTitle: dialog title\r\n    //      - OkButtonTitle: the OK button title\r\n    //      - OkButtonClick: method to handle the OkClick\r\n    //      - CancelButtonTitle: (optional) the Cancel button title\r\n    //      - CancelButtonClick: (optional) method to handle the CancelClick\r\n    //    }\r\n    // }\r\n    baseDisplayForm: function (options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      this.deferred = $.Deferred();\r\n\r\n      if (options.view) {\r\n        BlockingView.imbue(options.view);\r\n      }\r\n\r\n      // replace the originatingView with sliding left/right animation\r\n      if (options.originatingView) {\r\n\r\n        // TODO: UX and Josef will ask for this in the future, add this support when time permits\r\n\r\n      } else {  // show Metadata View in a modal dialog\r\n\r\n        var dialogOptions = options.dialogOptions || {};\r\n        var okAction = dialogOptions.OkButtonClick || this._cancelAction;\r\n        var cancelAction = dialogOptions.CancelButtonClick || this._cancelAction;\r\n        var buttons = [\r\n          {\r\n            id: 'okButton',\r\n            default: true,\r\n            label: dialogOptions.OkButtonTitle ? dialogOptions.OkButtonTitle :\r\n                   lang.defaultDialogOkButtonTitle,\r\n            click: _.bind(okAction, this, options)\r\n          },\r\n          {\r\n            id: 'cancel',\r\n            label: dialogOptions.CancelButtonTitle ? dialogOptions.CancelButtonTitle :\r\n                   lang.defaultDialogCancelButtonTitle,\r\n            click: _.bind(cancelAction, this),\r\n            actionToken: dialogOptions.CancelButtonActionToken\r\n          }\r\n        ];\r\n        if (this.options.view.model) {\r\n          if (!(this.options.view.model.get('name'))) {\r\n            buttons[0].disabled = true;\r\n          }\r\n        }\r\n        var title = dialogOptions.dialogTitle ? dialogOptions.dialogTitle :\r\n                    lang.defaultDialogTitle;\r\n        var dialog = new DialogView({\r\n          className: 'cs-item-action-metadata',\r\n          title: title,\r\n          buttons: buttons,\r\n          largeSize: true,\r\n          view: options.view\r\n        });\r\n        this.dialog = dialog;\r\n        this.listenTo(this.dialog, \"hide\", this._cancelAction)\r\n            .listenTo(this.dialog, \"update:button\", _.bind(function (args) {\r\n              // Apply overlay[pointer-events:none] for button to prevent user interaction\r\n              // until the respective action is performed instead of disabling the button\r\n              // which may cause ambiguity\r\n              if (args.overlay !== undefined) {\r\n                var buttonModel = this.dialog.footerView.collection.get('okButton'),\r\n                    button      = this.dialog.footerView.children.findByModel(buttonModel),\r\n                    method      = button && !button.$el.is(\":disabled\") && args.overlay ?\r\n                                  'addClass' : 'removeClass';\r\n                button.$el[method](\"cs-button-overlay\");\r\n              } else {\r\n                this.dialog.footerView.updateButton('okButton', args);\r\n              }\r\n            }, this));\r\n\r\n        dialog.show();\r\n\r\n      }\r\n\r\n      return this.deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _cancelAction: function (args) {\r\n      var resetRequiredSwitch = !!this.node && !!this.node.collection &&\r\n                                !!this.node.collection.requireSwitched &&\r\n                                (!!this.node.get('action') ||\r\n                                 (!!this.options.view && this.options.view.options.action));\r\n      if (resetRequiredSwitch) {\r\n        this.node.collection.requireSwitched = false;\r\n      }\r\n      if (this.options.view) {\r\n        this.options.view.unblockActions();\r\n      }\r\n      this.dialog.destroy();\r\n\r\n      // assume that the close button was clicked if args is undefined\r\n      if (args === undefined) {\r\n        args = {\r\n          buttonAttributes: {\r\n            actionToken: \"closeMetadataActionView\"\r\n          }\r\n        };\r\n      }\r\n\r\n      this.deferred.reject(args);\r\n    }\r\n\r\n  });\r\n\r\n  BaseMetadataActionView.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(BaseMetadataActionView, {version: \"1.0\"});\r\n\r\n  return BaseMetadataActionView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',['require', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/url',\r\n  'csui/utils/log', 'csui/widgets/metadata/impl/common/base.metadata.action.view',\r\n  'csui/models/forms', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (require, _, $, Url, log, BaseMetadataActionView, FormCollection, lang, ModalAlert) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories view displays the category form for the user to fill out\r\n  // categories values, validates the form and adds the category to the object when the user clicks\r\n  // on the Add button.\r\n  //\r\n  function MetadataAddCategoriesView() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesView.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    displayForm: function (options) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n\r\n      options || (options = {});\r\n      this.node = options.model;\r\n      this.catId = options.catId;\r\n      this.catName = options.catName;\r\n\r\n      var catCollection = new FormCollection([options.catModel]);\r\n      catCollection.fetching = false;\r\n      catCollection.fetched = true;\r\n\r\n      require([\"csui/widgets/metadata/metadata.action.one.item.properties.view\"\r\n      ], function (MetadataActionOneItemPropertiesView) {\r\n\r\n        self.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n          model: options.model,\r\n          collection: catCollection,\r\n          context: options.context,\r\n          commands: options.commands,\r\n          suppressAddProperties: true,\r\n          suppressHeaderView: true,\r\n          // send this flag to MetadataActionOneItemPropertiesView to hide sticky header.\r\n          hideStickyHeader: true,\r\n          extraViewClass: 'add-category'\r\n        });\r\n\r\n        var baseUIOptions = {};\r\n        baseUIOptions.callerProcessData = options.callerProcessData;\r\n        baseUIOptions.originatingView = options.originatingView;\r\n        baseUIOptions.view = self.metadataAddItemPropView;\r\n        var dialogOptions = {};\r\n        dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                    lang.addNewCategoryDialogTitle;\r\n        dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                      lang.addNewCategoryDialogAddButtonTitle;\r\n        dialogOptions.OkButtonClick = self._addCategory;\r\n        baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n        self.baseDisplayForm(baseUIOptions)\r\n            .done(function (resp) {\r\n              deferred.resolve(resp);\r\n            })\r\n            .fail(function (error2) {\r\n              deferred.reject(error2);\r\n            });\r\n\r\n      }, function (error) {\r\n        log.warn('Failed to load MetadataActionOneItemPropertiesView. {0}', error)\r\n        && console.log(log.last);\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _addCategory: function (args) {\r\n      var valid = this.metadataAddItemPropView.validate();\r\n      if (valid) {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n        var nodeId = this.node.get('id');\r\n        var catData = this.metadataAddItemPropView.getValues();\r\n        var data = {id: nodeId, category_id: this.catId};\r\n        if (catData.roles && catData.roles.categories) {\r\n          _.each(catData.roles.categories, function (cat, key) {\r\n            data = _.extend(data, cat);\r\n          });\r\n        }\r\n\r\n        var fullUrl = Url.combine(this.node.urlBase(), 'categories');\r\n        var formData = new FormData();\r\n        var options = {\r\n          type: 'POST',\r\n          url: fullUrl\r\n        };\r\n        formData.append('body', JSON.stringify(data));\r\n        _.extend(options, {\r\n          data: formData,\r\n          contentType: false,\r\n          processData: false\r\n        });\r\n\r\n        this.metadataAddItemPropView.blockActions();\r\n        this.node.connector.makeAjaxCall(options)\r\n            .done(_.bind(function (resp) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              this.dialog.destroy();\r\n              this.deferred.resolve(resp);\r\n            }, this))\r\n            .fail(_.bind(function (error) {\r\n              this.metadataAddItemPropView.unblockActions();\r\n              var serverError = '';\r\n              if (error && error.responseJSON && error.responseJSON.error) {\r\n                serverError = error.responseJSON.error;\r\n              }\r\n              var title = lang.addNewCategoryFailTitle;\r\n              var message = _.str.sformat(lang.addNewCategoryFailMessage,\r\n                  this.catName, this.node.get('name'), nodeId, serverError);\r\n              ModalAlert.showError(message, title);\r\n            }, this));\r\n\r\n      } else {\r\n        //generic error handling for all modules\r\n        this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n            'cs-formfield-invalid');\r\n\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesView, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.categories.controller',[\r\n  'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/utils/url',\r\n  'csui/utils/base', 'i18n!csui/widgets/metadata/impl/nls/lang',\r\n  'csui/dialogs/modal.alert/modal.alert', 'csui/widgets/metadata/impl/metadata.utils',\r\n  'csui/widgets/metadata/impl/add.properties/metadata.add.categories.view',\r\n  'csui/models/appliedcategoryform', 'csui/dialogs/node.picker/node.picker',\r\n  'csui/utils/commands', 'css!csui/widgets/metadata/impl/metadata'\r\n], function (_, $, Backbone, Url, base, lang, ModalAlert,\r\n    MetadataUtils, MetadataAddCategoriesView, AppliedCategoryFormModel,\r\n    NodePicker, commands) {\r\n  'use strict';\r\n\r\n  //\r\n  // Metadata add categories controller handles adding category to an existing item, a new item\r\n  // being created or copied or moved.\r\n  //\r\n\r\n  function MetadataAddCategoriesController() {\r\n  }\r\n\r\n  _.extend(MetadataAddCategoriesController.prototype, Backbone.Events, {\r\n\r\n    // Public: add category to an existing item, new item being created or copied or moved\r\n    //\r\n    // Parameters:\r\n    // - <object> options containing:\r\n    //   - action: the action 'create', 'copy', 'move', or undefined for an existing item\r\n    //   - node: an existing or a temporary NodeModel for a new item being created with undefined id\r\n    //   - collection: the existing category collection\r\n    //   - container: the container where the item is/will be in\r\n    //   - inheritance: the category inheritance 'original', 'destination' or 'merged'\r\n    //   - context: the application context\r\n    //   - parentView: the view to have blockingView on\r\n    //\r\n    // Return:\r\n    // - <object> jQuery deferred object containing the new 'catModel' if succeeds\r\n    //\r\n    AddNewCategory: function (options) {\r\n      var deferred = $.Deferred();\r\n      var nodePicker = new NodePicker({\r\n        startLocation: 'category.volume',\r\n        context: options.context,\r\n        selectableTypes: [131],\r\n        unselectableNodes: !options.collection ? [] :\r\n                           options.collection.where({role_name: \"categories\"}),\r\n        selectMultiple: false,\r\n        dialogTitle: lang.selectCategoryTitle,\r\n        globalSearch: true,\r\n        selectButtonLabel: lang.selectCategoryButtonLabel\r\n      });\r\n      nodePicker.show()\r\n          .done(_.bind(function (args) {\r\n            _.reduce(args.nodes, function (promise, node) {\r\n                  return promise.then(_.bind(function () {\r\n                    var catId = node.get('id');\r\n                    var catName = node.get('name');\r\n\r\n                    // with adding a new item, the object does not exist yet.  Just load the form.\r\n                    if (options.node.get('id') === undefined || options.action) {\r\n                      // load the category create form for the user to fill out values\r\n                      return this._loadNewCategoryForm(options, catId, catName);\r\n                    } else {\r\n                      // code path new: display the form in a modal dialog with the Add button\r\n                      return this._displayAddCategoryForm(options, catId, catName);\r\n                    }\r\n                  }, this));\r\n                }, $.Deferred().resolve(), this)\r\n                .done(function (resp3) {\r\n                  deferred.resolve(resp3);\r\n                })\r\n                .fail(function (error3) {\r\n                  deferred.reject(error3);\r\n                });\r\n          }, this))\r\n          .fail(function (error2) {\r\n            deferred.reject(error2);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private: display the form in a modal dialog with the Add button\r\n    _displayAddCategoryForm: function (options, catId, catName) {\r\n      var deferred = $.Deferred();\r\n      var self = this;\r\n      this._getCategoryModel(options, catId, catName)\r\n          .done(function (resp) {\r\n            var formOptions = {\r\n              model: options.node,\r\n              context: options.context,\r\n              commands: commands,\r\n              catId: catId,\r\n              catName: catName, catModel: resp.catModel\r\n            };\r\n            var metadataAddCatView = new MetadataAddCategoriesView();\r\n            metadataAddCatView.displayForm(formOptions)\r\n                .done(function (resp2) {\r\n                  self._loadNewCategoryForm(options, catId, catName, \"update\")\r\n                      .done(function (resp3) {\r\n                        deferred.resolve(resp3);\r\n                      })\r\n                      .fail(function (error3) {\r\n                        deferred.reject(error3);\r\n                      });\r\n                })\r\n                .fail(function (error2) {\r\n                  deferred.reject(error2);\r\n                });\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: load the category create form first for the user to fill out values\r\n    _loadNewCategoryForm: function (options, catId, catName, formType) {\r\n      if (catId && options.collection.get(catId)) {\r\n        var title = lang.addNewCategoryFailTitle;\r\n        var message = _.str.sformat(lang.categoryExistsMessage, catName);\r\n        ModalAlert.showError(message, title);\r\n        return $.Deferred().reject({});\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      this._getCategoryModel(options, catId, catName, formType)\r\n          .done(_.bind(function (resp) {\r\n            deferred.resolve(resp);\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: get the category model\r\n    _getCategoryModel: function (options, catId, catName, formType) {\r\n\r\n      var allowDeleteCat = true;\r\n      // default: formType = 'create'\r\n      if (!formType) {\r\n        formType = 'create';\r\n        if (options.action === undefined) {\r\n          allowDeleteCat = false;\r\n        }\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      var fullUrl;\r\n      var connector = (options.node && options.node.connector) ||\r\n                      (options.container && options.container.connector);\r\n      var nodeId = options.node.get('id');\r\n      //TO:DO pId is passed to made it availabe in TKLFieldView need to fix as this temp fix\r\n      if (options.container) {\r\n        options.node.pId = options.container.get('id');\r\n      }\r\n      if (options.node.get('id') === undefined && options.action === 'create') {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/create?parent_id=' + options.container.get('id') +\r\n            '&type=' + options.node.get('type') + '&category_id=' + catId);\r\n      } else if (options.action === 'copy' || options.action === 'move') {\r\n        var inheritanceVal = 0;\r\n        if (options.inheritance === 'destination') {\r\n          inheritanceVal = 1;\r\n        } else if (options.inheritance === 'merged') {\r\n          inheritanceVal = 2;\r\n        }\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/' + options.action + '?id=' + nodeId +\r\n            '&parent_id=' + options.container.get('id') +\r\n            '&inheritance=' + inheritanceVal + '&category_id=' + catId);\r\n      } else {\r\n        fullUrl = Url.combine(connector.connection.url,\r\n            'forms/nodes/categories/' + formType + '?id=' + nodeId +\r\n            '&category_id=' + catId);\r\n      }\r\n\r\n      var ajaxOptions = {\r\n        type: 'GET',\r\n        url: fullUrl\r\n      };\r\n      if (options.parentView) {\r\n        options.parentView.blockActions();\r\n        //prevent pointer events on add button untill new category form is rendered\r\n        options.parentView.trigger(\"update:button\", true);\r\n      }\r\n      connector\r\n          .makeAjaxCall(ajaxOptions)\r\n          .done(_.bind(function (resp) {\r\n            options.parentView && (options.parentView.unblockActions());\r\n\r\n            // different calls have different data structure\r\n            var categoryForm, categoryData, categoryOptions, categorySchema;\r\n            if (options.action === 'create' ||\r\n                options.action === 'copy' || options.action === 'move') {\r\n              if (resp.forms.length > 1) {\r\n                categoryForm = _.find(resp.forms, function (form) {\r\n                  return form.role_name === \"categories\";\r\n                });\r\n                if (categoryForm) {\r\n                  categoryData = (categoryForm.data[catId]) || {};\r\n                  categoryOptions = (categoryForm.options.fields[catId]) || {};\r\n                  categorySchema = (categoryForm.schema.properties[catId]) || {};\r\n                }\r\n              }\r\n            } else {\r\n              categoryForm = resp && resp.forms && resp.forms[0];\r\n              categoryData = (categoryForm && categoryForm.data) || {};\r\n              categoryOptions = (categoryForm.options) || {};\r\n              categorySchema = (categoryForm.schema) || {};\r\n            }\r\n\r\n            if (categoryForm) {\r\n              if (categoryOptions.form) {\r\n                categoryOptions = _.omit(categoryOptions, 'form');\r\n              }\r\n              if (categorySchema.title === undefined && catName) {\r\n                categorySchema.title = catName;\r\n              }\r\n\r\n              var metadataUtils = new MetadataUtils();\r\n              var required = metadataUtils.AlpacaFormOptionsSchemaHaveRequiredFields(categoryOptions,\r\n                  categorySchema);\r\n\r\n              var categoryModel = new AppliedCategoryFormModel({\r\n                id: catId,\r\n                title: catName || (categoryOptions && categoryOptions.fields && categoryOptions.fields.category_id &&\r\n                                   categoryOptions.fields.category_id.label),\r\n                allow_delete: allowDeleteCat,\r\n                removeable: allowDeleteCat,\r\n                required: required,\r\n                data: categoryData,\r\n                schema: _.omit(categorySchema, 'description'),\r\n                options: categoryOptions,\r\n                role_name: \"categories\"\r\n              }, {\r\n                node: options.node,\r\n                categoryId: catId,\r\n                action: 'none',\r\n                parse: true\r\n              });\r\n\r\n              deferred.resolve({catModel: categoryModel});\r\n            } else {\r\n              deferred.reject({});\r\n            }\r\n          }, this))\r\n          .fail(_.bind(function (error) {\r\n            if (options.parentView) {\r\n              options.parentView.unblockActions();\r\n              options.parentView.trigger(\"update:button\", false);\r\n            }\r\n            var serverError = this._getRespError(error);\r\n            var title = lang.loadNewCategoryFailTitle;\r\n            var message = _.str.sformat(lang.loadNewCategoryFailMessage,\r\n                catName, options.node.get('name'), nodeId, serverError);\r\n            ModalAlert.showError(message, title);\r\n            deferred.reject(error);\r\n          }, this));\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // private\r\n    _getRespError: function (resp) {\r\n      var error = '';\r\n      if (resp && resp.responseJSON && resp.responseJSON.error) {\r\n        error = resp.responseJSON.error;\r\n      } else if (base.MessageHelper.hasMessages()) {\r\n        error = $(base.MessageHelper.toHtml()).text();\r\n        base.MessageHelper.clear();\r\n      }\r\n      return error;\r\n    }\r\n  });\r\n\r\n  _.extend(MetadataAddCategoriesController, {version: \"1.0\"});\r\n\r\n  return MetadataAddCategoriesController;\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/nodesprites',\r\n  'csui/utils/commands', \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert,\r\n    nodeSpriteCollection, commands) {\r\n\r\n  //\r\n  // Metadata Add Item Controller allows the adding of item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n      // Compute the type name only if the new node includes the type name\r\n      // sent by the server, to be able to fall back to it\r\n      var addableTypeName = node.get('type_name') ?\r\n                            nodeSpriteCollection.findTypeByNode(node) :\r\n                            lang.addItemMetadataDialogTitleGeneric;\r\n\r\n      this.node = node;\r\n      this.metadataController = options.metadataController;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        id: options.id,\r\n        context: status.context || options && options.context,\r\n        commands: commands,\r\n        action: 'create',\r\n        inheritance: options.inheritance,\r\n        // Performs the complete fetch and preparation of the creation forms\r\n        collection: options.completeFormCollection,\r\n        // Performs just fetch; the preparation is performed by the csui forms collection\r\n        formCollection: options.formCollection\r\n      });\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  _.str.sformat(lang.addItemMetadataDialogTitle1, addableTypeName);\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addItemMetadataDialogButtonAddTitle;\r\n      dialogOptions.OkButtonClick = this._addItem;\r\n      dialogOptions.CancelButtonActionToken = options.cancelButtonActionToken;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n      this.listenTo(this.metadataAddItemPropView, \"update:button\", _.bind(function (args) {\r\n        this.dialog && this.dialog.trigger(\"update:button\", args);\r\n      }, this));\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _addItem: function (args) {\r\n      function updateButtons(dialog, attributes) {\r\n        if (dialog && dialog.footerView) {\r\n          dialog.footerView.getButtons().forEach(function (buttonView) {\r\n            buttonView.updateButton(attributes);\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!!args.view.metadataPropertiesView.allFormsRendered) {\r\n        var enable = false;\r\n        if (args.callerProcessData !== true) {\r\n          updateButtons(this.dialog, {disabled: true});\r\n          enable = true;\r\n        }\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = this.metadataController ||\r\n                                     new MetadataController();\r\n\r\n            this.metadataAddItemPropView.blockActions();\r\n            enable = false;\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.listenToOnce(this.dialog, \"hide\", function () {\r\n                    this.metadataAddItemPropView.unblockActions();\r\n                    updateButtons(this.dialog, {disabled: false});\r\n                  });\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(_.bind(function (resp) {\r\n                  this.metadataAddItemPropView.unblockActions();\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                  updateButtons(this.dialog, {disabled: false});\r\n                }, this));\r\n          }\r\n        }\r\n        if (enable) {\r\n          updateButtons(this.dialog, {disabled: false});\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',['module', 'csui/lib/underscore', 'csui/lib/jquery', 'csui/utils/log', 'csui/lib/marionette'\r\n], function (module, _, $, log, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior implements a default keyboard navigation for the metadata navigation list.\r\n\r\n  var TabPosition = {\r\n    none: -1,\r\n    header: 0,\r\n    list: 1\r\n  };\r\n\r\n  var MetadataNavigationListKeyboardBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListKeyboardBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      view.keyboardBehavior = this;\r\n      this.tabableElements = [];\r\n\r\n      var self = this;\r\n      this.listenTo(view, 'show', function () {\r\n        self.refreshTabableElements(view);\r\n      });\r\n      this.listenTo(view, 'click:item', function (item) {\r\n        // clear the currently focused element\r\n        var selIndex = view.selectedIndex;\r\n        var selectedElem = view.selectedIndexElem(selIndex);\r\n        selectedElem && selectedElem.prop('tabindex', '-1');\r\n        // set the new element tabindex\r\n        view.currentTabPosition = TabPosition.list;\r\n        view.selectedIndex = view.collection.indexOf(item.model);\r\n      });\r\n\r\n      _.extend(view, {\r\n\r\n        _focusHeader: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            this.currentTabPosition = TabPosition.header;\r\n            return $(this.ui.header);\r\n          }\r\n          return undefined;\r\n        },\r\n\r\n        _focusList: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          this.currentTabPosition = TabPosition.list;\r\n          return this.getSelectedItem().$el;\r\n        },\r\n\r\n        _setFocus: function () {\r\n          if (this.headerFocusable === true && this.headerElement) {\r\n            return this._focusHeader();\r\n          } else {\r\n            return this._focusList();\r\n          }\r\n        },\r\n\r\n        _headerIsInFocus: function () {\r\n          return this.$(this.ui.header).is(\":focus\");\r\n        },\r\n\r\n        _listIsInFocus: function () {\r\n          var inFocus = false;\r\n          var i;\r\n          for (i = 0; i < this.collection.length; i++) {\r\n            var $elem = this.selectedIndexElem(i);\r\n            if ($elem && $elem.is(\":focus\")) {\r\n              inFocus = true;\r\n              break;\r\n            }\r\n          }\r\n\r\n          return inFocus;\r\n        },\r\n\r\n        _checkFocusAndSetCurrentTabPosition: function () {\r\n          if (this._headerIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.header;\r\n          } else if (this._listIsInFocus()) {\r\n            this.currentTabPosition = TabPosition.list;\r\n          } else {\r\n            this.currentTabPosition = TabPosition.none;\r\n          }\r\n        },\r\n\r\n        // handle scenario that currentlyFocusedElement does not have event param for shiftTab\r\n        _setFirstAndLastFocusable: function () {\r\n          if (this.headerFocusable === true) {\r\n            $(this.ui.header).prop('tabindex', '0');\r\n          }\r\n          this.getSelectedItem() && this.getSelectedItem().$el.prop('tabindex', '0');\r\n        },\r\n\r\n        currentlyFocusedElement: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          this._setFirstAndLastFocusable();\r\n          if (event && event.shiftKey) {\r\n            return this._focusList();\r\n          }\r\n          // maintain old position\r\n          if (this.currentTabPosition === TabPosition.header) {\r\n            return this._focusHeader();\r\n          } else if (this.currentTabPosition === TabPosition.list) {\r\n            return this._focusList();\r\n          } else {\r\n            return this._setFocus();\r\n          }\r\n        },\r\n\r\n        _resetFocusedListElem: function () {\r\n          // workaround the general behaviors that it keeps the old focus\r\n          // reset focus back to the active list item before moving out of the region\r\n          var selIndex, selectedElem;\r\n\r\n          // clear the currently focused element\r\n          selIndex = this.selectedIndex;\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          selectedElem && selectedElem.prop('tabindex', '-1');\r\n\r\n          // set to the active element\r\n          selIndex = this.getSelectedIndex();\r\n          selectedElem = this.selectedIndexElem(selIndex);\r\n          if (selectedElem) {\r\n            selectedElem.prop('tabindex', '0');\r\n            this.selectedIndex = selIndex;\r\n          }\r\n\r\n          // always have the header focusable\r\n          $(this.ui.header).prop('tabindex', '0');\r\n        },\r\n\r\n        _moveTo: function (event, $elem, $preElem) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          // this.trigger('changed:focus', this);\r\n          setTimeout(_.bind(function () {\r\n            $preElem && $preElem.prop('tabindex', '-1');\r\n            $elem.prop('tabindex', '0');\r\n            $elem.trigger('focus');\r\n          }, this), 50);\r\n        },\r\n\r\n        onKeyInView: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (event.keyCode === 9) {\r\n            // tab\r\n            if (event.shiftKey) {  // shift tab -> activate previous region\r\n              if (this.currentTabPosition === TabPosition.list &&\r\n                  this.headerFocusable === true && this.headerElement) {\r\n                if ($(this.ui.header).is(\":visible\")) {\r\n                  this._moveTo(event, this._focusHeader());\r\n                  this._resetFocusedListElem();\r\n                }\r\n              }\r\n            } else {\r\n              if (this.currentTabPosition === TabPosition.header) {\r\n                if (this.$el.find(\">.cs-content\").is(\":visible\")) {\r\n                  this._moveTo(event, this._focusList());\r\n                }\r\n              } else {\r\n                setTimeout(_.bind(function () {\r\n                  this._resetFocusedListElem();\r\n                }, this), 50);\r\n              }\r\n            }\r\n          } else if (event.keyCode === 32 || event.keyCode === 13) {\r\n            // space(32) or enter(13)\r\n            if (this.currentTabPosition === TabPosition.header) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.clickBack();\r\n            } else if (this.currentTabPosition === TabPosition.list) {\r\n              event.preventDefault();\r\n              event.stopPropagation();\r\n              this.selectAt(this.selectedIndex);\r\n            }\r\n          }\r\n        },\r\n\r\n        onKeyDown: function (event) {\r\n          this._checkFocusAndSetCurrentTabPosition();\r\n          if (this.currentTabPosition !== TabPosition.list) {\r\n            this.onKeyInView(event);\r\n            return;\r\n          }\r\n\r\n          var selIndex = this.selectedIndex;\r\n          if (selIndex < 0 || selIndex === undefined) {\r\n            selIndex = this.getSelectedIndex();\r\n          }\r\n          var $preElem = this.selectedIndexElem(selIndex);\r\n\r\n          switch (event.which) {\r\n          case 33: // page up\r\n            this._moveTo(event, this._selectFirst(), $preElem);\r\n            break;\r\n          case 34: // page down\r\n            this._moveTo(event, this._selectLast(), $preElem);\r\n            break;\r\n          case 38: // up\r\n            this._moveTo(event, this._selectPrevious(), $preElem);\r\n            break;\r\n          case 40: // down\r\n            this._moveTo(event, this._selectNext(), $preElem);\r\n            break;\r\n          default:\r\n            this.onKeyInView(event);\r\n            return; // exit this handler for other keys\r\n          }\r\n        },\r\n\r\n        _selectFirst: function () {\r\n          this.selectedIndex = 0;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectLast: function () {\r\n          this.selectedIndex = this.collection.length - 1;\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectNext: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex < this.collection.length - 1) {\r\n            this.selectedIndex++;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        _selectPrevious: function () {\r\n          if (this.selectedIndex < 0 || this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.getSelectedIndex();\r\n          }\r\n          if (this.selectedIndex > 0) {\r\n            this.selectedIndex--;\r\n          }\r\n          return this.selectedIndexElem(this.selectedIndex);\r\n        },\r\n\r\n        selectAt: function (index) {\r\n          if (index >= this.collection.length || index < 0) {\r\n            return;\r\n          }\r\n          var $elem = this.selectedIndexElem(index);\r\n          $elem && $elem.trigger('click');\r\n        }\r\n\r\n      });\r\n\r\n    }, // constructor\r\n\r\n    refreshTabableElements: function (view) {\r\n      log.debug('MetadataNavigationListKeyboardBehavior::refreshTabableElements ' +\r\n                view.constructor.name) &&\r\n      console.log(log.last);\r\n      if (view.options.data.back_button) {\r\n        this.view.headerFocusable = true;\r\n        this.view.headerElement = view.ui.header;\r\n      }\r\n      this.view.currentTabPosition = TabPosition.none;\r\n      this.view.selectedIndex = -1;\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListKeyboardBehavior;\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.view',['csui/lib/underscore', 'csui/lib/jquery',\r\n  'csui/controls/list/simplelist.view',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.keyboard.behavior',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/models/version',\r\n  'i18n!csui/widgets/metadata/impl/nls/lang'\r\n], function (_, $,\r\n    SimpleListView,\r\n    TabableRegionBehavior,\r\n    MetadataNavigationListKeyboardBehavior,\r\n    NodeTypeIconView,\r\n    VersionModel,\r\n    lang) {\r\n\r\n  var MetadataNavigationListView = SimpleListView.extend({\r\n\r\n    childViewOptions: function (model) {\r\n      return {\r\n        templateHelpers: function () {\r\n          var nameAttribute = this.options.nameAttribute || 'name';\r\n          return {enableIcon: true, name: this.model.get(nameAttribute)};\r\n        },\r\n        nameAttribute: this.options.data.nameAttribute\r\n      };\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyDown'\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListKeyboardBehavior: {\r\n        behaviorClass: MetadataNavigationListKeyboardBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationListView(options) {\r\n      this.options = options || {};\r\n      this.events = _.extend({}, SimpleListView.prototype.events, this.events);\r\n      SimpleListView.apply(this, arguments);\r\n\r\n      // Do not use childEvents, because SimpleListView does it and our property\r\n      // would overwrite their value and disable their event handlers\r\n      this.listenTo(this, 'childview:render', this.onRenderItem);\r\n      this.listenTo(this, 'childview:before:destroy', this.onBeforeDestroyItem);\r\n    },\r\n\r\n    onRenderItem: function (childView) {\r\n      // for version metadata, show the version number in place of the icon\r\n      if (childView.model instanceof VersionModel) {\r\n        var verNum = childView.model.get('version_number_name');\r\n        $(childView.$('.csui-type-icon').get(0)).append(\r\n            \"<span title='\" + verNum + \"' class='list-item-version'>\" + verNum + \"</span>\"\r\n        );\r\n      } else {\r\n        // Checking for ThumbnailView\r\n        if ((this.options && this.options.isThumbnailView) ||\r\n            (this.options.originatingView && this.options.originatingView.thumbnailView)) {\r\n          this.$el.addClass(\"csui-metadata-navigation-thumbnail\");\r\n          childView.model.attributes.image_url = childView.model.get('csuiThumbnailImageUrl');\r\n        } else {\r\n          this.$el.find(\".csui-metadata-navigation-thumbnail\").removeClass(\r\n              \"csui-metadata-navigation-thumbnail\");\r\n        }\r\n        childView._nodeIconView = new NodeTypeIconView({\r\n          el: childView.$('.csui-type-icon').get(0),\r\n          node: childView.model\r\n        });\r\n        childView._nodeIconView.render();\r\n      }\r\n\r\n      // show a red star if the model has enforced required attribute\r\n      var show_required = this.options.data && this.options.data.show_required === true;\r\n      var enforcedRequire = childView.model && childView.model.options &&\r\n                            childView.model.options.enforcedRequiredAttrs === true;\r\n      if (show_required && enforcedRequire) {\r\n        var titleEl = childView.$('.list-item-title').get(0);\r\n        if (titleEl) {\r\n          var cssClasses, tooltip;\r\n          if (childView.model.validated === true) {\r\n            // change the star to green checkmark if the model passed validation\r\n            cssClasses = 'cs-icon-required category_required_done';\r\n            tooltip = lang.requiredPassedTooltip;\r\n          } else {\r\n            //show red star icon for required attributes to be filled\r\n            cssClasses = 'cs-icon-required category_required';\r\n            tooltip = lang.requiredTooltip;\r\n          }\r\n          $(titleEl).before(\"<span class='\" + cssClasses + \"' aria-label='\" + tooltip +\r\n                            \"' title='\" + tooltip + \"'></span>\");\r\n        }\r\n      }\r\n    },\r\n\r\n    onBeforeDestroyItem: function (childView) {\r\n      if (childView._nodeIconView) {\r\n        childView._nodeIconView.destroy();\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  return MetadataNavigationListView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_common_metadata.action.multiple.items', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadata.navigation.list.behavior',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette'\r\n], function (_, $, Backbone, Marionette) {\r\n  'use strict';\r\n\r\n  // This behavior provides shared functionality for the metadata navigation list.\r\n\r\n  var MetadataNavigationListBehavior = Marionette.Behavior.extend({\r\n\r\n    constructor: function MetadataNavigationListBehavior(options, view) {\r\n      Marionette.Behavior.prototype.constructor.apply(this, arguments);\r\n\r\n      _.extend(view, {\r\n\r\n        onBeforeShow: function () {\r\n          this._showChildViews();\r\n        },\r\n        onShow: function () {\r\n          this._showScrollPosition();\r\n        },\r\n        onBeforeDestroy: function () {\r\n          if (this.mdv && this.mdv.internal) {\r\n            this.mdv.destroy();\r\n          }\r\n          if (this.mdn) {\r\n            this.mdn.destroy();\r\n          }\r\n        },\r\n\r\n        _showChildViews: function () {\r\n          this.navigationRegion.show(this.mdn);\r\n          this.contentRegion.show(this.mdv);\r\n        },\r\n\r\n        _showScrollPosition: function () {\r\n          if (this.initiallySelected instanceof Backbone.Model) {\r\n            var index = this.mdn.collection.findIndex({id: this.initiallySelected.get('id')});\r\n            (index < 0 || index > this.mdn.collection.length - 1) && (index = 0);\r\n            return this.mdn.setSelectedIndex(index);\r\n          } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n            var firstSelected = this.initiallySelected.models[0];\r\n            var selIndex = this.mdn.collection.indexOf(firstSelected);\r\n            if (selIndex === -1) {\r\n              selIndex = this.mdn.collection.findIndex({id: firstSelected.get('id')});\r\n            }\r\n            this.mdn.setSelectedIndex(selIndex);\r\n          } else {\r\n            if (this.mdn.collection.models.length > 0) {\r\n              this.mdn.setSelectedIndex(0);\r\n            }\r\n          }\r\n\r\n        }\r\n      });\r\n\r\n    } // constructor\r\n\r\n  });\r\n\r\n  return MetadataNavigationListBehavior;\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/common/metadata.action.multiple.items',[],function(){});\n","csui.define('csui/widgets/metadata/impl/common/metadata.action.multiple.items.view',['csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'hbs!csui/widgets/metadata/impl/common/metadata.action.multiple.items',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior', \"csui/lib/jsonpath\",\r\n  'css!csui/widgets/metadata/impl/common/metadata.action.multiple.items'\r\n], function (_, Backbone, Marionette, MetadataNavigationListView,\r\n    MetadataActionOneItemPropertiesView, template, LayoutViewEventsPropagationMixin,\r\n    MetadataNavigationListBehavior, jsonPath) {\r\n\r\n  var MetadataActionMultipleItemsView = Marionette.LayoutView.extend({\r\n\r\n    className: 'cs-metadata-add-items',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataActionMultipleItemsView(options) {\r\n      options || (options = {});\r\n      this.options = options;\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.initiallySelected = this.options.selected;\r\n      this.commonCategories = options.commonCategories;\r\n      this.initialFormData = options.initialFormData;\r\n      this.requiredFields = [];\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n      if (options.applyFlag) {\r\n        initiallySelectedModel.set(\"applyFlag\", options.applyFlag);\r\n      }\r\n\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: initiallySelectedModel,\r\n        container: this.container,\r\n        context: this.context,\r\n        commands: options.commands,\r\n        originatingView: this.originatingView,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        data: {\r\n          back_button: false,\r\n          title: '',\r\n          show_required: true\r\n        }\r\n      });\r\n      //Set the Initial categories to all uploadable files\r\n      if (options.applyFlag) {\r\n        this.setInitialCategories();\r\n      }\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.propagateEventsToRegions();\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      var valid = this.validateAndSetValuesToNode();\r\n      if (valid) {\r\n        this._showNode(item.model);\r\n      } else {\r\n        item.cancelClick = true;\r\n      }\r\n    },\r\n\r\n    // set initial category values to all Alpaca forms\r\n    setInitialCategories: function () {\r\n      var that = this;\r\n      _.each(this.mdn.collection.models, function (model) {\r\n        var attr = {};\r\n        if (model.get(\"data\") === undefined &&\r\n            (model.get(\"type\") === 144 || model.get(\"type\") === undefined)) {\r\n          attr.advanced_versioning = false;\r\n          attr.name = model.get(\"newName\") || model.get(\"name\");\r\n          attr.mime_type = model.get(\"mime_type\");\r\n          attr.type = model.get(\"type\") || 144;\r\n          attr.parent_id = this.mdv.options.container.get(\"id\");\r\n          _.extend(attr, JSON.parse(JSON.stringify(that.commonCategories)));\r\n        } else if (model.get(\"type\") === 0 || model.get('container')) {\r\n          attr.name = model.get(\"newName\") || model.get(\"name\");\r\n          attr.type = model.get(\"type\") || 0;\r\n          attr.container = model.get(\"container\") || true;\r\n          attr.parent_id = this.mdv.options.container.get(\"id\");\r\n          _.extend(attr, JSON.parse(JSON.stringify(that.commonCategories)));\r\n        }\r\n        model.set('data', attr);\r\n      }, this);\r\n\r\n    },\r\n\r\n    getRequiredFields: function () {\r\n      var formValues = {},\r\n          that       = this;\r\n      that.requiredFields = [];\r\n      if (this.initialFormData && this.initialFormData.models) {\r\n        _.each(this.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                var requiredFields = jsonPath(schema, \"$..[?(@.required===true)]\",\r\n                    {resultType: \"PATH\"});\r\n                var nonValidateFields = jsonPath(options, \"$..[?(@.validate===false)]\",\r\n                    {resultType: \"PATH\"});\r\n\r\n                // getting field id for non validate fields\r\n                var nonValidateFieldsIds = [];\r\n                _.each(nonValidateFields, function (nvField) {\r\n                  var matches = nvField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    nonValidateFieldsIds.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // getting field id for Required Fields\r\n                var reqFieldId = [];\r\n                _.each(requiredFields, function (reqField) {\r\n                  var matches = reqField.toString().match(/(\\'[\\w]*\\')/g);\r\n                  if (!!matches) {\r\n                    reqFieldId.push(matches[matches.length - 1].replace(/'/g, \"\"));\r\n                  }\r\n                });\r\n\r\n                // eliminating non validating fields from required field ids.\r\n                reqFieldId = reqFieldId.filter(function (n) {\r\n                  // Eliminate if validation not required.\r\n                  return nonValidateFieldsIds.indexOf(n) === -1;\r\n                });\r\n                if (reqFieldId.length > 0) {\r\n                  that.requiredFields.push(reqFieldId);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n    },\r\n\r\n    validateAndSetValuesToAllNode: function () {\r\n      var that           = this,\r\n          requiredFields = {},\r\n          valid          = true;\r\n      var formsValid = true;\r\n      this.getRequiredFields();\r\n      _.each(this.mdn.collection.models, _.bind(function (form) {\r\n        var data = form.get('data');\r\n        _.each(data.roles.categories, function (category) {\r\n          valid = valid && that._checkForAlpacaRequiredFields(form, category);\r\n        });\r\n        form.validated = valid;\r\n        formsValid = formsValid && valid;\r\n      }, this));\r\n      return formsValid;\r\n    },\r\n\r\n    // private\r\n    _checkForAlpacaRequiredFields: function (form, category) {\r\n      var valid    = true,\r\n          reqArray = [];\r\n      if (!!this.requiredFields) {\r\n        var nullCount = false;\r\n        _.each(this.requiredFields, function (arrayElement) {\r\n          reqArray = jsonPath(category, \"$..\" + arrayElement.toString(),\r\n              {resultType: \"PATH\"}.toArray);\r\n          _.each(reqArray, function (arrayElement) {\r\n            var checkNull = function (element) {\r\n              if (element instanceof Array && (element !== null || element !== \"\")) {\r\n                _.each(element, function (childElement) {\r\n                  checkNull(childElement);\r\n                });\r\n              } else if (element === null || element === \"\") {\r\n                nullCount = true;\r\n                return;\r\n              }\r\n            };\r\n            if (!nullCount) {\r\n              checkNull(arrayElement);\r\n            } else {\r\n              valid = false;\r\n              return;\r\n            }\r\n          });\r\n          if (nullCount) {\r\n            valid = false;\r\n            return;\r\n          }\r\n        });\r\n      }\r\n      return valid;\r\n    },\r\n\r\n    // public: validate the current form and set values to node if valid.\r\n    //         returns true if form is valid; otherwise, false.\r\n    validateAndSetValuesToNode: function () {\r\n      var item = this.mdn.getSelectedItem();\r\n      var valid = this.mdv.validate();\r\n      if (valid) {\r\n        var data = this.mdv.getValues();\r\n        // store the newly added categories data\r\n        if (item.model.newCategories.models.length > 0) {\r\n          _.each(item.model.newCategories.models, function (catModel) {\r\n            var catId = catModel.get('id');\r\n            var roleName = catModel.get('role_name');\r\n            var catData = {};\r\n            if (data && data.roles && data.roles[roleName]) {\r\n              catData = data.roles[roleName];\r\n            }\r\n            if (_.isEmpty(catData[catId]) === false) {\r\n              _.each(catModel.attributes.data, function (iValue, iKey) {\r\n                if (_.has(catData[catId], iKey)) {\r\n                  catModel.attributes.data[iKey] = catData[catId][iKey];\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        item.model.validated = true;\r\n        item.model.set('data', data);  // intentionally trigger the set to redraw list item\r\n        return true;\r\n      }\r\n      if (!!this.mdv.metadataPropertiesView.allFormsRendered) {\r\n        item.model.validated = false;\r\n        item.model.trigger('change', item.model); // intentionally trigger the set to redraw list item\r\n      }\r\n      return false;\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this.trigger(\"metadata:close\", {sender: this});\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n      model.set(\"applyFlag\", this.options.applyFlag);\r\n      this.mdv = new MetadataActionOneItemPropertiesView({\r\n        model: model,\r\n        container: this.container,\r\n        context: this.context,\r\n        originatingView: this.originatingView,\r\n        action: this.options.action,\r\n        inheritance: this.options.inheritance\r\n      });\r\n      this.mdv.internal = true;\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close',\r\n          _.bind(function () {\r\n            this.trigger(\"metadata:close\", {sender: this});\r\n          }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataActionMultipleItemsView.prototype, LayoutViewEventsPropagationMixin);\r\n\r\n  return MetadataActionMultipleItemsView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addItemsMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              console.log(model);\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject') || model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n\r\n              if (data && item) {\r\n                var extendedData = {};\r\n                item.set('newName', data.name);\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleItemsController;\r\n\r\n});\r\n\n","/**\r\n * this is exclusively for documents and folders\r\n */\r\ncsui.define('csui/widgets/metadata/impl/add.items/metadata.add.item.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/metadata.add.item.controller\",\r\n  \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddOneItemController, MetadataUtils,\r\n    MetadataAddMultipleItemsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddItemController() {\r\n  }\r\n\r\n  _.extend(MetadataAddItemController.prototype, Backbone.Events, {\r\n\r\n    addItemsRequiredMetadata: function (items, options) {\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred      = $.Deferred(),\r\n          file          = _.find(items, function (item) {\r\n                return item.get('newVersion') === undefined;\r\n              }) || items[0],\r\n          tempName      = items.length > 0 ? items[0].get('name') : 'temp_name',\r\n\r\n          utilOptions   = {\r\n            action: 'create',\r\n            name: tempName,\r\n            items: items,\r\n            container: options.container,\r\n            context: options.container.context,\r\n            collection: options.collection,\r\n            docParentId: items.length > 0 ? file.get('id') : null,\r\n            addableType: 144 //this is tweak to\r\n            // get validate required attrs for folders also, since by default container won't ask to fill all req attrs, while drag and drop folders we have to fill else uploadingsub level files  failed\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(items, function (item) {\r\n            return item.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              // if the container has empty required metadata.\r\n              var metadataDeferred = $.Deferred();\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (items.length) {\r\n                //if items has no new files but has versions to files.\r\n                deferred.resolve();\r\n              }\r\n              else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred(),\r\n          nodes    = this._makeNodeCollectionFromItems(items, options),\r\n          status   = {\r\n            nodes: nodes,\r\n            container: options.container,\r\n            context: options.context\r\n          };\r\n      options = options || {};\r\n      _.extend(options, {\r\n        callerProcessData: true,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\",\r\n        dialogTitle: nodes.models[0].get('fileObject') ? lang.addDocumentMetadataDialogTitle :\r\n                     lang.addFolderMetadataDialogTitle,\r\n        addButtonTitle: lang.addItemMetadataDialogButtonUploadTitle\r\n      });\r\n      this.displayForm(status, options)\r\n          .done(function (resp) {\r\n            if (options.callerProcessData) {\r\n              var model = nodes.models[0];\r\n              var item = model.get('itemObject') || model.get('fileObject');\r\n              item.set('newName', resp.data.name);\r\n\r\n              if (item) {\r\n                var extendedData = {};\r\n                item.set('newName', resp.data.name);\r\n                if (resp.data.description !== undefined) {\r\n                  extendedData.description = resp.data.description;\r\n                }\r\n                if (resp.data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n                }\r\n                if (resp.data.roles) {\r\n                  extendedData.roles = _.deepClone(resp.data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.set('extended_data', extendedData);\r\n                }\r\n              }\r\n              deferred.resolve(items);\r\n            } else {\r\n              deferred.resolve.apply(deferred, arguments);\r\n            }\r\n          })\r\n          .fail(function () {\r\n            deferred.reject.apply(deferred, arguments);\r\n          });\r\n      return deferred.promise();\r\n    },\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (nodes, options) {\r\n      nodes = this._makeNodeCollectionFromItems(nodes, options);\r\n      var folderLen = 0, fileLen = 0, nodesLen = nodes.length, cmdStatus = {nodes: nodes},\r\n          deferred                                                       = $.Deferred();\r\n      for (var i = 0; i < nodesLen; i++) {\r\n        nodes.models[i].get('fileObject') ? fileLen++ : folderLen++;\r\n      }\r\n      _.extend(options, {\r\n        dialogTitle: fileLen === nodesLen ? lang.addDocumentsMetadataDialogTitle :\r\n                     folderLen === nodesLen ? lang.addFoldersMetadataDialogTitle :\r\n                     lang.addItemsMetadataDialogTitle,\r\n        addButtonTitle: lang.addItemMetadataDialogButtonUploadTitle\r\n      });\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleItemsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve(nodes);\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      var node;\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          if (file) {\r\n            node = new NodeModel({\r\n              name: item.get('newName') || file.name,\r\n              type: item.get('type') || 144,\r\n              size: file.size,\r\n              mime_type: file.type,\r\n              fileObject: item,\r\n              parent_id: options.container.get('id'),\r\n              extended_data: item.get('extended_data')\r\n            }, {\r\n              connector: options.container.connector\r\n            });\r\n          } else {\r\n            node = new NodeModel({\r\n              container: true,\r\n              name: item.get('newName') || item.get('name'),\r\n              type: item.get('type') || item.get('subType' || 0),\r\n              type_name: item.get('type_name') || 'Folder',\r\n              itemObject: item,\r\n              parent_id: options.container.get('id'),\r\n              extended_data: item.get('extended_data'),\r\n              enforcedRequiredAttrsForFolders: item.get('enforcedRequiredAttrsForFolders')\r\n            }, {\r\n              connector: options.container.connector\r\n            });\r\n          }\r\n\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n    //to support previous implemenation\r\n    displayForm: function (status, options) {\r\n      var metadataAddOneItemController = new MetadataAddOneItemController();\r\n      return metadataAddOneItemController\r\n          .displayForm(status, options);\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddItemController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddItemController, {version: \"1.0\"});\r\n\r\n  return MetadataAddItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert, commands) {\r\n\r\n  function MetadataAddMultipleDocsController() {\r\n  }\r\n\r\n  _.extend(MetadataAddMultipleDocsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      var applyFlag        = false,\r\n          commonCategories = this._getCommonCategories(options);\r\n      if (options.initialFormData && options.initialFormData.models &&\r\n          options.initialFormData.models.length > 1) {\r\n        applyFlag = true;\r\n      }\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        action: 'create',\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        commonCategories: commonCategories,\r\n        applyFlag: applyFlag,\r\n        initialFormData: options.initialFormData\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.addDocumentMetadataDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.addButtonTitle ? options.addButtonTitle :\r\n                                    lang.addDocumentMetadataDialogAddButtonTitle;\r\n      dialogOptions.OkButtonClick = this._addItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    _getCommonCategories: function (options) {\r\n      var formValues = {},\r\n          that       = this;\r\n      if (options.initialFormData && options.initialFormData.models) {\r\n        _.each(options.initialFormData.models, function (tab, key) {\r\n          var values   = tab.get(\"data\"),\r\n              roleName = tab.get(\"role_name\"),\r\n              options  = tab.get('options'),\r\n              schema   = tab.get('schema'),\r\n              roles, role, category;\r\n\r\n          if (values) {\r\n            if (roleName) {\r\n              roles = formValues.roles || (formValues.roles = {});\r\n              role = roles[roleName] || (roles[roleName] = {});\r\n              if (roleName === 'categories') {\r\n                // For categories, merge the properties to the\r\n                // roles.categories.<category_id> object\r\n                var catId = tab.get(\"id\").toString();\r\n                category = role[catId] || (role[catId] = {});\r\n                // when attributes are not set, the server deletes\r\n                // the category unless it is set to null\r\n                if (_.isEmpty(values)) {\r\n                  category = null;\r\n                } else {\r\n                  //Replace null values with empty string\r\n                  values = JSON.parse(JSON.stringify(values).replace(/null/g, \"\\\"\\\"\"));\r\n                  _.extend(category, values);\r\n                }\r\n              } else {\r\n                // With a role defined, merge the properties to the\r\n                // roles.<role_name> object\r\n                //TODO: uncomment this once classifications are displayed on upload dialog\r\n                //_.extend(role, values);\r\n              }\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return formValues;\r\n    },\r\n\r\n    // private\r\n    _addItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".cs-formfield-invalid\").removeClass('cs-formfield-invalid');\r\n          var allValid = true;\r\n          this.metadataAddItems.validateAndSetValuesToAllNode();\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            allValid = allValid && (model.validated ? true : false);\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('fileObject');\r\n              var extended_data = model.get('extended_data');\r\n              if (data && item) {\r\n                item.set('newName', data.name);\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  _.extend(extended_data, extendedData);\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.addDocumentMetadataDialogTitle;\r\n            var message = lang.missingRequiredMetadataForDocuments;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        } else {\r\n          //generic error handling for all modules\r\n          this.options.view.$el.find(\".binf-has-error .cs-formfield\").addClass(\r\n              'cs-formfield-invalid');\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataAddMultipleDocsController, {version: \"1.0\"});\r\n\r\n  return MetadataAddMultipleDocsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.add.document.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\",\r\n  \"csui/models/nodes\", \"csui/models/node/node.model\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.item.controller\",\r\n  \"csui/widgets/metadata/impl/metadata.utils\",\r\n  \"csui/widgets/metadata/impl/add.items/metadata.add.multiple.docs.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataAddItemController, MetadataUtils,\r\n    MetadataAddMultipleDocsController, lang) {\r\n  'use strict';\r\n\r\n  function MetadataAddDocumentController() {\r\n  }\r\n\r\n  _.extend(MetadataAddDocumentController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    addItemsRequiredMetadata: function (fileUploadCollection, options) {\r\n       // 'original' does not need checking\r\n       if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred      = $.Deferred(),\r\n          fileModels    = fileUploadCollection.models,\r\n          file          = _.find(fileUploadCollection.models, function (fileUploadModel) {\r\n                return fileUploadModel.get('newVersion') === undefined;\r\n              }) || fileModels[0],\r\n          tempName      = fileModels.length > 0 ? file.get('file').name : 'temp_name',\r\n          utilOptions   = {\r\n            action: 'create',\r\n            addableType: options.addableType,\r\n            name: tempName,\r\n            container: options.container,\r\n            docParentId: fileModels.length > 0 ? file.get('id') : null\r\n          },\r\n          metadataUtils = new MetadataUtils(),\r\n          newFiles      = $.grep(fileUploadCollection.models, function (fileUploadModel) {\r\n            return fileUploadModel.get('newVersion') === undefined;\r\n          }); //Collection might contain new versions of existing items, remove such items\r\n\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadata(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if (resp.hasRequiredMetadata === true) {\r\n              // if the container has empty required metadata.\r\n              var metadataDeferred = $.Deferred();\r\n\r\n              if (newFiles && newFiles.length === 1) {\r\n                // add one item with required metadata\r\n                metadataDeferred = this._addOneItemWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (newFiles && newFiles.length > 1) {\r\n                // add multiple items with required metadata\r\n                if (resp.initialFormData) {\r\n                  options.initialFormData = resp.initialFormData;\r\n                }\r\n                metadataDeferred = this._addMultipleItemsWithRequiredMetadata(newFiles,\r\n                    options);\r\n              } else if (fileUploadCollection.length) {\r\n                //if fileUploadCollection has no new files but has versions to files.\r\n                deferred.resolve();\r\n              }\r\n              else {\r\n                deferred.reject();\r\n              }\r\n\r\n              metadataDeferred.done(function (resp) {\r\n                deferred.resolve(resp);\r\n              }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed with add item as normal\r\n              deferred.resolve({});\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var file = item.get('file');\r\n          var node = new NodeModel({\r\n            name: item.get('newName') || file.name,\r\n            type: item.get('type') || 144,\r\n            size: file.size,\r\n            mime_type: file.type,\r\n            fileObject: item,\r\n            parent_id: options.container.get('id'),\r\n            extended_data: item.get('extended_data')\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          _.extend(node.options, {\r\n            enforcedRequiredAttrs: true\r\n          });\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: add one item with required metadata\r\n    _addOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container,\r\n        context: options.context\r\n      };\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        dialogTitle: lang.addDocumentMetadataDialogTitle,\r\n        addButtonTitle: lang.addDocumentMetadataDialogAddButtonTitle,\r\n        cancelButtonActionToken: \"cancelAddOneItemWithRequiredMetadata\"\r\n      };\r\n\r\n      // show add item metadata view\r\n      var metadataAddItemController = new MetadataAddItemController();\r\n      metadataAddItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            var item = items[0];\r\n            item.set('newName', resp.data.name);\r\n\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              item.set('extended_data', extendedData);\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (args) {\r\n            var error = (args && args.error) ? args.error : undefined;\r\n            var userAction;\r\n\r\n            if (args && args.buttonAttributes) {\r\n              if (args.buttonAttributes.actionToken === \"cancelAddOneItemWithRequiredMetadata\") {\r\n                userAction = \"cancelAddOneItemWithRequiredMetadata\";\r\n              }\r\n              else if (args.buttonAttributes.actionToken === \"closeMetadataActionView\") {\r\n                userAction = \"closeMetadataActionView\";\r\n              }\r\n            }\r\n            deferred.reject({error: error, userAction: userAction});\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: add multiple items with required metadata\r\n    _addMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n\r\n      var metadataAddMultipleDocsController = new MetadataAddMultipleDocsController();\r\n      metadataAddMultipleDocsController\r\n          .displayForm(cmdStatus, options)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function () {\r\n            deferred.reject();\r\n          });\r\n\r\n      return deferred.promise();\r\n    }\r\n\r\n  });\r\n\r\n  MetadataAddDocumentController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataAddDocumentController, {version: \"1.0\"});\r\n\r\n  return MetadataAddDocumentController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/widgets/metadata/impl/metadata.controller\",\r\n  \"csui/widgets/metadata/metadata.action.one.item.properties.view\",\r\n  \"csui/utils/commandhelper\", \"i18n!csui/widgets/metadata/impl/nls/lang\",\r\n  \"csui/dialogs/modal.alert/modal.alert\", 'csui/utils/commands',\r\n  \"css!csui/widgets/metadata/impl/metadata\"\r\n], function (_, BaseMetadataActionView, MetadataController,\r\n    MetadataActionOneItemPropertiesView, CommandHelper, lang, ModalAlert, commands) {\r\n\r\n  //\r\n  // Metadata Copy/Move One Item Controller allows copying/moving of ONE item with complete metadata\r\n  // that the user can edit and change values of general metadata, categories and other roles.\r\n  //\r\n\r\n  function MetadataCopyMoveOneItemController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveOneItemController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public (usually called from the 'command' class that has 'status' and 'options' parameters)\r\n    displayForm: function (status, options) {\r\n      var nodes = CommandHelper.getAtLeastOneNode(status);\r\n      var node = nodes.length > 0 ? nodes.models[0] : null;\r\n\r\n      this.node = node;\r\n\r\n      var addItemView = this.metadataAddItemPropView = new MetadataActionOneItemPropertiesView({\r\n        model: node,\r\n        container: status.container,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        commands: commands,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.callerProcessData = options.callerProcessData;\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = addItemView;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItem;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      var deferred = this.baseDisplayForm(baseUIOptions);\r\n\r\n      return deferred;\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItem: function (args) {\r\n      if (args.view.metadataPropertiesView && args.view.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItemPropView.validate();\r\n        if (valid) {\r\n          var data = this.metadataAddItemPropView.getValues();\r\n\r\n          if (args.callerProcessData === true) {\r\n            this.dialog.destroy();\r\n            this.deferred.resolve({data: data});\r\n          } else {\r\n            var metadataController = new MetadataController();\r\n            metadataController.createItem(this.node, data)\r\n                .done(_.bind(function (resp) {\r\n                  this.dialog.destroy();\r\n                  this.deferred.resolve({name: data.name});\r\n                }, this))\r\n                .fail(function (resp) {\r\n                  var error = lang.failedToCreateItem;\r\n                  if (resp) {\r\n                    if (resp.responseJSON && resp.responseJSON.error) {\r\n                      error = resp.responseJSON.error;\r\n                    } else if (resp.responseText) {\r\n                      error = resp.responseText;\r\n                    }\r\n                    ModalAlert.showError(error);\r\n                  }\r\n                });\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveOneItemController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveOneItemController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller',[\"csui/lib/underscore\", \"csui/widgets/metadata/impl/common/base.metadata.action.view\",\r\n  \"csui/models/node/node.model\", \"csui/controls/dialog/dialog.view\",\r\n  \"csui/widgets/metadata/impl/common/metadata.action.multiple.items.view\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/dialogs/modal.alert/modal.alert\",\r\n  \"css!csui/widgets/metadata/impl/metadata\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, BaseMetadataActionView, NodeModel, DialogView,\r\n    MetadataActionMultipleItemsView, lang, ModalAlert) {\r\n\r\n  function MetadataCopyMoveMultipleItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController.prototype, BaseMetadataActionView.prototype, {\r\n\r\n    // public\r\n    displayForm: function (status, options) {\r\n\r\n      this.metadataAddItems = new MetadataActionMultipleItemsView({\r\n        container: options.container,\r\n        collection: status.nodes,\r\n        selected: status.nodes,\r\n        originatingView: options.originatingView,\r\n        context: options.context,\r\n        action: options.action,\r\n        inheritance: options.inheritance\r\n      });\r\n\r\n      this.listenTo(this.metadataAddItems, \"metadata:add\", _.bind(function () {\r\n        this.deferred.resolve();\r\n      }, this));\r\n\r\n      var baseUIOptions = {};\r\n      baseUIOptions.originatingView = options.originatingView;\r\n      baseUIOptions.view = this.metadataAddItems;\r\n      var dialogOptions = {};\r\n      dialogOptions.dialogTitle = options.dialogTitle ? options.dialogTitle :\r\n                                  lang.defaultDialogTitle;\r\n      dialogOptions.OkButtonTitle = options.okButtonTitle ? options.okButtonTitle :\r\n                                    lang.defaultDialogOkButtonTitle;\r\n      dialogOptions.OkButtonClick = this._CopyMoveItems;\r\n      baseUIOptions.dialogOptions = dialogOptions;\r\n\r\n      return this.baseDisplayForm(baseUIOptions);\r\n\r\n    },\r\n\r\n    // private\r\n    _CopyMoveItems: function (args) {\r\n      if (args.view.mdv && args.view.mdv.metadataPropertiesView &&\r\n          args.view.mdv.metadataPropertiesView.allFormsRendered) {\r\n        var valid = this.metadataAddItems.validateAndSetValuesToNode();\r\n        if (valid) {\r\n          var allValid = true;\r\n          this.metadataAddItems.collection.forEach(function (model) {\r\n            var modelValid = model.options.enforcedRequiredAttrs === true ?\r\n                             (model.validated ? true : false ) : true;\r\n            allValid = allValid && modelValid;\r\n          });\r\n          if (allValid) {\r\n            this.metadataAddItems.collection.forEach(function (model) {\r\n              var data = model.get('data');\r\n              var item = model.get('itemObject');\r\n              if (data && item) {\r\n                item.newName = data.name;\r\n                var extendedData = {};\r\n                if (data.description !== undefined) {\r\n                  extendedData.description = data.description;\r\n                }\r\n                if (data.advanced_versioning !== undefined) {\r\n                  extendedData.advanced_versioning = data.advanced_versioning;\r\n                }\r\n                if (data.roles) {\r\n                  extendedData.roles = _.deepClone(data.roles);\r\n                }\r\n                if (_.isEmpty(extendedData) === false) {\r\n                  item.extended_data = extendedData;\r\n                }\r\n              }\r\n            });\r\n            this.dialog.destroy();\r\n            this.deferred.resolve();\r\n          } else {\r\n            var title = lang.defaultDialogTitle;\r\n            var message = lang.missingRequiredMetadataForObjects;\r\n            ModalAlert.showError(message, title);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataCopyMoveMultipleItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveMultipleItemsController;\r\n\r\n});\r\n\n","csui.define('csui/widgets/metadata/metadata.copy.move.items.controller',[\"csui/lib/underscore\", \"csui/lib/jquery\", \"csui/lib/backbone\", \"csui/models/nodes\",\r\n  \"csui/models/node/node.model\", \"csui/widgets/metadata/impl/metadata.utils\", \"csui/models/actions\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.one.item.controller\",\r\n  \"csui/widgets/metadata/impl/copy.move.items/metadata.copy.move.multiple.items.controller\",\r\n  \"i18n!csui/widgets/metadata/impl/nls/lang\", \"csui/utils/deepClone/deepClone\"\r\n], function (_, $, Backbone, NodeCollection, NodeModel, MetadataUtils, ActionCollection,\r\n    MetadataCopyMoveOneItemController, MetadataCopyMoveMultipleItemsController, lang) {\r\n\r\n  function MetadataCopyMoveItemsController() {\r\n  }\r\n\r\n  _.extend(MetadataCopyMoveItemsController.prototype, Backbone.Events, {\r\n\r\n    //\r\n    // Public: copy/move one or multiple items with open metadata option\r\n    //\r\n    CopyMoveItemsWithMetadata: function (items, options) {\r\n      return this.CopyMoveItemsRequiredMetadata(items, _.extend(options, {openMetadata: true}));\r\n    },\r\n\r\n    // private\r\n    _copyMoveItemsWithMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var metadataDeferred = $.Deferred();\r\n\r\n      if (items && items.length > 0) {\r\n        options.id || (options.id = items[0].id);\r\n        options.container || (options.container = options.targetFolder);\r\n      }\r\n\r\n      if (items && items.length === 1) {\r\n        // copy/move one item with metadata\r\n        metadataDeferred = this._copyMoveOneItemWithRequiredMetadata(items, options);\r\n      } else if (items && items.length > 1) {\r\n        // copy/move multiple items with metadata\r\n        metadataDeferred = this._copyMoveMultipleItemsWithRequiredMetadata(items, options);\r\n      } else {\r\n        deferred.reject();\r\n      }\r\n\r\n      metadataDeferred.done(function (resp) {\r\n        deferred.resolve();\r\n      }).fail(function (error) {\r\n        deferred.reject(error);\r\n      });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    //\r\n    // Public: check for enforced required metadata and show the metadata view if true\r\n    //\r\n    CopyMoveItemsRequiredMetadata: function (items, options) {\r\n      if (!items || items.length < 1) {\r\n        return $.Deferred().reject();\r\n      }\r\n\r\n      // 'original' does not need checking\r\n      if (options.openMetadata !== true && options.inheritance === 'original') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      // latest PM decision is to deal only with 'destination'.  Option 'merged' is only for 1 item.\r\n      if (options.openMetadata !== true && items.length > 1 && options.inheritance === 'merged') {\r\n        return $.Deferred().resolve();\r\n      }\r\n\r\n      var deferred = $.Deferred();\r\n      // talking the server developers, only need to check with one object\r\n      var utilOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        items: items,\r\n        container: options.targetFolder,\r\n        context: options.context\r\n      };\r\n      var metadataUtils = new MetadataUtils();\r\n      metadataUtils.ContainerHasEnforcedEmptyRequiredMetadataOnNodes(utilOptions)\r\n          .done(_.bind(function (resp) {\r\n            if ((resp.requiredMetadata && resp.enforcedItems && resp.enforcedItems.length > 0) ||\r\n                options.openMetadata === true) {\r\n              if (resp.requiredMetadata) {\r\n                utilOptions = _.extend(utilOptions, {enforcedItems: resp.enforcedItems});\r\n              }\r\n              this._copyMoveItemsWithMetadata(items, utilOptions)\r\n                  .done(function (resp) {\r\n                    deferred.resolve(resp);\r\n                  }).fail(function (error) {\r\n                deferred.reject(error);\r\n              });\r\n            } else {\r\n              // no required metadata: resolve and let the caller code proceed normally\r\n              deferred.resolve();\r\n            }\r\n          }, this))\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: create a node collection from the items array\r\n    _makeNodeCollectionFromItems: function (items, options) {\r\n      var nodes = new NodeCollection();\r\n      if (items && items.length > 0) {\r\n        _.each(items, function (item) {\r\n          var enforcedRequiredAttrs = _.find(options.enforcedItems,\r\n              function (enfItem) { return enfItem.id === item.id; }) === undefined ? false : true;\r\n          var node = new NodeModel({\r\n            id: item.id,\r\n            name: item.newName || item.name,\r\n            container: item.container,\r\n            mime_type: item.mime_type,\r\n            original_id: item.original_id,\r\n            type: item.type,\r\n            type_name: item.type_name,\r\n            action: options.action,\r\n            inheritance: options.inheritance,\r\n            itemObject: item,\r\n            size: item.size,\r\n            size_formatted: (item.type === 144 || item.type === 749 || item.type === 736 ||\r\n                             item.type === 30309) ? item.size_formatted : undefined\r\n          }, {\r\n            connector: options.container.connector\r\n          });\r\n          if (item.type === 140) { // for url object\r\n            node.attributes.url = item.url;\r\n          }\r\n          _.extend(node.options, {\r\n            original: item.original,\r\n            enforcedRequiredAttrs: enforcedRequiredAttrs\r\n          });\r\n          node.original = item.original || node.original;\r\n          node.actions = item.actions || new ActionCollection();\r\n          nodes.add(node, {silent: true});\r\n        }, this);\r\n      }\r\n      return nodes;\r\n    },\r\n\r\n    // Private: copy/move one item with required metadata\r\n    _copyMoveOneItemWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var status = {\r\n        nodes: nodes,\r\n        container: options.container\r\n      };\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = lang.copyOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = lang.moveOneItemMetadataDialogTitle;\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var cmdOptions = {\r\n        callerProcessData: true,\r\n        action: options.action,\r\n        context: options.context,\r\n        inheritance: options.inheritance,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n\r\n      // show copy/move one item metadata view\r\n      var metadataCopyMoveOneItemController = new MetadataCopyMoveOneItemController();\r\n      metadataCopyMoveOneItemController\r\n          .displayForm(status, cmdOptions)\r\n          .done(function (resp) {\r\n            items[0].newName = resp.data.name;\r\n            var extendedData = {};\r\n            if (resp.data.description !== undefined) {\r\n              extendedData.description = resp.data.description;\r\n            }\r\n            if (resp.data.advanced_versioning !== undefined) {\r\n              extendedData.advanced_versioning = resp.data.advanced_versioning;\r\n            }\r\n            if (resp.data.roles) {\r\n              extendedData.roles = _.deepClone(resp.data.roles);\r\n            }\r\n            if (_.isEmpty(extendedData) === false) {\r\n              items[0].extended_data = extendedData;\r\n            }\r\n\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: copy/move multiple items with metadata\r\n    _copyMoveMultipleItemsWithRequiredMetadata: function (items, options) {\r\n      var deferred = $.Deferred();\r\n\r\n      var dialogTitle, okButtonTitle;\r\n      if (options.action === 'copy') {\r\n        dialogTitle = _.str.sformat(lang.copyMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.copyItemsMetadataDialogButtonTitle;\r\n      } else if (options.action === 'move') {\r\n        dialogTitle = _.str.sformat(lang.moveMultipleItemsMetadataDialogTitle, items.length);\r\n        okButtonTitle = lang.moveItemsMetadataDialogButtonTitle;\r\n      }\r\n      dialogTitle = this._extendDialogTitle(dialogTitle, options.inheritance);\r\n\r\n      var nodes = this._makeNodeCollectionFromItems(items, options);\r\n      var cmdStatus = {nodes: nodes};\r\n      var cmdOptions = {\r\n        action: options.action,\r\n        inheritance: options.inheritance,\r\n        container: options.container,\r\n        context: options.context,\r\n        originatingView: options.originatingView,\r\n        dialogTitle: dialogTitle,\r\n        okButtonTitle: okButtonTitle\r\n      };\r\n      var metadataCopyMoveMultipleItemsController = new MetadataCopyMoveMultipleItemsController();\r\n      metadataCopyMoveMultipleItemsController\r\n          .displayForm(cmdStatus, cmdOptions)\r\n          .done(function (resp) {\r\n            deferred.resolve();\r\n          })\r\n          .fail(function (error) {\r\n            deferred.reject(error);\r\n          });\r\n\r\n      return deferred.promise();\r\n    },\r\n\r\n    // Private: extend the dialog title based on the inheritance\r\n    _extendDialogTitle: function (dialogTitle, inheritance) {\r\n      var extDialogTitle = dialogTitle;\r\n      if (inheritance === 'original') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceOriginalProperties;\r\n      } else if (inheritance === 'destination') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceDestinationProperties;\r\n      } else if (inheritance === 'merged') {\r\n        extDialogTitle = dialogTitle + ' ' + lang.inheritanceMergedProperties;\r\n      }\r\n      return extDialogTitle;\r\n    }\r\n\r\n  });\r\n\r\n  MetadataCopyMoveItemsController.prototype.get = Backbone.Model.prototype.get;\r\n  _.extend(MetadataCopyMoveItemsController, {version: \"1.0\"});\r\n\r\n  return MetadataCopyMoveItemsController;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"metadata-wrapper binf-col-md-12\\\">\\r\\n  <div class=\\\"metadata-navigation\\\">\\r\\n    <div class=\\\"metadata-sidebar\\\"></div>\\r\\n    <div class=\\\"metadata-content\\\"></div>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_metadata_impl_metadatanavigation_impl_metadatanavigation', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/metadatanavigation/impl/nls/root/lang',{\r\n  dialogTitle: 'Favorites',\r\n  searchPlaceholder: 'Search Favorites',\r\n  versionsTitle: 'Versions'\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',[\r\n  'csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.behavior',\r\n  'csui/widgets/metadata/impl/metadata.navigation.list.view',\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/controls/progressblocker/blocker',\r\n  'hbs!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation',\r\n  'csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin',\r\n  'csui/controls/mixins/view.state/metadata.view.state.mixin',\r\n  'csui/utils/contexts/factories/next.node',\r\n  'i18n!csui/widgets/metadata/impl/metadatanavigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata/impl/metadatanavigation/impl/metadatanavigation'\r\n], function (_, Backbone, Marionette, TabableRegionBehavior, MetadataNavigationListBehavior,\r\n MetadataNavigationListView, MetadataView, BlockingView, template, LayoutViewEventsPropagationMixin,\r\n MetadataViewStateMixin,\r\n NextNodeModelFactory, lang) {\r\n  'use strict';\r\n\r\n  //\r\n  // Constructor options:\r\n  // - showTitleIcon: boolean to show or hide the icon in the title bar\r\n  //\r\n  var MetadataNavigationView = Marionette.LayoutView.extend({\r\n    className: 'cs-metadata',\r\n    template: template,\r\n\r\n    regions: {\r\n      navigationRegion: \".metadata-sidebar\",\r\n      contentRegion: \".metadata-content\"\r\n    },\r\n\r\n    behaviors: {\r\n      TabableRegionBehavior: {\r\n        behaviorClass: TabableRegionBehavior,\r\n        initialActivationWeight: 100\r\n      },\r\n      MetadataNavigationListBehavior: {\r\n        behaviorClass: MetadataNavigationListBehavior\r\n      }\r\n    },\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options || (options = {});\r\n      BlockingView.imbue(this);\r\n      Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n      this._addUrlParametersSupport(options.context);\r\n\r\n      this.collection = options.collection;\r\n      this.container = options.container;\r\n      this.containerCollection = options.containerCollection;\r\n      this.context = options.context;\r\n      this.originatingView = options.originatingView;\r\n      this.showCloseIcon = options.showCloseIcon;\r\n      this.initiallySelected = this.options.selected;\r\n      this.selectedTab = options.selectedTab || this.getViewStateDropdown();\r\n      this.selectedProperty = options.selectedProperty || this.getViewStateSelectedProperty();\r\n      this.isThumbnailView = options.isThumbnailView || this.getThumbnailViewState();\r\n      this.showPermissionView = options.showPermissionView;\r\n      this.thumbnailViewState = options.originatingView &&\r\n                                options.originatingView.thumbnailViewState;\r\n      this.collection.inMetadataNavigationView = options.originatingView &&\r\n                                                 options.originatingView.isTabularView;\r\n      this.disableViewState = options.disableViewState;\r\n\r\n      // Set toolbarItems from originating view to this.options, because when creating\r\n      // MetadataView, this is used as originatingView and we want to use the toolbar or menu\r\n      // items that are specified at the initial originatingView\r\n      if (!this.options.toolbarItems && this.originatingView && this.originatingView.options &&\r\n          this.originatingView.options.toolbarItems) {\r\n        this.options.toolbarItems = this.originatingView.options.toolbarItems;\r\n      }\r\n\r\n      var initiallySelectedModel = this._getInitiallySelectedModel();\r\n\r\n      this.mdv = (this.options.data && this.options.data.contentView) ?\r\n                 this.options.data.contentView :\r\n                 new MetadataView({\r\n                   model: initiallySelectedModel,\r\n                   container: this.container,\r\n                   containerCollection: this.containerCollection,\r\n                   collection: this.collection,\r\n                   context: this.context,\r\n                   originatingView: this,\r\n                   metadataNavigationView: this,\r\n                   isExpandedView: !!this.options.isExpandedView,\r\n                   showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n                   selectedTab: this.selectedTab,\r\n                   selectedProperty: this.selectedProperty,\r\n                   showPermissionView: this.showPermissionView,\r\n                   disableViewState: this.options.disableViewState\r\n                 });\r\n      if (!this.options.data || !this.options.data.contentView) {\r\n        this.mdv.internal = true;\r\n      }\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n\r\n      this.mdn = new MetadataNavigationListView({\r\n        collection: options.collection,\r\n        containerCollection: this.containerCollection,\r\n        data: {\r\n          back_button: (this.originatingView || this.containerCollection) ? true : false,\r\n          title: this._getBackButtonTitle(options),\r\n          nameAttribute: options.nameAttribute\r\n        },\r\n        originatingView: options.originatingView,\r\n        isThumbnailView: this.isThumbnailView\r\n      });\r\n      this.listenTo(this.mdn, 'click:item', this.onClickItem);\r\n      this.listenTo(this.mdn, 'click:back', this.onClickBack);\r\n      this.listenTo(this.mdn, 'show:node', function (args) {\r\n        this._showNode(args.model);\r\n      });\r\n      this.listenTo(this.mdv, 'disable:active:item', function (args) {\r\n        this.mdn.$el.find('.binf-active').addClass('active-item-disable');\r\n      }).listenTo(this.mdv, 'enable:active:item', function () {\r\n        this.mdn.$el.find('.active-item-disable').removeClass('active-item-disable');\r\n      });\r\n\r\n      if (this.options.originatingView &&\r\n          (!_.isFunction(this.options.originatingView.cascadeDestroy) ||\r\n           this.options.originatingView.cascadeDestroy())) {\r\n        this.listenTo(this.options.originatingView, 'before:destroy', function () {\r\n          this._closeMetadata();\r\n        });\r\n      }\r\n\r\n      this.propagateEventsToRegions();\r\n      // once this view is launched with showPermissionView disable the viewState.\r\n      if (this.showPermissionView) {\r\n        this.disableViewState = true;\r\n      }\r\n\r\n      if (this._isViewStateModelEnabled()) {\r\n        this.listenTo(this.model, 'change:id', this._modelIdChanged);\r\n      }\r\n    },\r\n\r\n    _getBackButtonTitle: function (options) {\r\n\r\n      // TODO: Put the title on the interface (to options). New scenarios\r\n      // should not be hardcoded here one after another. They should\r\n      // specify what they need on the interface.\r\n      var title = options.container ? options.container.get('name') : '';\r\n      if (!title && options.collection.length > 0 &&\r\n          !!options.collection.models[0].collection.title) {\r\n        title = options.collection.models[0].collection.title;\r\n      }\r\n      // for versions, use a static title\r\n      if (Object.getPrototypeOf(options.collection).constructor.name === 'NodeVersionCollection') {\r\n        title = lang.versionsTitle;\r\n      }\r\n      if (!title) {\r\n        var viewStateMode = options.context && options.context.viewStateModel;\r\n        if (viewStateMode) {\r\n          var metadataContainer = viewStateMode.get('metadata_container');\r\n          if (metadataContainer) {\r\n            title = metadataContainer.name;\r\n          }\r\n        }\r\n\r\n      }\r\n      return title;\r\n    },\r\n\r\n    _isViewStateModelEnabled: function () {\r\n      var viewStateModel = this.context && this.context.viewStateModel;\r\n      return !this.disableViewState && viewStateModel && viewStateModel.get('enabled');\r\n    },\r\n\r\n    _getInitiallySelectedModel: function () {\r\n      if (this.initiallySelected instanceof Backbone.Model) {\r\n        var index = this.collection.findIndex({id: this.initiallySelected.get('id')});\r\n        if (index < 0 || index > this.collection.length - 1) { return null; }\r\n        return this.collection.at(index);\r\n      } else if (this.initiallySelected && this.initiallySelected.length > 0) {\r\n        return this.initiallySelected.models[0];\r\n      } else if (this.collection && this.collection.length > 0) {\r\n        return this.collection.models[0];\r\n      } else {\r\n        return null;\r\n      }\r\n    },\r\n\r\n    onClickItem: function (item) {\r\n      if (this._isViewStateModelEnabled() && this.getViewStateId() !== item.model.get('id')) {\r\n        this.setViewStateId(item.model.get('id'), {model: item.model});\r\n      } else {\r\n        this._showNode(item.model);\r\n      }\r\n    },\r\n\r\n    onClickBack: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onItemNameChanged: function (newName) {\r\n      var selectedItem  = this.mdn.getSelectedItem(),\r\n          selectedIndex = this.mdn.getSelectedIndex();\r\n\r\n      selectedItem.render(); // name has been set silently\r\n      this.mdn.setSelectedIndex(selectedIndex);\r\n    },\r\n\r\n    _moveToNextItemAfterDeleteOrMove: function () {\r\n      if (this.mdn.collection.length === 0) {\r\n        this._closeMetadata();\r\n      } else {\r\n        var nextIndex = this.indexOfItemDeleteOrMove;\r\n        nextIndex === this.mdn.collection.length && (nextIndex--);\r\n        this.mdn.selectAt(nextIndex);\r\n      }\r\n    },\r\n\r\n    onItemBeforeDelete: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n    },\r\n\r\n    onItemDeleted: function (args) {\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    onItemBeforeMove: function (args) {\r\n      this.indexOfItemDeleteOrMove = this.mdn.getSelectedIndex();\r\n      this.listenToOnce(this.containerCollection, 'remove', _.bind(this.onItemMoved, this));\r\n    },\r\n\r\n    onItemMoved: function (removedNode) {\r\n      this.mdn.collection.remove(removedNode);\r\n      this._moveToNextItemAfterDeleteOrMove();\r\n    },\r\n\r\n    _showNode: function (model) {\r\n      var selectedTab = this.getViewStateDropdown() || (\r\n           this.mdv.metadataTabView.tabLinks ?\r\n           this.mdv.metadataTabView.tabLinks.selected :\r\n           this.mdv.options.selectedTab ? this.mdv.options.selectedTab : \"\"),\r\n          activeTab   = this.mdv.metadataTabView.options.activeTab ?\r\n                        this.mdv.metadataTabView.options.activeTab :\r\n                        this.mdv.options.activeTab ? this.mdv.options.activeTab : \"\";\r\n      if (this.mdv && this.mdv.internal) {\r\n        this.mdv.destroy();\r\n      }\r\n\r\n      this.mdv = new MetadataView({\r\n        model: model,\r\n        container: this.container,\r\n        containerCollection: this.containerCollection,\r\n        collection: this.collection,\r\n        context: this.context,\r\n        originatingView: this,\r\n        metadataNavigationView: this,\r\n        showCloseIcon: this.showCloseIcon === undefined ? false : this.showCloseIcon,\r\n        activeTab: activeTab,\r\n        selectedTab: selectedTab,\r\n        showPermissionView: this.showPermissionView\r\n      });\r\n      this.mdv.internal = true;\r\n\r\n      this._subscribeToMetadataViewEvents();\r\n      this.contentRegion.show(this.mdv);\r\n    },\r\n\r\n    _modelIdChanged: function () {\r\n      var id = this.model.get('id');\r\n      if (id) {\r\n        this.setSelectedElementByModelId(id);\r\n      }\r\n    },\r\n\r\n    setSelectedElementByModelId: function (id) {\r\n      var element = this.getItemByModelId(id);\r\n      if (element) {\r\n        this.mdn.setSelectedElement(element);\r\n        this._showNode(element.model);\r\n      }\r\n    },\r\n\r\n    getItemByModelId: function (id) {\r\n      var view;\r\n      this.mdn.children.some(function (element) {\r\n        if (element.model.get('id') === id) {\r\n          view = element;\r\n          return true;\r\n        }\r\n      });\r\n      return view;\r\n    },\r\n\r\n    onMetadataClose: function () {\r\n      this._closeMetadata();\r\n    },\r\n\r\n    onDestroy: function () {\r\n      if (this.thumbnailViewState) {\r\n        this.originatingView.thumbnail &&\r\n        this.originatingView.thumbnail.resultsView.triggerMethod('metadata:close');\r\n      }\r\n    },\r\n\r\n    _closeMetadata: function () {\r\n      this.trigger('metadata:close', {sender: this});\r\n\r\n      if (!this.originatingView) {\r\n        if (this._isViewStateModelEnabled() && !this.showPermissionView) {\r\n          this.context.viewStateModel.restoreLastRouter();\r\n        } else {\r\n          var id = this._getCommonContainerId();\r\n          if (id) {\r\n            // there is no originatingView to go back; thus, go to the container\r\n            this._setNextNodeModelFactory(id);\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    _getCommonContainerId: function () {\r\n      var id;\r\n      if (this.containerCollection) {\r\n        if (this.containerCollection.node) {\r\n          // there is no originatingView to go back; thus, go to the container\r\n          id = this.containerCollection.node.get('id');\r\n        } else if (this.containerCollection.models.length > 0) {\r\n          // if you have a list of models and they have the same parent id then select the\r\n          // parent id that is common to all.\r\n          id = this.containerCollection.models[0].get('parent_id');\r\n          this.containerCollection.models.some(function (model) {\r\n            if (model.get('parent_id') !== id) {\r\n              id = undefined;\r\n              return true;\r\n            }\r\n          });\r\n        }\r\n      }\r\n      return id;\r\n    },\r\n\r\n    _setNextNodeModelFactory: function (id) {\r\n      if (this.context && id !== undefined) {\r\n        var nextNode = this.context.getModel(NextNodeModelFactory);\r\n        if (nextNode) {\r\n          if (nextNode.get('id') === id) {\r\n            // when id is same as nextNode's id, nextNode.set(id) event is not triggered\r\n            nextNode.unset('id', {silent: true});\r\n          }\r\n          nextNode.set('id', id);\r\n        }\r\n      }\r\n    },\r\n\r\n    _subscribeToMetadataViewEvents: function () {\r\n      this.listenTo(this.mdv, 'metadata:close', _.bind(function () {\r\n        this._closeMetadata();\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:close:without:animation', _.bind(function () {\r\n        this.trigger('metadata:close:without:animation', {sender: this});\r\n      }, this));\r\n      this.listenTo(this.mdv, 'item:name:changed', _.bind(this.onItemNameChanged, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:delete', _.bind(function (args) {\r\n        this.onItemBeforeDelete(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:deleted', _.bind(function (args) {\r\n        this.onItemDeleted(args);\r\n      }, this));\r\n      this.listenTo(this.mdv, 'metadata:item:before:move', _.bind(function (args) {\r\n        this.onItemBeforeMove(args);\r\n      }, this));\r\n    },\r\n\r\n    _addUrlParametersSupport: function (context) {\r\n      var viewStateModel = context && context.viewStateModel;\r\n      viewStateModel && viewStateModel.addUrlParameters(['dropdown'], context);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, LayoutViewEventsPropagationMixin);\r\n  _.extend(MetadataNavigationView.prototype, MetadataViewStateMixin);\r\n\r\n  return MetadataNavigationView;\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/lang',{\r\n\r\n  FetchNodeFailTitle: 'Error',\r\n  FetchNodeFailMessage: 'Failed to fetch node \"{0}\". \\n\\n{1}'\r\n\r\n});\r\n\n","\ncsui.define('css!csui/widgets/metadata.navigation/impl/metadata.navigation',[],function(){});\n","csui.define('csui/widgets/metadata.navigation/metadata.navigation.view',['module','csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n  'csui/utils/base', 'csui/controls/progressblocker/blocker', 'csui/utils/contexts/factories/node',\r\n  'csui/utils/contexts/factories/children', 'csui/utils/contexts/factories/children2',\r\n  'csui/widgets/nodestable/nodestable.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/behaviors/default.action/impl/defaultaction', 'csui/dialogs/modal.alert/modal.alert',\r\n  'csui/utils/contexts/factories/metadata.factory',\r\n  'csui/utils/contexts/perspective/plugins/node/node.extra.data',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/lang',\r\n  'css!csui/widgets/metadata.navigation/impl/metadata.navigation'\r\n], function (module, _, $, Backbone, Marionette, base, BlockingView, NodeModelFactory,\r\n    ChildrenCollectionFactory, Children2CollectionFactory, NodesTableView,\r\n    ViewEventsPropagationMixin, MetadataNavigationViewImpl, DefaultActionController,\r\n    ModalAlert, MetadataModelFactory, nodeExtraData, lang) {\r\n  'use strict';\r\n\r\n  var config = module.config();\r\n  // TODO: remove this code when v1 and v2 browse call is finalized\r\n  if (NodesTableView.useV2RestApi) {\r\n    ChildrenCollectionFactory = Children2CollectionFactory;\r\n  }\r\n\r\n  //\r\n  // Public: Metadata Navigation View\r\n  // Description: view consists of the navigation list panel on the left and metadata view panel.\r\n  //\r\n  var MetadataNavigationView = Marionette.ItemView.extend({\r\n\r\n    className: 'cs-metadata-navigation-wrapper',\r\n\r\n    template: false,\r\n\r\n    constructor: function MetadataNavigationView(options) {\r\n      options = _.defaults(options, config);\r\n      options.data || (options.data = {});\r\n      options.showCloseIcon = false;\r\n      this.options = options;\r\n      this.defaultActionController = new DefaultActionController();\r\n\r\n      // Once PropertiesView is opened, 'OrginatingView' becomes metadataView or\r\n      // MetadataNavigationview.\r\n      // If  properties view page does not have navigationlist (eg for folders and wikipage) then\r\n      // originating view becomes 'MetadataView' based on supportOriginatingView\r\n      if (!!this.options.originatingView && !!this.options.originatingView.supportOriginatingView) {\r\n        this.options.baseOriginatingView = this.options.originatingView;\r\n        this.options.originatingView = this;\r\n      }\r\n\r\n      Marionette.ItemView.prototype.constructor.call(this, options);\r\n\r\n      // When this view is used alone on a perspective, if should offer\r\n      // spinning sun to commands executed with it as originating view\r\n      BlockingView.imbue(this);\r\n    },\r\n\r\n    onRender: function () {\r\n      // don't render until the complete data have been fetched\r\n      var fetching = this._ensureCompleteData();\r\n      if (fetching) {\r\n        return fetching.done(_.bind(this.render, this));\r\n      }\r\n\r\n      this.metadataNavigationView && this.metadataNavigationView.destroy();\r\n      var mnv = this.metadataNavigationView = new MetadataNavigationViewImpl(this.options);\r\n      this.propagateEventsToViews(this.metadataNavigationView);\r\n\r\n      this.metadataNavigationView.render();\r\n      Marionette.triggerMethodOn(mnv, 'before:show', mnv, this);\r\n      this.$el.append(mnv.el);\r\n      Marionette.triggerMethodOn(mnv, 'show', mnv, this);\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      if (this.metadataNavigationView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataNavigationView);\r\n        this.metadataNavigationView.destroy();\r\n      }\r\n    },\r\n\r\n    _ensureCompleteData: function () {\r\n      var options = this.options;\r\n      if (options.model && options.collection && options.containerCollection) {\r\n        return;  // return nothing (undefined) for synchronous code flow in onRender\r\n      }\r\n\r\n      // Data is not yet available, load the data and return a fetching promise..\r\n      return this._loadingDataByMetadata();\r\n    },\r\n\r\n    _loadingDataByMetadata: function () {\r\n      var self = this;\r\n      var deferred;\r\n      var options = this.options;\r\n      if (!options.model || (!options.collection && !options.containerCollection)) {\r\n        deferred = $.Deferred();\r\n      }\r\n\r\n      function loadCollectionAfterModel() {\r\n        self._loadCollection()\r\n            .always(function () {\r\n              self.unblockActions();\r\n            })\r\n            .done(function (response) {\r\n              deferred && deferred.resolve(response);\r\n            })\r\n            .fail(function (error) {\r\n              deferred && deferred.reject(error);\r\n            });\r\n      }\r\n\r\n      // Load the model if it is not passed in via the options\r\n      if (!options.model) {\r\n        options.model = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && {id: options.data.id},\r\n          temporary: true\r\n        });\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        loadCollectionAfterModel();\r\n      } else if (!options.collection || !options.containerCollection) {\r\n        options.selected = options.model;\r\n        self.blockActions();\r\n        loadCollectionAfterModel();\r\n      }\r\n\r\n      return deferred && deferred.promise();\r\n    },\r\n\r\n    _loadCollection: function () {\r\n      var self = this;\r\n      var deferred = $.Deferred();\r\n      var options = this.options;\r\n      var collection = options.collection || options.containerCollection;\r\n\r\n      function ensureModelInCollection() {\r\n        // if the model is not in the collection, insert it at the beginning\r\n        if (!collection.findWhere({id: options.model.get('id')})) {\r\n          collection.add(options.model, {at: 0, silent: true});\r\n        }\r\n      }\r\n\r\n      function setCollectionToOptions() {\r\n        options.collection || (options.collection = collection);\r\n        options.containerCollection || (options.containerCollection = collection);\r\n      }\r\n\r\n      if (!collection) {\r\n        // Check to see if the collection is already available on Context MetadataInfo\r\n        var metadataModel = options.context.getModel(MetadataModelFactory);\r\n        if (metadataModel) {\r\n          var metadataInfo = metadataModel.get('metadata_info'),\r\n              contextCollection = metadataInfo && metadataInfo.collection;\r\n          if (contextCollection && contextCollection.length > 0) {\r\n            collection = contextCollection;\r\n            ensureModelInCollection();\r\n            setCollectionToOptions();\r\n            delete options.context.viewStateModel.get('state').collection;\r\n            return deferred.resolve().promise();\r\n          }\r\n        }\r\n      }\r\n\r\n      if (!collection) {\r\n        options.model.ensureFetched()\r\n            .done(function (response) {\r\n              options.model.set('csuiLazyActionsRetrieved', true, {silent: true});\r\n              options.model.set('csuiAddPropertiesActionsRetrieved', true, {silent: true});\r\n\r\n              // Load the container first then load collection\r\n              options.container = options.context.getModel(NodeModelFactory, {\r\n                attributes: {id: options.model.get('parent_id')},\r\n                temporary: true\r\n              });\r\n              options.container.ensureFetched()\r\n                  .done(function (response) {\r\n                    collection = options.context.getCollection(\r\n                        ChildrenCollectionFactory, {\r\n                          options: {\r\n                            node: options.container,\r\n                            commands: self.defaultActionController.commands,\r\n                            defaultActionCommands: self.defaultActionController.actionItems.getAllCommandSignatures(\r\n                                self.defaultActionController.commands),\r\n                            delayRestCommands: !!options.delayRestCommands\r\n                          }\r\n\r\n                        });\r\n                    collection.setFields(nodeExtraData.getModelFields());\r\n                    collection.ensureFetched()\r\n                        .done(function (response2) {\r\n                          collection.forEach(function (model) {\r\n                            model.set('csuiLazyActionsRetrieved', true, {silent: true});\r\n                            model.set('csuiAddPropertiesActionsRetrieved', true, {silent: true});\r\n                          });\r\n                          ensureModelInCollection();\r\n                          setCollectionToOptions();\r\n                          deferred.resolve(response2);\r\n                        })\r\n                        .fail(function (error2) {\r\n                          self._showFetchNodeFailMessage(error2, options.container.get(\"id\"));\r\n                          deferred.reject(error2);\r\n                        });\r\n                  })\r\n                  .fail(function (error) {\r\n                    self._showFetchNodeFailMessage(error, options.container.get(\"id\"));\r\n                    deferred.reject(error);\r\n                  });\r\n            })\r\n            .fail(function (error) {\r\n              self.unblockActions();\r\n              self._showFetchNodeFailMessage(error, options.model.get(\"id\"));\r\n              deferred && deferred.reject(error);\r\n            });\r\n\r\n        return deferred.promise();\r\n      }\r\n\r\n      return deferred.resolve().promise();\r\n    },\r\n\r\n    _showFetchNodeFailMessage: function (error, nodeId) {\r\n      var errorObj = new base.Error(error);\r\n      var title = lang.FetchNodeFailTitle;\r\n      var message = _.str.sformat(lang.FetchNodeFailMessage, nodeId, errorObj.message);\r\n      ModalAlert.showError(message, title);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(MetadataNavigationView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return MetadataNavigationView;\r\n\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/lang',{\r\n  ToolbarItemOpen: 'Open',\r\n  ToolbarItemDownload: 'Download',\r\n  ToolbarItemEdit: 'Edit',\r\n  ToolbarItemProperties: 'Properties',\r\n  location: \"Location\",\r\n  docPreviewImgAlt: 'Document Preview',\r\n  name: \"Name\",\r\n  description: \"Description\",\r\n  created: \"Created\",\r\n  createdBy: \"Created by\",\r\n  type: \"Type\",\r\n  modified: \"Modified\",\r\n  ownedBy: \"Owned by\",\r\n  size: \"Size\"\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!csui/widgets/document.overview/impl/document.overview',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"      <div class=\\\"overview-page-backbutton icon arrow_back cs-go-back csui-acc-focusable-active\\\"\\r\\n           aria-label=\\\"Go back\\\" title=\\\"Go back\\\" role=\\\"link\\\" tabindex=\\\"0\\\">\\r\\n      </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"cs-content-wrapper\\\">\\r\\n\\r\\n  <div class=\\\"cs-content-header\\\">\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.back_button : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"    <div class=\\\"title-container\\\"></div>\\r\\n    <div class=\\\"actions-container\\\">\\r\\n      <div class=\\\"commentRegion\\\"></div>\\r\\n      <div class=\\\"favoriteRegion\\\"></div>\\r\\n    </div>\\r\\n\\r\\n  </div>\\r\\n  <div class=\\\"cs-content-container\\\">\\r\\n    <div class=\\\"description-container cs-content\\\">\\r\\n      <div class=\\\"created_by_section general-information\\\"></div>\\r\\n      <div class=\\\"modified_section general-information\\\"></div>\\r\\n      <div class=\\\"type_section general-information\\\"></div>\\r\\n      <div class=\\\"size_section general-information\\\"></div>\\r\\n      <div class=\\\"reserve_info general-information\\\"></div>\\r\\n      <div class=\\\"location-container general-information\\\">\\r\\n        <div class=\\\"alpaca-container-item\\\">\\r\\n          <div class=\\\"binf-form-group alpaca-field alpaca-field-text alpaca-optional\\r\\n              alpaca-readonly\\\">\\r\\n            <label class=\\\"binf-control-label alpaca-control-label binf-col-sm-3\\\">\\r\\n              \"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.location : stack1), depth0))\n    + \"\\r\\n            </label>\\r\\n            <div id=\\\"location\\\" class=\\\"binf-col-sm-9 location-view\\\">\\r\\n\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n      <div class=\\\"description_section general-information\\\">\\r\\n\\r\\n      </div>\\r\\n    </div>\\r\\n    <div class=\\\"binf-col-md-4 thumbnail-container binf-hidden binf-text-left cs-content\\\">\\r\\n      <div class=\\\"metadata-tab\\\">\\r\\n        <div class=\\\"thumbnail_section metadata-preview preview-section\\\" title=\\\"\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"\\\">\\r\\n          <img src=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgSrc || (depth0 != null ? depth0.imgSrc : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgSrc\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"img-doc-preview binf-hidden\\\" alt=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imgAlt || (depth0 != null ? depth0.imgAlt : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imgAlt\",\"hash\":{}}) : helper)))\n    + \"\\\" />\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n  <div class=\\\"cs-top-fadeout-container\\\"></div>\\r\\n  <div class=\\\"cs-fadeout-container\\\"></div>\\r\\n  <div class=\\\"cs-content-footer\\\">\\r\\n    <button class=\\\"binf-btn primary-btn command-btn\\\" type=\\\"button\\\"\\r\\n            data-signature=\\\"Open\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemOpen : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\" type=\\\"button\\\"\\r\\n            data-signature=\\\"Download\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemDownload : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn edit-btn\\\" type=\\\"button\\\"\\r\\n            data-signature=\\\"Edit\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemEdit : stack1), depth0))\n    + \"</button>\\r\\n    <button class=\\\"binf-btn default-btn command-btn\\\" type=\\\"button\\\"\\r\\n            data-signature=\\\"Properties\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.ToolbarItemProperties : stack1), depth0))\n    + \"</button>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n\";\n}});\nHandlebars.registerPartial('csui_widgets_document.overview_impl_document.overview', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!csui/widgets/document.overview/impl/document.overview',[],function(){});\n","// Shows a list of links to favorite nodes\r\ncsui.define('csui/widgets/document.overview/document.overview.view',[\r\n  'module', 'csui/lib/underscore',\r\n  'csui/lib/marionette',\r\n  'csui/lib/jquery',\r\n  'csui/utils/log',\r\n  'csui/widgets/metadata/impl/header/item.name/metadata.item.name.view',\r\n  'csui/controls/mixins/view.events.propagation/view.events.propagation.mixin',\r\n  'csui/controls/form/form.view',\r\n  'csui/utils/nodesprites',\r\n  'csui/controls/node-type.icon/node-type.icon.view',\r\n  'csui/controls/table/cells/parent/parent.view',\r\n  'csui/utils/contexts/factories/node',\r\n  'csui/utils/thumbnail/thumbnail.object',\r\n  'csui/widgets/metadata/general.panels/document/document.general.form.model',\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/favorites/favorite.star.view',\r\n  'csui/controls/toolbar/toolbar.command.controller',\r\n  'csui/models/nodes',\r\n  'csui/controls/tile/behaviors/perfect.scrolling.behavior',\r\n  'csui/utils/commands',\r\n  'i18n!csui/widgets/document.overview/impl/nls/lang',\r\n  'hbs!csui/widgets/document.overview/impl/document.overview',\r\n  'css!csui/widgets/document.overview/impl/document.overview'\r\n], function (module, _, Marionette, $, log,\r\n    MetadataItemNameView,\r\n    ViewEventsPropagationMixin,\r\n    FormView,\r\n    NodeSpriteCollection,\r\n    NodeTypeIconView,\r\n    ParentCellView,\r\n    NodeModelFactory, Thumbnail, DocumentGeneralFormModel, CommentView,\r\n    FavoriteStarView, ToolbarCommandController,\r\n    NodeCollection,\r\n    PerfectScrollingBehavior, commands, lang, documentOverviewTemplate) {\r\n  'use strict';\r\n\r\n  log = log(module.id);\r\n\r\n  var DocumentOverviewView = FormView.extend({\r\n    constructor: function DocumentOverviewView(options) {\r\n      options || (options = {});\r\n      options.data || (options.data = {});\r\n      if (!options.node) {\r\n        options.node = options.context.getModel(NodeModelFactory, {\r\n          attributes: options.data.id && { id: options.data.id },\r\n          temporary: true\r\n        });\r\n      }\r\n      this.options = options;\r\n      this._createModel();\r\n      FormView.prototype.constructor.call(this, this.options);\r\n\r\n      this.listenTo(this.options.node, \"change\", this.updateForm);\r\n\r\n      this._createMetadataItemNameView();\r\n\r\n      this.commandController = new ToolbarCommandController({\r\n        commands: options.commands || commands\r\n      });\r\n      this.commands = this.commandController.commands;\r\n      this.reloadWidget = false;\r\n      this.parentNode = undefined;\r\n      this.supportOriginatingView = true;\r\n    },\r\n    fieldToRefresh: \"modify_date\",\r\n\r\n    _createMetadataItemNameView: function() {\r\n      if (this.metadataItemNameView) {\r\n        this.cancelEventsToViewsPropagation(this.metadataItemNameView);\r\n        this.metadataItemNameView.destroy();\r\n      }\r\n\r\n      var inv = (this.metadataItemNameView = new MetadataItemNameView({\r\n        model: this.options.node,\r\n        container: this.options.node.parent,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: {},\r\n        commands: this.commands,\r\n        originatingView: this,\r\n        showDropdownMenu: true,\r\n        showPropertiesCommand: true\r\n      }));\r\n      this.listenTo(inv, \"metadata:item:name:save\", this._saveItemName);\r\n      this.listenTo(\r\n        inv,\r\n        \"metadata:item:before:delete\",\r\n        _.bind(function(args) {\r\n          this.trigger(\"metadata:item:before:delete\", args);\r\n        }, this)\r\n      );\r\n      this.listenTo(\r\n        inv,\r\n        \"metadata:item:before:move\",\r\n        _.bind(function(args) {\r\n          this.trigger(\"metadata:item:before:move\", args);\r\n        }, this)\r\n      );\r\n      this.listenTo(\r\n        inv,\r\n        \"metadata:item:deleted\",\r\n        _.bind(function(args) {\r\n          this.trigger(\"metadata:item:deleted\", args);\r\n        }, this)\r\n      );\r\n\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n    },\r\n\r\n    reloadWidget: false,\r\n\r\n    formTemplate: documentOverviewTemplate,\r\n\r\n    className: \"cs-form csui-general-form cs-document-overview-wrapper\",\r\n\r\n    ui: {\r\n      location: \".location-view\",\r\n      back: '.cs-go-back'\r\n    },\r\n\r\n    events: {\r\n      \"click .command-btn\": \"_handleClickButton\",\r\n      \"click .thumbnail_section\": \"_handleClickThumbnail\",\r\n      'click @ui.back' : 'onBackButton',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    behaviors: {\r\n      PerfectScrolling: {\r\n        behaviorClass: PerfectScrollingBehavior,\r\n        contentParent: \".cs-content-container\",\r\n        suppressScrollX: true\r\n      }\r\n    },\r\n\r\n    onKeyInView: function (e) {\r\n      var event = e || window.event;\r\n      var target = event.target || event.srcElement;\r\n      if (event.keyCode === 13 || event.keyCode === 32) {\r\n        // enter key(13) or space(32)\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        $(target).trigger('click');\r\n      }\r\n    },\r\n\r\n    onBackButton: function() {\r\n      history.back();\r\n    },\r\n\r\n    _saveItemName: function(args) {\r\n      var self = this;\r\n      var itemName = args.sender.getValue();\r\n      var name = { name: itemName };\r\n      var node = this.options.model;\r\n      node.setFields(\"versions.element(0)\", \"owner_id\");\r\n      node.set(name, { silent: true });\r\n      var data = _.clone(node.attributes);\r\n      return node\r\n        .save(data, {\r\n          data: name,\r\n          wait: true,\r\n          silent: true\r\n        })\r\n        .then(function() {\r\n          node.fetch({ silent: true }).done(function() {\r\n            self._updateFieldsToRefersh();\r\n            self.metadataItemNameView._toggleEditMode(false, false);\r\n          });\r\n        });\r\n    },\r\n\r\n    _handleClickThumbnail: function(event) {\r\n      event.stopImmediatePropagation();\r\n      this._executeCommand(\"Open\");\r\n    },\r\n\r\n    _handleClickButton: function(event) {\r\n      event.stopImmediatePropagation();\r\n      var signature = $(event.target).data(\"signature\");\r\n      this._executeCommand(signature);\r\n    },\r\n\r\n    _executeCommand: function(signature) {\r\n      var command = this.commands.get(signature);\r\n      var originatingView = this;\r\n      originatingView.collection = new NodeCollection([this.options.node]);\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node,\r\n        originatingView: originatingView\r\n      };\r\n      var options = {\r\n        context: this.options.context\r\n      };\r\n\r\n      try {\r\n        // If the command was not found and the toolitem is executable, it is\r\n        // a developer's mistake.\r\n        if (!command) {\r\n          throw new Error('Command \"' + signature + '\" not found.');\r\n        }\r\n\r\n        command.execute(status, options);\r\n      } catch (error) {\r\n        log.warn(\r\n          'Executing the command \"{0}\" failed.\\n{1}',\r\n          command.get(\"signature\"),\r\n          error.message\r\n        ) && console.warn(log.last);\r\n      }\r\n    },\r\n\r\n    _createModel: function() {\r\n      var node = this.options.node;\r\n      this.options.model = new DocumentGeneralFormModel(\r\n        {\r\n          data: {\r\n            name: node.get(\"name\"),\r\n            description: node.get(\"description\"),\r\n            create_date: node.get(\"create_date\"),\r\n            create_user_id: node.get(\"create_user_id\"),\r\n            type: node.get(\"type\"),\r\n            type_name: node.get(\"type_name\"),\r\n            mime_type: NodeSpriteCollection.findTypeByNode(node),\r\n            modify_date: node.get(\"modify_date\"),\r\n            owner_user_id: node.get(\"owner_user_id\"),\r\n            size: node.get(\"size_formatted\"),\r\n            reserved_user_id: node.get(\"reserved_user_id\")\r\n          },\r\n          schema: {\r\n            properties: {\r\n              name: {\r\n                maxLength: 248,\r\n                minLength: 1,\r\n                readonly: true,\r\n                required: true,\r\n                title: \"Name\",\r\n                type: \"string\"\r\n              },\r\n              description: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Description\",\r\n                type: \"string\"\r\n              },\r\n              create_date: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Created\",\r\n                type: \"string\",\r\n                format: \"datetime\"\r\n              },\r\n              create_user_id: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Created By\",\r\n                type: \"otcs_user_picker\"\r\n              },\r\n              type: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Type\",\r\n                type: \"integer\"\r\n              },\r\n              type_name: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Type\",\r\n                type: \"string\"\r\n              },\r\n              modify_date: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Modified\",\r\n                type: \"string\",\r\n                format: \"datetime\"\r\n              },\r\n              owner_user_id: {\r\n                readonly: true,\r\n                required: false,\r\n                title: \"Owned By\",\r\n                type: \"otcs_user_picker\"\r\n              },\r\n              size: {\r\n                hidden: false,\r\n                readonly: true,\r\n                title: \"Size\",\r\n                type: \"string\",\r\n                tooltip: \"838,049 bytes\"\r\n              },\r\n              mime_type: {\r\n                hidden: false,\r\n                readonly: true,\r\n                title: \"Type\",\r\n                type: \"string\"\r\n              }\r\n            },\r\n            type: \"object\",\r\n            title: \"General\"\r\n          },\r\n          options: {\r\n            fields: {\r\n              name: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.name,\r\n                readonly: true,\r\n                type: \"text\"\r\n              },\r\n              description: {\r\n                hidden: false,\r\n                rows: 5,\r\n                hideInitValidationError: true,\r\n                label: lang.description,\r\n                readonly: true,\r\n                type: \"textarea\",\r\n                placeholder: \"Add description\"\r\n              },\r\n              create_date: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.created,\r\n                readonly: true,\r\n                type: \"datetime\",\r\n                placeholder: \"n/a\"\r\n              },\r\n              create_user_id: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.createdBy,\r\n                readonly: true,\r\n                type: \"otcs_user\",\r\n                type_control: {\r\n                  name: \"Admin\"\r\n                },\r\n                placeholder: \"n/a\"\r\n              },\r\n              type: {\r\n                hidden: true,\r\n                hideInitValidationError: true,\r\n                label: lang.type,\r\n                readonly: true,\r\n                type: \"integer\"\r\n              },\r\n              type_name: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.type,\r\n                readonly: true,\r\n                type: \"text\"\r\n              },\r\n              modify_date: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.modified,\r\n                readonly: true,\r\n                type: \"datetime\",\r\n                placeholder: \"n/a\"\r\n              },\r\n              owner_user_id: {\r\n                hidden: false,\r\n                hideInitValidationError: true,\r\n                label: lang.ownedBy,\r\n                readonly: true,\r\n                type: \"otcs_user\",\r\n                type_control: {\r\n                  name: \"Admin\"\r\n                },\r\n                placeholder: \"n/a\"\r\n              },\r\n              size: {\r\n                hidden: false,\r\n                readonly: true,\r\n                label: lang.size,\r\n                placeholder: \"n/a\",\r\n                type: \"text\"\r\n              },\r\n              mime_type: {\r\n                hidden: false,\r\n                readonly: true,\r\n                label: lang.type,\r\n                placeholder: \"n/a\",\r\n                type: \"text\"\r\n              }\r\n            }\r\n          }\r\n        },\r\n        this.options\r\n      );\r\n      this.options.model._addReserveInfo(this.options.model.attributes);\r\n    },\r\n\r\n    _updateModel: function() {\r\n      var node = this.options.node;\r\n\r\n      _.extend(this.model.attributes.data, {\r\n        name: node.get(\"name\"),\r\n        description: node.get(\"description\"),\r\n        create_date: node.get(\"create_date\"),\r\n        create_user_id: node.get(\"create_user_id\"),\r\n        type: node.get(\"type\"),\r\n        type_name: node.get(\"type_name\"),\r\n        mime_type: NodeSpriteCollection.findTypeByNode(node),\r\n        modify_date: node.get(\"modify_date\"),\r\n        owner_user_id: node.get(\"owner_user_id\"),\r\n        size: node.get(\"size_formatted\"),\r\n        reserved_user_id: node.get(\"reserved_user_id\")\r\n      });\r\n      this.model._addReserveInfo(this.model.attributes);\r\n    },\r\n\r\n    _getLayout: function() {\r\n      var data = this.alpaca.data,\r\n          context = this.options && this.options.context,\r\n          viewStateModel = context && context.viewStateModel,\r\n          back_button = viewStateModel && viewStateModel.getLastRouterInfo();\r\n      data.name = this.model.get(\"data\").name;\r\n      var template = this.getOption(\"formTemplate\"),\r\n        html = template.call(this, {\r\n          data: data,\r\n          mode: this.mode,\r\n          lang: lang,\r\n          back_button: back_button,\r\n          // a 1x1 transparent gif, to avoid an empty src tag\r\n          imgSrc:\r\n            \"data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=\",\r\n          imgAlt: lang.docPreviewImgAlt\r\n        }),\r\n        bindings = this._getBindings(),\r\n        view = {\r\n          parent: \"bootstrap-csui\",\r\n          layout: {\r\n            template: html,\r\n            bindings: bindings\r\n          }\r\n        };\r\n      return view;\r\n    },\r\n\r\n    _getBindings: function() {\r\n      var bindings = {\r\n        name: \"name_section\",\r\n        create_user_id: \".created_by_section\",\r\n        modify_date: \".modified_section\",\r\n        mime_type: \".type_section\",\r\n        description: \".description_section\",\r\n        size: \".size_section\",\r\n        status: \"status_section\"\r\n      };\r\n      // adding 'reserve_info' only for supported object types.\r\n      if (this.model && this.model.node && this.model.node.get(\"reserved\")) {\r\n        bindings = _.extend(bindings, {\r\n          reserve_info: \".reserve_info\"\r\n        });\r\n      }\r\n\r\n      return bindings;\r\n    },\r\n\r\n    updateForm: function(event) {\r\n      //  perform this operations whenever change happen to the node.\r\n      this._updateModel();\r\n      this._createModel();\r\n      FormView.prototype.constructor.call(this, this.options);\r\n      this.metadataItemNameView = new MetadataItemNameView({\r\n        model: this.options.node,\r\n        container: this.options.node.parent,\r\n        containerCollection: this.options.containerCollection,\r\n        collection: this.options.collection,\r\n        context: this.options.context,\r\n        nameSchema: {},\r\n        commands: this.commands,\r\n        originatingView: this,\r\n        showDropdownMenu: true,\r\n        showPropertiesCommand: true\r\n      });\r\n      this.listenTo(\r\n        this.metadataItemNameView,\r\n        \"metadata:item:name:save\",\r\n        this._saveItemName\r\n      );\r\n      this.propagateEventsToViews(this.metadataItemNameView);\r\n      FormView.prototype.updateForm.apply(this, arguments);\r\n    },\r\n\r\n    updateRenderedForm: function(options) {\r\n      FormView.prototype.updateRenderedForm.apply(this, arguments);\r\n\r\n      this._showNodeIcon();\r\n      this._showMetadataItemName();\r\n      this._showThumbnail();\r\n      this._addLocationView();\r\n      this._addCommentView();\r\n      this._addFavoriteView();\r\n      this._checkDescriptionContent();\r\n      this._checkEditPermission();\r\n      this._overrideDefaultScroll();\r\n    },\r\n\r\n    // overriding this method to validate the node's name, for document overview page only.\r\n    _validateAndSave: function() {\r\n      var currentValue = this.metadataItemNameView.getValue().trim();\r\n      var inputValue = this.metadataItemNameView.getInputBoxValue();\r\n      inputValue = inputValue.trim();\r\n      if (inputValue.length === 0 || currentValue !== inputValue) {\r\n        this.metadataItemNameView.ItemNameBehavior.validateInputName(\r\n          inputValue\r\n        ).done(\r\n          _.bind(function(success) {\r\n            if (success) {\r\n              this.metadataItemNameView.setInputBoxValue(inputValue);\r\n              this.metadataItemNameView.setValue(inputValue);\r\n              this.metadataItemNameView.modelHasEmptyName = false;\r\n              this.metadataItemNameView.trigger(\"metadata:item:name:save\", {\r\n                sender: this.metadataItemNameView\r\n              });\r\n            } else {\r\n              return false;\r\n            }\r\n          }, this)\r\n        );\r\n      }\r\n    },\r\n\r\n    _showThumbnail: function() {\r\n      this.thumbnail =\r\n        this.options.thumbnail ||\r\n        new Thumbnail({\r\n          node: this.options.node\r\n        });\r\n      this.listenTo(this.thumbnail, \"loadUrl\", this._showImage);\r\n      this.listenTo(this.thumbnail, \"error\", this._showDefaultImage);\r\n      this.listenTo(this, \"destroy\", _.bind(this._destroyThumbnail, this));\r\n\r\n      if (this.mode !== \"create\" && !this.thumbnailSet) {\r\n        var self = this;\r\n        this.thumbnailSet = true;\r\n        //Just show image if url is available,otherwise load thumbnail\r\n        if (\r\n          this.thumbnail.hasOwnProperty(\"imgUrl\") &&\r\n          !!this.thumbnail.imgUrl\r\n        ) {\r\n          this._showImage();\r\n        } else {\r\n          this.thumbnail.loadUrl();\r\n        }\r\n      }\r\n    },\r\n\r\n    _showImage: function() {\r\n      this.$el.addClass(\"cs-document-overview-wrapper-with-thumbnail\");\r\n      this.$el.find(\".thumbnail-container\").removeClass(\"binf-hidden\");\r\n      this.trigger(\"thumbnail:show:image\");\r\n      var self = this,\r\n        img = this.$el.find(\".img-doc-preview\");\r\n      img.attr(\"src\", this.thumbnail.imgUrl);\r\n      img.prop(\"tabindex\", \"0\");\r\n      img.one(\"load\", function(evt) {\r\n        if (evt.target.clientHeight >= evt.target.clientWidth) {\r\n          img.addClass(\"cs-form-img-vertical\");\r\n        } else {\r\n          img.addClass(\"cs-form-img-horizontal\");\r\n        }\r\n        img.addClass(\"cs-form-img-border\");\r\n        img.removeClass(\"binf-hidden\");\r\n\r\n        // event for keyboard navigation\r\n        var event = $.Event(\"tab:content:render\");\r\n        self.$el.trigger(event);\r\n      });\r\n    },\r\n\r\n    _showDefaultImage: function() {\r\n      console.error(\r\n        \"error while loading thumbnail image in document overview page\"\r\n      );\r\n    },\r\n\r\n    _showNodeIcon: function() {\r\n      if (!this._nodeIconView) {\r\n        this._nodeIconView = new NodeTypeIconView({\r\n          el: this.$el.find(\".csui-type-icon\").get(0),\r\n          node: this.options.node\r\n        });\r\n        this._nodeIconView.render();\r\n      }\r\n    },\r\n\r\n    _showMetadataItemName: function() {\r\n      var inv = this.metadataItemNameView.render();\r\n      Marionette.triggerMethodOn(inv, \"before:show\", inv, this);\r\n      this.$el.find(\".title-container\").append(inv.el);\r\n      Marionette.triggerMethodOn(inv, \"show\", inv, this);\r\n    },\r\n\r\n    _addLocationView: function() {\r\n      var self = this,\r\n        renderLocation = function() {\r\n          var field = new ParentCellView({\r\n            model: self.options.node,\r\n            context: self.options.context,\r\n            nameEdit: false,\r\n            el: self.$el.find(self.ui.location)\r\n          });\r\n          field.render();\r\n        };\r\n      if (!this.options.node.get(\"parent_id_expand\")) {\r\n        this.options.node.setExpand(\"properties\", [\r\n          \"parent_id\",\r\n          \"reserved_user_id\"\r\n        ]);\r\n        this.options.node.fetch({ silent: true }).then(function() {\r\n          renderLocation();\r\n        }, self);\r\n      } else {\r\n        renderLocation();\r\n      }\r\n    },\r\n\r\n    _addCommentView: function() {\r\n      var commentOptions = this.options;\r\n      commentOptions.model = this.options.node;\r\n      var commentView = new CommentView(commentOptions);\r\n\r\n      var commentRegion = new Marionette.Region({\r\n        el: this.$el.find(\".commentRegion\")\r\n      });\r\n      commentRegion.show(commentView);\r\n    },\r\n\r\n    _checkDescriptionContent: function() {\r\n      var descEle = this.$el.find(\".description_section\");\r\n      if (!!this.options.model.get(\"description\")) {\r\n        descEle.removeClass(\"binf-hidden\");\r\n        // as we are showing the complete description, no need of browser tooltip, hence remove it.\r\n        descEle.find(\".btn-container > button\").removeAttr(\"title\");\r\n      } else {\r\n        descEle.addClass(\"binf-hidden\");\r\n      }\r\n    },\r\n\r\n    _addFavoriteView: function() {\r\n      var favoriteOptions = this.options;\r\n      favoriteOptions.model = this.options.node;\r\n      favoriteOptions.popoverAtBodyElement = true;\r\n      var favoriteView = new FavoriteStarView(favoriteOptions);\r\n\r\n      var favoriteRegion = new Marionette.Region({\r\n        el: this.$el.find(\".favoriteRegion\")\r\n      });\r\n      favoriteRegion.show(favoriteView);\r\n    },\r\n\r\n    _checkEditPermission: function() {\r\n      var command = this.commands.findWhere({ signature: \"Edit\" });\r\n\r\n      var status = {\r\n        nodes: new NodeCollection([this.options.node]),\r\n        container: this.options.node.parent\r\n      };\r\n      var options = {\r\n        context: this.options.context\r\n      };\r\n\r\n      if (!(command && command.enabled(status, options))) {\r\n        this.$el.find(\".edit-btn\").addClass(\"binf-hidden\");\r\n      }\r\n    },\r\n\r\n    _destroyForm: function() {\r\n      FormView.prototype._destroyForm.apply(this, arguments);\r\n      this._destroyThumbnail();\r\n    },\r\n\r\n    _destroyThumbnail: function() {\r\n      if (this.thumbnail) {\r\n        this.thumbnail.destroy();\r\n        this.thumbnail = undefined;\r\n      }\r\n      this.thumbnailSet = false;\r\n    },\r\n\r\n    _updateFieldsToRefersh: function() {\r\n      var alpacaForm = this.$el.alpaca(\"get\");\r\n      if (!!alpacaForm) {\r\n        var data = this.options.model.attributes;\r\n        var field = alpacaForm.childrenByPropertyId[this.fieldToRefresh],\r\n          value = data[this.fieldToRefresh];\r\n        if (!!field && field.getValue() !== value) {\r\n          field.setValue(value);\r\n          field.refresh();\r\n        }\r\n      }\r\n    },\r\n\r\n    _overrideDefaultScroll: function() {\r\n      var parentEl = this.$el.parent();\r\n      parentEl.length &&\r\n        parentEl.css({\r\n          \"margin-top\": \"7.5px\",\r\n          height: \"calc((100vh - 102px)\",\r\n          \"overflow-y\": \"hidden\",\r\n          \"padding-top\": \"32px\"\r\n        });\r\n    }\r\n  });\r\n\r\n  _.extend(DocumentOverviewView.prototype, ViewEventsPropagationMixin);\r\n\r\n  return DocumentOverviewView;\r\n\r\n});\r\n\n","\ncsui.define('json!csui/widgets/document.overview/document.overview.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": [144]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata/metadata.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"actions\": [\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/header.dropdown.menu.items\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/header.dropdown.menu.items.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"dropdownMenuList\",\r\n          \"title\": \"{{dropdownMenuTitle}}\",\r\n          \"description\": \"{{dropdownMenuDescription}}\"\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      \"toolItems\": \"csui/widgets/metadata/add.properties.menuitems\",\r\n      \"toolItemMasks\": \"csui/widgets/metadata/add.properties.menuitems.mask\",\r\n      \"toolbars\": [\r\n        {\r\n          \"id\": \"addPropertiesToolbar\",\r\n          \"title\": \"{{addPropertiesTitle}}\",\r\n          \"description\": \"{{addPropertiesDescription}}\"\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n}\r\n);\n\n","\ncsui.define('json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',{\r\n  \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n  \"title\": \"{{widgetTitle}}\",\r\n  \"description\": \"{{widgetDescription}}\",\r\n  \"kind\": \"fullpage\",\r\n  \"schema\": {\r\n    \"type\": \"object\",\r\n    \"properties\": {\r\n      \"id\": {\r\n        \"title\": \"{{idTitle}}\",\r\n        \"description\": \"{{idDescription}}\",\r\n        \"type\": \"integer\"\r\n      },\r\n      \"initialPanel\": {\r\n        \"title\": \"{{initialPanelTitle}}\",\r\n        \"description\": \"{{initialPanelDescription}}\",\r\n        \"type\": \"string\"\r\n      }\r\n    },\r\n    \"required\": [\"id\"]\r\n  },\r\n  \"options\": {\r\n    \"fields\": {\r\n      \"id\": {\r\n        \"type\": \"otcs_node_picker\",\r\n        \"type_control\": {\r\n          \"parameters\": {\r\n            \"select_types\": []\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n);\n\n","csui.define('csui/widgets/document.overview/impl/nls/document.overview.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/document.overview/impl/nls/root/document.overview.manifest',{\r\n  \"widgetTitle\": \"Document Overview\",\r\n  \"widgetDescription\": \"Shows basic information about a document and offers the most often actions for it.\",\r\n  \"idTitle\": \"Document\",\r\n  \"idDescription\": \"A document to show the overview for\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata/impl/nls/metadata.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata/impl/nls/root/metadata.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\",\r\n  \"dropdownMenuTitle\": \"Object Context Menu\",\r\n  \"dropdownMenuDescription\": \"Context menu, which is displayed when clicking on the arrow on the right side of the name of the opened object.\",\r\n  \"addPropertiesTitle\": \"Add Feature Menu\",\r\n  \"addPropertiesDescription\": \"Drop-down menu, which is displayed when clicking on the plus on the right side of the property tabs.\"\r\n});\r\n\n","\n","csui.define('csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('csui/widgets/metadata.navigation/impl/nls/root/metadata.navigation.manifest',{\r\n  \"widgetTitle\": \"Object Information\",\r\n  \"widgetDescription\": \"Shows information about an object and offers the most important actions for it.\",\r\n  \"idTitle\": \"Object\",\r\n  \"idDescription\": \"An object to show the information for\",\r\n  \"initialPanelTitle\": \"Object information\",\r\n  \"initialPanelDescription\": \"An object to show the information for\"\r\n});\r\n\n","\n","csui.define('bundles/csui-metadata',[\r\n  // Controls\r\n  'csui/controls/tableheader/comment/comment.button.view',\r\n  'csui/widgets/metadata/versions.toolbaritems',\r\n  'csui/widgets/metadata/impl/metadata.tabcontentcollection.view',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems',\r\n  'csui/widgets/metadata/impl/header/rightbar/toolbaritems.masks',  \r\n\r\n  // Application widgets\r\n  'csui/widgets/metadata/metadata.view',\r\n  'csui/widgets/metadata/metadata.properties.view',\r\n  'csui/widgets/metadata/metadata.action.one.item.properties.view',\r\n  'csui/widgets/metadata/metadata.add.categories.controller',\r\n  'csui/widgets/metadata/metadata.add.document.controller',\r\n  'csui/widgets/metadata/impl/add.items/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.add.item.controller',\r\n  'csui/widgets/metadata/metadata.copy.move.items.controller',\r\n  'csui/widgets/metadata/impl/metadatanavigation/metadatanavigation.view',\r\n  'csui/widgets/metadata.navigation/metadata.navigation.view',\r\n  'csui/widgets/document.overview/document.overview.view',\r\n  'csui/widgets/metadata/impl/add.items/metadata.add.multiple.items.controller',\r\n\r\n  // Application widgets manifests\r\n  'json!csui/widgets/document.overview/document.overview.manifest.json',\r\n  'json!csui/widgets/metadata/metadata.manifest.json',\r\n  'json!csui/widgets/metadata.navigation/metadata.navigation.manifest.json',\r\n  'i18n!csui/widgets/document.overview/impl/nls/document.overview.manifest',\r\n  'i18n!csui/widgets/metadata/impl/nls/metadata.manifest',\r\n  'i18n!csui/widgets/metadata.navigation/impl/nls/metadata.navigation.manifest',\r\n\r\n  // Tool items and tool item masks\r\n  'csui/widgets/metadata/add.properties.menuitems',\r\n  'csui/widgets/metadata/add.properties.menuitems.mask',\r\n  'csui/widgets/metadata/header.dropdown.menu.items',\r\n  'csui/widgets/metadata/header.dropdown.menu.items.mask',\r\n  'csui/widgets/metadata/versions.toolbaritems.mask',\r\n\r\n  // Metadata general action fields\r\n  'csui/widgets/metadata/metadata.general.action.fields'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n  css.styleLoad(require, 'csui/bundles/csui-metadata', true);\r\n\r\n});\r\n\n"]}