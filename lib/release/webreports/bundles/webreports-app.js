csui.define("webreports/utils/url.webreports",["csui/lib/underscore","csui/utils/url","csui/utils/contexts/factories/node"],function(e,t,i){return e.extend({"appendWebReportParameters":function(t,i){return e.isUndefined(i)||(t=e.isArray(i)?this.combineQueryString(t,this._serializeWebReportParameters(i)):this.combineQueryString(t,i)),t},"appendCurrentContainer":function(t,i){var o;return e.isUndefined(i)||(o=this.getCurrentContainerID(i))&&(t=this.combineQueryString(t,"csuiContainerID="+o)),t},"appendSWRCellID":function(e,t){var i;return t&&t.data&&t.data.swrLaunchCell&&t.data.swrLaunchCell.id&&("number"!=typeof(i=parseInt(t.data.swrLaunchCell.id,10))||isNaN(i)||(e=this.combineQueryString(e,"subwebreport_id="+i))),e},"getCurrentContainerID":function(t){var o,r=t.getModel(i);return e.isUndefined(r)||(o=r.get("id")),o},"_serializeWebReportParameters":function(t){var i="";return e.each(t,function(e){""!==e.name&&(i.length?i+="&"+e.name+"="+e.value:i+=e.name+"="+e.value)}),i},"getWebReportParametersAsData":function(t){var i={};return e.isArray(t)&&e.each(t,function(e){""!==e.name&&(i[e.name]=e.value)}),i},"getDataAsWebReportParameters":function(t){var i=[];return e.isObject(t)&&e.mapObject(t,function(e,t){i.push({"name":t,"value":e})}),i}},t)}),csui.define("webreports/models/wrtext/wrtext.model",["csui/lib/underscore","csui/lib/backbone","webreports/utils/url.webreports","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o){var r=t.Model.extend({"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(i)},"url":function(){var e=this.get("parameters"),t=this.get("context"),o="";return o=i.appendWebReportParameters(o,e),o=i.appendCurrentContainer(o,t),i.combine(this.connector.connection.url+"/nodes/"+this.get("id"),o?"/output?format=webreport&"+o:"/output?format=webreport")},"parse":function(e){return{"source":e}}});return o.mixin(r.prototype),r}),csui.define("webreports/utils/contexts/factories/wrtext.model.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/wrtext/wrtext.model"],function(e,t,i,o){return t.extend({"propertyPrefix":"wrtext","constructor":function(e,r){t.prototype.constructor.apply(this,arguments);var n=e.getObject(i,r);this.property=new o(r.wrtext.attributes,{"connector":n})},"fetch":function(t){return t?e.extend(t,{"dataType":"html"}):t={"dataType":"html"},this.property.fetch(t)}})}),csui.define("webreports/mixins/webreports.view.mixin",["csui/lib/underscore","webreports/utils/url.webreports"],function(e,t){"use strict";return{"mixin":function(i){return e.extend(i,{"setCommonModelOptions":function(i){var o,r={};return i&&i.data&&(e.has(i.data,"parameters")&&(o=i.data.parameters,e.isUndefined(o)||"object"!=typeof o||(e.extend(r,{"parameters":o}),e.extend(r,t.getWebReportParametersAsData(o)))),i.data.id&&e.extend(r,{"id":i.data.id}),i.context&&e.extend(r,{"context":i.context})),r}})}}}),csui.define("webreports/widgets/tilereport/impl/nls/tilereport.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/tilereport/impl/nls/root/tilereport.lang",{"dialogTitle":"Tile Report"}),csui.define("hbs!webreports/widgets/tilereport/impl/tilereport",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r,n;return'    <div class="tile-header">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(2,o,0),"inverse":this.noop}))?r:"")+'\r\n        <div class="tile-title">\r\n            <h2 class="csui-heading">'+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+'</h2>\r\n        </div>\r\n\r\n        <div class="tile-controls"></div>\r\n\r\n    </div>\r\n\r\n'},"2":function(e,t,i,o){var r;return'            <div class="tile-type-icon">\r\n                <span class="icon title-icon '+this.escapeExpression((r=null!=(r=t.icon||(null!=e?e.icon:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon","hash":{}}):r))+'" aria-hidden="true"></span>\r\n            </div>\r\n'},"4":function(e,t,i,o){return'    <div class="webreports-tilereport-spacer"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return(null!=(r=t.if.call(e,null!=e?e.header:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.program(4,o,0)}))?r:"")+'\r\n\r\n\r\n<div class="tile-content"></div>\r\n\r\n<div class="tile-footer"></div>\r\n'}});return i.registerPartial("webreports_widgets_tilereport_impl_tilereport",o),o}),csui.define("css!webreports/widgets/tilereport/impl/tilereport",[],function(){}),csui.define("css!webreports/style/webreports",[],function(){}),csui.define("webreports/widgets/tilereport/tilereport.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/controls/tile/tile.view","webreports/utils/contexts/factories/wrtext.model.factory","webreports/mixins/webreports.view.mixin","csui/controls/tile/behaviors/perfect.scrolling.behavior","i18n!webreports/widgets/tilereport/impl/nls/tilereport.lang","hbs!webreports/widgets/tilereport/impl/tilereport","csui/lib/perfect-scrollbar","css!webreports/widgets/tilereport/impl/tilereport","css!webreports/style/webreports.css"],function(e,t,i,o,r,n,s,a,l,c){var p=i.Region.extend({"attachHtml":function(e){this.$el.html("").append(e.el)}}),d=i.ItemView.extend({"className":"webreports-tilereport-content","render":function(){var t;return this.model&&(t=this.model.get("source"),e.isUndefined(t)||this.$el.html(t)),this}}),u=r.extend({"constructor":function(t){if(t&&t.data){var i,o=!e.has(t.data,"header")||!e.isBoolean(t.data.header)||t.data.header,s=!e.has(t.data,"scroll")||!e.isBoolean(t.data.scroll)||t.data.scroll;t.data.header=o,t.data.scroll=s,i=this.setCommonModelOptions(t),t.model=t.context.getModel(n,{"attributes":i}),this.listenTo(t.model,"change",this.render),this.listenTo(t.model,"change",this._updateScrollbar),this.contentViewOptions=t}r.prototype.constructor.apply(this,arguments)},"_updateScrollbar":function(){this.triggerMethod("update:scrollbar",this)},"regionClass":p,"contentView":d,"template":c,"templateHelpers":function(){var t={"title":o.getClosestLocalizedString(this.options.data.title,l.dialogTitle),"icon":this.options.data.titleBarIcon||"title-webreports"};return!0===this.options.data.header&&e.extend(t,{"header":this.options.data.header}),t},"behaviors":{"PerfectScrolling":{"behaviorClass":a,"contentParent":"> .tile-content","suppressScrollX":!0,"scrollYMarginOffset":15,"scrollingDisabled":function(){return!this.options.data.scroll}}},"onRender":function(){this.contentView&&"object"==typeof this.contentView&&(this.contentView=this.contentView.constructor),!1===this.options.data.header&&this.$(".tile-content").height("100%").css("margin-top","0px")}});return s.mixin(u.prototype),u}),csui.define("json!webreports/widgets/tilereport/tilereport.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"header","supportedKinds":["tile","header","fullpage"],"schema":{"type":"object","properties":{"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"object"},"titleBarIcon":{"title":"{{iconTitle}}","description":"{{iconDescription}}","type":"string"},"header":{"title":"{{headerTitle}}","description":"{{headerDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"scroll":{"title":"{{scrollTitle}}","description":"{{scrollDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"},"parameters":{"type":"array","title":"{{firstParamTitle}}","description":"{{firstParamDescription}}","items":{"type":"object","title":"{{secondParamTitle}}","description":"{{secondParamDescription}}","properties":{"name":{"type":"string","title":"{{paramNameTitle}}","description":"{{paramNameDescription}}"},"value":{"type":"string","title":"{{paramValTitle}}","description":"{{paramValDescription}}"}}}}},"required":["id"]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"title":{"type":"otcs_multilingual_string"}}}}),csui.define("webreports/widgets/tilereport/impl/nls/tilereport.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/tilereport/impl/nls/root/tilereport.manifest",{"widgetTitle":"HTML WebReport","widgetDescription":"Returns the HTML output of a WebReport and inserts it into a tile","tileTitle":"Title","tileDescription":"Title for the tile","iconTitle":"Icon class","iconDescription":"CSS class supplying the icon in the tile header","headerTitle":"Header","headerDescription":"Boolean stating whether the header should be included or not","scrollTitle":"Scroll","scrollDescription":"Boolean stating whether the scrollbar should be included or not","idTitle":"WebReport ID","idDescription":"DataID for the WebReport which contains the HTML","firstParamTitle":"WebReport Parameters","firstParamDescription":"Key/Value pairs of parameters to be passed into the WebReport.","secondParamTitle":"WebReport Parameters","secondParamDescription":"Key/Value pairs of parameters to be passed into the WebReport.","paramNameTitle":"Parameter Name","paramNameDescription":"The name of the URL parameter.","paramValTitle":"Parameter Value","paramValDescription":"The value of the URL parameter."}),csui.define("webreports/widgets/nodeslistreport/impl/expanding.behavior",["csui/lib/underscore","csui/lib/backbone","csui/lib/marionette","csui/controls/dialog/dialog.view","csui/behaviors/expanding/expanding.behavior"],function(e,t,i,o,r){function n(t,i,o){if(null!=t){var r=t[i];return e.isFunction(r)?t[i].call(o):r}}return r.extend({"constructor":function(e,t){r.prototype.constructor.apply(this,arguments)},"onExpand":function(){var i=this.view.collection.clone(),r=this.getOption("expandedView"),s=r.prototype instanceof t.View?r:r.call(this.view),a=n(this.options,"expandedViewOptions",this.view);this.expandedView=new s(e.extend({"context":this.view.options.context,"collection":i,"orderBy":n(this.options,"orderBy",this.view),"limited":!1},a)),this.dialog=new o({"iconLeft":n(this.options,"titleBarIcon",this.view)||n(this.view.options,"titleBarIcon",this.view),"imageLeftUrl":n(this.options,"titleBarImageUrl",this.view),"imageLeftClass":n(this.options,"titleBarImageClass",this.view),"title":n(this.options,"dialogTitle",this.view),"iconRight":n(this.options,"dialogTitleIconRight",this.view),"className":n(this.options,"dialogClassName",this.view),"largeSize":!0,"view":this.expandedView}),this.listenTo(this.dialog,"before:hide",this._expandOtherView),this.listenTo(this.dialog,"hide",this.view._onCollapseExpandedView),this._expandOtherView(!1),this.dialog.show()}})}),csui.define("webreports/models/nodestablereport/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/models/nodestablereport/impl/nls/root/lang",{"size":"Size"}),csui.define("webreports/models/nodestablereport/nodestablereport.model",["module","csui/lib/underscore","csui/lib/backbone","webreports/utils/url.webreports","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/mixins/commandable/commandable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin","csui/models/mixins/v2.expandable/v2.expandable.mixin","i18n!webreports/models/nodestablereport/impl/nls/lang"],function(e,t,i,o,r,n,s,a,l,c,p,d,u,h,m){var b=e.config();t.defaults(b,{"defaultPageSize":30});var f=r.extend({}),w=n.extend({"model":f,"getColumnModels":function(e,i){var o=n.prototype.getColumnModels.call(this,e,i);return t.each(o,function(e){var t=e.column_key;"type"!==t&&"name"!==t&&"modify_date"!==t||(e.sort=!0)},this),o},"getV2Columns":function(e){var i=e.results&&e.results[0]&&e.results[0].metadata&&e.results[0].metadata.properties||{};!i.size&&(i.container_size||i.versions&&i.versions.file_size)&&(i.size=i.container_size||i.versions.file_size,i.size.align="right",i.size.key="size",i.size.name=m.size,i.size.sort=!0);var o=t.keys(i);return this.getColumnModels(o,i)}}),g=s.extend({"parse":function(e,i){var o,r;return e.data&&e.data.properties?(o=e.data.properties,r=t.isUndefined(e.data.versions)?void 0:e.data.versions):(o=e,r=t.isUndefined(e.versions)?void 0:e.versions),o.short_name=o.name,o.size||(o.container?o.size=o.container_size:r&&(o.size=r.file_size,o.size_formatted=void 0)),!o.mime_type&&r&&r.mime_type&&(o.mime_type=r.mime_type),s.prototype.parse.call(this,e,i)}}),v=i.Collection.extend({"model":g,"constructor":function(e,o){i.Collection.prototype.constructor.apply(this,arguments),t.isUndefined(o)&&(o={}),o&&o.id&&!this.id&&(this.id=o.id),this.options=o,this.makeConnectable(o).makeFetchable(o).makeCommandable(o).makeBrowsable(o).makeBrowsableV1Request(o).makeBrowsableV2Response(o).makeExpandableV2(o),this.skipCount=o.skip||0,this.topCount=o.pageSize||b.defaultPageSize,this.filters=o.filter||{},this.orderBy=o.orderBy||"name",this.columns=new w},"clone":function(){var e=new this.constructor(this.models,this.options);return this.columns&&e.columns.reset(this.columns.toJSON()),e.actualSkipCount=this.actualSkipCount,e.totalCount=this.totalCount,e.filteredCount=this.filteredCount,e.skipCount=this.skipCount,e.filters=this.filters,e},"url":function(){var e="",t=this.options.context||void 0,i=this.options.parameters||void 0;return e=o.combineQueryString(e,this.getBrowsableUrlQuery(),this.getExpandableResourcesUrlQuery()),e=o.appendWebReportParameters(e,i),e=o.appendCurrentContainer(e,t),o.combine(this.connector.connection.url+"/nodes/"+this.id,e?"/output?format=webreport&"+e:"/output?format=webreport")},"parse":function(e,t){return this.columns&&this.columns.resetColumnsV2(e,t),this.parseBrowsedState(e,t),this.parseBrowsedItems(e,t)},"_renameColumnKeys":function(e){var i={};return t.each(e,function(e,t){t=e.key,i[t]=e}),i}});p.mixin(v.prototype),a.mixin(v.prototype),l.mixin(v.prototype),c.mixin(v.prototype),d.mixin(v.prototype),u.mixin(v.prototype),h.mixin(v.prototype);var y=v.prototype.setFilter;return v.prototype.setFilter=function(e,t,i){return this.skipCount=0,y.apply(this,[e,t,i])},v}),csui.define("webreports/utils/contexts/factories/nodestablereport",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/nodestablereport/nodestablereport.model","csui/utils/commands","csui/utils/deepClone/deepClone","csui/utils/contexts/factories/node"],function(e,t,i,o,r,n,s){"use strict";return o.extend({"propertyPrefix":"nodestablereport","constructor":function s(a,l){o.prototype.constructor.apply(this,arguments);var c=this.options.nodestablereport||{};if(!(c instanceof i.Collection)){var p=a.getObject(r,l),d=e.config();c=new n(c.models,t.extend({"connector":p},c.attributes,d.options,s.getDefaultResourceScope(),{"autoreset":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}},{"getDefaultResourceScope":function(){return t.deepClone({"fields":{"properties":[],"versions.element(0)":[]},"includeResources":["metadata"],"commands":s.getAllSignatures()})}})}),csui.define("webreports/utils/contexts/factories/nodestablereportcolumns",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","webreports/utils/contexts/factories/nodestablereport"],function(e,t,i,o,r){return o.extend({"propertyPrefix":"nodestablereport_columns","constructor":function(e,t){o.prototype.constructor.apply(this,arguments);var n=this.options.columns||{},s=this.options.nodestablereport_columns||{};if(!(n instanceof i.Collection)){n=e.getCollection(r,{"attributes":s.attributes}).columns}this.property=n}})}),csui.define("webreports/models/nodestablereport/impl/nodestablereport.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}}),i=e.Collection.extend({"model":t,"comparator":"sequence","getColumnKeys":function(){return this.pluck("key")},"deepClone":function(){return new i(this.map(function(e){return e.attributes}))}});return new i([{"key":"type","sequence":10,"titleIconInHeader":"mime_type"},{"key":"name","sequence":20},{"key":"reserved","sequence":30,"noTitleInHeader":!0},{"key":"size","sequence":40},{"key":"modify_date","sequence":50},{"key":"favorite","sequence":910,"noTitleInHeader":!0,"permanentColumn":!0}])}),csui.define("webreports/controls/nodestablereport/impl/nodestablereport.toolbaritems",["csui/lib/underscore","i18n!csui/controls/tabletoolbar/impl/nls/localized.strings","csui/controls/toolbar/toolitems.factory"],function(e,t,i){return{"tableHeaderToolbar":new i({"main":[{"signature":"Properties","name":t.ToolbarItemInfo,"icon":"icon icon-toolbar-metadata"},{"signature":"Edit","name":t.ToolbarItemEdit},{"signature":"EmailLink","name":t.ToolbarItemShare},{"signature":"Download","name":t.ToolbarItemDownload},{"signature":"InlineEdit","name":t.ToolbarItemRename,"onlyInTouchBrowser":!0},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Copy","name":t.ToolbarItemCopy},{"signature":"Move","name":t.ToolbarItemMove},{"signature":"AddVersion","name":t.ToolbarItemAddVersion}],"shortcut":[{"signature":"OriginalEdit","name":t.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":t.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":t.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":t.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":t.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":t.ToolbarItemOriginalDownload}]}),"inlineActionbar":new i({"other":[{"signature":"Properties","name":t.ToolbarItemInfo,"icon":"icon icon-toolbar-metadata"},{"signature":"Edit","name":t.ToolbarItemEdit,"icon":"icon icon-toolbar-edit"},{"signature":"EmailLink","name":t.ToolbarItemShare,"icon":"icon icon-toolbar-share"},{"signature":"Download","name":t.ToolbarItemDownload,"icon":"icon icon-toolbar-download"},{"signature":"ReserveDoc","name":t.ToolbarItemReserve,"icon":"icon icon-toolbar-reserve"},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve,"icon":"icon icon-toolbar-unreserve"},{"signature":"Copy","name":t.ToolbarItemCopy,"icon":"icon icon-toolbar-copy"},{"signature":"Move","name":t.ToolbarItemMove,"icon":"icon icon-toolbar-move"},{"signature":"AddVersion","name":t.ToolbarItemAddVersion,"icon":"icon icon-toolbar-add-version"},{"signature":"InlineEdit","name":t.ToolbarItemRename,"icon":"icon icon-toolbar-rename"}]},{"maxItemsShown":5,"dropDownText":t.ToolbarItemMore,"dropDownIcon":"icon icon-toolbar-more"}),"dropdownMenuListInProperties":new i({"main":[{"signature":"Edit","name":t.ToolbarItemEdit},{"signature":"EmailLink","name":t.ToolbarItemShare},{"signature":"Download","name":t.ToolbarItemDownload},{"signature":"ReserveDoc","name":t.ToolbarItemReserve},{"signature":"UnreserveDoc","name":t.ToolbarItemUnreserve},{"signature":"Copy","name":t.ToolbarItemCopy},{"signature":"Move","name":t.ToolbarItemMove},{"signature":"AddVersion","name":t.ToolbarItemAddVersion}],"shortcut":[{"signature":"OriginalEdit","name":t.ToolbarItemOriginalEdit},{"signature":"OriginalEmailLink","name":t.ToolbarItemOriginalShare},{"signature":"OriginalReserveDoc","name":t.ToolbarItemOriginalReserve},{"signature":"OriginalUnreserveDoc","name":t.ToolbarItemOriginalUnreserve},{"signature":"OriginalCopy","name":t.ToolbarItemOriginalCopy},{"signature":"OriginalMove","name":t.ToolbarItemOriginalMove},{"signature":"OriginalAddVersion","name":t.ToolbarItemAddVersion},{"signature":"OriginalDownload","name":t.ToolbarItemOriginalDownload}]},{"maxItemsShown":0,"dropDownIcon":"icon icon-expandArrowDown"})}}),csui.define("webreports/controls/nodestablereport/impl/nodestablereport.toolbaritems.masks",["module","csui/lib/underscore","csui/controls/toolbar/toolitems.mask","csui/utils/toolitem.masks/global.toolitems.mask"],function(e,t,i,o){"use strict";function r(){var r=e.config(),s=new o;this.toolbars=t.reduce(n,function(e,o){var n=new i(s,{"normalize":!1});return t.each(r,function(e,t){(e=e[o])&&n.extendMask(e)}),n.storeMask(),e[o]=n,e},{})}var n=["tableHeaderToolbar","inlineActionbar"];return r.toolbars=n,r}),csui.define("hbs!webreports/controls/nodestablereport/impl/nodestablereport",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r,n;return'    <div class="tile-header">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(2,o,0),"inverse":this.program(4,o,0)}))?r:"")+'\r\n        <div class="tile-title">\r\n             <h2 class="csui-heading">'+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+"</h2>\r\n        </div>\r\n\r\n    </div>\r\n"},"2":function(e,t,i,o){var r;return'            <div class="tile-type-icon">\r\n                <span class="icon '+this.escapeExpression((r=null!=(r=t.icon||(null!=e?e.icon:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon","hash":{}}):r))+'" aria-hidden="true"></span>\r\n            </div>\r\n'},"4":function(e,t,i,o){var r;return null!=(r=t.if.call(e,null!=e?e.imageUrl:e,{"name":"if","hash":{},"fn":this.program(5,o,0),"inverse":this.noop}))?r:""},"5":function(e,t,i,o){var r;return'                <div class="tile-type-image '+this.escapeExpression((r=null!=(r=t.imageClass||(null!=e?e.imageClass:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"imageClass","hash":{}}):r))+'">\r\n                    <img src="'+this.escapeExpression((r=null!=(r=t.imageUrl||(null!=e?e.imageUrl:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"imageUrl","hash":{}}):r))+'" aria-hidden="true">\r\n                </div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return(null!=(r=t.if.call(e,null!=e?e.header:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.noop}))?r:"")+'\r\n<div class="webreports-nodestablereport-view">\r\n    <div id="tableview"></div>\r\n    <div id="paginationview"></div>\r\n</div>'}});return i.registerPartial("webreports_controls_nodestablereport_impl_nodestablereport",o),o}),csui.define("webreports/controls/nodestablereport/impl/nls/nodestablereport.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/nodestablereport/impl/nls/root/nodestablereport.lang",{"dialogTitle":"Nodes Table Report"}),csui.define("css!webreports/controls/nodestablereport/impl/nodestablereport",[],function(){}),csui.define("webreports/controls/nodestablereport/nodestablereport.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/handlebars","csui/lib/marionette","module","csui/utils/contexts/factories/connector","csui/controls/table/table.view","csui/controls/pagination/nodespagination.view","csui/controls/toolbar/toolbar.view","csui/utils/commands","csui/utils/base","csui/controls/toolbar/toolbar.command.controller","csui/controls/tableactionbar/tableactionbar.view","csui/behaviors/default.action/default.action.behavior","csui/controls/progressblocker/blocker","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","webreports/utils/contexts/factories/nodestablereportcolumns","webreports/utils/contexts/factories/nodestablereport","webreports/models/nodestablereport/impl/nodestablereport.columns","webreports/controls/nodestablereport/impl/nodestablereport.toolbaritems","webreports/controls/nodestablereport/impl/nodestablereport.toolbaritems.masks","webreports/mixins/webreports.view.mixin","hbs!webreports/controls/nodestablereport/impl/nodestablereport","i18n!webreports/controls/nodestablereport/impl/nls/nodestablereport.lang","css!webreports/controls/nodestablereport/impl/nodestablereport","css!webreports/style/webreports.css"],function(e,t,i,o,r,n,s,a,l,c,p,d,u,h,m,b,f,w,g,v,y,x,_,C){"use strict";var k=r.config();e.defaults(k,{"defaultPageSize":30,"defaultPageSizes":[30,50,100],"showInlineActionBarOnHover":!0,"forceInlineActionBarOnClick":!1,"inlineActionBarStyle":"csui-table-actionbar-bubble","clearFilterOnChange":!0,"resetOrderOnChange":!1,"resetLimitOnChange":!0,"fixedFilterOnChange":!1});var I=o.LayoutView.extend({"template":_,"regions":{"tableRegion":"#tableview","paginationRegion":"#paginationview"},"behaviors":{"DefaultAction":{"behaviorClass":h}},"constructor":function(e){e=this._processOptions(e);var t=this.setCommonModelOptions(e);m.imbue(this),o.LayoutView.prototype.constructor.call(this,e),this.propagateEventsToRegions(),this.collection=this.options.collection||this.context.getCollection(w,{"attributes":t}),this.collection.setExpand("properties",["parent_id","reserved_user_id"]),this.columns=this.options.columns||this.context.getCollection(f,{"attributes":t})},"onRender":function(){this.collection&&(this._setTableView(this.options),this._setPagination()),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"templateHelpers":function(){var t={"title":p.getClosestLocalizedString(this.options.data.title,C.dialogTitle),"icon":this.options.data.titleBarIcon||"title-webreports"};return!1!==this.options.data.header&&e.extend(t,{"header":!0}),t},"_processOptions":function(t){e.isUndefined(t)&&(t={}),e.defaults(t,{"data":{},"pageSize":k.defaultPageSize,"ddItemsList":k.defaultPageSizes,"toolbarItems":v,"clearFilterOnChange":k.clearFilterOnChange,"resetOrderOnChange":k.resetOrderOnChange,"resetLimitOnChange":k.resetLimitOnChange,"fixedFilterOnChange":k.fixedFilterOnChange});var i=t.data.pageSize||t.pageSize,o=t.data.pageSizes||t.ddItemsList;return e.contains(o,i)||(o.push(i),t.data.pageSizes=o.sort()),t.data.titleBarIcon=e.has(t.data,"titleBarIcon")?"title-icon "+t.data.titleBarIcon:"title-icon title-webreports",this.context=t.context,t.connector||(t.connector=this.context.getObject(n)),this.connector=t.connector,this.tableColumns=t.tableColumns||g.deepClone(),this.commands=t.commands||c,this.commandController=new d({"commands":this.commands}),t.toolbarItemsMasks||(t.toolbarItemsMasks=new y),this.options=t,t},"_setTableView":function(t){t||(t={});var i=e.extend({"context":this.options.context,"connector":this.connector,"collection":this.collection,"columns":this.columns,"tableColumns":this.tableColumns,"pageSize":this.options.data.pageSize||this.options.pageSize,"originatingView":this,"columnsWithSearch":["name"],"orderBy":this.options.data.orderBy||this.options.orderBy,"filterBy":this.options.filterBy,"actionItems":this.defaultActionController.actionItems,"commands":this.defaultActionController.commands,"blockingParentView":this,"parentView":this,"clientSideDataOperation":!1,"alternativeHeader":{"viewClass":l,"options":{"toolbarItems":this.options.toolbarItems,"toolbarItemsMask":this.options.toolbarItemsMasks.toolbars.tableHeaderToolbar,"toolbarCommandController":this.commandController}},"inlineBar":{"viewClass":u,"options":e.extend({"collection":this.options.toolbarItems.inlineActionbar,"toolItemsMask":this.options.toolbarItemsMasks.toolbars.inlineActionbar,"delayedActions":this.collection.delayedActions,"container":this.container,"containerCollection":this.collection},this.options.toolbarItems.inlineActionbar.options,{"inlineBarStyle":k.inlineActionBarStyle,"forceInlineBarOnClick":k.forceInlineActionBarOnClick,"showInlineBarOnHover":k.showInlineActionBarOnHover})}},t);this.tableView=new s(i),this._setTableViewEvents()},"_setPagination":function(){return this.paginationView=new a({"collection":this.collection,"pageSize":this.options.data.pageSize||this.options.pageSize}),!0},"_setTableViewEvents":function(){this.listenTo(this.tableView,"execute:defaultAction",function(e){var t={"node":e};if(this.trigger("before:defaultAction",t),!t.cancel){var i=this;this.defaultActionController.executeAction(e,{"context":this.options.context,"originatingView":this}).done(function(){i.trigger("executed:defaultAction",t)})}})}});return e.extend(I.prototype,b),x.mixin(I.prototype),I}),csui.define("webreports/widgets/nodeslistreport/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/nodeslistreport/impl/nls/root/lang",{"dialogTitle":"WebReports NodesList","searchPlaceholder":"Search NodesList Report","emptyListText":"No results found."}),csui.define("webreports/widgets/nodeslistreport/nodeslistreport.view",["csui/lib/underscore","csui/lib/marionette","csui/utils/base","csui/controls/list/list.view","csui/controls/listitem/listitemstandard.view","csui/controls/progressblocker/blocker","webreports/widgets/nodeslistreport/impl/expanding.behavior","csui/behaviors/default.action/default.action.behavior","webreports/utils/contexts/factories/nodestablereport","webreports/controls/nodestablereport/nodestablereport.view","csui/controls/node-type.icon/node-type.icon.view","webreports/mixins/webreports.view.mixin","i18n!webreports/widgets/nodeslistreport/impl/nls/lang","css!webreports/style/webreports.css"],function(e,t,i,o,r,n,s,a,l,c,p,d,u){var h=o.extend({"constructor":function(t){t||(t={}),t.data||(t.data={}),t.data.titleBarIcon=e.has(t.data,"titleBarIcon")&&""!==t.data.titleBarIcon?"title-icon "+t.data.titleBarIcon:"title-icon title-webreports",t.data.header=!1,n.imbue({"parent":this}),o.prototype.constructor.apply(this,arguments)},"events":function(){return e.extend({},o.prototype.events,{"click @ui.moreLink":"onMoreLinkClick","keyup @ui.searchBox":"onSearchKeyUp","keydown @ui.searchBox":"onSearchKeyDown"})},"ui":function(){return e.extend({},o.prototype.ui,{"moreLink":".cs-more.tile-expand"})},"initialize":function(){var e,t=this.options;e=this.setCommonModelOptions(t),this.collection=this.options.collection||this.options.context.getCollection(l,{"attributes":e}),this.listenTo(this.collection,"reset",this.enableMoreLink),this.listenTo(this,"change:filterValue",this.synchronizeCollections),this.listenTo(this.collection,"request",this.waitingOnServer),this.listenTo(this.collection,"sync error",this.responseFromServer)},"enableMoreLink":function(){var e=!this.isEmpty();this.ui.moreLink[e?"removeClass":"addClass"]("hidden")},"isEmpty":function(){return this.collection.fetched&&0===this.collection.models.length&&!this.blocking},"waitingOnServer":function(){this.blocking=!0,this.blockActions()},"responseFromServer":function(){this.blocking=!1,this.unblockActions(),this.render()},"emptyViewOptions":{"text":u.emptyListText},"childEvents":{"click:item":"onClickItem","render":"onRenderItem","before:destroy":"onBeforeDestroyItem"},"templateHelpers":function(){return{"title":i.getClosestLocalizedString(this.options.data.title,u.dialogTitle),"icon":this.options.data.titleBarIcon,"searchPlaceholder":i.getClosestLocalizedString(this.options.data.searchPlaceholder,u.searchPlaceholder)}},"childView":r,"childViewOptions":{"templateHelpers":function(){return{"name":this.model.get("name"),"enableIcon":!0}}},"blocking":!1,"emptySearch":!1,"behaviors":{"ExpandableList":{"behaviorClass":s,"expandedView":c,"expandedViewOptions":function(){return this.options},"orderBy":"name asc","titleBarIcon":function(){return this.options.data.titleBarIcon},"dialogTitle":function(){return i.getClosestLocalizedString(this.options.data.title,u.dialogTitle)},"dialogTitleIconRight":"icon-tileCollapse","dialogClassName":"webreports-nodeslistreport-table"},"DefaultAction":{"behaviorClass":a}},"filterNodeList":function(e){this.options.filterValue=e,this.trigger("change:filterValue"),this.ui.searchInput.focus()},"onSearchKeyUp":function(t){
clearTimeout(this.keyTimer),27===t.which?this.searchFieldClearerClicked():this.keyTimer=setTimeout(e.bind(this.filterNodeList,this,this.ui.searchInput.val()),600)},"onSearchKeyDown":function(e){if(13===e.which)return e.preventDefault(),!1;clearTimeout(this.keyTimer)},"searchFieldClearerClicked":function(){this.ui.searchInput.val(""),this.emptySearch=!0,this.filterNodeList("")},"filterChanged":function(e){return!1},"_onCollapseExpandedView":function(){this.view.triggerMethod("collapse")},"onBeforeDestroyItem":function(e){e._nodeIconView&&e._nodeIconView.destroy()},"onClickItem":function(e){this.triggerMethod("execute:defaultAction",e.model)},"onClickHeader":function(e){this.isEmpty()||this.triggerMethod("expand")},"onMoreLinkClick":function(e){e.preventDefault(),e.stopPropagation(),this.triggerMethod("expand")},"onRender":function(){var t=o.prototype.onRender;t&&t.apply(this,arguments),(e.has(this.collection.filters,"name")||this.emptySearch)&&(this.ui.searchInput.show(),this.ui.clearer.toggle(!0),this.ui.searchInput.val(this.collection.filters.name),this.ui.searchInput.focus(),this.ui.headerTitle.toggle(),this.emptySearch=!1),this.collection.setExpand("properties",["parent_id","reserved_user_id"])},"onRenderItem":function(e){e._nodeIconView=new p({"el":e.$(".csui-type-icon").get(0),"node":e.model}),e._nodeIconView.render()},"synchronizeCollections":function(){var t=this.options.filterValue;!t.length&&e.has(this.collection.filters,"name")&&(this.collection.clearFilter(),this.emptySearch=!0),t.length>=3?(this.collection.setFilter({"name":t}),this.collection.reset()):this.collection.reset(this.collection.models)}});return d.mixin(h.prototype),h}),csui.define("json!webreports/widgets/nodeslistreport/nodeslistreport.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"tile","supportedKinds":["tile"],"schema":{"type":"object","properties":{"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"object"},"titleBarIcon":{"title":"{{iconTitle}}","description":"{{iconDescription}}","type":"string"},"searchPlaceholder":{"title":"{{placeHolderTitle}}","description":"{{placeHolderDescription}}","type":"object"},"id":{"title":"{{idTitle}}","description":"{{idDescription}}","type":"integer"},"parameters":{"type":"array","title":"{{reportParamTitle1}}","description":"{{reportParamDescription1}}","items":{"type":"object","title":"{{reportParamTitle2}}","description":"{{reportParamDescription2}}","properties":{"name":{"type":"string","title":"{{paramNameTitle}}","description":"{{paramNameDescription}}"},"value":{"type":"string","title":"{{paramValTitle}}","description":"{{paramValDescription}}"}}}}},"required":["id"]},"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"title":{"type":"otcs_multilingual_string"},"searchPlaceholder":{"type":"otcs_multilingual_string"}}}}),csui.define("webreports/widgets/nodeslistreport/impl/nls/nodeslistreport.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/nodeslistreport/impl/nls/root/nodeslistreport.manifest",{"widgetTitle":"Nodes List WebReport","widgetDescription":"Loads an expandable Nodes List based on the output of a WebReport","tileTitle":"Title","tileDescription":"Title for the tile","iconTitle":"Icon class","iconDescription":"CSS class supplying the icon in the tile header","placeHolderTitle":"Search Placeholder","placeHolderDescription":"Specify custom string to be used when the user clicks search","idTitle":"WebReport ID","idDescription":"DataID for the WebReport which contains the HTML","reportParamTitle1":"WebReport Parameters","reportParamDescription1":"Key/Value pairs of parameters to be passed into the WebReport.","reportParamTitle2":"WebReport Parameters","reportParamDescription2":"Key/Value pairs of parameters to be passed into the WebReport.","paramNameTitle":"Parameter Name","paramNameDescription":"The name of the URL parameter.","paramValTitle":"Parameter Value","paramValDescription":"The value of the URL parameter."}),csui.define("webreports/models/widget.carousel/folder.model",["csui/lib/underscore","csui/lib/backbone","webreports/utils/url.webreports","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o){return t.Model.extend({"constructor":function(e,i){t.Model.prototype.constructor.apply(this,arguments)}})}),csui.define("webreports/models/widget.carousel/folder.collection",["csui/lib/underscore","csui/lib/backbone","webreports/utils/url.webreports","webreports/models/widget.carousel/folder.model","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o,r){var n=t.Collection.extend({"constructor":function(i,o){t.Collection.prototype.constructor.apply(this,arguments),e.isUndefined(o)&&(o={}),o&&o.id&&!this.id&&(this.id=o.id),this.options=o,this.makeConnectable(o)},"model":o,"url":function(){this.options.context,this.options.parameters;return i.combine(this.connector.connection.url+"/nodes/"+this.id,"/nodes?extra=false&commands=default&limit=100&sort=asc_create_date")},"parse":function(e){return e.data}});return r.mixin(n.prototype),n}),csui.define("webreports/utils/contexts/factories/carousel.collection.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/widget.carousel/folder.collection"],function(e,t,i,o,r,n){return o.extend({"propertyPrefix":"carousel","constructor":function(s,a){o.prototype.constructor.apply(this,arguments);var l=s.getObject(r,a);a.connector=l;var c=this.options.carousel||{};if(!(c instanceof i.Collection)){var p=e.config();c=new n(c.models,t.extend({"connector":l},c.attributes,p.options,{"autoreset":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("webreports/controls/carousel/impl/nls/carousel.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/carousel/impl/nls/root/carousel.lang",{"dialogTitle":"Carousel"}),csui.define("css!webreports/controls/carousel/impl/carousel",[],function(){}),csui.define("webreports/controls/carousel/impl/carousel.indicator.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/utils/contexts/factories/carousel.collection.factory","i18n!webreports/controls/carousel/impl/nls/carousel.lang","css!webreports/controls/carousel/impl/carousel"],function(e,t,i,o,r,n,s){return i.ItemView.extend({"template":!1,"tagName":"li","attributes":function(){return{"data-binf-target":"#carousel-main-data-container","data-binf-slide-to":this.model.collection.indexOf(this.model)}},"className":function(){return 0===this.model.collection.indexOf(this.model)?"binf-active":""}})}),csui.define("webreports/controls/carousel/impl/carousel.indicator.collection.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/controls/carousel/impl/carousel.indicator.item.view","i18n!webreports/controls/carousel/impl/nls/carousel.lang","css!webreports/controls/carousel/impl/carousel"],function(e,t,i,o,r,n,s){return i.CollectionView.extend({"childView":n,"tagName":"ol","className":"binf-carousel-indicators","childViewOptions":function(e,t){return{"starting_index":this.options.data.starting_index}},"constructor":function(e){e&&e.data&&(e.data.id,e.data.requestedWidgetModels),i.CollectionView.prototype.constructor.apply(this,arguments)}})}),csui.define("hbs!webreports/controls/carousel/impl/carousel.slide.item",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){return'<div class="slide-container" data-src="">\r\n\t<div class="slide"></div>\r\n</div>'}});return i.registerPartial("webreports_controls_carousel_impl_carousel.slide.item",o),o}),csui.define("webreports/controls/carousel/impl/carousel.slide.item.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/utils/contexts/factories/carousel.collection.factory","i18n!webreports/controls/carousel/impl/nls/carousel.lang","hbs!webreports/controls/carousel/impl/carousel.slide.item","css!webreports/controls/carousel/impl/carousel"],function(e,t,i,o,r,n,s,a){return i.ItemView.extend({"className":function(){return"binf-item"+(void 0!==this.model&&0===this.model.collection.indexOf(this.model)?" binf-active":"")},"template":a,"templateHelpers":function(){return{"dataURL":void 0!==this.model?this.model.get("id"):"","index":this._index}},"onRender":function(){this._index===this.options.starting_index&&this.trigger("starting:slide:added",this.$el)}})}),csui.define("webreports/controls/carousel/impl/carousel.slide.collection.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/controls/carousel/impl/carousel.slide.item.view","i18n!webreports/controls/carousel/impl/nls/carousel.lang","css!webreports/controls/carousel/impl/carousel"],function(e,t,i,o,r,n,s){return i.CollectionView.extend({"childView":n,"childViewContainer":".carousel-slides-container","className":"binf-carousel-inner","childViewOptions":function(e,t){return{"starting_index":this.options.data.starting_index}},"childEvents":{"starting:slide:added":"onStartingChildAdded"},"onStartingChildAdded":function(e){this.trigger("starting:slide:added",e)},"constructor":function(e){if(e&&e.data){e.data.id,e.data.requestedWidgetModels}i.CollectionView.prototype.constructor.apply(this,arguments)},"ui":{"carousel_container":"#carousel-main-data-container"},"onRender":function(){this.$el.attr("role","listbox")}})}),csui.define("hbs!webreports/controls/carousel/impl/carousel.generic",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){return'\x3c!-- Indicators --\x3e\r\n<span class="carousel-indicators-container"></span>\r\n\r\n\x3c!-- Wrapper for slides --\x3e\r\n<span class="carousel-slides-container"></span>'}});return i.registerPartial("webreports_controls_carousel_impl_carousel.generic",o),o}),csui.define("webreports/controls/carousel/carousel.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/lib/binf/js/binf","csui/utils/base","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/utils/contexts/factories/carousel.collection.factory","webreports/controls/carousel/impl/carousel.indicator.collection.view","webreports/controls/carousel/impl/carousel.slide.collection.view","i18n!webreports/controls/carousel/impl/nls/carousel.lang","hbs!webreports/controls/carousel/impl/carousel.generic","css!webreports/controls/carousel/impl/carousel"],function(e,t,i,o,r,n,s,a,l,c,p,d){return i.LayoutView.extend({"currentSlideIndex":0,"nextSlideIndex":0,"isCycling":!1,"defaults":{"title":"","titleBarIcon":"","header":!1,"auto_cycle":!0,"interval":5e3,"pause_on_hover":"hover","wrap":!0},"template":d,"tagName":"div","className":"binf-carousel binf-slide lazy","attributes":{"id":"carousel-main-data-container"},"regions":{"indicator_container":".carousel-indicators-container","slide_container":".carousel-slides-container"},"constructor":function(t){t.data.title=e.has(t.data,"title")?n.getClosestLocalizedString(t.data.title,this.defaults.title):this.defaults.title,t.data.titleBarIcon=e.has(t.data,"titleBarIcon")?t.data.titleBarIcon:this.defaults.titleBarIcon,t.data.header=e.has(t.data,"header")?t.data.header:this.defaults.header,t.data.behavior.auto_cycle=e.has(t.data,"behavior")&&e.has(t.data.behavior,"auto_cycle")?t.data.behavior.auto_cycle:this.defaults.auto_cycle,t.data.behavior.interval=e.has(t.data,"behavior")&&e.has(t.data.behavior,"interval")?t.data.behavior.interval:this.defaults.interval,t.data.behavior.pause_on_hover=e.has(t.data,"behavior")&&e.has(t.data.behavior,"pause_on_hover")?!!t.data.behavior.pause_on_hover&&"hover":this.defaults.pause_on_hover,t.data.behavior.wrap=e.has(t.data,"behavior")&&e.has(t.data.behavior,"wrap")?t.data.behavior.wrap:this.defaults.wrap,i.LayoutView.prototype.constructor.apply(this,arguments),e.bindAll(this,"onAfterSlide","onBeforeSlide","loadSlide")},"onRender":function(){this.getRegion("indicator_container").show(new l(this.options)),this.getRegion("slide_container").show(new c(this.options)),this.loadSlide(0)},"onShow":function(){this.options.data.behavior.auto_cycle&&this.startCarousel(),this.onShowCarousel(this.$el)},"onDestroy":function(){this.isCycling&&this.pauseCarousel()},"events":{"click #carousel_play_button":"startCarousel","click #carousel_pause_button":"pauseCarousel","slide.binf.carousel":"onBeforeSlide","slid.binf.carousel":"onAfterSlide"},"onBeforeSlide":function(e){},"onAfterSlide":function(e){},"startCarousel":function(){this.isCycling=!0,this.$el.binf_carousel({"interval":this.options.data.behavior.interval,"pause":this.options.data.behavior.pause_on_hover,"wrap":this.options.data.behavior.wrap})},"pauseCarousel":function(){this.isCycling=!1,this.$el.binf_carousel("pause")},"onShowCarousel":function(e){},"loadSlide":function(e){}})}),csui.define("webreports/models/widget.carousel/widget.carousel.model",["csui/lib/underscore","csui/lib/backbone","csui/models/widget/widget.model","webreports/utils/url.webreports","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o,r){return i.extend({"defaults":{"type":"","options":[],"widget_loaded":!1}})}),csui.define("webreports/widgets/widget.carousel/widget.carousel.layout.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/lib/backbone","csui/lib/binf/js/binf","csui/controls/tile/behaviors/perfect.scrolling.behavior","webreports/controls/carousel/carousel.view","webreports/models/widget.carousel/widget.carousel.model"],function(e,t,i,o,r,n,s,a){return s.extend({"activeSlideIndex":0,"CSUIWidgetCollection":new o.Collection,"currentlyLoadingSlideIndex":0,"currentWidgetID":null,"currentWidgetOptions":null,"currentWidgetContext":null,"previousSlideIndex":0,"maxSlidesNum":10,"allSlidesSynced":!1,"constructor":function(t){e.has(t.data,"widgets")?(t.data.widgets.length>this.maxSlidesNum&&(t.data.widgets.splice(this.maxSlidesNum),console.warn("The maximum number of widgets allowed in the carousel is "+t.data.widgets.length+".  The additional widgets have been removed from the carousel.")),e.each(t.data.widgets,function(e,t,i){"string"==typeof e.options&&(e.options=JSON.parse(e.options)),"webreports"===e.type.slice(0,e.type.indexOf("/")).toLowerCase()&&"webreports/widgets/carousel"!==e.type||(i.splice(t,1),console.warn("The "+e.type+" widget is not supported in the carousel.  It has been removed."))})):t.data.widgets=[],e.extend(t,{"collection":new o.Collection(t.data.widgets)}),s.prototype.constructor.apply(this,arguments),e.bindAll(this,"onAfterSlide","onBeforeSlide","loadSlide","loadWidget","fetchWidget","postWidgetLoad")},"events":{"slide.binf.carousel":"onBeforeSlide","slid.binf.carousel":"onAfterSlide","click ol.binf-carousel-indicators > li":"onIndicatorClick"},"onBeforeSlide":function(e){var i=t(e.relatedTarget).index();this.loadSlide(i)},"onAfterSlide":function(i){var o=t(i.relatedTarget).index(),r=this.regionManager.get("slide"+o),n=this.collection.at(o);e.has(r,"currentView")&&e.has(r.currentView,"contentView")&&-1!==n.get("type").indexOf("visual.data")&&!r.isChartRenderedInCarousel&&(r.currentView.contentView.isChartRendered=!1,r.currentView.contentView.triggerMethod("dom:refresh"),r.isChartRenderedInCarousel=!0,this.bindChartExpandedViewEvents(r.currentView))},"onIndicatorClick":function(e){if(!this.allSlidesSynced)return console.warn("Carousel controls are disabled until all slides are fully loaded"),e.preventDefault(),!1},"onShowCarousel":function(e){var t=e.find(".carousel-slides-container .binf-carousel-inner").children();if(this.options.data.widgets.length>0)for(var o=0;o<t.length;o++)this.regionManager.addRegion("slide"+o,new i.Region({"el":t[o]}));else console.warn("The carousel is empty, please add some widgets"),this.pauseCarousel();this.options.data.behavior.auto_cycle&&this.isCycling&&this.pauseCarousel(),this.regionManager.get("indicator_container").$el.find("li").addClass("carousel-content-loading")},"onDomRefresh":function(){var t,i=this.regionManager.get("slide0"),o=this.collection.at(0);e.has(i,"currentView")&&-1!==o.get("type").indexOf("visual.data")&&(t=i.currentView,e.has(t,"contentView")&&!t.contentView.isChartRendered&&(t.contentView.triggerMethod("dom:refresh"),i.isChartRenderedInCarousel=!0,this.bindChartExpandedViewEvents(t)))},"bindChartExpandedViewEvents":function(e){e.$el.find(".icon-tileExpand,.tile-header").on("click",{"view":e,"carouselView":this},function(e){e.data.carouselView.onExpandWidget();var i=setInterval(function(){t(".icon-tileCollapse").length>0&&(t(".icon-tileCollapse").on("click",{"view":e.data.view,"carouselView":e.data.carouselView},function(e){e.data.view.contentView.triggerMethod("dom:refresh"),e.data.carouselView.onCollapseWidget()}),clearInterval(i))},150)})},"loadSlide":function(t){var i,o,r=this.regionManager.get("slide_container").currentView.collection;this.previousSlideIndex=this.currentlyLoadingSlideIndex,this.currentlyLoadingSlideIndex=t,e.isUndefined(r)||(o=r.at(t),e.isUndefined(o)||(o.get("widget_loaded")?this.postWidgetLoad():(i=o.get("type"),this.currentWidgetOptions=o.get("options"),this.currentWidgetID=i,this.loadWidget(i).done(this.fetchWidget))))},"loadWidget":function(e){var t;return t=new a({"id":e},{"includeView":!0,"includeManifest":!1,"includeServerModule":!1,"includeToolItems":!1}),this.CSUIWidgetCollection.add(t),t.fetch()},"fetchWidget":function(){var t,i,o,r,n,s={},a=e.clone(this.options.context._factories),l=this.collection.at(this.currentlyLoadingSlideIndex).get("options"),c=this.regionManager.get("slide"+this.currentlyLoadingSlideIndex);if(i=new(this.CSUIWidgetCollection.get(this.currentWidgetID).get("view"))({"context":this.options.context,"data":l}),e.has(i,"behaviors")&&e.has(i.behaviors,"ExpandableList")&&(this.listenTo(i,"expand",this.onExpandWidget),this.listenTo(i,"collapse",this.onCollapseWidget)),e.has(i,"model")?o=i.model:e.has(i,"collection")?o=i.collection:e.has(i,"contentView")&&this.listenTo(i,"render",e.bind(this.onChildContentViewRender,this,i,this.currentlyLoadingSlideIndex)),void 0!==o&&this.listenTo(o,"sync",e.bind(this.onChildSync,this,i,this.currentlyLoadingSlideIndex)),c.show(i),e.isEmpty(a))s=i.options.context._factories;else{r=this.options.context._factories,n=e.keys(r);for(var p=0;p<n.length;p++)n[p]in a||(s[n[p]]=r[n[p]])}for(t in s)e.isFunction(s[t].fetch)&&s[t].fetch(e.extend(e.clone(l)));this.postWidgetLoad()},"postWidgetLoad":function(){var e,t=this.collection.length===this.currentlyLoadingSlideIndex+1,i=this.collection.at(this.currentlyLoadingSlideIndex);0===this.currentlyLoadingSlideIndex&&this._restoreIndicators("li.binf-active"),i.get("widget_loaded")||i.set("widget_loaded",!0),t||(e=this.collection.at(this.currentlyLoadingSlideIndex+1),!0!==e.get("widget_loaded")&&this.loadSlide(this.currentlyLoadingSlideIndex+1))},"_restoreIndicators":function(e){e&&this.regionManager.get("indicator_container").$el.find(e).animate({"height":"16px","margin-bottom":"0px"}).removeClass("carousel-content-loading")},"onChildContentViewRender":function(t,i){var o,r;e.has(t,"contentView")&&(r=t.contentView,e.has(r,"collection")?o=r.collection:e.has(r,"model")&&(o=r.model)),void 0!==o&&this.listenTo(o,"sync",e.bind(this.onChildSync,this,t,i))},"onChildSync":function(t,i){var o,r=this.collection.at(i),n=r.get("type");r.set("widget_synced",!0),-1!==n.indexOf("visual.data")&&e.has(t,"contentView")&&e.has(t.contentView,"collection")&&this.stopListening(t.contentView.collection,"sync"),-1!==n.indexOf("nodeslistreport")&&this.listenTo(t,"change:filterValue",e.bind(this.onChildFilterValueChange,this,t)),o=this.collection.where({"widget_synced":!0}),o.length===this.collection.length&&this.onAllSlidesSynced()},"onAllSlidesSynced":function(){this.options.data.behavior.auto_cycle&&this.startCarousel(),this._restoreIndicators("li:not('.binf-active')"),this.allSlidesSynced=!0},"onChildFilterValueChange":function(e){""===e.ui.searchInput.val()?this.onCollapseWidget():this.onExpandWidget()},"onExpandWidget":function(){this.isCycling&&this.pauseCarousel()},"onCollapseWidget":function(){!this.isCycling&&this.options.data.behavior.auto_cycle&&this.startCarousel()}})}),csui.define("webreports/widgets/widget.carousel/impl/nls/widget.carousel.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/widget.carousel/impl/nls/root/widget.carousel.lang",{"dialogTitle":"Widget Carousel"}),csui.define("hbs!webreports/controls/carousel/impl/carousel.tile",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r,n;return'    <div class="tile-header">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(2,o,0),"inverse":this.noop}))?r:"")+'\r\n        <div class="tile-title">\r\n             <h2 class="csui-heading">'+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+'</h2>\r\n        </div>\r\n\r\n        <div class="tile-controls"></div>\r\n\r\n    </div>\r\n\r\n'},"2":function(e,t,i,o){var r;return'            <div class="tile-type-icon">\r\n                <span class="icon title-icon '+this.escapeExpression((r=null!=(r=t.icon||(null!=e?e.icon:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon","hash":{}}):r))+'" aria-hidden="true"></span>\r\n            </div>\r\n'},"4":function(e,t,i,o){return'    <div class="webreports-tilereport-spacer"></div>\r\n'},"6":function(e,t,i,o){return" carousel-tile-content"},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return(null!=(r=t.if.call(e,null!=e?e.header:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.program(4,o,0)}))?r:"")+'\r\n\r\n\r\n<div class="tile-content'+(null!=(r=t.unless.call(e,null!=e?e.header:e,{"name":"unless","hash":{},"fn":this.program(6,o,0),"inverse":this.noop}))?r:"")+'"></div>\r\n\r\n<div class="tile-footer"></div>\r\n'}});return i.registerPartial("webreports_controls_carousel_impl_carousel.tile",o),o}),csui.define("webreports/widgets/widget.carousel/widget.carousel.view",["csui/lib/underscore","csui/utils/base","csui/controls/tile/tile.view","webreports/widgets/widget.carousel/widget.carousel.layout.view","i18n!webreports/widgets/widget.carousel/impl/nls/widget.carousel.lang","hbs!webreports/controls/carousel/impl/carousel.tile","css!webreports/controls/carousel/impl/carousel","css!webreports/style/webreports.css"],function(e,t,i,o,r,n){return i.extend({"contentView":o,"template":n,"constructor":function(e){e.data&&e.data.contentView&&(this.contentView=e.data.contentView),this.contentViewOptions=e,i.prototype.constructor.apply(this,arguments)},"templateHelpers":function(){var i={"title":t.getClosestLocalizedString(this.options.data.title,r.dialogTitle),"icon":this.options.data.titleBarIcon||"title-webreports"};return!0===this.options.data.header&&e.extend(i,{"header":this.options.data.header}),i},"onRender":function(){!1===this.options.data.header&&this.$(".tile-content").height("100%").css("margin-top","0px")}})}),csui.define("json!webreports/widgets/widget.carousel/widget.carousel.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"header","supportedKinds":["tile","header","fullpage"],"schema":{"type":"object","properties":{"header":{"title":"{{headerTitle}}","description":"{{headerDescription}}","type":"boolean","enum":[!0,!1],"default":!1},"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"object"},"titleBarIcon":{"title":"{{headerIconTitle}}","description":"{{headerIconDescription}}","type":"string"},"behavior":{"type":"object","title":"{{behaviorTitle}}","description":"{{behaviorDescription}}","properties":{"auto_cycle":{"title":"{{cycleTitle}}","description":"{{cycleDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"interval":{"title":"{{intervalTitle}}","description":"{{intervalDescription}}","type":"integer","default":5e3},"pause_on_hover":{"title":"{{hoverTitle}}","description":"{{hoverDescription}}","type":"boolean","enum":[!0,!1],"default":!0},"wrap":{"title":"{{loopTitle}}","description":"{{loopDescription}}","type":"boolean","enum":[!0,!1],"default":!0}}},"widgets":{"type":"widgetarray","title":"{{childTitle}}","description":"{{childDescription}}"}}},"options":{"fields":{"title":{"type":"otcs_multilingual_string"}}}}),csui.define("webreports/widgets/widget.carousel/impl/nls/widget.carousel.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/widget.carousel/impl/nls/root/widget.carousel.manifest",{"widgetTitle":"Widget Carousel","widgetDescription":"This widget cycles through up to 10 slides, each of which can contain a different child widget from the Content Server WebReports widget group.","headerTitle":"Show header","headerDescription":"Select whether the tile will include a header that contains the title and title icon.","tileTitle":"Title","tileDescription":"Enter the title for the Widget Carousel.","headerIconTitle":"Icon class","headerIconDescription":"Enter the CSS class for the icon that will appear in the header.","behaviorTitle":"Behavior","behaviorDescription":"Control how the Widget Carousel behaves.","cycleTitle":"Cycle automatically","cycleDescription":"Select whether the Carousel rotates through the slides after loading or waits for the user to click navigation.","intervalTitle":"Interval","intervalDescription":"If cycling, the time in milliseconds that each slide appears before advancing to the next one.","hoverTitle":"Pause on hover","hoverDescription":"If cycling, select whether the slides stop advancing when the user points to the current slide or continue advancing regardless of the cursor position.","loopTitle":"Loop","loopDescription":"If cycling, select whether slides rotate in an endless loop or only appear once.","childTitle":"Child widgets","childDescription":"Add up to 10 slides, in order, by dragging a child widget from the Content Server WebReports widget group to the Child Widget Drop Area. Click each child widget to configure its options. "}),csui.define("webreports/utils/table.validate",["module","csui/lib/underscore"],function(e,t){var i=e.config();return t.defaults(i,{"defaultPageSize":30,"defaultPageSizeOptions":[30,50,100],"maxPageSize":100}),t.extend({"checkPageSize":function(e,o){return e&&!o&&(o=i.defaultPageSizeOptions),t.contains(o,e)?e:e=i.defaultPageSize},"checkPageSizeOptions":function(e,o){return e&&!o&&(e=i.defaultPageSizeOptions),e=t.reject(e,function(e){return e<1||e>i.maxPageSize}),t.contains(e,o)?e:e=i.defaultPageSizeOptions}})}),csui.define("webreports/models/tablereport/tablereport.model",["module","csui/lib/underscore","csui/lib/backbone","webreports/utils/url.webreports","webreports/utils/table.validate","csui/models/nodechildrencolumn","csui/models/nodechildrencolumns","csui/models/node/node.model","csui/models/mixins/connectable/connectable.mixin","csui/models/mixins/fetchable/fetchable.mixin","csui/models/browsable/browsable.mixin","csui/models/browsable/v1.request.mixin","csui/models/browsable/v2.response.mixin"],function(e,t,i,o,r,n,s,a,l,c,p,d,u){var h=i.Model.extend({"idAttribute":"column_key","constructor":function(e,t){i.Model.prototype.constructor.apply(this,arguments)}}),m=i.Collection.extend({"model":h,"constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments)}}),b=i.Collection.extend({"constructor":function(e,t){i.Collection.prototype.constructor.apply(this,arguments),this.columns=new m,(t.data.pageSize||t.data.pageSizeOptions)&&(t.data.pageSize=r.checkPageSize(t.data.pageSize,t.data.pageSizeOptions),t.data.pageSizeOptions=r.checkPageSizeOptions(t.data.pageSizeOptions,t.data.pageSize)),t.data.sortBy&&t.data.sortOrder&&(t.data.orderBy||(t.data.orderBy=t.data.sortBy+" "+t.data.sortOrder),t.orderBy=t.data.sortBy+" "+t.data.sortOrder),this.orderBy=t.data.orderBy,this.options=t,this.makeConnectable(t).makeBrowsable(t).makeBrowsableV1Request(t).makeBrowsableV2Response(t).makeFetchable(t)},"url":function(){var e="",t=this.options.context||void 0,i=this.options.data.parameters||void 0;return e=o.combineQueryString(e,this.getBrowsableUrlQuery()),e=o.appendWebReportParameters(e,i),e=o.appendCurrentContainer(e,t),e=o.appendSWRCellID(e,this.options),o.combine(this.connector.connection.url+"/nodes/"+this.options.data.id,e?"/output?format=webreport&"+e:"/output?format=webreport")},"parse":function(e){return this.parseBrowsedState(e,this.options),this.columns.reset(this._processColumns(e)),e.data},"_processColumns":function(e){var i;return""===this.orderBy&&(i=t.findWhere(e.columns,{"sort":!0}),t.isUndefined(i)||(this.orderBy=i.column_key+" ASC")),t.map(e.columns,t.bind(function(e){var t,i;return e.name_formatted&&""!==e.name_formatted&&(e.name=e.name_formatted),"subwebreportid"===e.column_key&&(t=this.options)&&t.data&&t.data.swrLaunchCell&&(i=t.data.swrLaunchCell,i.iconClass&&(e.iconClass=i.iconClass),i.hoverText&&(e.hoverText=i.hoverText)),e},this))}});p.mixin(b.prototype),l.mixin(b.prototype),d.mixin(b.prototype),u.mixin(b.prototype),c.mixin(b.prototype);var f=b.prototype.setFilter;return b.prototype.setFilter=function(e,t,i){return this.skipCount=0,f.apply(this,[e,t,i])},b}),csui.define("webreports/utils/contexts/factories/table.report.factory",["module","csui/lib/underscore","csui/lib/backbone","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/tablereport/tablereport.model","csui/utils/contexts/factories/node"],function(e,t,i,o,r,n){return o.extend({"propertyPrefix":"tablereport","constructor":function(s,a){o.prototype.constructor.apply(this,arguments);var l=s.getObject(r,a);a.connector=l;var c=this.options.tablereport||{};if(!(c instanceof i.Collection)){var p=e.config();c=new n(c.models,t.extend({"connector":l},c.attributes,p.options,{"autoreset":!0}))}this.property=c},"fetch":function(e){return this.property.fetch(e)}})}),csui.define("webreports/controls/table.report/impl/table.report.columns",["csui/lib/backbone"],function(e){var t=e.Model.extend({"idAttribute":"key","defaults":{"key":null,"sequence":0}});return new(e.Collection.extend({"model":t,"comparator":"sequence"}))}),csui.define("hbs!webreports/controls/table.report/impl/table.report",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r,n;return'    <div class="tile-header">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(2,o,0),"inverse":this.program(4,o,0)}))?r:"")+'\r\n        <div class="tile-title">\r\n             <h2 class="csui-heading">'+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+"</h2>\r\n        </div>\r\n\r\n    </div>\r\n"},"2":function(e,t,i,o){var r;return'            <div class="tile-type-icon">\r\n                <span class="icon '+this.escapeExpression((r=null!=(r=t.icon||(null!=e?e.icon:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon","hash":{}}):r))+'" aria-hidden="true"></span>\r\n            </div>\r\n'},"4":function(e,t,i,o){var r;return null!=(r=t.if.call(e,null!=e?e.imageUrl:e,{"name":"if","hash":{},"fn":this.program(5,o,0),"inverse":this.noop}))?r:""},"5":function(e,t,i,o){var r
;return'                <div class="tile-type-image '+this.escapeExpression((r=null!=(r=t.imageClass||(null!=e?e.imageClass:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"imageClass","hash":{}}):r))+'">\r\n                    <img src="'+this.escapeExpression((r=null!=(r=t.imageUrl||(null!=e?e.imageUrl:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"imageUrl","hash":{}}):r))+'" aria-hidden="true">\r\n                </div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return(null!=(r=t.if.call(e,null!=e?e.header:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.noop}))?r:"")+'\r\n<div class="webreports-tablereport-view">\r\n    <div id="tableview"></div>\r\n    <div id="paginationview"></div>\r\n</div>'}});return i.registerPartial("webreports_controls_table.report_impl_table.report",o),o}),csui.define("webreports/controls/table.report/impl/nls/table.report.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/table.report/impl/nls/root/table.report.lang",{"dialogTitle":"Table Report"}),csui.define("css!webreports/controls/table.report/impl/table.report",[],function(){}),csui.define("webreports/controls/table.report/table.report.view",["csui/lib/underscore","csui/lib/handlebars","csui/lib/marionette","csui/utils/contexts/factories/connector","csui/controls/table/table.view","csui/controls/pagination/nodespagination.view","csui/controls/mixins/layoutview.events.propagation/layoutview.events.propagation.mixin","webreports/utils/contexts/factories/table.report.factory","webreports/utils/table.validate","webreports/controls/table.report/impl/table.report.columns","hbs!webreports/controls/table.report/impl/table.report","i18n!webreports/controls/table.report/impl/nls/table.report.lang","css!webreports/controls/table.report/impl/table.report","css!webreports/style/webreports.css"],function(e,t,i,o,r,n,s,a,l,c,p,d){"use strict";var u=i.LayoutView.extend({"template":p,"regions":{"tableRegion":"#tableview","paginationRegion":"#paginationview"},"constructor":function(t){e.has(t.data,"columnsWithSearch")&&"string"==typeof t.data.columnsWithSearch&&(t.data.columnsWithSearch=[t.data.columnsWithSearch]),t.data.sortBy&&t.data.sortOrder&&(t.data.orderBy=t.data.sortBy+" "+t.data.sortOrder),this.options.tableColumns||(this.options.tableColumns=c),t.data.titleBarIcon=e.has(t.data,"titleBarIcon")?"title-icon "+t.data.titleBarIcon:"title-icon title-webreports",i.LayoutView.prototype.constructor.call(this,t),this.propagateEventsToRegions()},"initialize":function(){this.collection=this.options.collection||this.options.context.getCollection(a,{"attributes":this.options}),this.columns=this.options.context.getCollection(a,{"attributes":this.options})},"onRender":function(){this.collection?(this.tableView=new r({"context":this.options.context,"connector":this.options.context.getObject(o),"collection":this.collection,"columns":this.collection.columns,"tableColumns":this.options.tableColumns,"selectRows":this.options.data.selectRows||"none","columnsWithSearch":this.options.data.columnsWithSearch||[],"orderBy":this.options.data.orderBy||"","selectColumn":!1}),this.setPagination()):this.tableView&&(this.stopListening(this.tableView),delete this.tableView),this.tableRegion.show(this.tableView),this.paginationRegion.show(this.paginationView)},"templateHelpers":function(){var t={"title":this.options.data.title||d.dialogTitle,"icon":this.options.data.titleBarIcon||"title-webreports"};return!1!==this.options.data.header&&e.extend(t,{"header":!0}),t},"setPagination":function(){var e=l.checkPageSize(this.options.data.pageSize,this.options.data.pageSizeOptions),t=l.checkPageSizeOptions(this.options.data.pageSizeOptions,e);return this.paginationView=new n({"collection":this.collection,"defaultDDList":t,"pageSize":e}),!0}});return e.extend(u.prototype,s),u}),csui.define("webreports/widgets/table.report/impl/nls/table.report.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/table.report/impl/nls/root/table.report.lang",{"dialogTitle":"Table Report"}),csui.define("hbs!webreports/widgets/table.report/impl/table.report.tile",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r;return'        <div class="tile-type-icon">\r\n            <span class="icon title-icon '+this.escapeExpression((r=null!=(r=t.icon||(null!=e?e.icon:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon","hash":{}}):r))+'" aria-hidden="true"></span>\r\n        </div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r,n;return'<div class="tile-header">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.icon:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.noop}))?r:"")+'\r\n    <div class="tile-title">\r\n        <h2 class="csui-heading">'+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"title","hash":{}}):n))+'</h2>\r\n    </div>\r\n\r\n    <div class="tile-controls"></div>\r\n\r\n</div>\r\n\r\n<div class="tile-content"></div>\r\n\r\n<div class="tile-footer"></div>\r\n'}});return i.registerPartial("webreports_widgets_table.report_impl_table.report.tile",o),o}),csui.define("webreports/widgets/table.report/table.report.view",["csui/lib/underscore","csui/controls/tile/tile.view","webreports/controls/table.report/table.report.view","webreports/controls/nodestablereport/nodestablereport.view","i18n!webreports/widgets/table.report/impl/nls/table.report.lang","hbs!webreports/widgets/table.report/impl/table.report.tile","css!webreports/style/webreports.css"],function(e,t,i,o,r,n){return t.extend({"contentView":i,"template":n,"constructor":function(e){e.data&&(e.data.header=!1,e.data.sortBy&&e.data.sortOrder&&(e.data.orderBy=e.data.sortBy+" "+e.data.sortOrder)),this.contentViewOptions=e,t.prototype.constructor.apply(this,arguments)},"templateHelpers":function(){return{"title":this.options.data.title||r.dialogTitle,"icon":this.options.data.titleBarIcon||"title-webreports"}}})}),csui.define("json!webreports/widgets/table.report/table.report.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","supportedKinds":["fullpage"],"schema":{"type":"object","properties":{"title":{"title":"{{tileTitle}}","description":"{{tileDescription}}","type":"string"},"id":{"title":"{{sourceTitle}}","description":"{{sourceDescription}}","type":"integer"},"titleBarIcon":{"title":"{{headerIconTitle}}","description":"{{headerIconDescription}}","type":"string"},"columnsWithSearch":{"title":"{{columnFilterTitle}}","description":"{{columnFilterDescription}}","type":"string"},"sortBy":{"title":"{{sortTitle}}","description":"{{sortDescription}}","type":"string"},"sortOrder":{"title":"{{directionTitle}}","description":"{{directionDescription}}","type":"string","enum":["desc","asc"],"default":"desc"},"pageSize":{"title":"{{pageSizeTitle}}","description":"{{pageSizeDescription}}","type":"integer","enum":"pageSizeOptions","default":30},"pageSizeOptions":{"title":"{{pageSizeOptionsTitle}}","description":"{{pageSizeOptionsDescription}}","type":"array","default":[30,50,100]},"swrLaunchCell":{"type":"object","title":"{{swrLaunchCellTitle}}","description":"{{swrLaunchCellDescription}}","properties":{"id":{"title":"{{swrLaunchCellIDTitle}}","description":"{{swrLaunchCellIDDescription}}","type":"integer"},"iconClass":{"title":"{{swrLaunchCellIconClassTitle}}","description":"{{swrLaunchCellIconClassDescription}}","type":"string"},"hoverText":{"title":"{{swrLaunchCellHoverTextTitle}}","description":"{{swrLaunchCellHoverTextDescription}}","type":"string"}}},"parameters":{"type":"array","title":"{{parametersArrayTitle}}","description":"{{parametersArrayDescription}}","items":{"type":"object","title":"{{parameterObjectTitle}}","description":"{{parameterObjectDescription}}","properties":{"name":{"type":"string","title":"{{parameterNameTitle}}","description":"{{parameterNameDescription}}"},"value":{"type":"string","title":"{{parameterValueTitle}}","description":"{{parameterValueDescription}}"}}}}}},"required":["id","sortBy","sortOrder"],"options":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}},"sortOrder":{"type":"select","optionLabels":["{{optionsSortOrderDsc}}","{{optionsSortOrderAsc}}"]},"swrLaunchCell":{"fields":{"id":{"type":"otcs_node_picker","type_control":{"parameters":{"select_types":[30303]}}}}}}}}),csui.define("webreports/widgets/table.report/impl/nls/table.report.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/table.report/impl/nls/root/table.report.manifest",{"widgetTitle":"Table Report","widgetDescription":"This basic widget will take information from various sources and organize them into a table format","tileTitle":"Title","tileDescription":"Enter the title for the Table Report","sourceTitle":"Source WebReport","sourceDescription":"Browse to select the WebReport that retrieves the data that you want to render as a table","headerIconTitle":"Icon class","headerIconDescription":"Enter the CSS class for the icon that will appear in the header","columnFilterTitle":"Name of searchable column","columnFilterDescription":"Enter the name for the column that allows searching in the table header","optionsSortOrderDsc":"Descending","optionsSortOrderAsc":"Ascending","directionTitle":"Sort Direction","directionDescription":"Select whether to sort the column in Ascending or Descending order","pageSizeTitle":"Page Size","pageSizeDescription":"Set the number of objects that will be returned per page.","pageSizeOptionsTitle":"Page Size Options","pageSizeOptionsDescription":"Sets the available page size options","sortTitle":"Sort By","sortDescription":"Enter the column name of the default sort column","swrLaunchCellTitle":"Launch WebReport Column","swrLaunchCellDescription":"Show an icon in a table column to launch a WebReport","swrLaunchCellIDTitle":"Icon WebReport ID","swrLaunchCellIDDescription":"The ID of the WebReport that will launch when the icon is clicked","swrLaunchCellIconClassTitle":"Icon Class","swrLaunchCellIconClassDescription":"A CSS class to apply to the icon. Allows a custom icon to be defined","swrLaunchCellHoverTextTitle":"Icon Hover Text","swrLaunchCellHoverTextDescription":"Specify custom hover text to show when loading the icon","parametersArrayTitle":"Source Parameters","parametersArrayDescription":"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required","parameterObjectTitle":"Source Parameters","parameterObjectDescription":"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required","parameterNameTitle":"Parameter Name","parameterNameDescription":"The name of the URL parameter","parameterValueTitle":"Parameter Value","parameterValueDescription":"The value of the URL parameter"}),csui.define("hbs!webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r;return'\t\t<span class="icon arrow_back cs-go-back" title="'+this.escapeExpression((r=null!=(r=t.go_back_tooltip||(null!=e?e.go_back_tooltip:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"go_back_tooltip","hash":{}}):r))+'" role="link"></span>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r,n;return'<div class="csui-title-container">\r\n'+(null!=(r=t.if.call(e,null!=e?e.back_button:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.noop}))?r:"")+'\t<span id="" class="title">'+this.escapeExpression((n=null!=(n=t.webreport_name||(null!=e?e.webreport_name:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"webreport_name","hash":{}}):n))+"</span>\r\n</div>"}});return i.registerPartial("webreports_widgets_parameter.prompt.form_impl_header_parameter.prompt.header",o),o}),csui.define("webreports/widgets/parameter.prompt.form/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/parameter.prompt.form/impl/nls/root/lang",{"goBackTooltip":"Go back","runWebReport":"Run WebReport","cancel":"Cancel"}),csui.define("css!webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header",[],function(){}),csui.define("webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","hbs!webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header","i18n!webreports/widgets/parameter.prompt.form/impl/nls/lang","css!webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header"],function(e,t,i,o,r,n,s){return o.ItemView.extend({"className":"webreport-parameter-prompt-header","template":n,"ui":{"backArrow":".cs-go-back"},"triggers":{"click @ui.backArrow":"onClickBackArrow"},"constructor":function(e){e||(e={}),this.options=e,o.ItemView.prototype.constructor.call(this,e)},"templateHelpers":function(){var t=e.has(this.model,"models")?this.model.models[0]:this.model,i=!e.has(this.options,"showBackIcon")||this.options.showBackIcon;return{"webreport_name":t.get("name"),"go_back_tooltip":s.goBackTooltip,"back_button":i}},"onClickHeader":function(e){e.preventDefault(),e.stopPropagation()}})}),csui.define("hbs!webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return'<button type="button" class="binf-btn binf-btn-primary submitWR">'+this.escapeExpression((r=null!=(r=t.runWebReport||(null!=e?e.runWebReport:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"runWebReport","hash":{}}):r))+'</button>\r\n<button type="button" class="binf-btn binf-btn-secondary cancelWR">'+this.escapeExpression((r=null!=(r=t.cancel||(null!=e?e.cancel:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"cancel","hash":{}}):r))+"</button>"}});return i.registerPartial("webreports_widgets_parameter.prompt.form_impl_footer_parameter.prompt.footer",o),o}),csui.define("css!webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer",[],function(){}),csui.define("webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/backbone","csui/lib/marionette","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/commands","hbs!webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer","i18n!webreports/widgets/parameter.prompt.form/impl/nls/lang","css!webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer"],function(e,t,i,o,r,n,s,a){return o.ItemView.extend({"className":"webreport-parameter-prompt-footer","template":s,"templateHelpers":function(){return{"cancel":a.cancel,"runWebReport":a.runWebReport}},"ui":{"submitWR":"button.submitWR","cancelWR":"button.cancelWR"},"triggers":{"click @ui.submitWR":"submitWR","click @ui.cancelWR":"cancelWR"},"constructor":function(e){e||(e={}),this.options=e,this.node=this.options.model,o.ItemView.prototype.constructor.call(this,e)}})}),csui.define("webreports/models/run.webreport.pre/run.webreport.pre.model",["csui/lib/jquery","csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/models/form","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o,r,n){"use strict";var s=r.extend({"parametersModel":void 0,"destinationModel":void 0,"constructor":function(e,t){this.options=t||(t={}),i.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(t)},"url":function(){var t=this.connector,i={"id":this.options.id},r="forms/nodes/run?"+e.param(i);return o.Url.combine(t.connection.url,r)},"parse":function(e){return this.parametersModel=new i.Model(e.data.parameters_data),this.destinationModel=new i.Model(e.data.destination_data),e.forms[0]}});return n.mixin(s.prototype),s}),csui.define("webreports/utils/contexts/factories/run.webreport.pre.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/run.webreport.pre/run.webreport.pre.model"],function(e,t,i,o){return t.extend({"propertyPrefix":"runwebreportpre","constructor":function(r,n){e.has(n,"attributes")&&delete n.attributes,e.has(n,this.propertyPrefix)&&e.has(n[this.propertyPrefix],"attributes")&&delete n[this.propertyPrefix].attributes,t.prototype.constructor.apply(this,arguments);var s=r.getObject(i,n),a=e.extend(n.options,{"connector":s});this.property=new o({},a)}})}),csui.define("webreports/utils/commands/open.classic.webreport",["csui/lib/underscore","csui/utils/commandhelper","csui/utils/commands/open.classic.page"],function(e,t,i){return i.extend({"defaults":{"signature":"OpenClassicWebReport","scope":"single"},"enabled":function(e){var i=t.getJustOneNode(e);return i&&30303===i.get("type")},"getUrlQueryParameters":function(t,i){var o={"func":"ll","objAction":"RunReport","objId":t.get("id"),"nexturl":location.href};return e.has(i,"parameters")&&(o=e.extend(o,i.parameters)),o}})}),csui.define("webreports/models/run.webreport/run.webreport.model",["csui/lib/underscore","csui/lib/backbone","csui/utils/base","csui/models/mixins/connectable/connectable.mixin"],function(e,t,i,o){var r=t.Model.extend({"constructor":function(e,i){this.options=i||{},t.Model.prototype.constructor.apply(this,arguments),this.makeConnectable(this.options)},"url":function(){var t,o=this.options,r=o.id,n=this.connector,s="nodes/"+r+"/output";return e.has(o,"parameters")&&!e.isArray(o.parameters)&&e.isObject(o.parameters)&&(t=o.parameters,s=s+"?"+i.Url.combineQueryString(t)),i.Url.combine(n.connection.url,s)},"parse":function(i,o){return e.has(o,"destinationModel")?o.destinationModel.set(i.data.destination_data,o):o.destinationModel=new t.Model(i.data.destination_data),i},"clearParameters":function(){e.has(this,"options")&&e.has(this.options,"parameters")&&delete this.options.parameters}});return o.mixin(r.prototype),r}),csui.define("webreports/utils/contexts/factories/run.webreport.factory",["csui/lib/underscore","csui/utils/contexts/factories/factory","csui/utils/contexts/factories/connector","webreports/models/run.webreport/run.webreport.model"],function(e,t,i,o){return t.extend({"propertyPrefix":"runwrmodel","constructor":function(r,n){e.has(n,"attributes")&&delete n.attributes,e.has(n,this.propertyPrefix)&&e.has(n[this.propertyPrefix],"attributes")&&delete n[this.propertyPrefix].attributes,t.prototype.constructor.apply(this,arguments);var s=r.getObject(i,n),a=e.extend(n.options,{"connector":s});e.has(n,"parameters")&&(a=e.extend(a,{"parameters":n.parameters})),this.property=new o({},a)}})}),csui.define("webreports/controls/run.webreport.pre/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/run.webreport.pre/impl/nls/root/lang",{"WebReportParameters":"WebReport Parameters","RunWebReport":"Run WebReport","Cancel":"Cancel","WebReportExecutedSuccessfully":"WebReport executed successfully","WebReportExecutingInBackground":"WebReport is executing in background","anErrorOccurredExecutingTheWebReport":"An error occurred executing the WebReport","okLabel":"OK"}),csui.define("webreports/utils/commands/execute.webreport",["csui/lib/underscore","csui/lib/jquery","csui/utils/base","csui/utils/commandhelper","csui/models/command","csui/controls/globalmessage/globalmessage","webreports/utils/contexts/factories/run.webreport.factory","i18n!webreports/controls/run.webreport.pre/impl/nls/lang"],function(e,t,i,o,r,n,s,a){return r.extend({"defaults":{"signature":"ExecuteWebReport","scope":"single"},"enabled":function(e){var t=o.getJustOneNode(e);return t&&30303===t.get("type")},"convertParametersToFormData":function(t){var i="";return e.isObject(t)&&!e.isArray(t)&&e.each(t,function(e,t,o){var r,n;r=encodeURI(t),n=encodeURI(e),i.length?i+="&"+r+"="+n:i+=r+"="+n}),i},"execute":function(o,r){var a,l,c="read",p=t.Deferred(),d=r.destinationModel,u=d.get("http_method"),h=u.toLowerCase(),m=d.get("run_in_background"),b={"attributes":{"id":r.node.get("id")},"options":{"id":r.node.get("id")}},f=e.has(r,"parameters");if(a=r.context.getModel(s,b),"get"===h)c="read",f&&e.has(a,"options")&&(a.options=e.extend(a.options,{"parameters":r.parameters}));else{switch(h){case"post":c="create";break;case"put":c="update";break;case"patch":c="patch";break;case"delete":c="delete"}f&&(l=this.convertParametersToFormData(r.parameters))}return a.sync(c,a,{"data":l,"success":function(e){if(e){var t=a.parse(e,r);a.set(t,r)}a.clearParameters(),p.resolve(arguments,a)},"error":function(e,t,o){var r=new i.Error(e);n.showMessage("error",r.message,r.errorDetails),a.clearParameters(),p.reject()}}),m&&p.resolve([{},"success"],a,!0),p.promise()}})}),csui.define("webreports/controls/run.webreport.pre/run.webreport.pre.controller",["csui/lib/underscore","csui/lib/jquery","csui/models/nodes","csui/utils/command.error","csui/controls/globalmessage/globalmessage","csui/controls/progressblocker/blocker","webreports/utils/contexts/factories/run.webreport.pre.factory","webreports/utils/commands/open.classic.webreport","webreports/utils/commands/execute.webreport","i18n!webreports/controls/run.webreport.pre/impl/nls/lang"],function(_,$,NodeCollection,CommandError,GlobalMessage,BlockingView,RunWRPreModelFactory,OpenClassicWebReport,ExecuteWebReportCommand,lang){"use strict";function RunWebReportPreController(){}return _.extend(RunWebReportPreController.prototype,{"runWRPreModel":void 0,"destinationModel":void 0,"parametersModel":void 0,"_getCommandStatus":function(){return void 0===this.commandStatus?{"nodes":new NodeCollection(this.options.node)}:this.commandStatus},"switchToPromptView":function(e,t){var i,o,r=this,n=$.Deferred(),s=this._getCommandStatus(),a=s.nodes,l=s.container;return a&&a.first()===l?(a=l,!1):this._getAtLeastOneNode(s),i=s.context||t&&t.context,o=s.originatingView||t.originatingView,csui.require(["csui/lib/marionette","csui/lib/backbone","webreports/widgets/parameter.prompt.form/parameter.prompt.form.view","csui/controls/dialog/dialog.view","csui/utils/contexts/factories/next.node","csui/utils/contexts/factories/previous.node","csui/utils/contexts/factories/node","csui/widgets/nodestable/nodestable.view"],function(e,t,l,c,p,d,u,h){var m,b,f,w={},g=i.getModel(d),v=i.getModel(p),y=i.getModel(u),x={"RunWRController":r,"model":a,"originatingView":o,"context":i,"showCloseIcon":!o,"showBackIcon":!!o};if(g.clear({"silent":!0}),g.set(y.attributes),v.clear({"silent":!0}),_.has(r.options,"parameters")){m=r.runWRPreModel.attributes.data;for(b in r.options.parameters)_.has(m,b)&&(w[b]=r.options.parameters[b]);r.runWRPreModel.set("data",w)}if(f=new l(x),o instanceof h){var C,k,I=o.$el;I.width();I.parent().append("<div class='wr-prompt-parameters-wrapper'></div>"),k=$(I.parent().find(".wr-prompt-parameters-wrapper")[0]),k.hide(),f.render(),e.triggerMethodOn(f,"before:show"),k.append(f.el),I.hide("blind",{"direction":"left","complete":function(){k.show("blind",{"direction":"right","complete":function(){e.triggerMethodOn(f,"show")}},100)}},100),I.promise().done(function(){o.isDisplayed=!1,n.resolve()}),C=function(){k.hide("blind",{"direction":"right","complete":function(){I.show("blind",{"direction":"left","complete":function(){o.triggerMethod("dom:refresh"),o.isDisplayed=!0,!!s.collection&&(s.collection.requireSwitched=!1)}},100),f.destroy(),k.remove(),n.resolve()}},100)},t.listenTo(f,"promptView:close",_.bind(C,r)),t.listenTo(f,"promptView:close:without:animation",function(){I.show("blind",{"direction":"left","complete":function(){o.triggerMethod("dom:refresh"),!!s.collection&&(s.collection.requireSwitched=!1)}},100),f.destroy(),k.remove(),n.resolve()})}else r.dialog=new c({"className":"wr-prompt-parameters","largeSize":!0,"view":f}),r.dialog.show(),r.dialog.ui.header.hide(),r.dialog.listenTo(f,"promptView:close",function(){r.dialog.destroy(),n.resolve()}),r.dialog.listenTo(f,"promptView:close:without:animation",function(){r.dialog.destroy(),n.resolve()})},function(e){n.reject(new CommandError(e))}),n.promise()},"_getAtLeastOneNode":function(e){return e.nodes?1===e.nodes.length&&e.collection?e.collection:e.nodes:new NodeCollection},"checkForPromptParameters":function(e){var t,i=this,o=$.Deferred();return this.options=e,this._blockParentActions(),this.getRunWRPreModel(e).done(function(){t=i._checkPrompts(),o.resolve(t)}).fail(function(){i._unblockParentActions(),o.reject()}),o.promise()},"getFormView":function(e){var t,i,o=_.has(this,"runWRPreModel")?this.runWRPreModel:_.has(e,"promptModel")?e.promptModel:void 0,r=$.Deferred();return void 0!==o?(i=o.get("schema"),i.title="",o.set("schema",i),csui.require(["csui/controls/form/form.view"],function(i){t=new i({"context":e.context,"model":o}),r.resolve(t)},function(e){r.reject()})):r.reject(),r.promise()},"executeWR":function(e){var t,i,o,r=this,n=(this.options.node,_.extend(this.options,{"destinationModel":this.destinationModel}),this.destinationModel);n.get("output_destination");i=this._checkExecutionRoute(),"classic"===i?(this.openInClassic(e),this._unblockParentActions()):(t=new ExecuteWebReportCommand,o=this.commandStatus,void 0!==e&&(_.extend(e,{"prompting":"done"}),this.options.parameters=e,this._blockParentActions()),t.enabled(o)&&t.execute(o,this.options).done(function(e,t,i){e[0],e[1];!0===r.destinationModel.get("show_status_screen")?(r.statusScreenOptions=_.extend(r.options,{"executeModel":t,"runInBackground":i}),r.showStatusScreen()):r._unblockParentActions()}).fail(function(){r._unblockParentActions()}))},"openInClassic":function(e){var t,i=new OpenClassicWebReport;if(void 0!==e&&(_.extend(e,{"prompting":"done"}),this.options.parameters=e),void 0===this.commandStatus)return!1;t=this.commandStatus,i.execute(t,this.options)},"getRunWRPreModel":function(e){var t=this,i=$.Deferred();return this.runWRPreModel=e.context.getModel(RunWRPreModelFactory,{"attributes":{"id":e.node.get("id")},"options":{"id":e.node.get("id")}}),this.runWRPreModel.fetch().done(function(e,o,r){t.destinationModel=t.runWRPreModel.destinationModel,t.parametersModel=t.runWRPreModel.parametersModel,i.resolve()}),i.promise()},"additionalModelMap":{"node":{"primary":"outputData.node_id","secondary":"destination_data.destination_specific.create_in_id"},"version":{"primary":"destination_data.destination_specific.add_version_to_id"},"workflow":{"primary":"destination_data.destination_specific.workflow_map_id","secondary":"outputData.work_id"}},"_getStatusScreenModels":function(){var options=this.statusScreenOptions,outputData=options.executeModel.get("data"),destination_data=outputData.destination_data,self=this,deferred=$.Deferred();csui.require(["csui/utils/contexts/factories/node","workflow/models/workitem/workitem.model.factory"],function(NodeFactory,WorkItemModelFactory){var primaryID,secondaryID,primaryFactory,primaryNode,secondaryNode,secondaryFactory,promises=[],target=destination_data.output_destination;"node"===target&&_.has(destination_data.destination_specific,"add_version_to_id")&&(target="version"),primaryFactory=NodeFactory,secondaryFactory=NodeFactory,primaryID=eval(self.additionalModelMap[target].primary),"workflow"===destination_data.output_destination?!0===destination_data.destination_specific.workflow_attach_output?(secondaryFactory=WorkItemModelFactory,secondaryID=eval(self.additionalModelMap[target].secondary)):secondaryID=void 0:secondaryID=eval(self.additionalModelMap[target].secondary),primaryNode=options.context.getModel(primaryFactory,{"attributes":{"id":primaryID}}),promises.push(primaryNode.fetch()),void 0!==secondaryID&&(secondaryNode=options.context.getModel(secondaryFactory,{"attributes":{"id":secondaryID}}),"workflow"===destination_data.output_destination&&!0===destination_data.destination_specific.workflow_attach_output&&secondaryNode.set({"process_id":secondaryID,"subprocess_id":secondaryID,"task_id":1},{"silent":!0}),promises.push(secondaryNode.fetch())),$.whenAll.apply($,promises).then(function(e){var t,i,o;options.primaryNode=primaryNode,options.secondaryNode=secondaryNode,"workflow"===destination_data.output_destination&&!0===destination_data.destination_specific.workflow_attach_output?secondaryNode.has("data_packages")?(t=secondaryNode.get("data_packages"),_.isArray(t)&&t.length>0&&_.has(t[0],"data")&&_.has(t[0].data,"attachment_folder_id")?(i=t[0].data.attachment_folder_id,o=options.context.getModel(NodeFactory,{"attributes":{"id":i}}),o.fetch().then(function(){self.options.wfAttachmentsNode=o,self._renderStatusScreen()})):(console.warn("The dataID for the Workflow Attachments is not available."),self._unblockParentActions())):(console.log("Could not get data packages from Worklow model."),self._unblockParentActions()):self._renderStatusScreen()})},function(e){self._unblockParentActions()})},"_renderStatusScreen":function(){var e,t,i,o=this,r=this.statusScreenOptions,n=r.destinationModel.get("destination_specific"),s=r.destinationModel.get("output_destination"),a=$.Deferred();"node"===s&&_.has(n,"add_version_to_id")&&(s="version"),e=r.destinationModel.get("run_in_background")?lang.WebReportExecutingInBackground:lang.WebReportExecutedSuccessfully,this._unblockParentActions(),csui.require(["csui/controls/dialog/dialog.view","webreports/controls/status.screen/status.screen.view"],function(n,s){t=new n({"title":e,"buttons":[{"label":lang.okLabel,"close":!0,"click":_.bind(o._unblockParentActions,o)}]}),i=new s(_.extend(r,{"dialogView":t})),t.options.view=i,i.on("onClickNodeLink",_.bind(o._unblockParentActions,o)).on("onClickSecondaryLink",_.bind(o._unblockParentActions,o)),t.show(),a.resolve()},function(){a.reject()})},"showStatusScreen":function(){var e=this.statusScreenOptions,t=e.runInBackground,i=t?e.destinationModel.toJSON():e.executeModel.get("data").destination_data;!t&&i.output_destination in this.additionalModelMap?this._getStatusScreenModels():this._renderStatusScreen()},"_checkExecutionRoute":function(e){var t;switch(this.destinationModel.get("output_destination")){case"browser":case"desktop":t="classic";break;default:t="smart_ui"}return t},"_checkPrompts":function(){var e,t,i,o,r,n="noPrompts",s=this.parametersModel,a=s.get("prompt_file_id"),l=this.runWRPreModel,c=this;if(void 0!==l)if(void 0!==a&&""!==a)n="showClassicPrompts";else if(o=l.get("schema"),r=l.get("options"),void 0!==o&&void 0!==r)for(e in o.properties)if(o.properties.hasOwnProperty(e)&&(t=o.properties[e],i=r.fields[e],!1===i.hidden)){if("Custom"===t.type){n="showClassicPrompts";break}n="showSmartPrompts"}return"showSmartPrompts"===n?this.switchToPromptView(status,this.options).done(function(){c._unblockParentActions()}):"showClassicPrompts"===n?(this.openInClassic(),this._unblockParentActions()):this.executeWR(this.options.parameters),n},"_blockParentActions":function(){var e;_.has(this,"options")&&_.has(this.options,"originatingView")?(e=this.options.originatingView,e&&e.blockActions&&e.blockActions(),e&&e.tableView&&e.tableView.blockActions&&e.tableView.blockActions()):console.log("Prepping WebReport...")},"_unblockParentActions":function(){var e;_.has(this,"options")&&_.has(this.options,"originatingView")&&(e=this.options.originatingView,e&&e.unblockActions&&e.unblockActions(),e&&e.tableView&&e.tableView.unblockActions&&e.tableView.unblockActions())}}),_.extend(RunWebReportPreController,{"version":"1.0"}),RunWebReportPreController}),csui.define("hbs!webreports/widgets/parameter.prompt.form/impl/parameter.prompt.layout",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){
return'<div class="webreport-parameter-prompt">\r\n\t<div class="webreport-parameter-prompt-header-container"></div>\r\n\t<div class="webreport-parameter-prompt-content-container"></div>\r\n\t<div class="webreport-parameter-prompt-footer-container"></div>\r\n</div>'}});return i.registerPartial("webreports_widgets_parameter.prompt.form_impl_parameter.prompt.layout",o),o}),csui.define("css!webreports/widgets/parameter.prompt.form/impl/parameter.prompt",[],function(){}),csui.define("webreports/widgets/parameter.prompt.form/parameter.prompt.form.view",["csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/base","csui/models/node/node.model","csui/utils/contexts/factories/node","csui/controls/mixins/view.events.propagation/view.events.propagation.mixin","csui/utils/nodesprites","csui/controls/progressblocker/blocker","webreports/widgets/parameter.prompt.form/impl/header/parameter.prompt.header.view","webreports/widgets/parameter.prompt.form/impl/footer/parameter.prompt.footer.view","csui/utils/commandhelper","csui/utils/commands","webreports/controls/run.webreport.pre/run.webreport.pre.controller","i18n!webreports/widgets/parameter.prompt.form/impl/nls/lang","hbs!webreports/widgets/parameter.prompt.form/impl/parameter.prompt.layout","css!webreports/widgets/parameter.prompt.form/impl/parameter.prompt"],function(e,t,i,o,r,n,s,a,l,c,p,d,u,h,m,b){return i.LayoutView.extend({"template":b,"regions":{"header":".webreport-parameter-prompt-header-container","content":".webreport-parameter-prompt-content-container","footer":".webreport-parameter-prompt-footer-container"},"constructor":function(t){i.LayoutView.prototype.constructor.call(this,t),this.options=t,this.RunWRController=e.has(t,"RunWRController")?t.RunWRController:new h,l.imbue(this)},"childEvents":{"submitWR":"submitWR","cancelWR":"cancelWR","onClickBackArrow":"_closePromptView","show:prompt:form":"showPromptForm"},"onBeforeShow":function(){var e=this,t=this.options||{};this.blockActions(),this.RunWRController.getFormView(t).done(function(t){void 0!==t&&e.showChildView("content",t),e.unblockActions()}),this.showChildView("header",new c(t)),this.showChildView("footer",new p(t)),this.listenTo(this.getChildView("header"),"promptView:close",function(){e.trigger("promptView:close")}).listenTo(t.context,"request",function(){e._closePromptView()}).listenTo(t.context,"request:perspective",function(){e._closePromptView()})},"_blockActions":function(){var e=this.options.originatingView;e&&e.blockActions&&e.blockActions()},"_unblockActions":function(){var e=this.options.originatingView;e&&e.unblockActions&&e.unblockActions()},"submitWR":function(){var t,i,o,r=this.getRegion("content").currentView;if(!0===r.validate()){if(i=r.getValues(),e.has(r,"alpaca")&&e.has(r.alpaca,"schema")&&e.has(r.alpaca.schema,"properties")){o=r.alpaca.schema.properties;for(t in o)"number"===o[t].type&&isNaN(i[t])&&(i[t]="")}this.RunWRController.executeWR(i),this._closePromptView()}},"cancelWR":function(){this._closePromptView()},"_closePromptView":function(){var e=this.options.model;1===e.get("type")&&e.original&&0===e.original.get("type")?this.trigger("promptView:close"):this.trigger("promptView:close:without:animation")}})}),csui.define("json!webreports/widgets/parameter.prompt.form/parameter.prompt.form.manifest.json",{"$schema":"http://opentext.com/cs/json-schema/draft-04/schema#","title":"{{widgetTitle}}","description":"{{widgetDescription}}","kind":"fullpage","schema":{"type":"object","properties":{}},"options":{}}),csui.define("webreports/widgets/parameter.prompt.form/impl/nls/parameter.prompt.form.manifest",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/widgets/parameter.prompt.form/impl/nls/root/parameter.prompt.form.manifest",{"widgetTitle":"Parameter Prompt Widget","widgetDescription":"Displays a form to prompt the user for information based on the WebReports' Parameters settings","idTitle":"ID","idDescription":"The WebReport node for which to show the prompts"}),csui.define("webreports/utils/commands/defaultactionitems",[],function(){"use strict";return[{"equals":{"type":[30303]},"signature":"OpenWebReport","sequence":30}]}),csui.define("webreports/utils/commands/open.webreport",["require","csui/lib/underscore","csui/lib/jquery","csui/lib/marionette","csui/utils/command.error","csui/utils/commandhelper","csui/models/command","csui/models/nodes","webreports/controls/run.webreport.pre/run.webreport.pre.controller"],function(e,t,i,o,r,n,s,a,l){return s.extend({"constructor":function(){s.prototype.constructor.call(this),this.RunWRController=new l},"defaults":{"signature":"OpenWebReport","scope":"single"},"enabled":function(e){var t=n.getJustOneNode(e);return t&&30303===t.get("type")},"execute":function(e,o){var r=i.Deferred();return t.has(o,"node")||(o.node=e.nodes.models[0]),this.RunWRController.commandStatus=e,this.RunWRController.checkForPromptParameters(o).done(function(){r.resolve()}).fail(function(e){r.reject()}),r.promise()}})}),csui.define("hbs!webreports/controls/status.screen/impl/status.screen",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"1":function(e,t,i,o){var r;return'\r\n\t\t<div class="webreport-status-screen-row webreport-status-screen-data">\r\n\t\t\t<div class="webreports-destination-icon-container icon_status_task_running_behind" aria-hidden="true"></div>\r\n\t\t\t<div class="webreports-destination-status-description">\r\n\t\t\t\t<p>'+this.escapeExpression((r=null!=(r=t.runningInBackground||(null!=e?e.runningInBackground:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"runningInBackground","hash":{}}):r))+"</p>\r\n\t\t\t\t<p>"+this.escapeExpression((r=null!=(r=t.noFurtherResponse||(null!=e?e.noFurtherResponse:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"noFurtherResponse","hash":{}}):r))+"</p>\r\n\t\t\t\t<br>\r\n\t\t\t\t<p>"+this.escapeExpression((r=null!=(r=t.outputMessage||(null!=e?e.outputMessage:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"outputMessage","hash":{}}):r))+"</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n"},"3":function(e,t,i,o){var r;return null!=(r=t.if.call(e,null!=e?e.useConversion:e,{"name":"if","hash":{},"fn":this.program(4,o,0),"inverse":this.program(6,o,0)}))?r:""},"4":function(e,t,i,o){var r;return'\r\n\t\t<div class="webreport-status-screen-row webreport-status-screen-data">\r\n\t\t\t<div class="webreports-destination-icon-container icon_status_task_delayed" aria-hidden="true"></div>\r\n\t\t\t<div class="webreports-destination-status-description">\r\n\t\t\t\t<p>'+this.escapeExpression((r=null!=(r=t.sentForConversion||(null!=e?e.sentForConversion:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"sentForConversion","hash":{}}):r))+"</p>\r\n\t\t\t\t<br>\r\n\t\t\t\t<p>"+this.escapeExpression((r=null!=(r=t.outputMessage||(null!=e?e.outputMessage:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"outputMessage","hash":{}}):r))+"</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n"},"6":function(e,t,i,o){var r,n;return'\r\n\t\t<div class="webreport-status-screen-row webreport-status-screen-data">\r\n'+(null!=(r=t.if.call(e,null!=e?e.iconClass:e,{"name":"if","hash":{},"fn":this.program(7,o,0),"inverse":this.noop}))?r:"")+'\t\t\t<div class="webreports-destination-status-description">\r\n\t\t\t\t<p>'+this.escapeExpression((n=null!=(n=t.destinationMessage||(null!=e?e.destinationMessage:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"destinationMessage","hash":{}}):n))+"</p>\r\n\t\t\t\t"+(null!=(r=t.if.call(e,null!=e?e.primaryData2:e,{"name":"if","hash":{},"fn":this.program(9,o,0),"inverse":this.noop}))?r:"")+"\r\n\t\t\t\t<p>\r\n"+(null!=(r=t.if.call(e,null!=e?e.primaryIsLink:e,{"name":"if","hash":{},"fn":this.program(11,o,0),"inverse":this.program(13,o,0)}))?r:"")+"\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n"+(null!=(r=t.if.call(e,null!=e?e.dualRows:e,{"name":"if","hash":{},"fn":this.program(15,o,0),"inverse":this.noop}))?r:"")+"\r\n\t"},"7":function(e,t,i,o){var r;return'\t\t\t\t<div class="webreports-destination-icon-container '+this.escapeExpression((r=null!=(r=t.iconClass||(null!=e?e.iconClass:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"iconClass","hash":{}}):r))+'" aria-hidden="true"></div>\r\n'},"9":function(e,t,i,o){var r;return"<br><p>"+this.escapeExpression((r=null!=(r=t.primaryData2||(null!=e?e.primaryData2:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"primaryData2","hash":{}}):r))+"</p>"},"11":function(e,t,i,o){var r;return'\t\t\t\t\t\t<a id="primaryNodeLink" href="#">'+this.escapeExpression((r=null!=(r=t.primaryData||(null!=e?e.primaryData:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"primaryData","hash":{}}):r))+"</a>\r\n"},"13":function(e,t,i,o){var r;return'\t\t\t\t\t\t<span class="webreports-status-screen-highlighted-text">'+this.escapeExpression((r=null!=(r=t.primaryData||(null!=e?e.primaryData:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"primaryData","hash":{}}):r))+"</span>\r\n"},"15":function(e,t,i,o){var r,n;return'\t\t<div class="webreport-status-screen-row webreport-status-screen-misc-data">\r\n'+(null!=(r=t.if.call(e,null!=e?e.secondaryIconClass:e,{"name":"if","hash":{},"fn":this.program(16,o,0),"inverse":this.noop}))?r:"")+'\t\t\t<div class="webreports-destination-status-description">\r\n\t\t\t\t<p>'+this.escapeExpression((n=null!=(n=t.secondaryNodeInfo||(null!=e?e.secondaryNodeInfo:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"secondaryNodeInfo","hash":{}}):n))+'</p>\r\n\t\t\t\t<p><a id="secondaryNodeLink" href="#">'+this.escapeExpression((n=null!=(n=t.secondaryData||(null!=e?e.secondaryData:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{"name":"secondaryData","hash":{}}):n))+"</a></p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n"},"16":function(e,t,i,o){var r;return'\t\t\t\t<div class="webreports-destination-icon-container '+this.escapeExpression((r=null!=(r=t.secondaryIconClass||(null!=e?e.secondaryIconClass:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"secondaryIconClass","hash":{}}):r))+'" aria-hidden="true"></div>\r\n'},"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return'<div class="webreport-status-screen-container">\r\n\r\n'+(null!=(r=t.if.call(e,null!=e?e.runInBackground:e,{"name":"if","hash":{},"fn":this.program(1,o,0),"inverse":this.program(3,o,0)}))?r:"")+"\r\n\r\n</div>"}});return i.registerPartial("webreports_controls_status.screen_impl_status.screen",o),o}),csui.define("webreports/controls/status.screen/impl/nls/lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/status.screen/impl/nls/root/lang",{"genericIsProcessingMessage":"The output of this report will be processed according to the parameters set under the Destination tab for this WebReport.","runningInBackground":"This report is being run as a background task.","noFurtherResponse":"You will not receive any further response for this report.","sentForConversion":"This report has been sent for conversion.","versionDestinationMessage":"WebReport data has been added as a new version to the Content Server Document called:","nodeDestinationMessage":"WebReport data has been sent to a new Content Server {0} called:","storedInContainer":"Stored in container:","emailDestinationMessage":"Report data has been sent as an email successfully.","formAppendDestinationMessage":"New rows added to the Form:","formOverwriteDestinationMessage":"Existing Form data cleared.","formOverwriteDestinationMessage2":"New rows added to the Form:","formUpdateDestinationMessage":"Rows updated in the Form:","serverDestinationMessage":"The report output has been successfully downloaded to the server.","ftpDestinationMessage":"The report output has been successfully sent to the FTP server.","workflowDestinationMessage":"The following Workflow was successfully initiated:","workflowAttachmentMessage":"The WebReport output was attached and can be found here:","unknownWebReportDestination":"Unknown WebReport destination: ","document":"Document","customView":"Custom View","attachments":"Attachments"}),csui.define("css!webreports/controls/status.screen/impl/status.screen",[],function(){}),csui.define("webreports/controls/status.screen/status.screen.view",["csui/lib/underscore","csui/lib/marionette","csui/controls/node-type.icon/node-type.icon.view","csui/utils/node.links/node.links","csui/behaviors/default.action/default.action.behavior","csui/utils/smart.nodes/smart.nodes","hbs!webreports/controls/status.screen/impl/status.screen","i18n!webreports/controls/status.screen/impl/nls/lang","css!webreports/controls/status.screen/impl/status.screen"],function(e,t,i,o,r,n,s,a){return t.ItemView.extend({"className":"custom-message","template":s,"ui":{"iconContainer":".webreport-status-screen-data","secondaryContainer":".webreport-status-screen-misc-data","parentLink":".parentLink"},"events":{"click #primaryNodeLink":"onClickNodeLink","click #secondaryNodeLink":"onClickSecondaryLink"},"behaviors":{"DefaultAction":{"behaviorClass":r}},"onClickNodeLink":function(e){e.preventDefault(),this.triggerMethod("execute:defaultAction",this.options.primaryNode),n.isSupported(this.options.primaryNode)&&this.options.dialogView.triggerMethod("click:close",e)},"onClickSecondaryLink":function(t){var i,o=this.options.destinationModel.get("output_destination");t.preventDefault(),i="workflow"===o&&e.has(this.options,"wfAttachmentsNode")?this.options.wfAttachmentsNode:this.options.secondaryNode,this.triggerMethod("execute:defaultAction",i),n.isSupported(i)&&this.options.dialogView.triggerMethod("click:close",t)},"templateHelpers":function(){var t,i,r,n=this.options.destinationModel,s=this.options.executeModel,l=n.get("run_in_background")?n.toJSON():s.get("data"),c=n.get("run_in_background")?l:l.destination_data,p=c.destination_specific,d=c.use_conversion_engine,u=c.run_in_background,h=a.genericIsProcessingMessage,m={"useConversion":d,"runInBackground":u};if(u)m=e.extend(m,{"runningInBackground":a.runningInBackground,"noFurtherResponse":a.noFurtherResponse,"outputMessage":h});else if(d)m=e.extend(m,{"sentForConversion":a.sentForConversion,"outputMessage":h});else switch(c.output_destination.toLowerCase()){case"node":t=this.options.primaryNode,i=this.options.secondaryNode,m="version"===p.export_type.toLowerCase()||"addver"===p.duplicate_name_action.toLowerCase()?e.extend(m,{"primaryData":t.get("name"),"primaryIsLink":!0,"destinationMessage":a.versionDestinationMessage,"dualRows":!1}):e.extend(m,{"primaryData":t.get("name"),"primaryIsLink":!0,"destinationMessage":e.str.sformat(a.nodeDestinationMessage,"doc"===p.node_type?a.document:a.customView),"secondaryNodeInfo":a.storedInContainer,"parentURL":o.getUrl(i),"secondaryData":i.get("name"),"dualRows":!0});break;case"email":m=e.extend(m,{"primaryIsLink":!1,"destinationMessage":a.emailDestinationMessage,"primaryData":p.email_subject,"dualRows":!1,"iconClass":"icon_status_email_sent"});break;case"form":switch(p.append_form){case"append":r=a.formAppendDestinationMessage;break;case"overwrite":r=a.formOverwriteDestinationMessage,e.extend(m,{"primaryData2":a.formOverwriteDestinationMessage2});break;case"update":r=a.formUpdateDestinationMessage}m=e.extend(m,{"primaryIsLink":!1,"dualRows":!1,"destinationMessage":r,"primaryData":l.rows_affected,"iconClass":"mime_form"});break;case"server":m=e.extend(m,{"primaryIsLink":!1,"dualRows":!1,"destinationMessage":a.serverDestinationMessage,"iconClass":"icon_status_ftp_server"});break;case"ftp":m=e.extend(m,{"primaryIsLink":!1,"destinationMessage":a.ftpDestinationMessage,"dualRows":!1,"iconClass":"icon_status_ftp_server"});break;case"workflow":t=this.options.primaryNode,i=this.options.secondaryNode,m=e.extend(m,{"primaryIsLink":!1,"dualRows":p.workflow_attach_output,"destinationMessage":a.workflowDestinationMessage,"primaryData":p.workflow_title}),!0===p.workflow_attach_output&&(m=e.extend(m,{"secondaryNodeURL":o.getUrl(i),"secondaryNodeInfo":a.workflowAttachmentMessage,"secondaryData":a.attachments}));break;default:console.warn(a.unknownWebReportDestination+c.output_destination)}return m},"onRender":function(){var t,o,r,n,s=this.options.destinationModel,a=s.get("destination_specific"),l=s.get("use_conversion_engine");if(!s.get("run_in_background")&&!l)switch(s.get("output_destination").toLowerCase()){case"node":t=new i({"node":this.options.primaryNode}),r=t.render(),this.ui.iconContainer.prepend(r.$el),e.has(a,"export_type")&&"node"===a.export_type.toLowerCase()&&(o=new i({"node":this.options.secondaryNode}),n=o.render(),this.ui.secondaryContainer.prepend(n.$el));break;case"workflow":t=new i({"node":this.options.primaryNode}),r=t.render(),this.ui.iconContainer.prepend(r.$el),!0===s.get("destination_specific").workflow_attach_output&&(o=new i({"node":this.options.wfAttachmentsNode}),n=o.render(),this.ui.secondaryContainer.prepend(n.$el))}}})}),csui.define("hbs!webreports/controls/table.report/cells/launch.subwebreport/impl/launch.subwebreport",["module","hbs","csui/lib/handlebars"],function(e,t,i){var o=i.template({"compiler":[6,">= 2.0.0-beta.1"],"main":function(e,t,i,o){var r;return'<a href="#" class="launch-subwebreport" title="'+this.escapeExpression((r=null!=(r=t.icon_label||(null!=e?e.icon_label:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon_label","hash":{}}):r))+'">\r\n    <span class="icon '+this.escapeExpression((r=null!=(r=t.icon_class||(null!=e?e.icon_class:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{"name":"icon_class","hash":{}}):r))+'" aria-label="Launch SubWebReport" role="button img"></span>\r\n</a>'}});return i.registerPartial("webreports_controls_table.report_cells_launch.subwebreport_impl_launch.subwebreport",o),o}),csui.define("webreports/controls/table.report/cells/launch.subwebreport/impl/nls/launch.subwebreport.lang",{"root":!0,"en-us":!1,"en":!1}),csui.define("webreports/controls/table.report/cells/launch.subwebreport/impl/nls/root/launch.subwebreport.lang",{"button_label":"Launch Sub-WebReport"}),csui.define("css!webreports/controls/table.report/cells/launch.subwebreport/impl/launch.subwebreport",[],function(){}),csui.define("webreports/controls/table.report/cells/launch.subwebreport/launch.subwebreport.view",["csui/lib/backbone","csui/lib/underscore","csui/utils/commands","csui/controls/table/cells/templated/templated.view","csui/utils/contexts/factories/connector","csui/controls/table/cells/cell.registry","csui/models/node/node.model","hbs!webreports/controls/table.report/cells/launch.subwebreport/impl/launch.subwebreport","i18n!webreports/controls/table.report/cells/launch.subwebreport/impl/nls/launch.subwebreport.lang","css!webreports/controls/table.report/cells/launch.subwebreport/impl/launch.subwebreport"],function(e,t,i,o,r,n,s,a,l){var c=o.extend({"template":a,"renderValue":function(){var e=this.getValueData(),t=e?this.template(e):"";this.$el.html(t)},"getValueData":function(){var e,t,i=this.options.column;return i.attributes&&(i.attributes.hoverText&&(e=i.attributes.hoverText),i.attributes.iconClass&&(t=i.attributes.iconClass)),{"icon_label":e||l.button_label,"icon_class":t||"icon-subwebreport"}},"ui":{"launchSWR":".launch-subwebreport"},"events":{"click @ui.launchSWR":"onClickLaunchSubWebreport"},"onClickLaunchSubWebreport":function(e){e.preventDefault();var i=this.options.context.getObject(r),o=new s({"id":this.model.get("subwebreportid")},{"connector":i});o.fetch().done(t.bind(function(){this.launchWebReport(o)},this))},"launchWebReport":function(t){var o=new e.Collection([t]),r=i.get("OpenWebReport"),n={"nodes":o,"context":this.options.context};r&&r.enabled(n)&&r.execute(n,{"context":this.options.context,"parameters":this.model.attributes})}},{"hasFixedWidth":!0,"columnClassName":"launch-subwebreport-col"});return n.registerByColumnKey("subwebreportid",c),c}),csui.define("bundles/webreports-app",["webreports/widgets/tilereport/tilereport.view","json!webreports/widgets/tilereport/tilereport.manifest.json","i18n!webreports/widgets/tilereport/impl/nls/tilereport.manifest","webreports/widgets/nodeslistreport/nodeslistreport.view","json!webreports/widgets/nodeslistreport/nodeslistreport.manifest.json","i18n!webreports/widgets/nodeslistreport/impl/nls/nodeslistreport.manifest","webreports/widgets/widget.carousel/widget.carousel.view","json!webreports/widgets/widget.carousel/widget.carousel.manifest.json","i18n!webreports/widgets/widget.carousel/impl/nls/widget.carousel.manifest","webreports/widgets/table.report/table.report.view","json!webreports/widgets/table.report/table.report.manifest.json","i18n!webreports/widgets/table.report/impl/nls/table.report.manifest","webreports/widgets/parameter.prompt.form/parameter.prompt.form.view","json!webreports/widgets/parameter.prompt.form/parameter.prompt.form.manifest.json","i18n!webreports/widgets/parameter.prompt.form/impl/nls/parameter.prompt.form.manifest","webreports/models/nodestablereport/nodestablereport.model","webreports/models/tablereport/tablereport.model","webreports/models/wrtext/wrtext.model","webreports/models/widget.carousel/widget.carousel.model","webreports/models/run.webreport.pre/run.webreport.pre.model","webreports/models/run.webreport/run.webreport.model","webreports/utils/commands/defaultactionitems","webreports/utils/commands/open.webreport","webreports/utils/commands/open.classic.webreport","webreports/utils/commands/execute.webreport","webreports/controls/nodestablereport/nodestablereport.view","webreports/controls/run.webreport.pre/run.webreport.pre.controller","webreports/controls/status.screen/status.screen.view","webreports/controls/table.report/table.report.view","webreports/controls/table.report/cells/launch.subwebreport/launch.subwebreport.view"],{}),csui.require(["require","css"],function(e,t){t.styleLoad(e,"webreports/bundles/webreports-app")});
//# sourceMappingURL=webreports-app.js.map