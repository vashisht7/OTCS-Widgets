{"version":3,"sources":["../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanding.behavior.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/filtered.count.facets.js","../../src/utils/url.webreports.js","../../src/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.model.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/overlay.model.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.model.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.collection.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/root/visual.data.lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang!i18n","../../src/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.collection.js","../../src/widgets/visual.data.filtered.count/impl/utils/contexts/factories/visual.data.collection.factory.js","../../src/mixins/webreports.view.mixin.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.content!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.overlay!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.overlay.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.item!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/nls/lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/nls/root/lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/facet.bar.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.key.navigation.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/root/lang.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel.key.navigation.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/facet.panel.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded!hbs","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.expanded.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.bar.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.pie.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.donut.view.js","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.tile!hbs","../../src/style/webreports!css","../../src/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.view.js","../../src/widgets/visual.data.filtered.count/visual.data.filtered.count.view.js","../../src/widgets/visual.data.filtered.count/visual.data.filtered.count.manifest.json!json","../../src/widgets/visual.data.filtered.count/impl/nls/visual.data.filtered.count.manifest.js","../../src/widgets/visual.data.filtered.count/impl/nls/root/visual.data.filtered.count.manifest.js","webreports-visdata.js"],"names":["csui","define","require","_","Backbone","Marionette","TileExpandingBehavior","getOption","property","options","this","value","isFunction","call","view","extend","_expand","contentView","collection","isEmpty","expandedViewValue","expandedViewClass","prototype","View","requiredModules","self","isString","push","DialogView","arguments","expandedViewOptions","expandedView","_dialog","iconLeft","imageLeftUrl","imageLeftClass","title","iconRight","className","buttons","data","largeSize","listenTo","triggerMethod","isExpanded","overlayVisible","ui","toggleSettings","trigger","show","$","FacetCollection","constructor","models","apply","filters","addFilter","filter","JSON","parse","stringify","removeFilter","filterIndex","valueIndex","values","splice","length","clearFilters","Url","NodeModelFactory","appendWebReportParameters","query","parameters","isUndefined","isArray","combineQueryString","_serializeWebReportParameters","appendCurrentContainer","context","csuiContainerID","getCurrentContainerID","appendSWRCellID","subWebReportCellID","swrLaunchCell","id","parseInt","isNaN","node","getModel","get","serializedParms","each","parmPair","name","getWebReportParametersAsData","parmsObject","getDataAsWebReportParameters","parmsArray","isObject","mapObject","val","key","UrlWebReports","ConnectableMixin","Model","attributes","defaults","vis_type","active_column","active_column_formatted","count_column","column_names","column_names_formatted","sort_by","sort_order","view_value_as_percentage","group_after","fc_filters","client_format","type","column_key","data_type","undefined","tag_format","FilteredCountColumnModel","Collection","model","root","en-us","en","dialogTitle","barChart","pieChart","donutChart","scatterChart","areaChart","lineChart","chartType","activeColumn","sortBy","total","count","totalCount","asc","desc","showValuesAs","groupAfter","dontGroup","items","actual","percentage","update","cancel","launchReport","launchReportTooltip","tooManyRows","noValue","invalidActiveColumn","emptyChartText","settings","d3","ModalAlert","FilteredCountFacetCollection","FacetTopicCollection","FilteredCountModel","OverlayModel","FilteredCountColumnCollection","lang","FilteredCountCollection","makeConnectable","overlayModel","sortOrder","viewValueAsPercentage","onOverlayUpdate","url","connector","connection","response","_isEmpty","_isFetched","grouped_on_server","sorted_on_server","setColumns","columns","_isResponseValid","groupedData","set","silent","rawCollection","filteredData","sortGroupAndFilter","isFetched","ok","_isActiveColumnValid","showError","_getCaseInsensitiveProperty","first","getActiveColumn","getFilteredCountParms","parms","filterable","expandable","getFilteredCountQuery","postData","wrParameters","activeColumnName","activeColumnModel","findWhere","getCountColumn","countColumnName","countColumnModel","getFilters","deepClone","getSortOptions","getTotalCount","reduce","memo","getPercentageOfTotal","getGroupAfter","mapFacetData","availableValues","facets","toJSON","activeFacet","facetObj","orderedFacets","map","bind","groupedItem","key_formatted","reject","facet","item","facetModel","keys","topics","object","existingFacetIndex","originalFacetNames","facetFilters","_getAppliedFacetNames","indexOf","name_formatted","reset","getActiveColumnByFormattedName","facetName","mapFilterData","filtersToMap","column","topicName","unmapFilterData","resolveToActualValues","operator","formattedValues","formattedKeys","modelKeys","has","index","_getNextActiveColumn","_getFormattedActiveColumnByName","columnNames","columnsInFilter","columnsNotInFilter","difference","activeColumnFormattedName","obj","find","toLowerCase","updateFilters","valueToRemove","valIndex","origFilterLength","newFilters","triggerNeeded","updateColumnModels","columnModels","columnModel","countColumn","setColumnNames","columnsExcludingCount","nestedData","_mapGroupedData","sort","sortNest","nest","filterBy","groupOutlyingValues","mappedData","rowData","activeColumnValue","countColumnValue","activeFormatted","countFormatted","_removeEmptyValues","value_formatted","dataset","nestedItem","row","findIndex","nestedRow","toString","dataFiltered","d","filtered","currentValue","sortOptions","sortDir","sorted","a","b","ascending","reverse","maxItems","d1","slice","d2","oValue","pluck","oTotal","others","overlayChanges","changedAttributes","clientOnlyChanges","omit","goToServer","fetch","mixin","originalFetch","requestExtensions","format","method","chartQueryParms","module","CollectionFactory","ConnectorFactory","VisualDataCollection","propertyPrefix","getObject","visualdata","config","autoreset","setCommonModelOptions","modelOptions","hbs","Handlebars","t","template","compiler","main","depth0","helpers","partials","registerPartial","numeral","BlockingView","EmptyView","VisualDataCollectionFactory","WebReportsViewMixin","VisualDataContentView","ItemView","marginTop","marginRight","marginBottom","marginLeft","groupAfterMax","groupAfterValidValues","dataVisContainer","dataVisOverlay","visType","header","isBoolean","scroll","imbue","parent","getCollection","resetAndRender","blockActions","unblockActions","onWinRefresh","window","on","changeChartType","console","log","onDomRefresh","draw","isChartRendered","callBackAlreadyHit","appendVisElements","createRootElement","width","$el","height","uniqueID","remove","uniqueId","visElement","select","append","rootElementType","attr","onDestroy","off","renderEmptyView","$tileContentElem","closest","emptyView","text","html","render","el","siblings","addClass","children","checkSign","x","Math","sign","Number","shortenText","substr","formatCount","n","formattedValue","formatTemplate","shortenNumber","toPrecision","formatNumber","1","3","stack1","helper","escapeExpression","helperMissing","hash","selected","fn","program","inverse","noop","column_formatted","4","6","label","8","display","unless","multipleColumns","lambda","columnnames","settingsField","events","change @ui.settingsField","templateHelpers","chartSelectOptions","chartoptions","onChangeSetting","event","preventDefault","updateSettings","activeColumnFormatted","overlayForm","overlayFormData","serializeArray","split","clearAll","facetIndex","topicIndex","TabableRegionBehavior","itemTemplate","listItemContext","facetListArea","facetList","facetDropdown","facetDropdownList","dropdownBtn","facetHeaderLabel","triggers","click .csui-clear-all","click .csui-facet-item .binf-close","keydown","behaviors","TabableRegion","behaviorClass","onWinResize","currentlyFocusedElement","focusables","prop","hasClass","onKeyInView","keyCode","retVal","$target","target","unbind","onRender","hide","innerHTML","overflowStartIndex","addToFacetBar","removeClass","addToOverFlowDropDown","startIndex","i","startFilter","jqDropDownList","j","startValue","filterName","newTopic","jqFacetListArea","jqFacetList","widthOfListArea","widthOfMoreIcon","widthOfList","onClearAll","onRemoveFilter","e","applyFilter","newFilter","updateHeaderLabel","activeChild","execute","tab","shiftKey","onShowFacet","setfocus","is","getActiveChild","facetHeaderIcon","facetHeader","facetMore","activateChild","shiftTab","_getPrevActiveChild","_getNextActiveChild","prevChild","focus","childViewContainers","activeChildIndex","cursorNextFilter","keyUp","numViews","findByIndex","_getLastFilterFocus","childIndex","nextChild","showOnHover","enableCheckBox","base","showInputOnHover","isTouchBrowser","click .csui-filter-name","click input","change input","keydown > span","keydown .csui-filter-name","icon","checkbox","enableCheckBoxes","onCheckBoxSelect","onChangeValue","disabled","checked","getIndex","_index","more","clear","facetTitle","searchIconTooltip","searchClearIconTooltip","emptyFacetMessage","emptyFilteredFacetMessage","loadingFacetMessage","failedFacetMessage","noFiles","addTypeDenied","showMore","showLess","KeyEventNavigation","FacetItemView","FacetView","CompositeView","childView","childViewContainer","facetContent","facetSubmitControls","facetCollapseControls","facetMoreText","facetMoreIcon","selectCount","childEvents","single:filter:select","multi:filter:select","keyupdown","keyleftright","click .csui-filter-more:not(.binf-disabled)","click .csui-facet-header","mouseleave","click .csui-clear","click .csui-apply","moreLabel","showAll","itemsToShow","more-icon","show-controls","selectItems","show-content","showFacet","childViewOptions","checkboxes","_setDisabledFilters","_updateFacetSubmitControls","onApplyAll","_getFilterArray","onAddChild","onSingleFilterSelect","click","onShowMore","stopPropagation","_setMoreLabel","checkItems","onMouseLeave","onMultiFilterSelect","_updateSelectList","unselectedItems","headerCount","moreItems","version","onSetNextChildFocus","accActivateTabableRegion","document","_onRemoveKeyboardFocus","_removeKeyboardFocus","resetFacetFocus","$childViewContainer","childNodes","SimpleListView","CollectionStateBehavior","FacetPanelView","CollectionState","stateMessages","empty","loading","failed","apply:filter","activate:facet","facet:size:change","escape:focus","$child","css","blockingParentView","delegate","local","blockingLocal","isTabable","onRenderCollection","onBeforeDestroy","setActiveFacet","_updateScrollbar","FacetBarView","VisualDataControls","LayoutView","regions","chicklets","facetRegion","visualizationControls","visualization","expandedContentView","_renderFacetBar","_renderFacetPanel","_renderExpandedControls","_renderChart","_clearFilters","_addToFacetFilter","getRegion","facetBarView","_removeFacetFilter","_removeAll","_setFacetView","facetView","expandedControls","barLabel","sum","toFixed","Y0","y","Y","chartData","colors","schemeCategory20","color","scaleOrdinal","scaleBand","range","round","padding","scaleLinear","extent","xAxis","axisBottom","tickFormat","yAxis","axisLeft","domain","nice","selectAll","enter","style","bandwidth","abs","getBoundingClientRect","offset","zeroline","labelOffset","classed","rotateTicks","tickSize","pieLabel","endAngle","startAngle","PI","arcSize","radius","explode","radial","sin","cos","extractSlice","i2","replaceSlice","colorOpacity","min","arc","innerRadius","outerRadius","labelArc","pie","segments","centroid","pieLegendContainer","legends","legendHeight","swatchSize","fontSizeForTotal","innerDiscSize","stringLength","fontRatios","clientWidth","clientHeight","donutTotal","valueFontSize","imageUrl","imageClass","TileView","ExpandingBehavior","VisualDataOverlay","VisualDataExpanded","VisualDataBarView","VisualDataPieView","VisualDataDonutView","overlayClip","overlay","contentViewOptions","launchButtonConfig","launchable","launchButtons","Expanding","titleBarIcon","getClosestLocalizedString","dialogTitleIconRight","dialogClassName","VisTypeView","expandedOptions","rowLimit","button","launchButtonLabel","toolTip","launchButtonTooltip","checkRowLimit","_launchReport","launchButtonID","click @ui.toggleSettings","keyup @ui.toggleSettings","numRows","userDefinedLimit","overlayView","webreportID","input","cgiUrl","getCgiScript","wrClassicForm","fcParms","runReportFields","func","objAction","objId","nexturl","location","href","formFields","total_count","parmName","submit","VisualDataView","DonutContentView","BarContentView","PieContentView","_getContentView","$schema","description","kind","supportedKinds","schema","properties","enum","default","required","fields","type_control","select_types","optionLabels","widgetTitle","widgetDescription","tileTitle","tileDescription","typeTitle","typeDescription","sourceTitle","sourceDescription","activeTitle","activeDescription","optionsTitle","optionsDescription","expandedTitle","expandedDescription","percentTitle","percentDescription","groupTitle","groupDescription","sortTitle","sortDescription","directionTitle","directionDescription","buttonTitle","buttonDescription","maxTitle","maxDescription","customButtonTitle","customButtonDescription","addButtonTitle","addButtonDescription","reportButtonTitle","reportButtonDescription","labelButtonTitle","labelButtonDescription","buttonToolTitle","buttonToolDescription","paramSourceTitle","paramSourceDescription","paramPairTitle","paramPairDescription","paramNameTitle","paramNameDescription","paramValueTitle","paramValueDescription","optionsTypeBar","optionsTypeDonut","optionsTypePie","optionsGroupAfterDefault","optionsPieDonutDefault","optionsBarDefault","optionsSortByActive","optionsSortByCount","optionsSortOrderDsc","optionsSortOrderAsc","styleLoad"],"mappings":"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","file":"webreports-visdata.js","sourcesContent":["csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanding.behavior',['require', 'csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/marionette', // Third party libraries\r\n    'csui/controls/tile/behaviors/expanding.behavior'\r\n], function (require, _, Backbone, Marionette, TileExpandingBehavior ) {\r\n  \"use strict\";\r\n\r\n  var VisualDataExpandingBehavior = TileExpandingBehavior.extend({\r\n\r\n    _expand: function () {\r\n      if ( this.view && this.view.contentView && !this.view.contentView.collection.isEmpty() ){\r\n\r\n          var expandedViewValue = this.getOption('expandedView'),\r\n              expandedViewClass = expandedViewValue.prototype instanceof Backbone.View ?\r\n                  expandedViewValue : expandedViewValue.call(this.view),\r\n              requiredModules = ['csui/controls/dialog/dialog.view'],\r\n              self = this;\r\n          if (_.isString(expandedViewClass)) {\r\n              requiredModules.push(expandedViewClass);\r\n          }\r\n          require(requiredModules, function (DialogView) {\r\n              if (_.isString(expandedViewClass)) {\r\n                  expandedViewClass = arguments[1];\r\n              }\r\n              var expandedViewOptions = getOption.call(self, 'expandedViewOptions'),\r\n                  expandedView = new expandedViewClass(expandedViewOptions);\r\n\r\n              self._dialog = new DialogView({\r\n                  iconLeft: getOption.call(self, 'titleBarIcon'),\r\n                  imageLeftUrl: getOption.call(self, 'titleBarImageUrl'),\r\n                  imageLeftClass: getOption.call(self, 'titleBarImageClass'),\r\n                  title: getOption.call(self, 'dialogTitle'),\r\n                  iconRight: getOption.call(self, 'dialogTitleIconRight'),\r\n                  className: 'cs-expanded ' + (getOption.call(self, 'dialogClassName') || ''),\r\n                  buttons: expandedViewOptions.data.buttons,\r\n                  largeSize: true,\r\n                  view: expandedView\r\n              });\r\n              self.listenTo(self._dialog, 'hide', function () {\r\n                  self.triggerMethod('collapse');\r\n                  expandedViewOptions.data.isExpanded = false;\r\n              });\r\n              expandedViewOptions.data.isExpanded = true;\r\n              // Destroy the overlay view if its still open on expand.\r\n              if (self.view.overlayVisible){\r\n                  self.view.ui.toggleSettings.trigger('click');\r\n              }\r\n              self._dialog.show();\r\n\r\n          });\r\n      }\r\n\r\n    }\r\n\r\n  });\r\n\r\n  // TODO: Expose this functionality and make it generic for other behaviors\r\n  function getOption(property) {\r\n    var options = this.options || {};\r\n    var value = options[property];\r\n    return _.isFunction(value) ? options[property].call(this.view) : value;\r\n  }\r\n\r\n  return VisualDataExpandingBehavior;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/filtered.count.facets',['csui/lib/underscore', 'csui/lib/jquery', 'csui/models/facets'\r\n], function (_, $, FacetCollection) {\r\n  'use strict';\r\n\r\n  var FilteredCountFacetCollection = FacetCollection.extend({\r\n\r\n      constructor: function FilteredCountFacetCollection(models, options) {\r\n        FacetCollection.prototype.constructor.apply(this, arguments);\r\n        this.filters = options && options.filters || [];\r\n      },\r\n\r\n      addFilter: function (filter) {\r\n        this.filters.push(filter);\r\n        // return _.union([],this.filters);\r\n        return JSON.parse(JSON.stringify(this.filters));\r\n      },\r\n\r\n      removeFilter: function (filterIndex, valueIndex) {\r\n        var filter = this.filters[filterIndex];\r\n        filter.values.splice(valueIndex, 1);\r\n\r\n        if (filter.values.length === 0) {\r\n          this.filters.splice(filterIndex, 1);\r\n        }\r\n\r\n        // return _.union([],this.filters);\r\n        return JSON.parse(JSON.stringify(this.filters));\r\n      },\r\n\r\n      clearFilters: function () {\r\n        if (this.filters && this.filters.length > 0) {\r\n          this.filters = [];\r\n        }\r\n        return [];\r\n      }\r\n\r\n  });\r\n\r\n  return FilteredCountFacetCollection;\r\n\r\n});\r\n\n","csui.define('webreports/utils/url.webreports',['csui/lib/underscore','csui/utils/url','csui/utils/contexts/factories/node'], function (_,Url, NodeModelFactory) {\r\n\r\n    var UrlWebReports = _.extend({\r\n\r\n        appendWebReportParameters: function (query, parameters) {\r\n\r\n            // Append any WebReport parameters to the RestURL if present\r\n            if (!_.isUndefined(parameters)) {\r\n                // Currently supported array format generated by the Perspective Manager\r\n                if (_.isArray(parameters)) {\r\n                    query = this.combineQueryString(query, this._serializeWebReportParameters(parameters));\r\n                } else {\r\n                    // Support parameters in legacy format\r\n                    query = this.combineQueryString(query, parameters);\r\n                }\r\n            }\r\n\r\n            return query;\r\n        },\r\n\r\n        appendCurrentContainer: function (query, context) {\r\n\r\n            var csuiContainerID;\r\n\r\n            // Append the containerID parameter to the RestURL if present\r\n            if (!_.isUndefined(context)) {\r\n                csuiContainerID = this.getCurrentContainerID(context);\r\n\r\n                if (csuiContainerID){\r\n                    query = this.combineQueryString(query, 'csuiContainerID='+ csuiContainerID );\r\n                }\r\n            }\r\n\r\n            return query;\r\n        },\r\n\r\n        appendSWRCellID: function (query, options) {\r\n\r\n            var subWebReportCellID;\r\n\r\n            // Append the containerID parameter to the RestURL if present\r\n            if (options && options.data && options.data.swrLaunchCell && options.data.swrLaunchCell.id) {\r\n\r\n                subWebReportCellID = parseInt(options.data.swrLaunchCell.id, 10);\r\n\r\n                if (typeof subWebReportCellID === \"number\" && !isNaN(subWebReportCellID)){\r\n                    query = this.combineQueryString(query, 'subwebreport_id='+ subWebReportCellID );\r\n                }\r\n            }\r\n\r\n            return query;\r\n        },\r\n\r\n        getCurrentContainerID: function (context) {\r\n            var csuiContainerID,\r\n                node = context.getModel(NodeModelFactory);\r\n\r\n            if (!_.isUndefined(node)){\r\n                csuiContainerID = node.get('id');\r\n            }\r\n            return csuiContainerID;\r\n        },\r\n\r\n        _serializeWebReportParameters: function(parameters){\r\n            var serializedParms = '';\r\n\r\n            _.each(parameters, function (parmPair) {\r\n                if ( parmPair.name !== '' ) {\r\n                    if (serializedParms.length) {\r\n                        serializedParms += '&' + parmPair.name + '=' + parmPair.value;\r\n                    } else {\r\n                        serializedParms += parmPair.name + '=' + parmPair.value;\r\n                    }\r\n                }\r\n            });\r\n\r\n            return serializedParms;\r\n        },\r\n\r\n        /* Converts parameters in the format:\r\n                parameters: [\r\n                    {\r\n                        name: 'myparm1',\r\n                        value: 'val1'\r\n                    },\r\n                    {\r\n                        name: 'myparm2',\r\n                        value: 'val2'\r\n                    }\r\n                ]\r\n\r\n           To the format:\r\n\r\n                {\r\n                    myparm1: 'val1',\r\n                    myparm2: 'val2'\r\n                }\r\n\r\n           This is used to generate an object to pass in as data to a POST API.\r\n        */\r\n\r\n        getWebReportParametersAsData: function(parameters){\r\n\r\n            var parmsObject = {};\r\n\r\n            if (_.isArray(parameters)) {\r\n                _.each(parameters, function (parmPair) {\r\n                    if ( parmPair.name !== '' ) {\r\n                        parmsObject[parmPair.name] = parmPair.value;\r\n                    }\r\n                });\r\n            }\r\n\r\n            return parmsObject;\r\n        },\r\n\r\n        /*  The inverse of getWebReportParametersAsData( parameters ).\r\n\r\n         Converts parameters in the format:\r\n             {\r\n             myparm1: 'val1',\r\n             myparm2: 'val2'\r\n             }\r\n\r\n         To the format:\r\n             [\r\n                 {\r\n                     name: 'myparm1',\r\n                     value: 'val1'\r\n                 },\r\n                 {\r\n                     name: 'myparm2',\r\n                     value: 'val2'\r\n                 }\r\n             ]\r\n\r\n         Used to pass parameters from the prompt screen into a WR using Widget destinations.\r\n        */\r\n        getDataAsWebReportParameters: function(parameters){\r\n\r\n\r\n            var parmsArray = [];\r\n\r\n            if ( _.isObject(parameters) ){\r\n                _.mapObject( parameters, function (val, key){\r\n                    parmsArray.push({\"name\":key, \"value\": val});\r\n                });\r\n            }\r\n\r\n            return parmsArray;\r\n        }\r\n\r\n    }, Url);\r\n\r\n    return UrlWebReports;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.model',[\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'webreports/utils/url.webreports',\r\n  'csui/models/mixins/connectable/connectable.mixin'\r\n], function (_, Backbone, UrlWebReports, ConnectableMixin) {\r\n\r\n  var FilteredCountModel = Backbone.Model.extend({\r\n\r\n    // Constructor gives an explicit name to the object in the debugger\r\n    constructor: function FilteredCountModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n\r\n    }\r\n\r\n  });\r\n\r\n  return FilteredCountModel;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/overlay.model',[\r\n    'csui/lib/underscore',\r\n    'csui/lib/backbone'\r\n], function (_, Backbone) {\r\n\r\n    var OverlayModel = Backbone.Model.extend({\r\n\r\n        defaults: {\r\n            // placeholder object for persisting any user settings for visualisation\r\n            vis_type: '',\r\n            active_column: '',\r\n            active_column_formatted: '',\r\n            count_column: '',\r\n            column_names: [],\r\n            column_names_formatted: [],\r\n            sort_by: 'Count',\r\n            sort_order: 'desc',\r\n            view_value_as_percentage: false,\r\n            group_after: 10,\r\n            fc_filters: []\r\n        },\r\n\r\n        // Constructor gives an explicit name to the object in the debugger\r\n        constructor: function OverlayModel(attributes, options) {\r\n            Backbone.Model.prototype.constructor.apply(this, arguments);\r\n\r\n        }\r\n\r\n    });\r\n\r\n    return OverlayModel;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.model',[\r\n  'csui/lib/backbone'\r\n], function (Backbone) {\r\n\r\n  var FilteredCountColumnModel = Backbone.Model.extend({\r\n\r\n    defaults: {\r\n      \"active_column\":false,\r\n      \"client_format\":{\r\n        \"type\":\"none\"\r\n      },\r\n      \"column_key\":\"\",\r\n      \"count_column\":false,\r\n      \"data_type\":10,\r\n      \"id\": undefined ,\r\n      \"name\":\"\",\r\n      \"tag_format\":\"\"\r\n    },\r\n\r\n    // Constructor gives an explicit name to the object in the debugger\r\n    constructor: function FilteredCountColumnModel(attributes, options) {\r\n      Backbone.Model.prototype.constructor.apply(this, arguments);\r\n\r\n    }\r\n\r\n  });\r\n\r\n  return FilteredCountColumnModel;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.collection',[\r\n    'csui/lib/backbone', // 3rd party libraries\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.model'\r\n], function (Backbone, FilteredCountColumnModel) {\r\n\r\n    var FilteredCountColumnCollection = Backbone.Collection.extend({\r\n\r\n        // Constructor gives an explicit name to the object in the debugger\r\n        constructor: function FilteredCountColumnCollection(models, options) {\r\n            Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n        },\r\n\r\n        model: FilteredCountColumnModel\r\n\r\n    });\r\n\r\n    return FilteredCountColumnCollection;\r\n\r\n});\r\n\n","// Lists explicit locale mappings and fallbacks\r\n\r\ncsui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","// Defines localizable strings in the default language (English)\r\n\r\ncsui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/root/visual.data.lang',{\r\n    dialogTitle: 'Visual Data Filtered Count',\r\n    barChart: 'Bar chart',\r\n    pieChart: 'Pie chart',\r\n    donutChart: 'Donut chart',\r\n    scatterChart: 'Scatter chart',\r\n    areaChart: 'Area chart',\r\n    lineChart: 'Line chart',\r\n    chartType: 'Chart type',\r\n    activeColumn: 'Active column',\r\n    sortBy: 'Sort by',\r\n    total: 'Total',\r\n    count: 'Count',\r\n    totalCount: 'Total Count',\r\n    asc: 'asc',\r\n    desc: 'desc',\r\n    filters: 'Filters',\r\n    showValuesAs: 'Show values as',\r\n    groupAfter: 'Group after',\r\n    dontGroup: 'Don\\'t group',\r\n    items: 'items',\r\n    actual: 'Actual',\r\n    percentage: 'Percentage',\r\n    update: 'Update',\r\n    cancel: 'Cancel',\r\n    launchReport: 'Launch WebReport',\r\n    launchReportTooltip: 'Launch a classic WebReport in a new window using the current filter configuration.',\r\n    tooManyRows: 'Please refine your filter further. The maximum number of items that can be processed is ',\r\n    noValue: '(No value)',\r\n    invalidActiveColumn: 'An invalid Active Column was specified.',\r\n\temptyChartText: 'No results found.',\r\n    settings: 'Settings'\r\n});\r\n\n","\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.collection',[\r\n    'csui/lib/underscore', 'csui/lib/backbone', 'csui/lib/d3', // 3rd party libraries\r\n    'csui/dialogs/modal.alert/modal.alert',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/filtered.count.facets',\r\n    'csui/models/facettopics',\r\n    'webreports/utils/url.webreports',\r\n    'webreports/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.model',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/overlay.model',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.column.collection',\r\n    'csui/models/mixins/connectable/connectable.mixin',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',\r\n    'csui/utils/deepClone/deepClone'\r\n], function (_, Backbone, d3, ModalAlert, FilteredCountFacetCollection, FacetTopicCollection, UrlWebReports, FilteredCountModel, OverlayModel, FilteredCountColumnCollection, ConnectableMixin, lang) {\r\n\r\n    var FilteredCountCollection = Backbone.Collection.extend({\r\n\r\n        // Constructor gives an explicit name to the object in the debugger\r\n        constructor: function FilteredCountCollection(models, options) {\r\n            Backbone.Collection.prototype.constructor.apply(this, arguments);\r\n\r\n            if (_.isUndefined(options)){\r\n                options = {};\r\n            }\r\n\r\n            //FIXME: is it necessary to do this, or is id an implicit property of options\r\n            if (options && options.id && !this.id) {\r\n                this.id = options.id;\r\n            }\r\n\r\n            this.options = options;\r\n\r\n            // Enable this model for communication with the CS REST API\r\n            this.makeConnectable(options);\r\n\r\n            // Create a new overlay model with the current settings for the visualization\r\n            this.overlayModel = new OverlayModel({\r\n                vis_type: options.type,\r\n                active_column: options.activeColumn,\r\n                sort_by: options.sortBy || 'Count',\r\n                sort_order: options.sortOrder || 'desc',\r\n                view_value_as_percentage: options.viewValueAsPercentage,\r\n                group_after: options.groupAfter,\r\n                fc_filters: options.filters || []\r\n            });\r\n\r\n            this.listenTo(this.overlayModel, 'change', this.onOverlayUpdate);\r\n        },\r\n\r\n        model: FilteredCountModel,\r\n\r\n        // Computes the REST API URL using the connection options\r\n        url: function () {\r\n\r\n            return this.connector.connection.url + '/nodes/' + this.id + '/output';\r\n\r\n        },\r\n\r\n        parse: function (response) {\r\n\r\n            if ( response.data && response.data.length > 0 ){\r\n                this._isEmpty = false;\r\n                this._isFetched = true;\r\n\r\n                this.grouped_on_server = response.grouped_on_server || false;\r\n                this.sorted_on_server = response.sorted_on_server || false;\r\n                this.setColumns(response.columns);\r\n\r\n                if (this._isResponseValid(response)){\r\n                    if(response.grouped_on_server){\r\n                        this.groupedData = response;\r\n                        if (response.fc_filters){\r\n                            // Don't trigger change events, otherwise onOverlayUpdate will go back to the server.\r\n                            // Setting {silent : true} option.\r\n                            this.overlayModel.set({fc_filters:response.fc_filters}, {silent: true});\r\n                        }\r\n                    } else {\r\n                        this.rawCollection = response.data;\r\n                    }\r\n\r\n                    this.filteredData = this.sortGroupAndFilter();\r\n\r\n                    return this.filteredData;\r\n                }\r\n            } else {\r\n                this._isEmpty = true;\r\n                this._isFetched = true;\r\n                return [];\r\n            }\r\n\r\n\r\n        },\r\n\r\n        _isEmpty: true,\r\n\r\n        _isFetched: false,\r\n\r\n        isEmpty: function (){\r\n          return  (this._isEmpty && this._isFetched);\r\n        },\r\n\r\n        isFetched: function () {\r\n          return this._isFetched;\r\n        },\r\n\r\n        _isResponseValid: function(response){\r\n            var ok = true;\r\n            if (!response.grouped_on_server){\r\n                if (!this._isActiveColumnValid(response)) {\r\n                    ModalAlert.showError(lang.invalidActiveColumn);\r\n                    ok = false;\r\n                }\r\n            }\r\n            return ok;\r\n        },\r\n\r\n        _isActiveColumnValid: function(response){\r\n            return !_.isUndefined(this._getCaseInsensitiveProperty(_.first(response.data),this.getActiveColumn()));\r\n        },\r\n\r\n        filteredData: {},\r\n        rawCollection: {},\r\n        overlayModel: {},\r\n\r\n        getFilteredCountParms: function(){\r\n            var parms = {};\r\n\r\n            parms.filterable = (this.options.filterable === true);\r\n            parms.expandable = (this.options.expandable === true);\r\n\r\n            _.extend(parms, this.overlayModel.attributes);\r\n\r\n            if (parms.sort_by === 'ordinal' ){\r\n                parms.sort_by = parms.active_column;\r\n            }\r\n\r\n            parms.fc_filters = JSON.stringify(parms.fc_filters);\r\n\r\n            return parms;\r\n        },\r\n\r\n        getFilteredCountQuery: function(){\r\n\r\n            var postData = {},\r\n                csuiContainerID,\r\n                context = this.options.context || undefined,\r\n                wrParameters = this.options.parameters || undefined;\r\n\r\n            // Extend the POST data with any WebReport parameters if present\r\n            if (!_.isUndefined(wrParameters)){\r\n                postData = _.extend(postData, UrlWebReports.getWebReportParametersAsData(wrParameters) );\r\n            }\r\n\r\n            csuiContainerID = UrlWebReports.getCurrentContainerID(context);\r\n\r\n            // Extend the POST data with the current container ID if defined\r\n            if (!_.isUndefined(csuiContainerID)){\r\n                postData = _.extend(postData, {csuiContainerID: csuiContainerID} );\r\n            }\r\n\r\n            // Extend the POST data with the current chart state\r\n            postData = _.extend(postData, this.getFilteredCountParms() );\r\n\r\n            return postData;\r\n        },\r\n\r\n        getActiveColumn: function(){\r\n            var activeColumnName,\r\n                activeColumnModel;\r\n\r\n            if (this.columns){\r\n                activeColumnModel = this.columns.findWhere({active_column:true});\r\n\r\n                if (activeColumnModel){\r\n                    activeColumnName = activeColumnModel.get(\"name\");\r\n                }\r\n            }\r\n\r\n            return activeColumnName;\r\n        },\r\n\r\n        getCountColumn: function(){\r\n            var countColumnName,\r\n                countColumnModel;\r\n\r\n            if (this.columns){\r\n                countColumnModel = this.columns.findWhere({count_column:true});\r\n\r\n                if (countColumnModel){\r\n                    countColumnName = countColumnModel.get(\"name\");\r\n                }\r\n            }\r\n\r\n            return countColumnName;\r\n        },\r\n\r\n        getFilters: function(){\r\n            // Clone required because backbone doesn't recognise a change event has occurred if the object has the same reference.\r\n            return _.deepClone(this.overlayModel.get('fc_filters'));\r\n        },\r\n\r\n        getSortOptions: function(){\r\n            return {\r\n                sortBy: this.overlayModel.get('sort_by'),\r\n                sortOrder: this.overlayModel.get('sort_order')\r\n            };\r\n        },\r\n\r\n        getTotalCount: function() {\r\n            return this.models.reduce(function (memo, value) {\r\n                return memo + value.get('value');\r\n            }, 0);\r\n        },\r\n\r\n        getPercentageOfTotal: function(value){\r\n            return ((value / this.getTotalCount()) * 100);\r\n        },\r\n\r\n\r\n        getGroupAfter: function(){\r\n            return this.overlayModel.get('group_after');\r\n        },\r\n\r\n        mapFacetData: function(filteredData){\r\n\r\n            var availableValues = [],\r\n                facets = this.columns.toJSON(),\r\n                activeColumn = _.findWhere(facets, {active_column:true}),\r\n                activeFacet = {},\r\n                facetObj = {},\r\n                orderedFacets = [];\r\n            activeFacet[activeColumn.id] = _.map(filteredData, _.bind(function(groupedItem){\r\n                return {\r\n                    name: groupedItem.key_formatted || groupedItem.key,\r\n                    value: !_.isUndefined(groupedItem.key) ? groupedItem.key : groupedItem.key_formatted,\r\n                    total: groupedItem.value,\r\n                    percentage: this.getPercentageOfTotal(groupedItem.value)\r\n                };\r\n            }, this ));\r\n\r\n            activeFacet[activeColumn.id] = _.reject(activeFacet[activeColumn.id], function(facet){\r\n                return facet.name === \"Other\";\r\n            });\r\n\r\n            availableValues[0] = activeFacet;\r\n\r\n            _.each(facets, function(facet){\r\n                facetObj[facet.id] = facet;\r\n            });\r\n\r\n            _.each(availableValues, _.bind(function (item) {\r\n                // topics are nested by the facet id as the single key property\r\n                var id = _.keys(item)[0],\r\n                    topics = item[id],\r\n                    object = {},\r\n                    existingFacetIndex = -1,\r\n                    originalFacetNames = [],\r\n                    facetModel;\r\n\r\n                if (this.facetFilters && this.facetFilters.filters){\r\n\r\n                    originalFacetNames = this._getAppliedFacetNames();\r\n\r\n                    existingFacetIndex = originalFacetNames.indexOf(facetObj[id].name);\r\n\r\n                }\r\n\r\n                object[id] = facetObj[id];\r\n                facetObj[id].name = facetObj[id].name_formatted;\r\n\r\n                facetModel = new Backbone.Model(facetObj[id]);\r\n\r\n                // Only add the topics if there are no filters applied for this facet already.\r\n                // otherwise the user will be able to select the same filter twice.\r\n                if (existingFacetIndex === -1){\r\n                    facetModel.topics = new FacetTopicCollection(topics);\r\n                } else {\r\n                    facetModel.topics = new FacetTopicCollection();\r\n                }\r\n\r\n                orderedFacets.push(facetModel);\r\n\r\n            }, this));\r\n\r\n            if (this.facetFilters) {\r\n                this.facetFilters.reset(orderedFacets);\r\n            } else {\r\n                this.facetFilters = new FilteredCountFacetCollection(orderedFacets);\r\n            }\r\n\r\n        },\r\n\r\n        _getAppliedFacetNames: function(){\r\n            return _.map(this.facetFilters.filters, _.bind(function (filter){\r\n                return this.getActiveColumnByFormattedName(filter.facetName);\r\n            }, this));\r\n        },\r\n\r\n        // Convert filters to format expected by facet.bar.view.\r\n        mapFilterData: function(filters){\r\n\r\n            return _.map(filters, function(filtersToMap){\r\n                    return {\r\n                        facetName: filtersToMap.column ,\r\n                        values: [{topicName: filtersToMap.value}]\r\n                    };\r\n                }\r\n            );\r\n        },\r\n\r\n        // Convert filters to format expected by server.\r\n        unmapFilterData: function(filters){\r\n\r\n            var values = _.map(filters.values, function(value){\r\n                return value.topicName;\r\n            });\r\n\r\n            values = this.resolveToActualValues(values);\r\n\r\n            var unMappedFilter = {\r\n                column: this.getActiveColumnByFormattedName(filters.facetName),\r\n                operator: 'IN',\r\n                value: values\r\n            };\r\n\r\n            return unMappedFilter;\r\n        },\r\n\r\n        resolveToActualValues: function(formattedValues){\r\n            var modelKeys = this.map(function(model){\r\n                    return model.get('key');\r\n                }),\r\n                formattedKeys;\r\n\r\n            if (!this.models[0].has(\"key_formatted\")){\r\n                return formattedValues;\r\n            } else {\r\n                formattedKeys = this.map(function(model){\r\n                    return model.get('key_formatted');\r\n                });\r\n            }\r\n\r\n            return _.map(formattedValues, _.bind(function(value){\r\n                var index = formattedKeys.indexOf(value);\r\n                if (index !== -1 ){\r\n                    value =  modelKeys[index];\r\n                }\r\n                return value;\r\n            }, this));\r\n\r\n        },\r\n\r\n        addFilter: function(filter){\r\n            var activeColumnName = this._getNextActiveColumn(),\r\n                filters = this.getFilters();\r\n\r\n            filters.push(this.unmapFilterData(filter));\r\n\r\n            this.overlayModel.set({\r\n                fc_filters: filters,\r\n                active_column: activeColumnName,\r\n                active_column_formatted: this._getFormattedActiveColumnByName(activeColumnName)\r\n            });\r\n        },\r\n\r\n        clearFilters: function(){\r\n                var activeColumnName = this._getNextActiveColumn();\r\n\r\n                this.overlayModel.set({\r\n                    fc_filters: [],\r\n                    active_column: activeColumnName,\r\n                    active_column_formatted: this._getFormattedActiveColumnByName(activeColumnName)\r\n            });\r\n        },\r\n\r\n        _getNextActiveColumn: function(){\r\n            var activeColumn,\r\n                columnNames = this.overlayModel.get('column_names'),\r\n                columnsInFilter = this._getAppliedFacetNames(),\r\n                columnsNotInFilter = _.difference(columnNames, columnsInFilter);\r\n\r\n            // If we've filtered on all columns just show the first column in the filter\r\n            if (columnsNotInFilter.length === 0){\r\n                activeColumn = _.first(columnsInFilter);\r\n            } else if (columnsInFilter.length !== 0) {\r\n                activeColumn = _.first(columnsNotInFilter);\r\n            } else {\r\n                activeColumn = _.first(columnNames);\r\n            }\r\n\r\n            return activeColumn;\r\n        },\r\n\r\n        getActiveColumnByFormattedName: function(activeColumnFormattedName){\r\n            var activeColumnModel = this.columns.findWhere({name_formatted: activeColumnFormattedName});\r\n\r\n            return activeColumnModel.get('name');\r\n        },\r\n\r\n        _getFormattedActiveColumnByName: function(activeColumnName){\r\n            var activeColumnModel = this.columns.findWhere({name: activeColumnName});\r\n\r\n            return activeColumnModel.get('name_formatted') || activeColumnModel.get('name');\r\n        },\r\n\r\n        _getCaseInsensitiveProperty: function(obj, name) {\r\n            if (obj && name){\r\n                return obj[name] || obj[_.find(_.keys(obj), function(key){\r\n                        return key.toLowerCase() === name.toLowerCase();\r\n                    })];\r\n            } else {\r\n                return undefined;\r\n            }\r\n        },\r\n\r\n        updateFilters: function(facetName, valueToRemove){\r\n            var activeColumnName,\r\n                filters = this.getFilters(),\r\n                origFilterLength = filters.length,\r\n                newFilters = [],\r\n                triggerNeeded = false,\r\n                push = false,\r\n                valIndex;\r\n\r\n            _.each(filters,function(filter){\r\n                push = false;\r\n                if (filter.column === facetName){\r\n                    if (filter.value.length > 1 ){\r\n                        valIndex = filter.value.indexOf(valueToRemove);\r\n                        if (valIndex !== -1){\r\n                            filter.value.splice(valIndex, 1);\r\n                            push = true;\r\n                            triggerNeeded = true;\r\n                        } else {\r\n                            push = true;\r\n                        }\r\n                    }\r\n                } else {\r\n                    push = true;\r\n                }\r\n                if (push){\r\n                    newFilters.push(filter);\r\n                }\r\n            });\r\n\r\n            activeColumnName = this._getNextActiveColumn();\r\n\r\n            if (newFilters.length > 0 ){\r\n                this.overlayModel.set({\r\n                    fc_filters: newFilters,\r\n                    active_column: activeColumnName,\r\n                    active_column_formatted: this._getFormattedActiveColumnByName(activeColumnName)\r\n                });\r\n                // Updating a sub-key on a model attribute doesn't seem to trigger a change event.\r\n                // Manually triggering one in this specific case.\r\n                if (triggerNeeded && (origFilterLength === newFilters.length)){\r\n                    this.overlayModel.trigger('change', this.overlayModel);\r\n                }\r\n            } else {\r\n                this.overlayModel.set({\r\n                    active_column: activeColumnName,\r\n                    active_column_formatted: this._getFormattedActiveColumnByName(activeColumnName)\r\n                });\r\n            }\r\n        },\r\n\r\n        updateColumnModels: function(activeColumn){\r\n            // Update the column collection\r\n            var columnModels = this.columns.models;\r\n            _.each(columnModels, function(columnModel){\r\n                if (columnModel.get(\"active_column\") === true && columnModel.get(\"name\") !== activeColumn){\r\n                    columnModel.set({\"active_column\":false});\r\n                }\r\n\r\n                if (columnModel.get(\"name\") === activeColumn){\r\n                    columnModel.set({\"active_column\":true});\r\n                }\r\n            });\r\n\r\n            this.columns.set(columnModels);\r\n\r\n        },\r\n\r\n        setColumns: function(columns){\r\n            var activeColumnName,\r\n                activeColumn = _.findWhere(columns, {active_column:true} ),\r\n                countColumn = _.findWhere(columns, {count_column:true} ),\r\n                noActiveOrCountColSet = !activeColumn || !countColumn;\r\n\r\n            // If the Active or Count columns aren't set, do a case insensitive check and set them.\r\n            if (noActiveOrCountColSet) {\r\n                columns = _.map(columns, _.bind(function(column){\r\n                    if (this.options.activeColumn && (column.name.toLowerCase() === this.options.activeColumn.toLowerCase())){\r\n                        column.active_column = true;\r\n                    }\r\n                    if (this.options.countColumn && (column.name.toLowerCase() === this.options.countColumn.toLowerCase())){\r\n                        column.active_column = true;\r\n                    }\r\n                    return column;\r\n                }, this));\r\n            }\r\n\r\n            this.columns = new FilteredCountColumnCollection(columns);\r\n\r\n            this.setColumnNames();\r\n\r\n            activeColumnName = this.getActiveColumn();\r\n\r\n            this.overlayModel.set({\r\n                active_column: activeColumnName,\r\n                active_column_formatted: this._getFormattedActiveColumnByName(activeColumnName),\r\n                count_column: this.getCountColumn()\r\n            }, {silent: true});\r\n\r\n        },\r\n\r\n        setColumnNames: function(){\r\n            var columnsExcludingCount = this.columns.filter(function(model){\r\n                return (model.get(\"count_column\") !== true);\r\n            });\r\n            this.overlayModel.set({column_names: _.map(columnsExcludingCount, function(model){\r\n                return model.get(\"name\");\r\n            })}, {silent: true});\r\n            this.overlayModel.set({column_names_formatted: _.map(columnsExcludingCount, function(model){\r\n                return model.get(\"name_formatted\") || model.get(\"name\");\r\n            })}, {silent: true});\r\n        },\r\n\r\n        sortGroupAndFilter: function(options){\r\n            var filteredData,\r\n                nestedData;\r\n\r\n            if (this.grouped_on_server){\r\n                filteredData = this._mapGroupedData();\r\n                if (!this.sorted_on_server || (options && options.sort)) {\r\n                    filteredData = this.sortNest(filteredData, this.getSortOptions());\r\n                }\r\n            } else {\r\n                nestedData = this.nest(this.filterBy(this.rawCollection, this.getFilters()),this.getActiveColumn());\r\n                filteredData = this.groupOutlyingValues(this.sortNest(nestedData,this.getSortOptions()),this.getGroupAfter());\r\n            }\r\n\r\n            this.mapFacetData(filteredData);\r\n            // Ensure any default filters are set in the facet panel and facet bar\r\n            if (!this.facetFilters.filters){\r\n                this.facetFilters.filters = this.mapFilterData(this.getFilters());\r\n                this.facetFilters.trigger('reset');\r\n            }\r\n\r\n            return filteredData;\r\n        },\r\n\r\n\t    _mapGroupedData: function () {\r\n            var mappedData = {};\r\n            if (this.groupedData && this.groupedData.data){\r\n                mappedData = _.map(this.groupedData.data, function(rowData){\r\n                    var activeColumn = this.getActiveColumn(),\r\n                        countColumn = this.getCountColumn(),\r\n                        activeColumnValue = this._getCaseInsensitiveProperty(rowData, activeColumn),\r\n                        countColumnValue = this._getCaseInsensitiveProperty(rowData, countColumn),\r\n                        activeFormatted = this._getCaseInsensitiveProperty(rowData, activeColumn+\"_formatted\") || activeColumnValue ,\r\n                        countFormatted = this._getCaseInsensitiveProperty(rowData, countColumn+\"_formatted\") || countColumnValue;\r\n                       \r\n                    return {\r\n                        key: activeColumnValue,\r\n                        key_formatted: this._removeEmptyValues(activeFormatted),\r\n                        value: countColumnValue,\r\n                        value_formatted: countFormatted\r\n                    };\r\n                }, this);\r\n            }\r\n            return mappedData;\r\n        },\r\n\r\n        _removeEmptyValues: function(value){\r\n            return (value === null ||value === \"\" || value === undefined) ? lang.noValue :value;\r\n        },\r\n\r\n        nest: function(dataset,activeColumn) {\r\n            // for providing a count of 'values' (col 1) where 'key' (col n) = activeColumn\r\n\r\n            var nestedData = [],\r\n                index,\r\n                key,\r\n                count,\r\n                nestedItem = {};\r\n\r\n            _.each(dataset, _.bind(function(row){\r\n\r\n                key = this._removeEmptyValues(row[activeColumn]);\r\n                // Check if the current value in the Active Column has already been counted\r\n                // and added to nestedData\r\n                index = _.findIndex(nestedData, function(nestedRow){\r\n                    return nestedRow.key === key;\r\n                });\r\n\r\n                // If this is a new value, add it to the nestedData, otherwise increment the count of the existing object\r\n                if (index === -1){\r\n                    nestedData.push({\r\n                        key: key,\r\n                        key_formatted: key.toString(),\r\n                        value: 1,\r\n                        value_formatted: \"1\"\r\n                    });\r\n                } else {\r\n                    nestedItem = nestedData[index];\r\n                    count = nestedItem.value;\r\n                    count = count + 1;\r\n                    nestedItem.value = count;\r\n                    nestedItem.value_formatted = count.toString();\r\n                    nestedData[index] = nestedItem;\r\n                }\r\n\r\n            },this));\r\n\r\n            return nestedData;\r\n        },\r\n\r\n        filterBy: function(dataset,filters) {\r\n            // returns a reduced dataset where activeColumn value == filterBy\r\n            // filters is an array of objects: e.g. [{column: 'habitat',value: 'jungle'},{column: 'legs',value: 4 }] will likely return leopards but not chickens\r\n\r\n            var column = null,\r\n                value = null,\r\n                operator = null;\r\n\r\n            function dataFiltered(d) {\r\n                var filtered,\r\n                    currentValue = this._removeEmptyValues(d[column]);\r\n                switch(operator) {\r\n                    case '==':\r\n                        filtered = currentValue === value;\r\n                        break;\r\n                    case 'IN':\r\n                        filtered = (value.indexOf(currentValue) !== -1);\r\n                        break;\r\n                    default:\r\n                        filtered = (value.indexOf(currentValue) !== -1);\r\n                }\r\n\r\n                return filtered;\r\n            }\r\n\r\n            _.each(filters,_.bind(function(item) {\r\n                // iterates through each of the objects in the filters array, returning a new dataset of rows where the filter is true\r\n                value = this._removeEmptyValues(item.value);\r\n                column = item.column;\r\n                operator = item.operator;\r\n                dataset = dataset.filter(_.bind(dataFiltered, this));\r\n            }, this));\r\n\r\n            return dataset;\r\n        },\r\n\r\n        sortNest: function(dataset,sortOptions) {\r\n            // sorts data that has been nested by this.nest\r\n            var sorted = [],\r\n                sortBy,\r\n                sortDir;\r\n\r\n            sortBy = sortOptions.sortBy;\r\n            sortDir = sortOptions.sortOrder;\r\n\r\n            dataset = dataset.sort(function(a,b) {\r\n                switch (sortBy.toLowerCase()) {\r\n                    case 'ordinal':\r\n                        if (isNaN(a.key)) {\r\n                            // sort alpha values\r\n                            sorted = d3.ascending(a.key,b.key);\r\n                        }\r\n                        else {\r\n                            sorted = a.key - b.key;\r\n                        }\r\n                        break;\r\n                    case 'count':\r\n                        sorted = a.value - b.value;\r\n                        break;\r\n                    default:\r\n                    // nothing\r\n                }\r\n                return sorted;\r\n            });\r\n            return (sortDir === 'asc') ? dataset : dataset.reverse();\r\n        },\r\n\r\n        groupOutlyingValues: function(dataset,maxItems) {\r\n            // returns a new dataset where any values lower than the top n are grouped into 'other'\r\n            // dataset must be sorted first\r\n            if (dataset.length > maxItems+1 && maxItems > -1) { // only sensible to group values if there are more than 2 of them\r\n                var d1 = dataset.slice(0,maxItems),\r\n                    d2 = dataset.slice(maxItems),\r\n                    oValue = _.pluck(d2,'value'),\r\n                    oTotal = _.reduce(oValue,function(memo,item) {\r\n                        return memo + item;\r\n                    },0),\r\n                    others = {\r\n                        // FIXME: this will change when the column definition is retrieved from the server\r\n                        // At the moment we risk name clashes because we are only using a single string as an identifier.\r\n                        key: 'Other',\r\n                        value: oTotal\r\n                    };\r\n                d1.push(others);\r\n                return d1;\r\n            }\r\n            else {\r\n                return dataset;\r\n            }\r\n        },\r\n\r\n        onOverlayUpdate: function() {\r\n\r\n            var overlayChanges = this.overlayModel.changedAttributes(),\r\n                clientOnlyChanges = (_.keys(_.omit(overlayChanges, ['sort_by','sort_order','view_value_as_percentage'])).length === 0),\r\n                goToServer = (this.grouped_on_server && !clientOnlyChanges);\r\n\r\n            if (!_.has(overlayChanges, 'column_names')){\r\n\r\n                if (goToServer){\r\n                    this._isFetched = false;\r\n                    this._isEmpty = true;\r\n                    this.fetch({type:\"POST\"});\r\n                } else if (clientOnlyChanges) {\r\n                    this.reset(this.sortGroupAndFilter({sort: true}));\r\n                } else {\r\n                    if (_.has(overlayChanges,'active_column')){\r\n                        this.updateColumnModels(overlayChanges.active_column);\r\n                    }\r\n                    this.reset(this.sortGroupAndFilter());\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    ConnectableMixin.mixin(FilteredCountCollection.prototype);\r\n\r\n    var originalFetch = FilteredCountCollection.prototype.fetch;\r\n    FilteredCountCollection.prototype.fetch = function (options) {\r\n        options || (options = {});\r\n\r\n        var requestExtensions,\r\n            data = {\r\n                format: 'webreport',\r\n                method: 'GET'\r\n            },\r\n            chartQueryParms = this.getFilteredCountQuery();\r\n\r\n        data = _.extend(data, chartQueryParms);\r\n\r\n        requestExtensions = {\r\n            type:'POST',\r\n            data: data\r\n        };\r\n\r\n        // This collection can have a large payload so we send it as a POST and add &method=GET\r\n        // in the url function. This is converted to a GET by the REST API request handler when\r\n        // the POST reaches the server.\r\n        if (options){\r\n            _.extend(options,requestExtensions);\r\n        } else {\r\n            options = requestExtensions;\r\n        }\r\n\r\n        return originalFetch.call(this, options);\r\n    };\r\n\r\n    return FilteredCountCollection;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/utils/contexts/factories/visual.data.collection.factory',[\r\n  'module',\r\n  'csui/lib/underscore',\r\n  'csui/lib/backbone',\r\n  'csui/utils/contexts/factories/factory',\r\n  'csui/utils/contexts/factories/connector',\r\n  'webreports/widgets/visual.data.filtered.count/impl/models/visualdata/visual.data.collection'\r\n], function (module,_, Backbone, CollectionFactory, ConnectorFactory, VisualDataCollection) {\r\n\r\n  var VisualDataCollectionFactory = CollectionFactory.extend({\r\n\r\n    // Unique prefix of the default collection instance, when this collection is assigned\r\n    // to a context it can be shared by multiple widgets\r\n    propertyPrefix: 'visualdata',\r\n\r\n    constructor: function VisualDataCollectionFactory(context, options) {\r\n      CollectionFactory.prototype.constructor.apply(this, arguments);\r\n\r\n      // Obtain the server connector from the application context to share\r\n      // the server connection with the rest of the application; include\r\n      // the options, which can contain settings for dependent factories\r\n      var connector = context.getObject(ConnectorFactory, options);\r\n      options.connector = connector;\r\n      var visualdata = this.options.visualdata || {};\r\n\r\n      if (!(visualdata instanceof Backbone.Collection)) {\r\n        var config = module.config();\r\n        visualdata = new VisualDataCollection(visualdata.models, _.extend({\r\n          connector: connector}, visualdata.attributes, config.options, {\r\n          // Prefer refreshing the entire collection to rendering one row after another.\r\n          autoreset: true\r\n        }));\r\n      }\r\n\r\n      // Expose the collection instance in the `property` key on this factory\r\n      // instance to be used by the context\r\n      this.property = visualdata;\r\n    },\r\n\r\n    fetch: function (options) {\r\n      // Just fetch the collection exposed by this factory\r\n      return this.property.fetch(options);\r\n    }\r\n\r\n  });\r\n\r\n  return VisualDataCollectionFactory;\r\n\r\n});\r\n\n","csui.define('webreports/mixins/webreports.view.mixin',['csui/lib/underscore', 'webreports/utils/url.webreports'\r\n], function (_, Url) {\r\n    \"use strict\";\r\n\r\n    var WebReportsViewMixin = {\r\n\r\n        mixin: function (prototype) {\r\n            return _.extend(prototype, {\r\n                setCommonModelOptions: function(options){\r\n\r\n                    var parameters,\r\n                        modelOptions = {};\r\n\r\n                    if (options && options.data) {\r\n\r\n                        // Widgets can pass in WebReport parameters to append to the URL\r\n                        if (_.has(options.data, 'parameters')) {\r\n                            parameters = options.data.parameters;\r\n                            if(!_.isUndefined(parameters) && typeof parameters === \"object\") {\r\n                                _.extend(modelOptions,{parameters: parameters});\r\n\r\n                                // Flatten the parameters and add them directly to the modelOptions\r\n                                // This is needed so that the unique key generated for the collection in the context takes the parameters into account\r\n                                // Nested objects don't get taken into account.\r\n                                _.extend( modelOptions, Url.getWebReportParametersAsData(parameters));\r\n                            }\r\n                        }\r\n\r\n                        // Add the id to the modelOptions\r\n                        if (options.data.id) {\r\n                            _.extend(modelOptions,{id: options.data.id});\r\n                        }\r\n\r\n                        // If the widget is loaded in a container context then we can get the id\r\n                        // from the page context\r\n                        if (options.context) {\r\n                            _.extend(modelOptions,{context: options.context});\r\n                        }\r\n\r\n                    }\r\n\r\n                    return modelOptions;\r\n                }\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n    return WebReportsViewMixin;\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.content',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"visual-data-container\\\"></div>\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_visual.data.content', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette', 'csui/lib/backbone', 'csui/lib/numeral', 'csui/lib/d3', // 3rd party libraries\r\n    'csui/controls/progressblocker/blocker', 'csui/controls/list/emptylist.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/utils/contexts/factories/visual.data.collection.factory',\r\n    'webreports/mixins/webreports.view.mixin',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',\r\n    'hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.content',\r\n    'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data'\r\n], function (_, $, Marionette, Backbone, numeral, d3, BlockingView, EmptyView, VisualDataCollectionFactory, WebReportsViewMixin, lang, template) {\r\n\r\n    var VisualDataContentView = Marionette.ItemView.extend({\r\n\r\n        defaults: {\r\n            marginTop: 20,\r\n            marginRight: 20,\r\n            marginBottom: 100,\r\n            marginLeft: 60,\r\n            groupAfter: 10,\r\n            groupAfterMax: 20 //TODO this needs implementing. The idea is that a pie chart has a different sane groupAfter limit to a bar chart\r\n        },\r\n\r\n        groupAfterValidValues: [2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],\r\n\r\n        ui: {\r\n            dataVisContainer: ' .visual-data-container',\r\n            dataVisOverlay: ' .visual-data-overlay'\r\n        },\r\n\r\n        visType: '', // Define a unique name in extended objects to identify your visualization type\r\n\r\n        constructor: function VisualDataContentView(options) {\r\n\r\n            if (options && options.data) {\r\n                // Check if the header is disabled using `header: false` in the options.\r\n                var header = _.has(options.data, 'header') && _.isBoolean(options.data.header) ? options.data.header : true,\r\n                    // Check if scrolling is disabled using `scroll: false` in the options.\r\n                    scroll = _.has(options.data, 'scroll') && _.isBoolean(options.data.scroll) ? options.data.scroll : true,\r\n                    filterable = _.has(options.data, 'filterable') && _.isBoolean(options.data.filterable) ? options.data.filterable : false,\r\n                    expandable = _.has(options.data, 'expandable') && _.isBoolean(options.data.expandable) ? options.data.expandable : false,\r\n                    viewValueAsPercentage = _.has(options.data, 'viewValueAsPercentage') && _.isBoolean(options.data.viewValueAsPercentage) ? options.data.viewValueAsPercentage : false,\r\n                    groupAfter = ( (_.has(options.data, 'groupAfter') && this.groupAfterValidValues.indexOf(parseInt(options.data.groupAfter, 10)) !== -1)) ? parseInt(options.data.groupAfter, 10) : this.defaults.groupAfter || 5,\r\n                    modelOptions;\r\n\r\n                options.data.header = header;\r\n                options.data.scroll = scroll;\r\n                options.data.visType = this.visType;\r\n                options.data.groupAfter = groupAfter;\r\n                options.data.filterable = filterable;\r\n                options.data.expandable = expandable;\r\n                options.data.viewValueAsPercentage = viewValueAsPercentage;\r\n\r\n                modelOptions = this.setCommonModelOptions(options);\r\n\r\n                _.extend(modelOptions, {\r\n                    visType: options.data.type,\r\n                    type: options.data.type,\r\n                    activeColumn: options.data.activeColumn,\r\n                    filters: options.data.filters,\r\n                    filterable: filterable,\r\n                    expandable: expandable,\r\n                    viewValueAsPercentage: viewValueAsPercentage,\r\n                    sortBy: options.data.sortBy,\r\n                    sortOrder: options.data.sortOrder,\r\n                    groupAfter: groupAfter\r\n                });\r\n\r\n                BlockingView.imbue({\r\n                    parent: this\r\n                });\r\n\r\n                // Set up the data collection object\r\n                options.collection = options.context.getCollection(VisualDataCollectionFactory, {attributes: modelOptions});\r\n\r\n                // Whenever the collection is synced, re-render the view\r\n                // This ensures the visualization is rendered to the view when the data\r\n                // has been fetched.\r\n                this.listenTo(options.collection, 'sync', this.resetAndRender)\r\n                    .listenTo(options.collection, 'reset', this.resetAndRender)\r\n                    .listenTo(options.collection, 'request', this.blockActions)\r\n                    .listenTo(options.collection, 'sync error', this.unblockActions);\r\n\r\n            }\r\n\r\n            // Call the parent constructor to ensure the object is built with all the inherited features.\r\n            Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n\r\n            // SVG needs to be redrawn when the container is re-sized\r\n            this.onWinRefresh = _.bind(this.resetAndRender, this);\r\n            $(window).on(\"resize.app\", this.onWinRefresh);\r\n\r\n            this.model = options.collection.overlayModel;\r\n\r\n        },\r\n\r\n        template: template,\r\n\r\n        className: 'visual-data-wrapper',\r\n\r\n        changeChartType: function() {\r\n            // TODO: need to get this working and remove comments\r\n            console.log('change chart!');\r\n            console.log(this);\r\n            this.visType = this.model.get(\"vis_type\");\r\n            this.resetAndRender();\r\n        },\r\n\r\n        onDomRefresh: function () {\r\n            if (this.collection.isFetched()) {\r\n                this.draw();\r\n                this.isChartRendered = true;\r\n            }\r\n        },\r\n\r\n        callBackAlreadyHit: false,\r\n\r\n        appendVisElements: function () {\r\n            // override this stub to append the elements of your visualization\r\n            // underneath the root element\r\n        },\r\n\r\n        update: function () {\r\n            // override this stub to implement the code to update your visualization\r\n        },\r\n\r\n        isChartRendered: false,\r\n\r\n        createRootElement: function () {\r\n\r\n            //FIXME: constantly adding and subtracting margins is not the right way. we need a core width property, and a with-margins width property\r\n\r\n            var width = (this.width() > 0) ? this.width() : $(this.$el).width() - this.marginLeft() - this.marginRight(),\r\n                height = (this.height() > 0) ? this.height() : $(this.$el).height() - this.marginTop() - this.marginBottom();\r\n\r\n            // TODO: consider using getBoundingClientRect() to get a dimensions object for the parent container\r\n            /* // e.g.\r\n            var boundingRect = this.$el[0].getBoundingClientRect(),\r\n                width = boundingRect.width,\r\n                height = boundingRect.height;\r\n            */\r\n\r\n            // dom refresh can be called multiple times so we need to remove existing charts when we redraw.\r\n            if (this.uniqueID && $('#'+this.uniqueID).length){\r\n                $('#'+this.uniqueID).remove();\r\n            }\r\n\r\n            this.uniqueID = _.uniqueId('vis_');\r\n            //TODO: following line is where new viselement replaces all existing charts\r\n            this.visElement = d3.select(this.ui.dataVisContainer[0]).append(this.rootElementType)\r\n                .attr(\"id\", this.uniqueID)\r\n                .attr(\"width\", width + this.marginLeft() + this.marginRight())\r\n                .attr(\"height\", height + this.marginTop() + this.marginBottom());\r\n\r\n        },\r\n\r\n        onDestroy: function () {\r\n            $(window).off(\"resize.app\", this.onWinRefresh);\r\n        },\r\n\r\n        draw: function () {\r\n            if ( this.collection.isEmpty() ){\r\n                this.renderEmptyView();\r\n            } else {\r\n                this.createRootElement();\r\n                this.appendVisElements();\r\n                this.update();\r\n            }\r\n        },\r\n\r\n        renderEmptyView: function () {\r\n            var $tileContentElem = this.ui.dataVisContainer.closest('.tile-content'),\r\n                emptyView = new EmptyView({\r\n\t\t\t\t\ttext: lang.emptyChartText\r\n\t\t\t\t});\r\n            // Render the empty view\r\n            $tileContentElem.html(emptyView.render().el);\r\n            // Hide the settings button\r\n            $tileContentElem.siblings('.visual-data-btn-settings')\r\n                            .addClass('binf-hidden');\r\n            // Hide the expand button\r\n            $tileContentElem.siblings('.tile-footer')\r\n                            .children('.tile-expand')\r\n                            .addClass('binf-hidden');\r\n        },\r\n\r\n        resetAndRender: function () {\r\n            this.render();\r\n        },\r\n\r\n        checkSign: function (x) {\r\n            return Math.sign || function(x) {\r\n                    x = +x; // convert to a number\r\n                    if (x === 0 || isNaN(x)) {\r\n                        return Number(x);\r\n                    }\r\n                    return x > 0 ? 1 : -1;\r\n                };\r\n        },\r\n\r\n        shortenText: function(t) {\r\n            t = t || '';\r\n            var maxLength = 20;\r\n            t = (t.length >= maxLength) ? t.substr(0, maxLength) + '\\u2026' : t;\r\n            return t;\r\n        },\r\n\r\n        formatCount: function(n){\r\n            var formattedValue, formatTemplate,\r\n                countColumnModel = this.collection.columns.findWhere({count_column: true}),\r\n                format = countColumnModel.get(\"client_format\").type;\r\n\r\n\t\t\tswitch(format) {\r\n\t\t\t\tcase \"si\":\r\n\t\t\t\t\tformattedValue = this.shortenNumber(n);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"bytes\":\r\n\t\t\t\t\t// determine which format we want:\r\n\t\t\t\t\tformatTemplate = (n < 1024) ? '0b' : '0.0b';\r\n                    // call the function to format it:\r\n\t\t\t\t\tformattedValue = numeral(n).format( formatTemplate );\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tformattedValue = n.toString();\r\n\t\t\t}\r\n\t\t\treturn formattedValue;\r\n\t\t},\r\n\r\n        shortenNumber: function(n) {\r\n            n = n.toPrecision(3) || 0;\r\n            n = Number(n); // remove precision decimal places for integers\r\n            var formatNumber = d3.format('.3s'),\r\n                displayNumber = (n < 1000 && n > -1000) ? n.toString() : formatNumber(n);\r\n\r\n            return displayNumber;\r\n        },\r\n\r\n        width: function () {\r\n            return this.$el.parent().width() - this.marginLeft() - this.marginRight();\r\n\r\n/*          TODO: fix height issues in expanded view when extra toolbars are loaded.\r\n            if (this.options.data.isExpanded){\r\n                var height = this.$el.parent().height() - this.marginTop() - this.marginBottom(),\r\n                    toolbarHeight = ($(\".facetbarview\").height() || 0) + $(\".visual-data-controls\").height() || 0,\r\n                    toolbarPercent = (toolbarHeight / height) * 100;\r\n\r\n                width = (width -(width / 100)* toolbarPercent);\r\n            }*/\r\n\r\n        },\r\n\r\n        height: function () {\r\n            return this.$el.parent().height() - this.marginTop() - this.marginBottom();\r\n\r\n/*         //TODO: fix height issues in expanded view when extra toolbars are loaded.\r\n            if (this.options.data.isExpanded){\r\n                height = height -  $(\".facetbarview\").height() || 0;\r\n                height = height -  $(\".visual-data-controls\").height() || 0;\r\n                height = height -  $(\".binf-modal-footer\").height() || 0;\r\n            }*/\r\n\r\n        },\r\n\r\n        marginTop: function () {\r\n            return this.defaults.marginTop;\r\n        },\r\n\r\n        marginBottom: function () {\r\n            return this.defaults.marginBottom;\r\n        },\r\n\r\n        marginLeft: function () {\r\n            return this.defaults.marginLeft;\r\n        },\r\n\r\n        marginRight: function () {\r\n            return this.defaults.marginRight;\r\n        },\r\n\r\n        // Allows dynamic setting of the root element type. For instance, this could be changed to canvas for a particular visualization if required.\r\n        rootElementType: \"svg\"\r\n    });\r\n\r\n    // Add the mixin functionality to the target view\r\n    WebReportsViewMixin.mixin(VisualDataContentView.prototype);\r\n\r\n    return VisualDataContentView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.overlay',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    return \"binf-hidden\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"                        <option value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.column || (depth0 != null ? depth0.column : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"column\",\"hash\":{}}) : helper)))\n    + \"\\\" \"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.selected : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \">\"\n    + this.escapeExpression(((helper = (helper = helpers.column_formatted || (depth0 != null ? depth0.column_formatted : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"column_formatted\",\"hash\":{}}) : helper)))\n    + \"</option>\\r\\n\";\n},\"4\":function(depth0,helpers,partials,data) {\n    return \"selected=\\\"selected\\\"\";\n},\"6\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"                    <option value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"value\",\"hash\":{}}) : helper)))\n    + \"\\\" \"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.selected : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \">\"\n    + this.escapeExpression(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"label\",\"hash\":{}}) : helper)))\n    + \"</option>\\r\\n\";\n},\"8\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"                    <option value=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"value\",\"hash\":{}}) : helper)))\n    + \"\\\" \"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.selected : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \">\"\n    + this.escapeExpression(((helper = (helper = helpers.display || (depth0 != null ? depth0.display : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"display\",\"hash\":{}}) : helper)))\n    + \"</option>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"\\\" class=\\\"visual-data-controls\\\">\\r\\n    <div class=\\\"visual-data-control-group controls-lhs \"\n    + ((stack1 = helpers.unless.call(depth0,(depth0 != null ? depth0.multipleColumns : depth0),{\"name\":\"unless\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\\">\\r\\n        <ul>\\r\\n            <li>\\r\\n                <label for=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-active-column\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.activeColumn : stack1), depth0))\n    + \"</label>\\r\\n                <select name=\\\"visual-data-active-column\\\" id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-active-column\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.columnnames : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(3, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"                </select>\\r\\n            </li>\\r\\n        </ul>\\r\\n    </div>\\r\\n    <div class=\\\"visual-data-control-group controls-rhs\\\">\\r\\n        <ul>\\r\\n            <li> <label for=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-sort-options\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.sortBy : stack1), depth0))\n    + \"</label><select name=\\\"visual-data-sort-options\\\" id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-sort-options\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.sortOptions : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(6, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"            </select></li>\\r\\n            <li><label for=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-value-as-percentage\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.showValuesAs : stack1), depth0))\n    + \"</label><select name=\\\"visual-data-value-as-percentage\\\" id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-value-as-percentage\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.viewValueAsPercentage : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(6, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"            </select></li>\\r\\n            <li><label for=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-group-after\\\">\"\n    + this.escapeExpression(this.lambda(((stack1 = (depth0 != null ? depth0.lang : depth0)) != null ? stack1.groupAfter : stack1), depth0))\n    + \"</label> <select name=\\\"visual-data-group-after\\\" id=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"_visual-data-group-after\\\">\\r\\n\"\n    + ((stack1 = helpers.each.call(depth0,(depth0 != null ? depth0.groupAfter : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":this.program(8, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"            </select></li>\\r\\n        </ul>\\r\\n    </div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_visual.data.overlay', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.overlay.view',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette', 'csui/lib/backbone', // 3rd party libraries,\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',\r\n    'hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.overlay',\r\n    'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data'\r\n], function (_, $, Marionette, Backbone, lang, template) {\r\n\r\n      var VisualDataOverlayView = Marionette.ItemView.extend({\r\n\r\n          constructor: function VisualDataOverlayView(options) {\r\n\r\n              this.model = options.overlayModel;\r\n              this.uniqueID = _.uniqueId(\"visual-data-controls_\");\r\n\r\n              // Call the parent constructor to ensure the object is built with all the inherited features.\r\n              Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n          },\r\n\r\n          ui: function(){\r\n              return {\r\n                  settingsField: '#'+ this.uniqueID +' select'\r\n              };\r\n          },\r\n\r\n          template: template,\r\n\r\n          events: {\r\n               'change @ui.settingsField': 'onChangeSetting'\r\n          },\r\n\r\n          templateHelpers: function () {\r\n              // TODO: generate 'chartSelectOptions' using a chart collection rather than hard-coded values.\r\n              var groupAfter = _.map([2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20], function (value) {\r\n                      return {\r\n                          value: value ,\r\n                          display: value ,\r\n                          selected: this.model.get('group_after') === value\r\n                      };\r\n                  }, this),\r\n                  chartSelectOptions = [\r\n                      {visType: 'bar', name: lang.barChart, selected: this.model.get('vis_type') === 'bar'},\r\n                      {visType: 'donut', name: lang.donutChart, selected: this.model.get('vis_type') === 'donut'},\r\n                      {visType: 'pie', name: lang.pieChart, selected: this.model.get('vis_type') === 'pie'}\r\n                  ],\r\n                  viewValueAsPercentage = [\r\n                      {value:\"true\", selected: this.model.get(\"view_value_as_percentage\"), label: lang.percentage},\r\n                      {value:\"false\", selected: !this.model.get(\"view_value_as_percentage\"), label: lang.actual}\r\n                  ],\r\n                  sortOptions = [\r\n                        {value:\"Count|asc\", selected: (this.model.get(\"sort_by\") === \"Count\" && this.model.get(\"sort_order\") === \"asc\"), label: lang.count+':'+ lang.asc},\r\n                        {value:\"Count|desc\", selected: (this.model.get(\"sort_by\") === \"Count\" && this.model.get(\"sort_order\") === \"desc\"), label: lang.count+':'+ lang.desc},\r\n                        {value:\"ordinal|asc\", selected: (this.model.get(\"sort_by\") === \"ordinal\" && this.model.get(\"sort_order\") === \"asc\"), label: lang.activeColumn+':'+ lang.asc},\r\n                        {value:\"ordinal|desc\", selected: (this.model.get(\"sort_by\") === \"ordinal\" && this.model.get(\"sort_order\") === \"desc\"), label: lang.activeColumn+':'+ lang.desc}\r\n                  ],\r\n                  columnNames = _.map(this.model.get('column_names'), function (column, index) {\r\n                      return {\r\n                          column: column,\r\n                          column_formatted: this.model.get('column_names_formatted')[index],\r\n                          selected: this.model.get('active_column') === column\r\n                      };\r\n                  }, this);\r\n\r\n              return {\r\n                  chartoptions: chartSelectOptions,\r\n                  columnnames: columnNames,\r\n                  groupAfter: groupAfter,\r\n                  viewValueAsPercentage: viewValueAsPercentage,\r\n                  sortOptions: sortOptions,\r\n                  lang: lang,\r\n                  id: this.uniqueID,\r\n                  multipleColumns: (columnNames.length > 1 )\r\n              };\r\n\r\n          },\r\n\r\n          onChangeSetting: function(event) {\r\n              event.preventDefault();\r\n              this.updateSettings();\r\n          },\r\n\r\n          updateSettings: function() {\r\n\r\n              var activeColumn,\r\n                  activeColumnFormatted,\r\n                  sortOptions,\r\n                  sortBy,\r\n                  sortOrder,\r\n                  overlayForm = $('#'+ this.uniqueID +' select'),\r\n                  overlayFormData= overlayForm.serializeArray();\r\n\r\n              // convert overlayFormData into an object with key/values.\r\n              overlayFormData = _.object(_.map(overlayFormData, _.values));\r\n\r\n              activeColumn = overlayFormData['visual-data-active-column'];\r\n              sortOptions = overlayFormData['visual-data-sort-options'];\r\n              sortOptions = sortOptions.split('|');\r\n              sortBy = sortOptions[0];\r\n              sortOrder = sortOptions[1];\r\n              activeColumnFormatted = $(\"#\"+ this.uniqueID +\" select[name='visual-data-active-column'] option[value='\"+activeColumn+\"']\").text();\r\n\r\n              this.model.set({\r\n                  active_column: activeColumn,\r\n                  active_column_formatted: activeColumnFormatted,\r\n                  sort_by: sortBy,\r\n                  sort_order: sortOrder,\r\n                  view_value_as_percentage: (overlayFormData['visual-data-value-as-percentage'].toLowerCase() === 'true'), // cast string as boolean\r\n                  group_after: +overlayFormData['visual-data-group-after'] //string to number\r\n              });\r\n          }\r\n\r\n      });\r\n\r\n    return VisualDataOverlayView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"csui-header\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"label\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.header : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"\\r\\n<!--outer/inner wrappers used to size and identify when number of -->\\r\\n<!--chicklets cannot fit within provided outer wrapper width.-->\\r\\n<div class=\\\"csui-facet-list-area\\\">\\r\\n  <ol class=\\\"csui-facet-list\\\"></ol>\\r\\n  <div class=\\\"binf-dropdown dropdown-facet-list csui-hidden\\\">\\r\\n    <button type=\\\"button\\\" class=\\\"binf-btn binf-btn-default binf-dropdown-toggle\\\"\\r\\n            data-binf-toggle=\\\"dropdown\\\" aria-haspopup=\\\"true\\\" aria-expanded=\\\"true\\\">\\r\\n      <span class=\\\"csui-icon icon-more\\\"></span>\\r\\n    </button>\\r\\n    <ul class=\\\"binf-dropdown-menu\\\" role=\\\"menu\\\" aria-labelledby=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"id\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n    </ul>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"csui-clear-all\\\" tabindex=\\\"-1\\\">\\r\\n  <div class='cs-icon binf-close'></div>\\r\\n  <div class='clear-label'>\"\n    + this.escapeExpression(((helper = (helper = helpers.clearAll || (depth0 != null ? depth0.clearAll : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"clearAll\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n</div>\\r\\n\\r\\n\\r\\n\\r\\n\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_facet.bar_impl_facet.bar', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.item',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\\r\\n<li class=\\\"csui-facet-item zero-height\\\">\\r\\n  <a tabindex=\\\"-1\\\">\\r\\n  <span class=\\\"csui-label\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.label || (depth0 != null ? depth0.label : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"label\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n  <span class=\\\"csui-icon binf-close\\\" data-facet=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.facetIndex || (depth0 != null ? depth0.facetIndex : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"facetIndex\",\"hash\":{}}) : helper)))\n    + \"\\\" data-topic=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.topicIndex || (depth0 != null ? depth0.topicIndex : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"topicIndex\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n  </a>\\r\\n</li>\\r\\n\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_facet.bar_impl_facet.item', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/nls/root/lang',{\r\n  clearAll: 'Clear all'\r\n});\r\n\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/facet.bar.view',[\r\n  \"csui/lib/jquery\",\r\n  \"csui/lib/underscore\",\r\n  \"csui/lib/backbone\",\r\n  \"csui/lib/marionette\",\r\n  \"csui/models/facets\",\r\n  \"csui/models/facettopics\",\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  \"hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar\",\r\n  \"hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.item\",\r\n  \"i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/nls/lang\",\r\n  \"css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/impl/facet.bar\"\r\n], function ( $, _, Backbone, Marionette, FacetCollection,\r\n    FacetTopicCollection, TabableRegionBehavior, template, itemTemplate, lang) {\r\n\r\n  var FacetBarView =Marionette.ItemView.extend({\r\n\r\n    listItemContext: itemTemplate,\r\n    template: template,\r\n    className: 'csui-facet-bar',\r\n    ui:{\r\n      facetListArea : '> div.csui-facet-list-area',\r\n      facetList : '> div.csui-facet-list-area .csui-facet-list',\r\n      facetDropdown: '.dropdown-facet-list',\r\n      facetDropdownList : '.dropdown-facet-list > ul',\r\n      dropdownBtn: '.binf-dropdown button',\r\n      facetHeaderLabel: '> .csui-header',\r\n      clearAll: '.csui-clear-all'\r\n    },\r\n\r\n    triggers: {\r\n      'click .csui-clear-all': 'clear:all'\r\n    },\r\n\r\n    events: {\r\n      'click .csui-facet-item .binf-close': 'onRemoveFilter',\r\n      'keydown': 'onKeyInView'\r\n    },\r\n    behaviors: {\r\n      TabableRegion: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n    },\r\n\r\n    templateHelpers:function(){\r\n      var options = this.options;\r\n      return {\r\n        clearAll: lang.clearAll,\r\n        header: options.header,\r\n        label: options.label\r\n      };\r\n    },\r\n\r\n    constructor: function FacetBarView(options) {\r\n      options || (options = {});\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n      this.listenTo(this.collection, 'reset', this.render, this);\r\n      this.onWinResize = _.bind(function () {\r\n        this.render();\r\n      }, this);\r\n      $(window).bind(\"resize.facetview\", this.onWinResize);\r\n\r\n    },\r\n\r\n    currentlyFocusedElement: function () {\r\n      //change the input and icons back to tabindex = 0. Tabable behavior sets all tabindex to -1, which doesn't work for\r\n      //this scenario\r\n      var dropdownBtn = this.ui.dropdownBtn,\r\n          focusables = this.$('.csui-facet-item > a[tabindex=-1]');\r\n      if (focusables.length) {\r\n        focusables.prop('tabindex', 0);\r\n        if (_.isFunction(this.ui.clearAll.prop)){\r\n          this.ui.clearAll.prop('tabindex', 0);\r\n        }\r\n      }\r\n      if (_.isFunction(this.ui.facetDropdown.hasClass)){\r\n        if (this.ui.facetDropdown.hasClass('csui-hidden')) {\r\n          dropdownBtn.prop('tabindex', -1);\r\n        }\r\n        else{\r\n          dropdownBtn.prop('tabindex', 0);\r\n        }\r\n      }\r\n      return $(this.$('[tabindex]')[0]);\r\n    },\r\n    onKeyInView: function (event) {\r\n      var keyCode = event.keyCode,\r\n          retVal = true,\r\n          $target = $(event.target);\r\n\r\n      switch (keyCode) {\r\n        //delete key\r\n        case 46:\r\n          if ($target.parent().hasClass('csui-facet-item')) {\r\n            $target = $target.find('.binf-close');\r\n            this.trigger('remove:filter',\r\n                {facetIndex: $target.attr('data-facet'), filterIndex: $target.attr('data-topic')});\r\n            retVal = false;\r\n          }\r\n          break;\r\n        //enter and space bar\r\n        case 13:\r\n          if ($target.hasClass('csui-clear-all')) {\r\n            this.trigger('remove:all');\r\n            retVal = false;\r\n          }\r\n          break;\r\n        //ignore space bar but return false as it appears to affect the facet panel scrolling\r\n        case 32:\r\n          retVal = false;\r\n          break;\r\n      }\r\n      return retVal;\r\n    },\r\n\r\n    onDestroy: function(){\r\n      $(window).unbind(\"resize.facetview\", this.onWinResize);\r\n    },\r\n\r\n    onRender: function(){\r\n      if ( this.collection.filters.length > 0 ) {\r\n        this.$el.show();\r\n      }\r\n      else{\r\n        this.$el.hide();\r\n      }\r\n    },\r\n\r\n   onDomRefresh: function () {\r\n     this.ui.facetList[0].innerHTML = '';\r\n     var filters = this.collection.filters,\r\n       overflowStartIndex = this.addToFacetBar(filters);\r\n\r\n     if (overflowStartIndex) {\r\n        this.ui.facetDropdown.removeClass('csui-hidden');\r\n       this.addToOverFlowDropDown(filters, overflowStartIndex);\r\n     }\r\n   },\r\n\r\n    addToOverFlowDropDown: function(filters, startIndex) {\r\n      var i = startIndex.startFilter,\r\n        jqDropDownList = this.ui.facetDropdownList;\r\n\r\n      for (; i < filters.length; i++) {\r\n        var filter = filters[i],\r\n          values = filter.values,\r\n          j =  (i === startIndex.startFilter) ? startIndex.startValue : 0;\r\n\r\n        for(; j < values.length ; j++) {\r\n            var filterName = filter.facetName + ' : ' + values[j].topicName,\r\n              newTopic = $(this.listItemContext({label: filterName, facetIndex: i, topicIndex: j}));\r\n\r\n            newTopic.removeClass('zero-height');\r\n            jqDropDownList.append(newTopic);\r\n        }\r\n      }\r\n    },\r\n\r\n    addToFacetBar: function(filters){\r\n     var ui = this.ui,\r\n       jqFacetListArea = ui.facetListArea,\r\n       jqFacetList = ui.facetList;\r\n\r\n     for (var i = 0; i < filters.length; i++) {\r\n       var filter = filters[i],\r\n         values = filter.values;\r\n\r\n       for (var j = 0; j < values.length; j++) {\r\n\r\n         var filterName = filter.facetName + ' : ' + values[j].topicName,\r\n           newTopic = $(this.listItemContext({label: filterName, facetIndex: i, topicIndex: j}));\r\n\r\n         jqFacetList.append(newTopic);\r\n\r\n         var widthOfListArea = jqFacetListArea.width(),\r\n              widthOfMoreIcon = ui.facetDropdown.width(),\r\n           widthOfList = jqFacetList.width() + widthOfMoreIcon;\r\n\r\n         if (widthOfList < widthOfListArea) {\r\n           newTopic.removeClass('zero-height');\r\n         }\r\n         else {\r\n           newTopic.remove();\r\n           return {startFilter: i, startValue: j};\r\n         }\r\n       }\r\n     }\r\n   },\r\n\r\n    onClearAll: function(){\r\n      this.trigger('remove:all');\r\n    },\r\n\r\n    onRemoveFilter: function(e){\r\n      var target = $(e.target);\r\n      this.trigger('remove:filter',\r\n          {facetIndex: target.attr('data-facet'), filterIndex: target.attr('data-topic')});\r\n    },\r\n\r\n    applyFilter: function(facet){\r\n      this.trigger('apply:filter', facet.newFilter);\r\n    },\r\n\r\n    updateHeaderLabel: function( label ){\r\n      this.options.label = label;\r\n      this.ui.facetHeaderLabel.text(label);\r\n    }\r\n  });\r\n\r\n\r\n  return FacetBarView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.key.navigation',['csui/lib/underscore', 'csui/lib/jquery'\r\n], function (_, $) {\r\n  'use strict';\r\n\r\n  var KeyEventNavigation = {\r\n\r\n    onKeyInView: function (event) {\r\n      var keyCode = event.keyCode;\r\n      var retVal = false;\r\n\r\n      switch (keyCode) {\r\n        //escape\r\n        case 27:\r\n          this.trigger('escape:focus');\r\n          this.activeChild.removeClass('csui-focus');\r\n          break;\r\n        //Enter and space\r\n        case 32:\r\n        case 13:\r\n            this.execute(this.activeChild);\r\n          break;\r\n        //up arrow, page up\r\n        //down arrow, page down\r\n        case 38:\r\n        case 33:\r\n        case 40:\r\n        case 34:\r\n          //ignore up/down arrow keys for sub-facet. Up/down arrow keys is only relevant\r\n          //on the facet panel or with in the individual filter lists.\r\n          if (this.activeChild && this.activeChild.hasClass('csui-focus')) {\r\n            break;\r\n          }\r\n          retVal = true;\r\n          break;\r\n        //tab/shift-tab\r\n        case 9:\r\n          if (this.activeChild && this.$el.hasClass('csui-focus')) {\r\n            retVal = this.tab(event.shiftKey);\r\n            break;\r\n          }\r\n          retVal = true;\r\n          break;\r\n        default:\r\n          retVal = true;\r\n      }\r\n      return retVal;\r\n    },\r\n\r\n    execute: function (activeChild) {\r\n      //If this facet is disabled for selection, then on execution expand or collapse\r\n      //the facet group\r\n      this.$el.addClass('csui-focus');\r\n      if (this.$el.find('.facet-disabled').length) {\r\n        this.onShowFacet();\r\n      }\r\n      else {\r\n        this.setfocus(activeChild);\r\n      }\r\n    },\r\n    setfocus : function(activeChild) {\r\n      (activeChild && activeChild.is(':visible')) || (activeChild = this.getActiveChild());\r\n\r\n      if (activeChild.hasClass('csui-focus')) {\r\n\r\n        switch (activeChild) {\r\n          case this.ui.facetHeaderIcon:\r\n            if(this.ui.facetHeader.hasClass('binf-disabled')){\r\n              break;\r\n            }\r\n            activeChild.trigger('click');\r\n            activeChild.addClass('csui-focus');\r\n            break;\r\n\r\n          case this.ui.apply:\r\n          case this.ui.cancel:\r\n            activeChild.trigger('click');\r\n            this.trigger('escape:focus');\r\n            this.activeChild = undefined;\r\n            break;\r\n\r\n          case this.ui.facetMore:\r\n            //reset focus to \"show more/less\" so that\r\n            //scrolled focus is still on the \"show more/less\" after the\r\n            //default action\r\n            activeChild.trigger('click');\r\n            if (activeChild === this.ui.facetMore) {\r\n              this.activateChild(activeChild);\r\n            }\r\n        }\r\n      }\r\n      else {\r\n        this.activateChild(activeChild);\r\n      }\r\n    },\r\n\r\n    tab: function (shiftTab) {\r\n      var facets = this.$el.find('.csui-facet-item:not(.binf-hidden)');\r\n\r\n      if (this.activeChild.hasClass('csui-focus')) {\r\n        if (shiftTab) {\r\n          this.activeChild = this._getPrevActiveChild(facets);\r\n        }\r\n        else {\r\n          this.activeChild = this._getNextActiveChild(facets);\r\n        }\r\n\r\n        this.activateChild(this.activeChild);\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    },\r\n\r\n    activateChild: function (activeChild) {\r\n      activeChild || (activeChild = this.getActiveChild());\r\n      if (this.prevChild) {\r\n        this.prevChild.removeClass('csui-focus');\r\n      }\r\n      activeChild.addClass('csui-focus');\r\n      activeChild.focus();\r\n      this.prevChild = this.activeChild;\r\n    },\r\n\r\n    getActiveChild: function () {\r\n      var childViewContainers = this.$el.find('.csui-facet-item:not(.binf-hidden)');\r\n      if (!this.activeChild || !this.activeChild.is(':visible')) {\r\n        if (this.ui.facetHeaderIcon.hasClass('.icon-expandArrowDown')) {\r\n          this.activeChild = this.ui.facetHeaderIcon;\r\n        }\r\n        else {\r\n          this.activeChild = $(childViewContainers[0]).find('span');\r\n          this.activeChildIndex = 0;\r\n        }\r\n      }\r\n      return this.activeChild;\r\n    },\r\n\r\n\r\n    cursorNextFilter: function (view, keyUp, target) {\r\n      var childViewContainers = this.$el.find('.csui-facet-item:not(.binf-hidden)'),\r\n        numViews = childViewContainers.length - 1;\r\n\r\n      if (keyUp) {\r\n        this.activeChildIndex = this.activeChildIndex === 0 ? numViews : --this.activeChildIndex;\r\n      }\r\n      else {\r\n        this.activeChildIndex = this.activeChildIndex === numViews ? 0 : ++this.activeChildIndex;\r\n      }\r\n\r\n      if (target.hasClass('icon')) {\r\n        this.activeChild = $(childViewContainers[this.activeChildIndex]).find('span');\r\n      }\r\n      else {\r\n        this.activeChild = $(childViewContainers[this.activeChildIndex]).find('.csui-filter-name');\r\n      }\r\n\r\n      this.children.findByIndex(this.activeChildIndex).activeChild = this.activeChild;\r\n      this.activateChild(this.activeChild);\r\n    },\r\n\r\n    _getLastFilterFocus: function (facets) {\r\n      var childIndex = this.activeChildIndex;\r\n      this.activeChildIndex = childIndex && childIndex < facets.length ? childIndex : 0;\r\n      return this.children.findByIndex(this.activeChildIndex).activeChild;\r\n    },\r\n\r\n    _getNextActiveChild: function (facets) {\r\n      var nextChild = this.activeChild;\r\n\r\n      switch (this.activeChild) {\r\n        case this.ui.facetHeaderIcon:\r\n          if (this.ui.facetHeaderIcon.hasClass('icon-expandArrowUp')) {\r\n            nextChild = this._getLastFilterFocus(facets);\r\n          }\r\n          break;\r\n        case this.ui.facetMore:\r\n          if (this.$el.find('.csui-multi-select').length > 0) {\r\n            nextChild = this.ui.apply;\r\n          }\r\n          break;\r\n        case this.ui.cancel:\r\n          break;\r\n        case this.ui.apply:\r\n          nextChild = this.ui.cancel;\r\n          break;\r\n        default:\r\n          if (this.ui.facetMore.length > 0) {\r\n            nextChild = this.ui.facetMore;\r\n          }\r\n          else if (this.$el.find('.csui-multi-select').length > 0) {\r\n            nextChild = this.ui.apply;\r\n          }\r\n      }\r\n\r\n      return nextChild;\r\n    },\r\n\r\n    _getPrevActiveChild: function (facets) {\r\n      var nextChild = this.activeChild;\r\n\r\n      switch (this.activeChild) {\r\n        case this.ui.facetHeaderIcon:\r\n          break;\r\n        case this.ui.facetMore:\r\n          nextChild = this._getLastFilterFocus(facets);\r\n          break;\r\n        case this.ui.cancel:\r\n          nextChild = this.ui.apply;\r\n          break;\r\n        case this.ui.apply:\r\n          if (this.ui.facetMore.length > 0) {\r\n            nextChild = this.ui.facetMore;\r\n          }\r\n          else {\r\n            nextChild = this._getLastFilterFocus(facets);\r\n          }\r\n          break;\r\n        default:\r\n          if(this.ui.facetHeader.hasClass('binf-disabled')){\r\n            break;\r\n          }\r\n          nextChild = this.ui.facetHeaderIcon;\r\n      }\r\n\r\n      return nextChild;\r\n    }\r\n\r\n\r\n  };\r\n\r\n  return KeyEventNavigation;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"    <span class=\\\"icon icon-checkbox \"\n    + this.escapeExpression(((helper = (helper = helpers.showOnHover || (depth0 != null ? depth0.showOnHover : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"showOnHover\",\"hash\":{}}) : helper)))\n    + \"\\\" tabindex=\\\"-1\\\">\\r\\n    <input type=\\\"checkbox\\\" />\\r\\n  </span>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.enableCheckBox : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"<div class=\\\"csui-filter-name\\\" tabindex=\\\"-1\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \" (\"\n    + this.escapeExpression(((helper = (helper = helpers.total || (depth0 != null ? depth0.total : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"total\",\"hash\":{}}) : helper)))\n    + \")\\\">\\r\\n    <div class=\\\"csui-name\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n    <div class=\\\"csui-total\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.total || (depth0 != null ? depth0.total : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"total\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n</div>\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_facet.panel_impl_facet_facet.item', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item.view',[\"csui/lib/jquery\", \"csui/utils/base\", \"csui/lib/underscore\", \"csui/lib/marionette\",\r\n  \"hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item\",\r\n  \"css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item\"\r\n], function ($, base, _, Marionette, template) {\r\n\r\n  var FacetItemView = Marionette.ItemView.extend({\r\n\r\n    template: template,\r\n    className: 'csui-facet-item',\r\n\r\n    constructor: function FacetItemView(options) {\r\n      Marionette.ItemView.prototype.constructor.apply(this, arguments);\r\n      this.showInputOnHover =  !base.isTouchBrowser();\r\n\t\tthis.uniqueID = _.uniqueId(\"visual-data-controls_\");\r\n    },\r\n\r\n    triggers: {\r\n      'click .csui-filter-name': 'single:filter:select'\r\n    },\r\n\r\n    events: {\r\n      'click input': 'onCheckBoxSelect',\r\n      'change input': 'onChangeValue',\r\n      'keydown > span': 'onKeyInView',\r\n      'keydown .csui-filter-name': 'onKeyInView'\r\n    },\r\n\r\n    ui: {\r\n      icon: '> span',\r\n      checkbox: '> span input',\r\n      filterName: '> .csui-filter-name'\r\n    },\r\n\r\n    templateHelpers: function(){\r\n      var showOnHover = this.showInputOnHover? '' : 'csui-showAlways';\r\n      return {\r\n        showOnHover: showOnHover,\r\n          id: this.uniqueID,\r\n        enableCheckBox : this.options.enableCheckBoxes\r\n      };\r\n    },\r\n    onKeyInView: function(event){\r\n      var keyCode = event.keyCode,\r\n        target = $(event.target);\r\n      switch (keyCode) {\r\n        //Enter and space\r\n        case 32:\r\n        case 13:\r\n          if(target.hasClass('icon')){\r\n            this.ui.checkbox.trigger('click');\r\n          }\r\n          else{\r\n            this.trigger('single:filter:select', this);\r\n          }\r\n          break;\r\n        //right/left arrow\r\n        case 39:\r\n        case 37:\r\n          //this.trigger('keyleftright', targetElem);\r\n          this.activeChild = target.hasClass('icon')?\r\n            this.ui.filterName: this.ui.icon;\r\n          this.activeChild.focus();\r\n          break;\r\n        case 38:\r\n        case 40:\r\n          this.trigger('keyupdown', keyCode === 38, target);\r\n          break;\r\n        default:\r\n          return true;\r\n      }\r\n      return false;\r\n    },\r\n\r\n    onCheckBoxSelect: function(event){\r\n      this.trigger('multi:filter:select', this);\r\n    },\r\n\r\n    onChangeValue: function (event) {\r\n      // TODO: Create some interface for checking/unchecking and\r\n      // enabling/disabling the checkbox.  The parent view does\r\n      // it by jquery and has to trigger the change event to get\r\n      // the UI updated.\r\n      var checkbox = event.target;\r\n      if (checkbox.disabled) {\r\n        this.ui.icon\r\n            .removeClass('icon-checkbox icon-checkbox-selected')\r\n            .addClass('icon-checkbox-disabled');\r\n      } else if (checkbox.checked) {\r\n        this.ui.icon\r\n            .removeClass('icon-checkbox icon-checkbox-disabled')\r\n            .addClass('icon-checkbox-selected');\r\n      } else { // unchecked\r\n        this.ui.icon\r\n            .removeClass('icon-checkbox-selected icon-checkbox-disabled')\r\n            .addClass('icon-checkbox');\r\n      }\r\n    },\r\n\r\n    getIndex: function(){\r\n      return this._index;\r\n    }\r\n\r\n  });\r\n\r\n  return FacetItemView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"    <div class=\\\"csui-filter-more\\\" tabindex=\\\"-1\\\">\\r\\n        <div class=\\\"csui-more-text\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.more || (depth0 != null ? depth0.more : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"more\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n        <div class=\\\"cs-icon \"\n    + this.escapeExpression(((helper = (helper = helpers['more-icon'] || (depth0 != null ? depth0['more-icon'] : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"more-icon\",\"hash\":{}}) : helper)))\n    + \"\\\"></div>\\r\\n    </div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"csui-facet-header\\\">\\r\\n  <div class=\\\"header-label\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"name\",\"hash\":{}}) : helper)))\n    + \"</div>\\r\\n  <div class=\\\"header-count\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.count || (depth0 != null ? depth0.count : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"count\",\"hash\":{}}) : helper)))\n    + \"\\\"> (\"\n    + this.escapeExpression(((helper = (helper = helpers.count || (depth0 != null ? depth0.count : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"count\",\"hash\":{}}) : helper)))\n    + \")</div>\\r\\n  <div class=\\\"cs-icon csui-button-icon icon-expandArrowUp\\\" tabindex=\\\"-1\\\"></div>\\r\\n  <div class=\\\"csui-right-shadow\\\"></div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"csui-facet-content \"\n    + this.escapeExpression(((helper = (helper = helpers['show-content'] || (depth0 != null ? depth0['show-content'] : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"show-content\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n  <div class=\\\"cs-filter-group\\\"></div>\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.more : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\")\n    + \"  <div class=\\\"csui-facet-controls \"\n    + this.escapeExpression(((helper = (helper = helpers['show-controls'] || (depth0 != null ? depth0['show-controls'] : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"show-controls\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n      <button class=\\\"csui-btn binf-btn binf-btn-primary csui-apply\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.apply || (depth0 != null ? depth0.apply : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"apply\",\"hash\":{}}) : helper)))\n    + \"</button>\\r\\n      <button class=\\\"csui-btn binf-btn binf-btn-secondary csui-clear\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.clear || (depth0 != null ? depth0.clear : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"clear\",\"hash\":{}}) : helper)))\n    + \"</button>\\r\\n</div>\\r\\n\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_facet.panel_impl_facet_facet', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/lang',{\r\n  // Always load the root bundle for the default locale (en-us)\r\n  \"root\": true,\r\n  // Do not load English locale bundle provided by the root bundle\r\n  \"en-us\": false,\r\n  \"en\": false\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/root/lang',{\r\n  facetTitle: 'Refine by',\r\n  searchIconTooltip: 'Search by {0}',\r\n  searchClearIconTooltip: 'Clear all',\r\n  emptyFacetMessage: 'No filters available.',\r\n  emptyFilteredFacetMessage: 'No more filters available.',\r\n  loadingFacetMessage: 'Loading filters...',\r\n  failedFacetMessage: 'Loading filters failed.',\r\n  noFiles: 'No drop files were provided.',\r\n  addTypeDenied: 'Cannot add documents to {1}.',\r\n  showMore: 'Show more',\r\n  showLess: 'Show less',\r\n  apply: 'Apply',\r\n  clear: 'Cancel'\r\n});\r\n\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.view',[\"module\",\r\n  \"csui/lib/underscore\",\r\n  \"csui/lib/jquery\",\r\n  \"csui/lib/marionette\",\r\n  \"csui/models/facettopics\",\r\n  'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.key.navigation',\r\n  \"csui/utils/log\",\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  \"webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.item.view\",\r\n  \"hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet\",\r\n  \"i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/lang\",\r\n  \"css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet\"\r\n], function (module, _, $, Marionette, FacetTopicCollection, KeyEventNavigation, log, TabableRegionBehavior,\r\n             FacetItemView, template, lang) {\r\n\r\n  var FacetView = Marionette.CompositeView.extend({\r\n\r\n    childView: FacetItemView,\r\n    template: template,\r\n    className: 'csui-facet',\r\n\r\n    childViewContainer: '.cs-filter-group',\r\n\r\n    ui: {\r\n      facetContent: '.csui-facet-content',\r\n      facetHeader: '.csui-facet-header',\r\n      facetHeaderIcon: '.csui-facet-header > .cs-icon',\r\n      facetSubmitControls: '.csui-facet-controls',\r\n      facetCollapseControls: '.csui-facet-collapse-controls',\r\n      facetMoreText: '.csui-more-text',\r\n      facetMoreIcon: '.csui-filter-more .cs-icon',\r\n      facetMore: '.csui-filter-more',\r\n      apply: '.csui-facet-controls .csui-apply',\r\n      cancel: '.csui-facet-controls .csui-clear',\r\n      selectCount: '.header-count'\r\n    },\r\n\r\n    childEvents: {\r\n      'single:filter:select': 'onSingleFilterSelect',\r\n      'multi:filter:select': 'onMultiFilterSelect',\r\n      'keyupdown': 'cursorNextFilter',\r\n      'keyleftright': 'cursorInsideFilter'\r\n    },\r\n\r\n    events: {\r\n      'click .csui-filter-more:not(.binf-disabled)': 'onShowMore',\r\n      'click .csui-facet-header': 'onShowFacet',\r\n      'mouseleave': 'onMouseLeave',\r\n      'keydown':  'onKeyInView'\r\n    },\r\n\r\n    triggers: {\r\n      'click .csui-clear': 'clear:all',\r\n      'click .csui-apply': 'apply:all'\r\n    },\r\n\r\n\r\n    templateHelpers: function () {\r\n      var moreLabel = this.showAll ? lang.showLess : lang.showMore;\r\n      return {\r\n        'more': this.collection.length > this.itemsToShow ? moreLabel : undefined,\r\n        'more-icon': this.showAll ? 'icon-expandArrowUp' : 'icon-expandArrowDown',\r\n        'apply': lang.apply,\r\n        'clear': lang.clear,\r\n        'show-controls': this.selectItems.length > 0 ? 'csui-multi-select' : '',\r\n        'show-content': this.showFacet ? '' : 'binf-hidden'\r\n      };\r\n    },\r\n\r\n    childViewOptions: function () {\r\n      return {enableCheckBoxes: this.options.enableCheckBoxes};\r\n    },\r\n\r\n    constructor: function FacetView(options) {\r\n      Marionette.CompositeView.prototype.constructor.apply(this, arguments);\r\n      this.$el.attr('tabindex', 0);\r\n      this.options = options || {};\r\n      this.collection = this.model.topics;\r\n      this.itemsToShow = this.model.get('items_to_show');\r\n      this.showAll = false;\r\n      this.showFacet = true;\r\n      this.selectItems = [];\r\n    },\r\n\r\n    onClearAll: function () {\r\n      var checkboxes = this.$el.find('input:checkbox');\r\n\r\n      this.selectItems = [];\r\n      this.ui.facetCollapseControls.removeClass('multi-select');\r\n      this.ui.selectCount.text('(0)');\r\n      // Trigger change to inform the facet item view,\r\n      // that the look of the checkbox should change.\r\n      checkboxes.prop('checked', false).trigger('change');\r\n      this._setDisabledFilters(0);\r\n      this.$el.removeClass('multi-select');\r\n      this._updateFacetSubmitControls();\r\n      this.ui.facetHeader.removeClass('binf-disabled');\r\n      this.trigger('activate:facet', this);\r\n    },\r\n\r\n    onApplyAll: function () {\r\n      var facet = this.model,\r\n        filters = this._getFilterArray();\r\n\r\n      this.newFilter = {\r\n        id: facet.get('id'),\r\n        facetName: facet.get('name'),\r\n        values: filters\r\n      };\r\n      this.trigger('apply:filter');\r\n    },\r\n\r\n    onAddChild: function (childView) {\r\n      //Hide all children with index greater than the set number of items to show from server\r\n      if (childView.getIndex() >= this.itemsToShow) {\r\n        var className = this.showAll ? 'more' : 'more binf-hidden';\r\n        childView.$el.addClass(className);\r\n      }\r\n    },\r\n\r\n    onRender: function () {\r\n      if (this.collection.length === 0) {\r\n        this.$el.hide();\r\n      }\r\n    },\r\n\r\n    onSingleFilterSelect: function (filter) {\r\n      if (!filter.$el.hasClass('binf-disabled')) {\r\n        if (this.$el.hasClass('multi-select')) {\r\n          filter.$el.find('input:checkbox').click();\r\n        }\r\n        else {\r\n          var facet = this.model;\r\n          this.newFilter = {\r\n            id: facet.get('id'),\r\n            facetName: facet.get('name'),\r\n            values: [{\r\n              id: filter.model.get('value'),\r\n              topicName: filter.model.get('name')\r\n            }]\r\n          };\r\n          this.trigger('apply:filter');\r\n        }\r\n      }\r\n    },\r\n\r\n    onShowMore: function (event) {\r\n      if (event) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      }\r\n\r\n      this.showAll = !this.showAll;\r\n      this._setMoreLabel(this.showAll);\r\n      this.trigger('facet:size:change');\r\n    },\r\n\r\n    onShowFacet: function (event) {\r\n      if (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n      }\r\n      this.showFacet = !this.showFacet;\r\n      if (this.showFacet) {\r\n        this.ui.facetContent.removeClass('binf-hidden');\r\n        this.ui.facetCollapseControls.removeClass('multi-select');\r\n        this.ui.facetHeaderIcon[0].className = 'cs-icon csui-button-icon icon-expandArrowUp';\r\n      }\r\n      else {\r\n        var checkItems = this.$el.find(\"input:checked\").length;\r\n        this.ui.facetContent.addClass('binf-hidden');\r\n        this.ui.facetHeaderIcon[0].className = 'cs-icon csui-button-icon icon-expandArrowDown';\r\n        if (checkItems) {\r\n          this.ui.facetCollapseControls.addClass('multi-select');\r\n        }\r\n      }\r\n      this.trigger('facet:size:change');\r\n    },\r\n\r\n    onMouseLeave: function (event) {\r\n      event.preventDefault();\r\n      event.stopPropagation();\r\n    },\r\n\r\n    getIndex: function () {\r\n      return this._index;\r\n    },\r\n\r\n    onMultiFilterSelect: function (childView) {\r\n      var checkItems = this.$el.find(\"input:checked\").length;\r\n      this._updateSelectList(childView);\r\n      this._updateFacetSubmitControls(checkItems);\r\n      this._setDisabledFilters(checkItems);\r\n      this.selectItems = (checkItems === 0) ? [] : this.selectItems;\r\n      this.trigger('activate:facet', this);\r\n    },\r\n\r\n    _updateFacetSubmitControls: function () {\r\n      var checkItems = this.$el.find(\"input:checked\").length;\r\n\r\n      if (checkItems > 0) {\r\n        this.ui.facetSubmitControls.addClass('csui-multi-select');\r\n        this.$el.addClass('multi-select');\r\n        this.ui.facetHeader.addClass('binf-disabled');\r\n      }\r\n      else {\r\n        this.ui.facetSubmitControls.removeClass('csui-multi-select');\r\n        this.$el.removeClass('multi-select');\r\n        this.ui.facetHeader.removeClass('binf-disabled');\r\n      }\r\n    },\r\n\r\n    _updateSelectList: function (childView) {\r\n      var childIndex = childView.getIndex();\r\n      if (this.selectItems[childIndex]) {\r\n        delete this.selectItems[childIndex];\r\n      }\r\n      else {\r\n        this.selectItems[childIndex] = childView;\r\n      }\r\n    },\r\n\r\n    _setDisabledFilters: function (checkItems) {\r\n      var unselectedItems = this.$el.find(\"input:not(:checked)\"),\r\n        headerCount = checkItems;\r\n\r\n      if (checkItems < 5) {\r\n        // Trigger change to inform the facet item view,\r\n        // that the look of the checkbox should change.\r\n        unselectedItems.prop('disabled', false).trigger('change');\r\n        unselectedItems.parent().parent().removeClass('binf-disabled');\r\n      }\r\n      else {\r\n        unselectedItems.prop('disabled', true).trigger('change');\r\n        unselectedItems.parent().parent().addClass('binf-disabled');\r\n      }\r\n\r\n      this.ui.selectCount.text(headerCount);\r\n    },\r\n\r\n    _setMoreLabel: function (showAll) {\r\n      var moreItems = this.$el.find('.csui-facet-item.more');\r\n      if ( this.ui.facetMoreIcon[0]){\r\n      if (showAll) {\r\n        moreItems.removeClass('binf-hidden');\r\n        this.ui.facetMoreIcon[0].className = 'cs-icon icon-expandArrowUp';\r\n        this.ui.facetMoreText.text(lang.showLess);\r\n      }\r\n      else {\r\n        moreItems.addClass('binf-hidden');\r\n        this.ui.facetMoreIcon[0].className = 'cs-icon icon-expandArrowDown';\r\n        this.ui.facetMoreText.text(lang.showMore);\r\n      }\r\n      }\r\n      this.trigger('facet:size:change');\r\n    },\r\n\r\n    _getFilterArray: function () {\r\n      var filters = [];\r\n      _.each(this.selectItems, function (item) {\r\n        if (item) {\r\n          filters.push({\r\n            id: item.model.get('value'),\r\n            topicName: item.model.get('name')\r\n          });\r\n        }\r\n      });\r\n      return filters;\r\n    }\r\n\r\n  });\r\n  FacetView.version = '1.0';\r\n\r\n\r\n  _.extend(FacetView.prototype, KeyEventNavigation);\r\n  return FacetView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel.key.navigation',['csui/lib/underscore', 'csui/lib/jquery'\r\n], function (_, $) {\r\n  'use strict';\r\n\r\n  var KeyEventNavigation = {\r\n\r\n    currentlyFocusedElement: function () {\r\n      //change facet group items back to tabindex = 0. Tabable behavior sets all tabindex to -1, which doesn't work for\r\n      //this scenario\r\n      var focusables = this.$('.cs-list-group .csui-facet[tabindex=-1]');\r\n      if (focusables.length) {\r\n        focusables.prop('tabindex', 0);\r\n      }\r\n      return this.getActiveChild();\r\n    },\r\n    onSetNextChildFocus: function(childView){\r\n      this.activeChildIndex = childView.getIndex();\r\n    },\r\n    accActivateTabableRegion: function () {\r\n      $(document).unbind('mousedown', this._onRemoveKeyboardFocus);\r\n      $(document).bind('mousedown', this._onRemoveKeyboardFocus);\r\n\r\n    },\r\n\r\n    _removeKeyboardFocus: function () {\r\n      this.$el.find('.csui-focus').removeClass('csui-focus');\r\n      $(document).unbind('mousedown', this._onRemoveKeyboardFocus);\r\n    },\r\n\r\n    onKeyInView: function (event) {\r\n      var keyCode = event.keyCode;\r\n      var retVal = false;\r\n\r\n      switch (keyCode) {\r\n        case 38:\r\n        case 33:\r\n          var prevChild = this._getPrevActiveChild();\r\n          prevChild.focus();\r\n          break;\r\n        //down arrow, page down\r\n        case 40:\r\n        case 34:\r\n          var nextChild = this._getNextActiveChild();\r\n          nextChild.focus();\r\n          break;\r\n        default:\r\n          return true;\r\n      }\r\n      return retVal;\r\n    },\r\n\r\n    resetFacetFocus: function(childView){\r\n\r\n        childView.$el.focus();\r\n    },\r\n\r\n\r\n\r\n    getActiveChild: function () {\r\n      // FIXMWE: How is it possible, that $childViewContainer is undefined,\r\n      // but somebody called this method?\r\n      if (!this.$childViewContainer) {\r\n        return $();\r\n      }\r\n      if (!this.activeChild){\r\n      var childViewContainer = this.$childViewContainer[0];\r\n        if (childViewContainer && childViewContainer.childNodes[0]) {\r\n        this.activeChild = $(childViewContainer.childNodes[0]);\r\n        this.activeChildIndex = 0;\r\n      }\r\n\r\n\r\n      }\r\n      return this.activeChild;\r\n    },\r\n\r\n    _getNextActiveChild: function(){\r\n      var childNodes = this.$childViewContainer[0].childNodes;\r\n      if(childNodes.length - 1 > this.activeChildIndex){\r\n        this.activeChildIndex++;\r\n      }\r\n      else{\r\n        this.activeChildIndex = 0;\r\n      }\r\n\r\n      return $(childNodes[this.activeChildIndex]);\r\n    },\r\n\r\n    _getPrevActiveChild: function(){\r\n      var childNodes = this.$childViewContainer[0].childNodes;\r\n      if(this.activeChildIndex > 0){\r\n        this.activeChildIndex--;\r\n      }\r\n      else {\r\n        this.activeChildIndex = childNodes.length - 1;\r\n      }\r\n\r\n      return $(childNodes[this.activeChildIndex]);\r\n    }\r\n\r\n\r\n  };\r\n\r\n  return KeyEventNavigation;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<div class=\\\"cs-header binf-panel-heading\\\">\\r\\n  <span class=\\\"cs-title\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</span>\\r\\n</div>\\r\\n\\r\\n<!--<div class=\\\"csui-horizontal-separator\\\"></div>-->\\r\\n<div class=\\\"cs-content\\\">\\r\\n  <div class=\\\"cs-list-group\\\"></div>\\r\\n</div>\\r\\n\\r\\n<!--Need one shadow strip over the header and one over cs-content. The reason why one over the entire\\r\\n    simple list will not work, is because cs-content has a z-index of 5 with a scroll index of 8. If\\r\\n    we had one shadow strip with an index higher than cs-content, the scroll-bar will not show.-->\\r\\n<div class=\\\"csui-right-shadow\\\"></div>\\r\\n\\r\\n\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_facet.panel_impl_facet.panel', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/facet.panel.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone',\r\n  'csui/models/facets', 'csui/models/facettopics',\r\n  'csui/controls/list/simplelist.view',\r\n  'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet/facet.view',\r\n  'csui/behaviors/collection.state/collection.state.behavior',\r\n  'csui/behaviors/keyboard.navigation/tabable.region.behavior',\r\n  'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel.key.navigation',\r\n  'csui/controls/progressblocker/blocker',\r\n  'hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel',\r\n  'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/nls/lang',\r\n  'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/impl/facet.panel'\r\n], function (_, $, Backbone, FacetCollection, FacetTopicCollection,\r\n    SimpleListView, FacetView, CollectionStateBehavior,\r\n    TabableRegionBehavior, KeyEventNavigation, BlockingView, template, lang) {\r\n  'use strict';\r\n\r\n  var FacetPanelView = SimpleListView.extend({\r\n\r\n    template: template,\r\n\r\n    className: 'cs-simplelist csui-facet-panel',\r\n\r\n    behaviors: {\r\n\r\n      CollectionState: {\r\n        behaviorClass: CollectionStateBehavior,\r\n        stateMessages: function () {\r\n          return {\r\n            empty: _.isEmpty(this.collection.filters) ?\r\n                   lang.emptyFacetMessage :\r\n                   lang.emptyFilteredFacetMessage,\r\n            loading: lang.loadingFacetMessage,\r\n            failed: lang.failedFacetMessage\r\n          };\r\n        }\r\n      },\r\n\r\n      TabableRegion: {\r\n        behaviorClass: TabableRegionBehavior\r\n      }\r\n\r\n    },\r\n\r\n    childView: FacetView,\r\n\r\n    childViewOptions: function () {\r\n      return {enableCheckBoxes: this.options.enableCheckBoxes};\r\n    },\r\n\r\n    childEvents: {\r\n      'apply:filter': 'applyFilter',\r\n      'activate:facet': 'setActiveFacet',\r\n      'facet:size:change': '_updateScrollbar',\r\n      'escape:focus': 'resetFacetFocus'\r\n    },\r\n\r\n    events: {\r\n      'keydown': 'onKeyInView'\r\n    },\r\n\r\n    onAddChild: function (childView) {\r\n      var $child = childView.$el,\r\n          self = this;\r\n      //Hide all children with index greater than the set number of items to show from server\r\n      if (childView.getIndex() === (this.collection.length - 1)) {\r\n        $child.css('border-bottom', '0px');\r\n      }\r\n      $child.on('focus', function () {\r\n        self.onSetNextChildFocus(childView);\r\n      });\r\n    },\r\n\r\n    constructor: function FacetPanelView(options) {\r\n      SimpleListView.prototype.constructor.apply(this, arguments);\r\n\r\n      this.options.data.title = lang.facetTitle;\r\n      //This function is used in the keyevent.navigation to remove focus from a facet group once focus\r\n      //falls outside the Facet Filter. Within keyevent.navigation 'onRemoveKeyboardFocus' is bound to the\r\n      //browser Documents 'mousedown' event at the time of Tab entry.\r\n      this._onRemoveKeyboardFocus = _.bind(this._removeKeyboardFocus, this);\r\n      if (this.options.blockingParentView) {\r\n        BlockingView.delegate(this, this.options.blockingParentView);\r\n      } else {\r\n        BlockingView.imbue({\r\n          parent: this,\r\n          local: this.options.blockingLocal\r\n        });\r\n      }\r\n    },\r\n\r\n    isTabable: function () {\r\n      return !this.$el.parent().hasClass('binf-hidden');\r\n    },\r\n\r\n    onRenderCollection: function () {\r\n      this.trigger('refresh:tabindexes');\r\n    },\r\n\r\n    onBeforeDestroy: function () {\r\n      $(document).unbind('mousedown', this._onRemoveKeyboardFocus);\r\n    },\r\n\r\n    applyFilter: function (facet) {\r\n      this.trigger('apply:filter', facet.newFilter);\r\n    },\r\n\r\n    //Set active facet and disable all others.\r\n    setActiveFacet: function (facet) {\r\n      if (facet.selectItems.length > 0) {\r\n        this.children.each(function (view) {\r\n          if (view.getIndex() !== facet.getIndex()) {\r\n            view.$el.find('.csui-facet-content').addClass('facet-disabled');\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        this.$el.find('.csui-facet-content').removeClass('facet-disabled');\r\n      }\r\n    },\r\n\r\n    _updateScrollbar: function () {\r\n      this.triggerMethod('update:scrollbar', this);\r\n    }\r\n\r\n  });\r\n\r\n  _.extend(FacetPanelView.prototype, KeyEventNavigation);\r\n  return FacetPanelView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    return \"<div class=\\\"visual-data-expanded-view-wrapper\\\">\\r\\n    <div class=\\\"csui-facet-table-container\\\">\\r\\n        <div id=\\\"facetview\\\"></div>\\r\\n        <!--outer div is needed in order to float table contents right to accommodate  facets-->\\r\\n        <div id=\\\"outertablecontainer\\\" class=\\\"reduce-for-facets\\\">\\r\\n            <!--inner div is needed in order to have tableview sized to remaining height of container-->\\r\\n            <div id=\\\"innertablecontainer\\\">\\r\\n                <div class=\\\"facetbarview\\\"></div>\\r\\n                <div class=\\\"visual-data-controls-parent\\\"></div>\\r\\n                <div class=\\\"visual-data-visualization\\\"></div>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_visual.data.expanded', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded',[],function(){});\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.expanded.view',['csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/backbone', 'csui/lib/marionette',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.bar/facet.bar.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/facet.panel/facet.panel.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.overlay.view',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',\r\n    'hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded',\r\n    'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanded'\r\n], function (_, $, Backbone, Marionette, FacetBarView, FacetPanelView, VisualDataControls, lang, template) {\r\n\r\n    var VisualDataExpandedView = Marionette.LayoutView.extend({\r\n\r\n        className: 'expanded-visualization-container',\r\n\r\n        template: template,\r\n\r\n        regions: {\r\n            chicklets: '.facetbarview',\r\n            facetRegion: '#facetview',\r\n            visualizationControls: '.visual-data-controls-parent', // these are the same setting controls as used in the overlay in tile view, but shown differently\r\n            visualization: '.visual-data-visualization'\r\n        },\r\n\r\n        constructor: function VisualDataExpandedView(options) {\r\n            var filters;\r\n            Marionette.LayoutView.prototype.constructor.apply(this, arguments);\r\n\r\n            this.contentView = options.data.expandedContentView; //FIXME maybe some error checking here\r\n            this.facetFilters = this.contentView.collection.facetFilters;\r\n            filters = this.contentView.collection.getFilters();\r\n            // If we have default filters passed in with the widget options set them here\r\n            if ((this.facetFilters.filters.length === 0) && (filters.length > 0)) {\r\n                this.facetFilters.filters = this.contentView.collection.mapFilterData(filters);\r\n            }\r\n        },\r\n\r\n        callBackAlreadyHit: false,\r\n\r\n        onDomRefresh: function() {\r\n\r\n            if (this.callBackAlreadyHit) {\r\n                this._renderFacetBar();\r\n                this._renderFacetPanel();\r\n                this._renderExpandedControls();\r\n                this._renderChart();\r\n            }\r\n            this.callBackAlreadyHit = true;\r\n\r\n        },\r\n\r\n        _clearFilters: function(){\r\n            this.facetFilters.clearFilters();\r\n            this.contentView.collection.clearFilters();\r\n        },\r\n\r\n        _addToFacetFilter: function(filter){\r\n\r\n            this.facetFilters.addFilter(filter);\r\n            this.contentView.collection.addFilter(filter);\r\n\r\n            // Render the facet bar\r\n            this._renderFacetBar();\r\n            // Update the controls so the user can see the Active Column has changed\r\n            this._renderExpandedControls();\r\n            // Update the Facet Panel\r\n            this._renderFacetPanel();\r\n        },\r\n\r\n        _renderChart: function(){\r\n            this.getRegion('visualization').show(this.contentView);\r\n            this.contentView.resetAndRender();\r\n        },\r\n\r\n        _renderFacetBar: function(){\r\n                this.facetBarView = new FacetBarView({\r\n                    collection: this.facetFilters\r\n                });\r\n\r\n                this.listenTo(this.facetBarView, 'remove:filter', this._removeFacetFilter, this)\r\n                    .listenTo(this.facetBarView, 'remove:all', this._removeAll, this)\r\n                    .listenTo(this.contentView, 'apply:filter', this._addToFacetFilter, this);\r\n\r\n                if (this.facetFilters.filters.length > 0){\r\n                    this.getRegion('chicklets').show(this.facetBarView);\r\n                }\r\n        },\r\n\r\n        _renderFacetPanel: function(){\r\n\r\n            this.getRegion('facetRegion').empty();\r\n            this._setFacetView();\r\n            this.getRegion('facetRegion').show(this.facetView);\r\n\r\n         },\r\n\r\n        _setFacetView: function () {\r\n            this.facetView = new FacetPanelView({\r\n                collection: this.facetFilters,\r\n                enableCheckBoxes: true,\r\n                blockingLocal: true\r\n            });\r\n\r\n            this.listenTo(this.facetView, 'apply:filter', this._addToFacetFilter);\r\n        },\r\n\r\n        _renderExpandedControls: function(){\r\n            this.expandedControls = new VisualDataControls({\r\n                overlayModel: this.contentView.collection.overlayModel\r\n            });\r\n            this.getRegion('visualizationControls').show(this.expandedControls);\r\n        },\r\n\r\n        _removeFacetFilter: function (filter) {\r\n          var facetName = this.contentView.collection.getActiveColumnByFormattedName(this.facetFilters.filters[filter.facetIndex].facetName),\r\n              valueToRemove = this.facetFilters.filters[filter.facetIndex].values[filter.filterIndex].id,\r\n              newFacetFilters = this.facetFilters.removeFilter(filter.facetIndex, filter.filterIndex);\r\n\r\n            // We need to clear the facets out if there are no values after this chicklet has been removed.\r\n            if (newFacetFilters.length === 0){\r\n                this.contentView.collection.clearFilters(facetName, valueToRemove);\r\n                this.getRegion('chicklets').empty();\r\n            } else {\r\n                // Sync the changes with the filtered count filters\r\n                this.contentView.collection.updateFilters(facetName, valueToRemove);\r\n            }\r\n\r\n            // Update the controls so the user can see the Active Column has changed\r\n            this._renderExpandedControls();\r\n        },\r\n\r\n        _removeAll: function () {\r\n            this._clearFilters();\r\n            this.getRegion('chicklets').empty();\r\n            // Update the controls so the user can see the Active Column has changed\r\n            this._renderExpandedControls();\r\n        }\r\n    });\r\n\r\n    return VisualDataExpandedView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.bar.view',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/d3', // 3rd party libraries\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang'\t\r\n], function (_, $, d3, VisualDataContentView, lang) {\r\n\r\n    var VisualDataBarContentView = VisualDataContentView.extend({\r\n\r\n        constructor: function VisualDataBarContentView(options) {\r\n\r\n            // Call the parent constructor to ensure the object is built with all the inherited features.\r\n            VisualDataContentView.prototype.constructor.apply(this, arguments);\r\n        },\r\n\r\n        visType: 'bar',\r\n\r\n        defaults: {\r\n            marginTop: 20,\r\n            marginRight: 20,\r\n            marginBottom: 100,\r\n            marginLeft: 80,\r\n            groupAfter: 15\r\n        },\r\n\r\n        appendVisElements: function () {\r\n            this.visElement = this.visElement.append('g')\r\n                .attr('transform', 'translate(' + this.marginLeft() + ',' + this.marginTop() + ')')\r\n                .attr('class', 'bar-chart');\r\n        },\r\n\r\n        update: function () {\r\n            var contentView = this,\r\n                visElement = contentView.visElement,\r\n                chartData = contentView.collection.models,\r\n                sum = chartData.reduce(function (memo, value) {\r\n                    return memo + value.get('value');\r\n                }, 0),\r\n                width = this.width(),\r\n                height = this.height(),\r\n                colors = d3.schemeCategory20,\r\n                color = d3.scaleOrdinal(colors),\r\n                colorOpacity = 0.9;\r\n\r\n            var x = d3.scaleBand()\r\n                    .range([0, width])\r\n                    .round(true)\r\n                    .padding(0.1),\r\n                y = d3.scaleLinear(),\r\n                extent = d3.extent(chartData.map(function (d) {\r\n                    return d.get('value');\r\n                })),\r\n                xAxis = d3.axisBottom(x).tickFormat(contentView.shortenText),\r\n                yAxis = d3.axisLeft(y).tickFormat(_.bind(contentView.formatCount, contentView));\r\n\r\n            // generally the yaxis should start from 0, unless it has negative values\r\n            extent = (extent[0] > 0) ? [0, extent[1]] : extent;\r\n\r\n            y.domain(extent)\r\n                .range([height, 0])\r\n                .nice(); // extend range to nearest nice value\r\n\r\n            function barLabel(d) {\r\n                if (contentView.collection.overlayModel.get('view_value_as_percentage')) {\r\n                    return ((d.get('value') / sum) * 100).toFixed(1) + '%'; // percentage of whole\r\n                }\r\n                else {\r\n                    return contentView.formatCount(d.get('value'));\r\n                }\r\n            }\r\n\r\n            function Y0() {\r\n                return y(0);\r\n            }\r\n\r\n            function Y(d) {\r\n                return y(d.get('value'));\r\n            }\r\n\r\n            // Scale the range of the data in the domains\r\n            x.domain(chartData.map(function (d) {\r\n                return (contentView.collection.grouped_on_server) ? d.get('key_formatted') : d.get('key');\r\n            }));\r\n            //y.domain([0, d3.max(chartData, function(d) { return Math.ceil(d.get('value')/10)*10; })]);\r\n\r\n            // bars\r\n            var bars = visElement.selectAll('.bar')\r\n                .data(chartData)\r\n                .enter().append('rect')\r\n                .attr('class', function () {\r\n                    var myClasses = 'bar';\r\n                    return myClasses;\r\n                })\r\n                .attr('fill-opacity', colorOpacity)\r\n                .style('fill', function (d, i) {\r\n                    return color(i);\r\n                })\r\n                .style('stroke', function (d, i) {\r\n                    return color(i);\r\n                })\r\n                .attr('x', function (d) {\r\n                   return (contentView.collection.grouped_on_server) ? x(d.get('key_formatted')) : x(d.get('key'));\r\n                })\r\n                .attr('y', function (d) {\r\n                    //return y(d.get('value'));\r\n                    return d.get('value') < 0 ? Y0() : Y(d);\r\n                })\r\n                .attr('width', x.bandwidth())\r\n                .attr('height', function (d) {\r\n                    return Math.abs(Y(d) - Y0());\r\n                });\r\n\r\n            // labels on bars\r\n            var barLabels = visElement.append('g')\r\n                .attr('class', 'chart-labels')\r\n                .selectAll('text')\r\n                .data(chartData)\r\n                .enter();\r\n\r\n            barLabels\r\n                .append('text')\r\n                .style('text-anchor', 'middle')\r\n                .text(barLabel)\r\n                .attr('class', function() {\r\n                    // only show labels if they can fit within bar\r\n                    return (this.getBoundingClientRect().width <= x.bandwidth()) ? 'chart-label' : 'chart-label hidden';\r\n                })\r\n                .attr('x', function (d) {\r\n                    return (contentView.collection.grouped_on_server) ? x(d.get('key_formatted')) + (x.bandwidth() / 2) : x(d.get('key')) + (x.bandwidth() / 2);\r\n                })\r\n                .attr('y', function (d) {\r\n                    var offset = Math.abs(height - Y(d)),\r\n                        zeroline = Y0() - Y(d),\r\n                        labelOffset = 0;\r\n\r\n                    if (contentView.checkSign(d.get('value')) === -1) {\r\n                        // negative values - show value just above zero line.\r\n                        if (zeroline < -24) {\r\n                            labelOffset = -6;\r\n                            d3.select(this).classed('outside', false);\r\n                        }\r\n                        else {\r\n                            labelOffset = 16;\r\n                            d3.select(this).classed('outside', true);\r\n                        }\r\n                        return (height + labelOffset - offset);\r\n                    }\r\n                    else {\r\n                        if (zeroline > 24) {\r\n                            labelOffset = 16;\r\n                            d3.select(this).classed('outside', false);\r\n                        }\r\n                        else {\r\n                            labelOffset = -6;\r\n                            d3.select(this).classed('outside', true);\r\n                        }\r\n                        return (height + labelOffset - offset);\r\n                    }\r\n\r\n                });\r\n\r\n            var rotateTicks = false; // set a flag so we can rotate ALL tick labels, rather than have a mix of some rotated and others not, which looks messy.\r\n            // x axis\r\n            visElement.append('g')\r\n                .attr('class', 'x axis')\r\n                .attr('transform', 'translate(0,' + height + ')')\r\n                .call(xAxis)\r\n                .selectAll('text')\r\n                .style('text-anchor', 'middle')\r\n                .attr('dy', '6')\r\n                .attr('class',function() {\r\n                    if (this.getBoundingClientRect().width >= x.bandwidth()) {\r\n                        // rotates text if it's wider than width of bar\r\n                        rotateTicks = true;\r\n                    }\r\n                    return null;\r\n                });\r\n\r\n            if (rotateTicks) {\r\n                // second pass to rotate tick labels if the flag was set\r\n                visElement.select('.x.axis')\r\n                    .selectAll('text')\r\n                    .attr('transform','rotate(-30)')\r\n                    .style('text-anchor', 'end');\r\n            }\r\n\r\n            // zero line\r\n            visElement.append('g')\r\n                .attr('class', 'x axis zero')\r\n                .attr(\"transform\", \"translate(0,\" + Y0() + \")\")\r\n                .call(xAxis.tickFormat('').tickSize(0));\r\n\r\n            // y axis\r\n            visElement.append('g')\r\n                .call(yAxis)\r\n                .attr('class', 'y axis');\r\n\r\n            // gridlines\r\n            visElement.append('g')\r\n                .call(yAxis.tickFormat('').tickSize(-width))\r\n                .selectAll('line')\r\n                .attr('class', 'gridline');\r\n\r\n            visElement.append('text')\r\n                .attr('class', 'y-label')\r\n                .text(lang.totalCount)\r\n                .attr('transform', 'rotate(-90)')\r\n                .attr('y', -this.marginLeft() + 15)\r\n                .attr('x', -(height / 2))\r\n                .attr('dy', '1em')\r\n                .style('text-anchor', 'middle');\r\n\r\n            visElement.append('text') // x-axis label\r\n                .attr('class', 'x-label')\r\n                .text(this.model.get('active_column_formatted'))\r\n                .attr('y', height + this.marginBottom() - 15)\r\n                .attr('x', (width / 2))\r\n                .attr('dx', '1em')\r\n                .style('text-anchor', 'middle');\r\n\r\n            visElement.append('text')\r\n                .attr('class', 'total')\r\n                .attr('text-anchor', 'left')\r\n                .attr('alignment-baseline', 'baseline')\r\n                .attr('y', height + this.marginBottom() - 15)\r\n                .attr('x', 0 - this.marginLeft() + 20)\r\n                .text(lang.total + ': ' + contentView.formatCount(sum));\r\n\r\n        }\r\n\r\n    });\r\n\r\n    return VisualDataBarContentView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.pie.view',[\r\n    'csui/lib/underscore', 'csui/lib/d3', // 3rd party libraries\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang'\r\n], function (_, d3, VisualDataContentView, lang) {\r\n\r\n    var VisualDataPieContentView = VisualDataContentView.extend({\r\n\r\n        constructor: function VisualDataPieContentView(options) {\r\n\r\n            // Call the parent constructor to ensure the object is built with all the inherited features.\r\n            VisualDataContentView.prototype.constructor.apply(this, arguments);\r\n        },\r\n\r\n        defaults: {\r\n            marginTop: 40,\r\n            marginRight: 30,\r\n            marginBottom: 40,\r\n            marginLeft: 30,\r\n            groupAfter: 5\r\n        },\r\n\r\n        visType: 'pie',\r\n\r\n        appendVisElements: function () {\r\n            var minPadding = 40; // minimum padding between chart and legend when widget width is reduced\r\n\r\n            this.visElement.append('g')\r\n                .attr('transform', 'translate(' + this.marginLeft() + ',' + this.marginTop() + ')')\r\n                .attr('class', 'vis-wrapper');\r\n\r\n            this.visElement.select('.vis-wrapper')\r\n                .append('g')\r\n                .attr('class', 'pie-chart')\r\n                .attr('transform', 'translate(' + this.width() / 3 + ',' + this.height() / 2 + ')'); // center at 1/3\r\n\r\n            this.visElement.select('.vis-wrapper')\r\n                .append('g')\r\n                .attr('class', 'pie-legend-container')\r\n                .attr('height', this.height())\r\n                .attr('transform', 'translate(' + ((this.width() / 3 ) * 2 + minPadding) + ',' + this.height() / 2 + ')'); // center at 2/3 + padding\r\n        },\r\n\r\n        update: function () {\r\n\r\n            var contentView = this,\r\n                visElement = contentView.visElement,\r\n                colors = d3.schemeCategory20,\r\n                color = d3.scaleOrdinal(colors),\r\n                chartData = contentView.collection.models,\r\n                sum = chartData.reduce(function (memo, value) {\r\n                    return memo + value.get('value');\r\n                }, 0),\r\n                //width = this.$el[0].clientWidth - this.marginLeft() - this.marginRight(), // this.width() or this.height() does not work in expanded view\r\n                //height = this.$el[0].clientHeight - this.marginTop() - this.marginBottom(),\r\n                width = this.width(),\r\n                height = this.height(),\r\n                radius = Math.min(width / 3, height / 2), // 1/3 of width or half of height\r\n                colorOpacity = 0.9;\r\n\r\n            function pieLabel(d, i) {\r\n                var actual = chartData[i].get('value'),\r\n                    percentage = ((d.endAngle - d.startAngle) / (2 * Math.PI) * 100).toFixed(1),\r\n                    arcSize = d.endAngle - d.startAngle, // in radians\r\n                    minRadius = 100, // minimum radius for labels to appear\r\n                    minArcLength = 44, // ratio of radius to arcSize to determine if label will appear on this arc (arcSize / minArcSizeRatio)\r\n                    label = (contentView.collection.overlayModel.get('view_value_as_percentage')) ? percentage + ' %' : contentView.formatCount(actual);\r\n\r\n                label = ((radius * arcSize >= minArcLength) && (radius >= minRadius)) ? label : '';\r\n                return label;\r\n            }\r\n\r\n            function explode(d, i, offset) {\r\n                var radial = (d.startAngle + d.endAngle) / 2,\r\n                    offsetX = Math.sin(radial) * offset,\r\n                    offsetY = -Math.cos(radial) * offset;\r\n                return 'translate(' + offsetX + ',' + offsetY + ')';\r\n            }\r\n\r\n            function extractSlice(d, i) {\r\n                visElement.selectAll('.arc path,.pie-legend rect,.pie-legend text')\r\n                    .filter(function (d2, i2) {\r\n                        return (d2.index !== d.index);\r\n                    });\r\n                return explode(d, i, 15);\r\n            }\r\n\r\n            function replaceSlice(d, i) {\r\n                visElement.selectAll('.arc path,.pie-legend rect').attr('fill-opacity', colorOpacity);\r\n                return explode(d, i, 0);\r\n            }\r\n\r\n            function calculateLegendHeight() {\r\n                // returns a dynamic height for each legend swatch, according to how many swatches are needed\r\n                var n = chartData.length || 1,\r\n                    minSwatchSize = 14, // smallest legible size (font is half this size)\r\n                    maxSwatchSize = 24,\r\n                    swatchSize;\r\n\r\n                swatchSize = ((height *2) / n) / 2;\r\n                swatchSize = (swatchSize < minSwatchSize) ? minSwatchSize : swatchSize;\r\n                swatchSize = (swatchSize > maxSwatchSize) ? maxSwatchSize : swatchSize;\r\n\r\n                return swatchSize;\r\n            }\r\n\r\n            var arc = d3.arc()\r\n                .innerRadius(0)\r\n                .outerRadius(radius - 10);\r\n\r\n            var labelArc = d3.arc() // needed to position labels near outer edge of pie. Not required for donut\r\n                .innerRadius(radius - 10)\r\n                .outerRadius(radius + 30);\r\n\r\n            var pie = d3.pie()\r\n                .sort(null)\r\n                .value(function (d) {\r\n                    return d.get('value');\r\n                });\r\n\r\n            var segments = visElement.select('.pie-chart').selectAll('.arc')\r\n                .data(pie(chartData))\r\n                .enter().append('g')\r\n                .attr('class', function () {\r\n                    var myClasses = 'arc';\r\n                    return myClasses;\r\n                });\r\n\r\n            segments.append('path')\r\n                .attr('d', arc)\r\n                .attr('fill-opacity', colorOpacity)\r\n                .style('fill', function (d, i) {\r\n                    return color(i);\r\n                });\r\n            /*\r\n             // Pie animation\r\n             .transition()\r\n             .duration(2000)\r\n             .attrTween('d', function (b) {\r\n             var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);\r\n             return function(t) { return arc(i(t)); };\r\n             });\r\n             */\r\n            // FIXME: using the enter() method on a selection only applies to data elements that are NEW. If the elements already exist in the SVG DOM, they need to be updated too. This becomes apparent when dynamically changing data\r\n\r\n            // Add the labels to the pie chart\r\n            // do the d3 selection again, to ensure all labels are overlaid on segments\r\n\r\n            segments.append('text')\r\n                .attr('class', 'chart-label outside')\r\n                .attr('transform', function (d) {\r\n                    return 'translate(' + labelArc.centroid(d) + ')';\r\n                })\r\n                .attr('text-anchor', 'middle')\r\n                .attr('alignment-baseline', 'middle')\r\n                .attr('font-size', 14)\r\n                .text(pieLabel);\r\n\r\n            // populate the legend container\r\n            var pieLegendContainer = visElement.select('.pie-legend-container');\r\n\r\n            var legends = pieLegendContainer.selectAll('.pie-legend')\r\n                .data(pie(chartData))\r\n                .enter().append('g')\r\n                .attr('class', 'pie-legend')\r\n                .on('mouseover', function (d) {\r\n                    visElement.selectAll('.arc')\r\n                        .filter(function (d2, i2) {\r\n                            return (d2.index === d.index);\r\n                        })\r\n                        .attr('transform', extractSlice);\r\n                })\r\n                .on('mouseout', function (d) {\r\n                    visElement.selectAll('.arc')\r\n                        .filter(function (d2, i2) {\r\n                            return (d2.index === d.index);\r\n                        })\r\n                        .attr('transform', replaceSlice);\r\n                });\r\n\r\n            var legendHeight = calculateLegendHeight();\r\n\r\n            pieLegendContainer.style('font-size',(legendHeight / 2) + 'px');\r\n\r\n            // Add the legend to the pie chart\r\n            legends.append('text')\r\n                .attr('class', 'pie-legend-text')\r\n                .attr('dy','1.2em') // individual offset to center text vertically\r\n                .attr('transform', function (d, i) {\r\n                    var offset = legendHeight * chartData.length / 2,\r\n                        x = legendHeight + 10, // swatch + 10px margin\r\n                        y = (i * legendHeight) - offset;\r\n                    return 'translate(' + x + ',' + y + ')';\r\n                })\r\n                .text(function (d, i) {\r\n                    return contentView.collection.grouped_on_server ? d.data.get('key_formatted') : d.data.get('key');\r\n                });\r\n\r\n            legends.append('rect')\r\n                .attr('class', 'pie-legend-swatch')\r\n                .attr('width','2em')\r\n                .attr('height', legendHeight - 4) // 4px padding\r\n                .attr('fill-opacity', colorOpacity)\r\n                .attr('transform', function (d, i) {\r\n                    var offset = legendHeight * chartData.length / 2,\r\n                        x = 0,\r\n                        y = (i * legendHeight) - offset;\r\n                    return 'translate(' + x + ',' + y + ')';\r\n                })\r\n                .attr('fill', function (d, i) {\r\n                    return color(i);\r\n                });\r\n\r\n            // FIXME: problem here is that we can't get the dimensions of the BBox until the text is rendered, but we want the dimensions to govern how the text is truncated...\r\n            //console.log(visElement.select('.pie-legend-container').node().getBBox());\r\n\r\n            var pieTotal = visElement.select('.vis-wrapper')\r\n                .append('g')\r\n                .attr('class', 'pie-total-container');\r\n\r\n            pieTotal.append('text')\r\n                .attr('class', 'total')\r\n                .attr('text-anchor', 'left')\r\n                .attr('alignment-baseline', 'baseline')\r\n                .attr('y', height + this.marginBottom() - 15)\r\n                .attr('x', 0 - this.marginLeft() + 20)\r\n                .text(lang.total + ': ' + contentView.formatCount(sum));\r\n\r\n            pieLegendContainer.append('text')\r\n                .attr('class', 'pie-legend-active-column')\r\n                .attr('transform', 'rotate(-90)')\r\n                .attr('text-anchor', 'middle')\r\n                .attr('alignment-baseline', 'middle')\r\n                .attr('y', 0)\r\n                .attr('x', 0)\r\n                .attr('dy', -20)\r\n                .text(this.model.get('active_column_formatted'));\r\n\r\n        }\r\n\r\n    });\r\n\r\n    return VisualDataPieContentView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.donut.view',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/d3', // 3rd party libraries\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang'\r\n], function (_, $, d3, VisualDataContentView, lang) {\r\n\r\n    var VisualDataDonutContentView = VisualDataContentView.extend({\r\n\r\n        constructor: function VisualDataPieContentView(options) {\r\n\r\n            // Call the parent constructor to ensure the object is built with all the inherited features.\r\n            VisualDataContentView.prototype.constructor.apply(this, arguments);\r\n        },\r\n\r\n        defaults: {\r\n            marginTop: 30,\r\n            marginRight: 30,\r\n            marginBottom: 30,\r\n            marginLeft: 30,\r\n            groupAfter: 5\r\n        },\r\n\r\n        visType: 'donut',\r\n\r\n        appendVisElements: function () {\r\n            var minPadding = 40; // minimum padding between chart and legend when widget width is reduced\r\n\r\n            this.visElement.append('g')\r\n                .attr('transform', 'translate(' + this.marginLeft() + ',' + this.marginTop() + ')')\r\n                .attr('class', 'vis-wrapper');\r\n\r\n            this.visElement.select('.vis-wrapper')\r\n                .append('g')\r\n                .attr('class', 'pie-chart')\r\n                .attr('transform', 'translate(' + this.width() / 3 + ',' + this.height() / 2 + ')'); // center at 1/3\r\n\r\n            this.visElement.select('.vis-wrapper')\r\n                .append('g')\r\n                .attr('class', 'pie-legend-container')\r\n                .attr('transform', 'translate(' + ((this.width() / 3 ) * 2 + minPadding) + ',' + this.height() / 2 + ')'); // center at 2/3 + padding\r\n        },\r\n\r\n        update: function () {\r\n\r\n            var contentView = this,\r\n                visElement = contentView.visElement,\r\n                colors = d3.schemeCategory20,\r\n                color = d3.scaleOrdinal(colors),\r\n                chartData = contentView.collection.models,\r\n                sum = chartData.reduce(function (memo, value) {\r\n                    return memo + value.get('value');\r\n                }, 0),\r\n                donutWidth = 1.5, // thickness of donut ring\r\n                width = this.$el[0].clientWidth - this.marginLeft() - this.marginRight(), // this.width() or this.height() does not work in expanded view\r\n                height = this.$el[0].clientHeight - this.marginTop() - this.marginBottom(),\r\n                radius = Math.min(width / 3, height / 2), // 1/3 of width or half of height\r\n                colorOpacity = 0.9;\r\n\r\n            function pieLabel(d, i) {\r\n                var actual = chartData[i].get('value'),\r\n                    percentage = ((d.endAngle - d.startAngle) / (2 * Math.PI) * 100).toFixed(1),\r\n                    arcSize = d.endAngle - d.startAngle, // in radians\r\n                    minRadius = 100, // minimum radius for labels to appear\r\n                    minArcLength = 44, // ratio of radius to arcSize to determine if label will appear on this arc (arcSize / minArcSizeRatio)\r\n                    label = (contentView.collection.overlayModel.get('view_value_as_percentage')) ? percentage + ' %' : contentView.formatCount(actual);\r\n\r\n                label = ((radius * arcSize >= minArcLength) && (radius >= minRadius)) ? label : '';\r\n                return label;\r\n            }\r\n\r\n            function explode(d, i, offset) {\r\n                var radial = (d.startAngle + d.endAngle) / 2,\r\n                    offsetX = Math.sin(radial) * offset,\r\n                    offsetY = -Math.cos(radial) * offset;\r\n                return 'translate(' + offsetX + ',' + offsetY + ')';\r\n            }\r\n\r\n            function extractSlice(d, i) {\r\n                visElement.selectAll('.arc path,.pie-legend rect,.pie-legend text')\r\n                    .filter(function (d2, i2) {\r\n                        return (d2.index !== d.index);\r\n                    });\r\n                return explode(d, i, 15);\r\n            }\r\n\r\n            function replaceSlice(d, i) {\r\n                visElement.selectAll('.arc path,.pie-legend rect').attr('fill-opacity', colorOpacity);\r\n                return explode(d, i, 0);\r\n            }\r\n\r\n            function calculateLegendHeight() {\r\n                // returns a dynamic height for each legend swatch, according to how many swatches are needed\r\n                var n = chartData.length || 1,\r\n                    minSwatchSize = 14, // smallest legible size (font is half this size)\r\n                    maxSwatchSize = 24,\r\n                    swatchSize;\r\n\r\n                swatchSize = ((height *2) / n) / 2;\r\n                swatchSize = (swatchSize < minSwatchSize) ? minSwatchSize : swatchSize;\r\n                swatchSize = (swatchSize > maxSwatchSize) ? maxSwatchSize : swatchSize;\r\n\r\n                return swatchSize;\r\n            }\r\n\r\n            function fontSizeForTotal(innerDiscSize) {\r\n                var stringLength = (contentView.formatCount(sum).length),\r\n                    fontRatios = [1.4, 1.6, 1.8, 2, 2.2, 2.4, 2.6, 2.8], // a hash is faster than Math ;-)\r\n                    fontRatio = (stringLength <= fontRatios.length) ? fontRatios[stringLength - 1] : 12; // 12 is smallest size possible\r\n                return innerDiscSize / fontRatio;\r\n            }\r\n\r\n            var arc = d3.arc()\r\n                .innerRadius(radius / donutWidth)\r\n                .outerRadius(radius);\r\n\r\n            var pie = d3.pie()\r\n                .sort(null)\r\n                .value(function (d) {\r\n                    return d.get('value');\r\n                });\r\n\r\n            var segments = visElement.select('.pie-chart').selectAll('.arc')\r\n                .data(pie(chartData))\r\n                .enter().append('g')\r\n                .attr('class', function () {\r\n                    var myClasses = 'arc';\r\n                    return myClasses;\r\n                });\r\n\r\n            segments.append('path')\r\n                .attr('d', arc)\r\n                .attr('fill-opacity', colorOpacity)\r\n                .style('fill', function (d, i) {\r\n                    return color(i);\r\n                });\r\n            /*\r\n             // Pie animation\r\n             .transition()\r\n             .duration(2000)\r\n             .attrTween('d', function (b) {\r\n             var i = d3.interpolate({startAngle: 0, endAngle: 0}, b);\r\n             return function(t) { return arc(i(t)); };\r\n             });\r\n             */\r\n            // FIXME: using the enter() method on a selection only applies to data elements that are NEW. If the elements already exist in the SVG DOM, they need to be updated too. This becomes apparent when dynamically changing data\r\n\r\n            // Add the labels to the pie chart\r\n\r\n            segments.append('text')\r\n                .attr('class', 'chart-label')\r\n                .attr('transform', function (d) {\r\n                    return 'translate(' + arc.centroid(d) + ')';\r\n                })\r\n                .attr('text-anchor', 'middle')\r\n                .attr('alignment-baseline', 'middle')\r\n                .attr('font-size', 14)\r\n                .text(pieLabel);\r\n\r\n            // populate the legend container\r\n            var pieLegendContainer = visElement.select('.pie-legend-container');\r\n\r\n            var legends = pieLegendContainer.selectAll('.pie-legend')\r\n                .data(pie(chartData))\r\n                .enter().append('g')\r\n                .attr('class', 'pie-legend')\r\n                .on('mouseover', function (d) {\r\n                    visElement.selectAll('.arc')\r\n                        .filter(function (d2, i2) {\r\n                            return (d2.index === d.index);\r\n                        })\r\n                        .attr('transform', extractSlice);\r\n                })\r\n                .on('mouseout', function (d) {\r\n                    visElement.selectAll('.arc')\r\n                        .filter(function (d2, i2) {\r\n                            return (d2.index === d.index);\r\n                        })\r\n                        .attr('transform', replaceSlice);\r\n                });\r\n\r\n            var legendHeight = calculateLegendHeight();\r\n\r\n            pieLegendContainer.style('font-size',(legendHeight / 2) + 'px');\r\n\r\n            // Add the legend to the pie chart\r\n            legends.append('text')\r\n                .attr('class', 'pie-legend-text')\r\n                .attr('dy','1.2em') // individual offset to center text vertically\r\n                .attr('transform', function (d, i) {\r\n                    var offset = legendHeight * chartData.length / 2,\r\n                        x = legendHeight + 10, // swatch + 10px margin\r\n                        y = (i * legendHeight) - offset;\r\n                    return 'translate(' + x + ',' + y + ')';\r\n                })\r\n                .text(function (d, i) {\r\n                    return contentView.collection.grouped_on_server ? d.data.get('key_formatted') : d.data.get('key');\r\n                });\r\n\r\n            legends.append('rect')\r\n                .attr('class', 'pie-legend-swatch')\r\n                .attr('width','2em')\r\n                .attr('height', legendHeight - 4) // 4px padding\r\n                .attr('fill-opacity', colorOpacity)\r\n                .attr('transform', function (d, i) {\r\n                    var offset = legendHeight * chartData.length / 2,\r\n                        x = 0,\r\n                        y = (i * legendHeight) - offset;\r\n                    return 'translate(' + x + ',' + y + ')';\r\n                })\r\n                .attr('fill', function (d, i) {\r\n                    return color(i);\r\n                });\r\n\r\n            var donutTotal = visElement.select('.pie-chart')\r\n                .append('g')\r\n                .attr('class', 'pie-total-container');\r\n\r\n            var minFontSize = 10,\r\n                valueFontSize = (fontSizeForTotal(radius / donutWidth) >= minFontSize) ? fontSizeForTotal(radius / donutWidth) : minFontSize,\r\n                labelRatio = 2.3,\r\n                valueOffsetRatio = 10,\r\n                labelOffsetRatio = 1.5,\r\n                innerDiscMargin = 10;\r\n\r\n            donutTotal.append('g')\r\n                .attr('class', 'pie-total-label-disc')\r\n                .append('circle')\r\n                .attr('cx', 0)\r\n                .attr('cy', 0)\r\n                .attr('r', (radius / donutWidth) - innerDiscMargin);\r\n\r\n            donutTotal.append('text')\r\n                .attr('transform', 'translate(0,' + (-(valueFontSize / labelOffsetRatio)) + ')')\r\n                .attr('class', 'pie-total-label')\r\n                .attr('text-anchor', 'middle')\r\n                .attr('font-size', valueFontSize / labelRatio)\r\n                .text(function () {\r\n                    // only show label if font is big enough\r\n                    return (valueFontSize / labelRatio >= 8) ? lang.total : '';\r\n                });\r\n\r\n            donutTotal.append('text')\r\n                .attr('class', 'total')\r\n                .attr('transform', 'translate(0,' + (valueFontSize / valueOffsetRatio) + ')')\r\n                .attr('text-anchor', 'middle')\r\n                .attr('alignment-baseline', 'middle')\r\n                .attr('font-size', valueFontSize) // pass in the inner disc radius to get the right font size\r\n                .text(contentView.formatCount(sum));\r\n\r\n            pieLegendContainer.append('text')\r\n                .attr('class', 'pie-legend-active-column')\r\n                .attr('transform', 'rotate(-90)')\r\n                .attr('text-anchor', 'middle')\r\n                .attr('alignment-baseline', 'middle')\r\n                .attr('y', 0)\r\n                .attr('x', 0)\r\n                .attr('dy', -20)\r\n                .text(this.model.get('active_column_formatted'));\r\n\r\n        }\r\n\r\n    });\r\n\r\n    return VisualDataDonutContentView;\r\n\r\n});\r\n\n","\n/* START_TEMPLATE */\ncsui.define('hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.tile',['module','hbs','csui/lib/handlebars'], function( module, hbs, Handlebars ){ \nvar t = Handlebars.template({\"1\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"        <div class=\\\"tile-type-icon\\\">\\r\\n            <span class=\\\"icon title-icon \"\n    + this.escapeExpression(((helper = (helper = helpers.icon || (depth0 != null ? depth0.icon : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"icon\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-hidden=\\\"true\\\"></span>\\r\\n        </div>\\r\\n\";\n},\"3\":function(depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.imageUrl : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(4, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n},\"4\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"            <div class=\\\"tile-type-image \"\n    + this.escapeExpression(((helper = (helper = helpers.imageClass || (depth0 != null ? depth0.imageClass : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imageClass\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n                <img src=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.imageUrl || (depth0 != null ? depth0.imageUrl : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"imageUrl\",\"hash\":{}}) : helper)))\n    + \"\\\" aria-hidden=\\\"true\\\">\\r\\n            </div>\\r\\n\";\n},\"6\":function(depth0,helpers,partials,data) {\n    var helper;\n\n  return \"<!-- Note: the options button must be available even when there is no header. In the case of no header, it will be positioned absolute -->\\r\\n<div class=\\\"csui-favorite csui-acc-tab-region visual-data-btn-settings\\\">\\r\\n    <span class=\\\"binf-glyphicon binf-glyphicon-cog\\\" role=\\\"button\\\" tabindex=\\\"0\\\" aria-label=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.settings || (depth0 != null ? depth0.settings : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"settings\",\"hash\":{}}) : helper)))\n    + \"\\\"></span>\\r\\n</div>\\r\\n\";\n},\"compiler\":[6,\">= 2.0.0-beta.1\"],\"main\":function(depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"<div class=\\\"tile-header\\\">\\r\\n\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.icon : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(1, data, 0),\"inverse\":this.program(3, data, 0)})) != null ? stack1 : \"\")\n    + \"\\r\\n    <div class=\\\"tile-title\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\">\\r\\n        <h2 class=\\\"csui-heading\\\">\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"</h2>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"tile-controls\\\" title=\\\"\"\n    + this.escapeExpression(((helper = (helper = helpers.title || (depth0 != null ? depth0.title : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0,{\"name\":\"title\",\"hash\":{}}) : helper)))\n    + \"\\\"></div>\\r\\n\\r\\n</div>\\r\\n\\r\\n<div class=\\\"tile-content\\\"></div>\\r\\n\\r\\n<div class=\\\"tile-footer\\\"></div>\\r\\n\\r\\n<div class=\\\"visual-data-overlay-clip\\\">\\r\\n    <div class=\\\"visual-data-overlay\\\">\\r\\n        <div class=\\\"visual-data-overlay-content binf-modal-dialog\\\">\\r\\n        <form class=\\\"csui-inlineform-group visual-data-settings-form\\\">\\r\\n            <div class=\\\"binf-modal-content\\\">\\r\\n                <div class=\\\"binf-modal-body\\\">\\r\\n                    <div class=\\\"visual-data-controls-parent\\\"></div>\\r\\n                </div>\\r\\n            </div>\\r\\n        </form>\\r\\n        </div>\\r\\n    </div>\\r\\n</div>\\r\\n\\r\\n\"\n    + ((stack1 = helpers['if'].call(depth0,(depth0 != null ? depth0.filterable : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":this.program(6, data, 0),\"inverse\":this.noop})) != null ? stack1 : \"\");\n}});\nHandlebars.registerPartial('webreports_widgets_visual.data.filtered.count_impl_controls_visualdata_impl_visual.data.tile', t);\nreturn t;\n});\n/* END_TEMPLATE */\n;\n","\ncsui.define('css!webreports/style/webreports',[],function(){});\n","// WebReports VisualData widget view. This renders a standard csui tile with HTML content returned from a WebReport.\r\ncsui.define('webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.view',[\r\n    'csui/lib/underscore', 'csui/lib/jquery', 'csui/lib/marionette','csui/lib/backbone', // 3rd party libraries\r\n    'csui/controls/tile/tile.view',\r\n    'csui/utils/contexts/factories/connector',\r\n    'csui/utils/url',\r\n    'csui/utils/base',\r\n    'csui/dialogs/modal.alert/modal.alert',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.expanding.behavior',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.content.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.overlay.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.expanded.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.bar.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.pie.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.donut.view',\r\n    'i18n!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/nls/visual.data.lang',\r\n    'hbs!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data.tile',\r\n    'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data',\r\n    'css!webreports/style/webreports.css'\r\n], function (_, $, Marionette, Backbone, TileView, ConnectorFactory, Url, base, ModalAlert, ExpandingBehavior, VisualDataContentView, VisualDataOverlay, VisualDataExpanded, VisualDataBarView, VisualDataPieView, VisualDataDonutView,  lang, template) {\r\n\r\n      var VisualDataView = TileView.extend({\r\n\r\n          contentView: VisualDataContentView,\r\n\r\n          ui: {\r\n              overlayClip: '.visual-data-overlay-clip',\r\n              toggleSettings: '.visual-data-btn-settings span',\r\n              overlay: '.visual-data-overlay'\r\n          },\r\n\r\n          constructor: function VisualDataView(options) {\r\n\r\n              if (options.data && options.data.contentView){\r\n                  this.contentView = options.data.contentView;\r\n              }\r\n\r\n              // Set the options for ContentView so the main content pane has the context when it renders.\r\n              // These options are checked and loaded in the _renderContentView function of TileView\r\n              // before show is called for the view.\r\n              this.contentViewOptions = options;\r\n\r\n              if (options.context){\r\n                  this.connector = options.context.getObject(ConnectorFactory, options);\r\n              }\r\n\r\n            // Call the parent constructor to ensure the object is built with all the inherited features.\r\n             TileView.prototype.constructor.apply(this, arguments);\r\n          },\r\n\r\n          behaviors: function () {\r\n              var behaviors = {},\r\n                  launchButtonConfig = this.options.data.launchButtonConfig ;\r\n\r\n              this.launchable = (this.options.data.expandable && launchButtonConfig && launchButtonConfig.launchButtons && (launchButtonConfig.launchButtons.length > 0));\r\n\r\n              if (this.options.data.expandable){\r\n                  behaviors.Expanding = {\r\n                      behaviorClass: ExpandingBehavior,\r\n                      titleBarIcon: function () {\r\n                          return this.options.data.titleBarIcon;\r\n                      },\r\n                      dialogTitle: function () {\r\n                          var title = base.getClosestLocalizedString(this.options.data.title, lang.dialogTitle);\r\n                          return title;\r\n                      },\r\n                      dialogTitleIconRight: \"icon-tileCollapse\",\r\n                      dialogClassName: 'webreports-visual-data',\r\n                      expandedView: function (){\r\n                          return VisualDataExpanded;\r\n                      },\r\n                      expandedViewOptions: function () {\r\n                          var expandedOptions = this.options,\r\n                              VisTypeView; // generic pointer to one of several different specific visualisation views\r\n\r\n                          switch (this.options.data.type) {\r\n                              case 'bar':\r\n                                  VisTypeView = VisualDataBarView;\r\n                                  break;\r\n                              case 'pie':\r\n                                  VisTypeView = VisualDataPieView;\r\n                                  break;\r\n                              case 'donut':\r\n                                  VisTypeView = VisualDataDonutView;\r\n                                  break;\r\n                              default:\r\n                                  return false;\r\n                          }\r\n                          if (this.launchable){\r\n                              this.rowLimit = launchButtonConfig.rowLimit;\r\n                              expandedOptions.data.buttons = _.map(launchButtonConfig.launchButtons, _.bind(function(button){\r\n                                  return {\r\n                                      \"label\": base.getClosestLocalizedString(button.launchButtonLabel, lang.launchReport),\r\n                                      \"toolTip\": base.getClosestLocalizedString(button.launchButtonTooltip, lang.launchReportTooltip),\r\n                                      \"click\" : _.bind(function(){\r\n                                          if (this.checkRowLimit(this.contentView.collection.getTotalCount(), this.rowLimit)){\r\n                                              this._launchReport(button.launchButtonID);\r\n                                          } else {\r\n                                              ModalAlert.showError(lang.tooManyRows + this.rowLimit);\r\n                                          }\r\n                                      }, this)\r\n                                  };\r\n                              },this));\r\n                          }\r\n                          expandedOptions.data.isExpanded = true;\r\n                          expandedOptions.data.expandedContentView = new VisTypeView(this.contentView.options);\r\n\r\n                          return expandedOptions;\r\n                      }\r\n                  };\r\n              }\r\n\r\n              return behaviors;\r\n          },\r\n\r\n          regions: function() {\r\n              var regions = _.extend({\r\n                  visualizationControls: '.visual-data-controls-parent'\r\n              }, TileView.prototype.regions);\r\n              return regions;\r\n          },\r\n\r\n          events: {\r\n              'click @ui.toggleSettings': 'toggleSettings',\r\n\t\t\t  'keyup @ui.toggleSettings': 'toggleSettings'\r\n          },\r\n\r\n          checkRowLimit: function(numRows, userDefinedLimit){\r\n              // Use the user-defined row limit to prevent users stressing the system.\r\n              // If this is undefined use the default of 5000 rows.\r\n              // If this is greater than the hard limit of 50000 then use the hard limit.\r\n              var rowLimit,\r\n                  defaultLimit = 5000,\r\n                  hardLimit = 50000;\r\n\r\n              if (!userDefinedLimit) {\r\n                  rowLimit = defaultLimit;\r\n              } else if (userDefinedLimit <= hardLimit){\r\n                  rowLimit = userDefinedLimit;\r\n              } else {\r\n                  rowLimit = hardLimit;\r\n              }\r\n\r\n              this.rowLimit = rowLimit;\r\n\r\n              return numRows <= rowLimit;\r\n          },\r\n\r\n          toggleSettings: function(event) {\r\n\t\t\t  \r\n\t\t\t  event.preventDefault();\r\n              if(event.type === \"click\" || (event.type === \"keyup\" && (event.keyCode===13 || event.keyCode === 32) )) {\r\n\t\t\t\t  if (this.overlayVisible) {\r\n\t\t\t\t\t  $('.visual-data-overlay', this.$el).removeClass('visible');\r\n\t\t\t\t\t  this.overlayVisible = false;\r\n\t\t\t\t  } else {\r\n\t\t\t\t\t  var overlayView = new VisualDataOverlay({\r\n\t\t\t\t\t\t  overlayModel: this.contentView.collection.overlayModel\r\n\t\t\t\t\t  });\r\n\r\n\t\t\t\t\t  this.getRegion('visualizationControls').show(overlayView);\r\n\t\t\t\t\t  $('.visual-data-overlay', this.$el).addClass('visible');\r\n\t\t\t\t\t  this.overlayVisible = true;\r\n\t\t\t\t  }\r\n\t\t\t  }\r\n          },\r\n\r\n          template: template,\r\n\r\n          templateHelpers: function () {\r\n\r\n              var helpers = {\r\n                  title: base.getClosestLocalizedString(this.options.data.title, lang.dialogTitle),\r\n                  icon: this.options.data.titleBarIcon || 'title-webreports',\r\n                  activeColumn: this.options.data.activeColumn || '',\r\n                  filterable: this.options.data.filterable,\r\n\t\t\t\t  settings: lang.settings\r\n              };\r\n\r\n              // Check if the header is disabled using `header: false` in the options.\r\n              if (this.options.data.header === true){\r\n                  _.extend(helpers,{header:this.options.data.header});\r\n              }\r\n\r\n              return helpers;\r\n\r\n          },\r\n\r\n          // Dynamically builds up a form to POST to a classic WebReport with the current configuration\r\n          _launchReport: function(webreportID){\r\n\r\n              var input,\r\n                  cgiUrl = new Url(this.connector.connection.url).getCgiScript(),\r\n                  wrClassicForm = $('<form></form>'),\r\n                  fcParms = this.contentView.collection.getFilteredCountParms(),\r\n                  runReportFields = {\r\n                      func: 'll',\r\n                      objAction: 'RunReport',\r\n                      objId: webreportID,\r\n                      nexturl: location.href\r\n                  },\r\n                  formFields = _.extend(runReportFields, fcParms);\r\n\r\n              formFields.total_count = this.contentView.collection.getTotalCount();\r\n\r\n              wrClassicForm.attr(\"method\", \"POST\")\r\n                      .attr(\"action\",cgiUrl)\r\n                      .attr(\"target\",\"_blank\")\r\n                      .attr(\"id\", \"launch-webreport-form\");\r\n\r\n              _.each(_.keys(formFields), function(parmName){\r\n                  input = $(\"<input>\")\r\n                      .attr(\"type\", \"hidden\")\r\n                      .attr(\"name\", parmName)\r\n                      .val(formFields[parmName]);\r\n                  wrClassicForm.append(input);\r\n              });\r\n\r\n              // Firefox and IE require that the form be added to the DOM before they will allow the form to be submitted.\r\n              $('.binf-modal-footer').append(wrClassicForm);\r\n              wrClassicForm.submit();\r\n              // Removing form from DOM after submission to avoid multiple forms being appended to the footer if the users clicks the button more than once.\r\n              $('#launch-webreport-form').remove();\r\n          }\r\n      });\r\n\r\n    return VisualDataView;\r\n\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.view',[\r\n    'csui/lib/underscore',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visual.data.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.donut.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.bar.view',\r\n    'webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/visualizations/visual.data.pie.view',\r\n    'css!webreports/widgets/visual.data.filtered.count/impl/controls/visualdata/impl/visual.data'\r\n], function (_, VisualDataView, DonutContentView, BarContentView, PieContentView) {\r\n\r\n      var VisualDataFilteredCountView = VisualDataView.extend({\r\n\r\n          constructor: function VisualDataFilteredCountView(options) {\r\n\r\n              options.data.titleBarIcon = ( _.has(options.data, 'titleBarIcon')) ? 'title-icon '+ options.data.titleBarIcon : 'title-icon title-webreports';\r\n\r\n              this.contentView = this._getContentView(options);\r\n              // Set the options for ContentView so the main content pain has the context when it renders.\r\n              // These options are checked and loaded in the _renderContentView function of TileView\r\n              // before show is called for the view.\r\n              this.contentViewOptions = options;\r\n\r\n              // Call the parent constructor to ensure the object is built with all the inherited features.\r\n              VisualDataView.prototype.constructor.apply(this, arguments);\r\n\r\n          },\r\n          _getContentView: function (options) {\r\n              var contentView = BarContentView;\r\n              var chartType;\r\n              if (options && options.data && options.data.type){\r\n                  chartType = options.data.type;\r\n                  switch(chartType) {\r\n                      case \"donut\":\r\n                          contentView = DonutContentView;\r\n                          break;\r\n                      case \"pie\":\r\n                          contentView = PieContentView;\r\n                          break;\r\n                      default:\r\n                          contentView = BarContentView;\r\n                  }\r\n              }\r\n\r\n              return contentView;\r\n          }\r\n\r\n      });\r\n\r\n    return VisualDataFilteredCountView;\r\n\r\n});\r\n\n","\ncsui.define('json!webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.manifest.json',{\r\n    \"$schema\": \"http://opentext.com/cs/json-schema/draft-04/schema#\",\r\n    \"title\": \"{{widgetTitle}}\",\r\n    \"description\": \"{{widgetDescription}}\",\r\n    \"kind\": \"header\",\r\n    \"supportedKinds\": [\"tile\", \"header\"],\r\n    \"schema\": {\r\n        \"type\": \"object\",\r\n        \"properties\": {\r\n            \"title\": {\r\n                \"title\": \"{{tileTitle}}\",\r\n                \"description\": \"{{tileDescription}}\",\r\n                \"type\": \"object\"\r\n            },\r\n            \"type\": {\r\n                \"title\": \"{{typeTitle}}\",\r\n                \"description\": \"{{typeDescription}}\",\r\n                \"type\": \"string\",\r\n                \"enum\": [\"bar\",\"donut\",\"pie\"],\r\n                \"default\": \"bar\"\r\n            },\r\n            \"id\": {\r\n                \"title\": \"{{sourceTitle}}\",\r\n                \"description\": \"{{sourceDescription}}\",\r\n                \"type\": \"integer\"\r\n            },\r\n            \"activeColumn\": {\r\n                \"title\": \"{{activeTitle}}\",\r\n                \"description\": \"{{activeDescription}}\",\r\n                \"type\": \"string\"\r\n            },\r\n            \"viewValueAsPercentage\": {\r\n                \"title\": \"{{percentTitle}}\",\r\n                \"description\": \"{{percentDescription}}\",\r\n                \"type\": \"boolean\",\r\n                \"enum\": [\r\n                    true,\r\n                    false\r\n                ],\r\n                \"default\": false\r\n            },\r\n            \"groupAfter\": {\r\n                \"title\": \"{{groupTitle}}\",\r\n                \"type\": \"integer\",\r\n                \"description\": \"{{groupDescription}}\",\r\n                \"enum\": [-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],\r\n                \"default\": -1\r\n            },\r\n            \"sortBy\": {\r\n                \"title\": \"{{sortTitle}}\",\r\n                \"description\": \"{{sortDescription}}\",\r\n                \"type\": \"string\",\r\n                \"enum\": [\"ordinal\",\"Count\"],\r\n                \"default\": \"Count\"\r\n            },\r\n            \"sortOrder\": {\r\n                \"title\": \"{{directionTitle}}\",\r\n                \"description\": \"{{directionDescription}}\",\r\n                \"type\": \"string\",\r\n                \"enum\": [\"desc\",\"asc\"],\r\n                \"default\": \"desc\"\r\n            },\r\n            \"filterable\": {\r\n                \"title\": \"{{optionsTitle}}\",\r\n                \"description\": \"{{optionsDescription}}\",\r\n                \"type\": \"boolean\",\r\n                \"enum\": [\r\n                    true,\r\n                    false\r\n                ],\r\n                \"default\": false\r\n            },\r\n            \"expandable\": {\r\n                \"title\": \"{{expandedTitle}}\",\r\n                \"description\": \"{{expandedDescription}}\",\r\n                \"type\": \"boolean\",\r\n                \"enum\": [\r\n                    true,\r\n                    false\r\n                ],\r\n                \"default\": false\r\n            },\r\n            \"launchButtonConfig\": {\r\n                \"type\": \"object\",\r\n                \"title\": \"{{buttonTitle}}\",\r\n                \"description\": \"{{buttonDescription}}\",\r\n                \"properties\": {\r\n                    \"rowLimit\": {\r\n                        \"title\": \"{{maxTitle}}\",\r\n                        \"description\": \"{{maxDescription}}\",\r\n                        \"type\": \"integer\"\r\n                    },\r\n                    \"launchButtons\": {\r\n                        \"type\": \"array\",\r\n                        \"title\": \"{{customButtonTitle}}\",\r\n                        \"description\": \"{{customButtonDescription}}\",\r\n                        \"items\": {\r\n                            \"type\": \"object\",\r\n                            \"title\": \"{{addButtonTitle}}\",\r\n                            \"description\": \"{{addButtonDescription}}\",\r\n                            \"properties\": {\r\n                                \"launchButtonID\": {\r\n                                    \"title\": \"{{reportButtonTitle}}\",\r\n                                    \"description\": \"{{reportButtonDescription}}\",\r\n                                    \"type\": \"integer\"\r\n                                },\r\n                                \"launchButtonLabel\": {\r\n                                    \"title\": \"{{labelButtonTitle}}\",\r\n                                    \"description\": \"{{labelButtonDescription}}\",\r\n                                    \"type\": \"object\"\r\n                                },\r\n                                \"launchButtonTooltip\": {\r\n                                    \"title\": \"{{buttonToolTitle}}\",\r\n                                    \"description\": \"{{buttonToolDescription}}\",\r\n                                    \"type\": \"object\"\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            \"parameters\": {\r\n                \"type\": \"array\",\r\n                \"title\": \"{{paramSourceTitle}}\",\r\n                \"description\": \"{{paramSourceDescription}}\",\r\n                \"items\": {\r\n                    \"type\": \"object\",\r\n                    \"title\": \"{{paramPairTitle}}\",\r\n                    \"description\": \"{{paramPairDescription}}\",\r\n                    \"properties\": {\r\n                        \"name\": {\r\n                            \"type\": \"string\",\r\n                            \"title\": \"{{paramNameTitle}}\",\r\n                            \"description\": \"{{paramNameDescription}}\"\r\n                        },\r\n                        \"value\": {\r\n                            \"type\": \"string\",\r\n                            \"title\": \"{{paramValueTitle}}\",\r\n                            \"description\": \"{{paramValueDescription}}\"\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n        \"required\": [\"activeColumn\",\"id\"]\r\n    },    \r\n    \"options\": {\r\n        \"fields\": {\r\n            \"id\": {\r\n                \"type\": \"otcs_node_picker\",\r\n                \"type_control\": {\r\n                    \"parameters\": {\r\n                        \"select_types\": [30303]\r\n                    }\r\n                }\r\n            },\r\n\t\t\t\"title\": {\r\n\t\t\t\t\"type\": \"otcs_multilingual_string\"\r\n\t\t\t},\r\n            \"launchButtonConfig\": {\r\n                \"fields\": {\r\n                    \"launchButtons\": {\r\n                        \"items\": {\r\n                            \"fields\": {\r\n                                \"launchButtonID\": {\r\n                                    \"type\": \"otcs_node_picker\",\r\n                                    \"type_control\": {\r\n                                        \"parameters\": {\r\n                                            \"select_types\": [30303]\r\n                                        }\r\n                                    }\r\n                                },\r\n\t\t\t\t\t\t\t\t\"launchButtonLabel\": {\r\n\t\t\t\t\t\t\t\t\t\"type\": \"otcs_multilingual_string\"\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\"launchButtonTooltip\": {\r\n\t\t\t\t\t\t\t\t\t\"type\": \"otcs_multilingual_string\"\r\n\t\t\t\t\t\t\t\t}\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            \"type\": {\r\n                \"type\": \"select\",\r\n                \"optionLabels\": [\"{{optionsTypeBar}}\", \"{{optionsTypeDonut}}\", \"{{optionsTypePie}}\"]\r\n            },\r\n            \"groupAfter\": {\r\n                \"type\": \"select\",\r\n                \"optionLabels\": [\"{{optionsGroupAfterDefault}}\",\"2\",\"3\",\"4\",\"{{optionsPieDonutDefault}}\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"{{optionsBarDefault}}\",\"16\",\"17\",\"18\",\"19\",\"20\"]\r\n            },\r\n            \"sortBy\": {\r\n                \"type\": \"select\",\r\n                \"optionLabels\": [\"{{optionsSortByActive}}\", \"{{optionsSortByCount}}\"]\r\n            },\r\n            \"sortOrder\": {\r\n                \"type\": \"select\",\r\n                \"optionLabels\": [\"{{optionsSortOrderDsc}}\", \"{{optionsSortOrderAsc}}\"]\r\n            }\r\n        }\r\n    }\r\n});\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/nls/visual.data.filtered.count.manifest',{\r\n\t// Always load the root bundle for the default locale (en-us)\r\n\t\"root\": true,\r\n\t// Do not load English locale bundle provided by the root bundle\r\n\t\"en-us\": false,\r\n\t\"en\": false\r\n});\r\n\n","csui.define('webreports/widgets/visual.data.filtered.count/impl/nls/root/visual.data.filtered.count.manifest',{\r\n    \"widgetTitle\": \"Visual Count\",\r\n    \"widgetDescription\": \"This widget visualizes the total count of values matching given criteria.\",\r\n    \"tileTitle\": \"Title\",\r\n    \"tileDescription\": \"Enter the title for the widget. This title appears in the Tile header.\",\r\n    \"typeTitle\": \"Chart Type\",\r\n    \"typeDescription\": \"Select the type of chart appropriate for your data.\",\r\n    \"sourceTitle\": \"Source WebReport\",\r\n    \"sourceDescription\": \"Browse to select the WebReport that retrieves the data that you want to visualize.\",\r\n    \"activeTitle\": \"Active Column\",\r\n    \"activeDescription\": \"Enter the name of the data source column that provides the matching values to be counted.\",\r\n    \"optionsTitle\": \"Chart Options\",\r\n    \"optionsDescription\": \"Choose whether end users have access to chart filtering options in the Tile view.\",\r\n    \"expandedTitle\": \"Expanded View\",\r\n    \"expandedDescription\": \"Choose whether end users have access to the Expanded view of the chart.\",\r\n    \"percentTitle\": \"Values as Percentage\",\r\n    \"percentDescription\": \"Choose whether to show the chart values as percentages of the total count or as the actual count.\",\r\n    \"groupTitle\": \"Group After\",\r\n    \"groupDescription\": \"Select the threshold for the number of discrete values whose total count will appear in the chart. Values above the threshold will be grouped as \\'Other\\' and the combined total will appear. The Chart Default is a threshold value appropriate to the chart type.\",\r\n    \"sortTitle\": \"Sort By\",\r\n    \"sortDescription\": \"Select whether to sort the chart by the value names in the Active Column or by the count of the values.\",\r\n    \"directionTitle\": \"Sort Direction\",\r\n    \"directionDescription\": \"Select whether to sort the chart in Ascending or Descending order.\",\r\n    \"buttonTitle\": \"Button WebReports\",\r\n    \"buttonDescription\": \"Configure the options for Button WebReports launched by Custom Buttons in the Expanded view\",\r\n    \"maxTitle\": \"Maximum Items to Process\",\r\n    \"maxDescription\": \"Enter the maximum number of data items to pass to the Button WebReport.\",\r\n    \"customButtonTitle\": \"Custom Buttons\",\r\n    \"customButtonDescription\": \"Set the properties for the Custom Button that appears in the Expanded View, then click the \\'Add To Array\\' button. Repeat as required to add multiple buttons.\",\r\n    \"addButtonTitle\": \"Add Custom Buttons\",\r\n    \"addButtonDescription\": \"Configure custom buttons that will appear in the Expanded view and which will launch Button Webreports.\",\r\n    \"reportButtonTitle\": \"Button WebReport\",\r\n    \"reportButtonDescription\": \"Browse to select the WebReport that will open when you click the button.\",\r\n    \"labelButtonTitle\": \"Button Label\",\r\n    \"labelButtonDescription\": \"Enter a custom label for the button.\",\r\n    \"buttonToolTitle\": \"Button Tooltip\",\r\n    \"buttonToolDescription\": \"Enter a tool tip for the button.\",\r\n    \"paramSourceTitle\": \"Source Parameters\",\r\n    \"paramSourceDescription\": \"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required.\",\r\n    \"paramPairTitle\": \"Source Parameters\",\r\n    \"paramPairDescription\": \"Specify one or more Key/Value pairs of parameters to pass into the Source WebReport, as required.\",\r\n    \"paramNameTitle\": \"Parameter Name\",\r\n    \"paramNameDescription\": \"The name of the URL parameter.\",\r\n    \"paramValueTitle\": \"Parameter Value\",\r\n    \"paramValueDescription\": \"The value of the URL parameter.\",\r\n    \"optionsTypeBar\": \"Bar\",\r\n \t\"optionsTypeDonut\": \"Donut\",\r\n\t\"optionsTypePie\": \"Pie\",\r\n\t\"optionsGroupAfterDefault\": \"Use Chart Default\",\r\n\t\"optionsPieDonutDefault\": \"5 - Pie and Donut default\",\r\n\t\"optionsBarDefault\": \"15 - Bar default\",\r\n\t\"optionsSortByActive\": \"Active Column\",\r\n\t\"optionsSortByCount\": \"Count\",\r\n\t\"optionsSortOrderDsc\": \"Descending\",\r\n\t\"optionsSortOrderAsc\": \"Ascending\"\r\n});\n","// Placeholder for the build target file; the name must be the same,\r\n// include public modules from this component\r\n\r\ncsui.define('bundles/webreports-visdata',[\r\n\r\n    // Widgets:\r\n    \"webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.view\",\r\n    \"json!webreports/widgets/visual.data.filtered.count/visual.data.filtered.count.manifest.json\",\r\n\t'i18n!webreports/widgets/visual.data.filtered.count/impl/nls/visual.data.filtered.count.manifest'\r\n\r\n], {});\r\n\r\ncsui.require(['require', 'css'], function (require, css) {\r\n\r\n    css.styleLoad(require, 'webreports/bundles/webreports-visdata');\r\n\r\n});\r\n\n"]}