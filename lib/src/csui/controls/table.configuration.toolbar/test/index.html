<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>ConfigurationTestCommand Demo</title>

  
  <link rel="stylesheet" href="../../../themes/carbonfiber/theme.css">
  <style>
    body.binf-widgets {
      /* Make some space at the top; there is no top navigation bar on this page */
      padding-top: 1em;
    }
    /* Workaround for wrong breadcrumb styling */
    #breadcrumbs {
      margin-top: 10px;
    }
    #breadcrumb-wrap {
      top: -20px !important;
    }
  </style>

  
  <script src="../../../lib/require.js"></script>
  <script src="../../../helpers.js"></script>
  <script src="../../../config.js" data-csui-path="../../.."></script>
  
  <script>
    // If there were a module 'samples' installed on the server,
    // this would be generated on the application page
    require.config({
      paths: {
        configurations: './'
      },
      config: {
        'i18n': {
          loadableLocales: {root: true}
        }
      },
      deps: [
        'csui/lib/require.config!csui/csui-extensions.json',
        'csui/lib/require.config!./extension.json'
      ]
    });

    // If this were a page browsing a container,
    // this would be generated by the server
    require.config({
      config: {
        'csui/utils/contexts/factories/connector': {
          connection: {
            url: 'http://murdock.opentext.com/alpha/llisapi.dll/api/v1',
            supportPath: '/alphasupport'
          }
        },
        // Start in the Enterprise Volume
        'csui/utils/contexts/factories/node': {
          attributes: {id: 2000}
        }
      }
    });
  </script>

  <script>
    require([
      // NodesTableView widget - shows a table browsing a container
      'csui/controls/breadcrumbspanel/breadcrumbspanel.view',
      'csui/widgets/nodestable/nodestable.view',
      'csui/controls/globalmessage/globalmessage',
      // PageContext - manages the data for the widgets on a simple HTML page
      'csui/utils/contexts/page/page.context',
      'csui/utils/contexts/factories/next.node',
      'csui/utils/contexts/factories/node',
      // Marionette - places a widget on the HTML page
      'csui/lib/marionette'
    ], function (BreadcrumbsPanelView, NodesTableView, GlobalMessage,
        PageContext, NextNodeModelFactory, NodeModelFactory, Marionette) {
      'use strict';

      // Create the manager for data to be loaded from the server
      var context = new PageContext(),
          nextNode = context.getModel(NextNodeModelFactory),
          node = context.getModel(NodeModelFactory),

          // Create the breadcrumbs view including its DOM placeholder
          breadcrumbsRegion = new Marionette.Region({
            el: '#breadcrumbs'
          }),
          contentRegion = new Marionette.Region({
            el: '#content'
          }),

          // Create the children browsing table including its DOM placeholder
          breadcrumbsPanel = new BreadcrumbsPanelView({
            context: context
          }),
          nodesTableView = new NodesTableView({
            context: context
          });

      // Assign place for status messages
      GlobalMessage.setMessageRegionView(nodesTableView);
      // Show the breadcrumbs and the children table
      breadcrumbsRegion.show(breadcrumbsPanel);
      contentRegion.show(nodesTableView);
      // If the contextual container is changing, drill down
      nextNode.on('change:id', function () {
        node.set('id', nextNode.get('id'), {silent: true});
        context.fetch();
      });
      // Fetch the initial data from the server; the view will be
      // refreshed when the data are loaded
      context.fetch();

    });
  </script>
</head>

<body class="binf-widgets">

<div class="binf-container-fluid">
  <div class="binf-row">
    <div id="breadcrumbs" class="binf-col-md-12"></div>
  </div>
</div>
<div class="binf-container-fluid grid-rows">
  <div class="binf-row">
    <div id="content" class="binf-col-md-12 row-xs-full"></div>
  </div>
</div>
</body>

</html>

<!-- Copyright (c) 2016-2017  OpenText Corp. All Rights Reserved. -->