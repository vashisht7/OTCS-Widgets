<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>TargetPicker</title>

  <link rel="stylesheet" href="../../../themes/carbonfiber/theme.css">

  <script src="../../../lib/require.js"></script>
  <script src="../../../config.js" data-csui-path="../../.."></script>
  <script src="../../../helpers.js"></script>
  <script src="../../../test/sdk-demo-config-parameters.js"></script>
  <script>
    // Help the test page waiting on all "deps" config sections.
    var csuiCallbacks = [],
        csuiBlocks    = 0;

    window.blockCsui = function () {
      ++csuiBlocks;
    };

    window.unBlockCsui = function () {
      if (--csuiBlocks === 0) {
        while (csuiCallbacks.length) {
          csuiCallbacks.shift()();
          if (csuiBlocks > 0) {
            break;
          }
        }
      }
    };

    window.csuiDemo = function (callback) {
      if (csuiBlocks === 0) {
        callback();
      } else {
        csuiCallbacks.push(callback);
      }
    };

    window.blockCsui();
    require.config({
      deps: [
        'csui/lib/require.config!csui/csui-extensions.json'
      ],
      callback: window.unBlockCsui
    });

    // Default server connection is generated by the server
    window.csuiDemo(function () {
      require.config({
      config: {
        'csui/utils/contexts/factories/connector': {
          connection: csui.connection
        }
      }
    });

    // Ensure the widget module initialization
    csui.onReady2(['csui/integration/target.picker/target.picker'
    ], function (TargetPicker ) {

        // Specify server TargetPicker options
        var targetPicker = new TargetPicker({
            start: {id: csui.testContainerId},
            selectRows: "multiple",
            selectable: {type: [144, 557]}, // example: only allow document types
            ui: {TargetPickerDialogTitle: 'PicADoc'},
            done: function (args) {
                if (args.nodes.length) {
                    var names = args.nodes.map(function (node) {
                        return node.name;
                    });
                    alert("Selected: " + names.join(','));
                }
            }
        });

      // Open the node picker
        targetPicker.show();

        targetPicker.on("all", function (args) {
            alert("Event: " + args);
        });

    });
  });
  </script>

</head>

<body class="binf-widgets"></body>

</html>

<!-- Copyright (c) 2016-2017  OpenText Corp. All Rights Reserved. -->